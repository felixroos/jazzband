{"version":3,"sources":["../node_modules/ireal-reader/unscramble.js","../node_modules/ireal-reader/Music.js","../node_modules/ireal-reader/Song.js","../node_modules/ireal-reader/Playlist.js","../node_modules/ireal-reader/index.js","../node_modules/tonal-note/build/es6.js","../node_modules/tonal-array/build/es6.js","../node_modules/tonal-interval/build/es6.js","../node_modules/tonal-distance/build/es6.js","../node_modules/tonal-pcset/build/es6.js","../node_modules/tonal-dictionary/build/es6.js","../node_modules/tonal-scale/build/es6.js","../node_modules/tonal-chord/build/es6.js","../node_modules/tonal/index.js","../src/harmony/Harmony.ts","../src/instruments/Instrument.ts","../src/instruments/Synthesizer.ts","../src/symbols.ts","../src/util/util.ts","../src/grooves/swing.ts","../src/sheet/Sheet.ts","../src/sheet/Measure.ts","../src/sheet/RealParser.ts","../node_modules/diff/dist/diff.js","../src/sheet/Snippet.ts","../src/util/Permutation.ts","../src/harmony/Voicing.ts","../src/util/Logger.ts","../node_modules/tone/build/Tone.js","../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/node_modules/process/browser.js","../node_modules/waaclock/lib/WAAClock.js","../node_modules/waaclock/index.js","../src/Pulse.ts","../src/Metronome.ts","../src/Band.ts","../src/musicians/Musician.ts","../src/musicians/Pianist.ts","../src/musicians/Drummer.ts","../src/musicians/Bassist.ts","../src/instruments/Sampler.ts","../src/instruments/Kick.ts","../src/instruments/Snare.ts","../src/instruments/PlasticDrums.ts","../src/improvisation/Improvisation.ts","../src/improvisation/methods.ts","../src/musicians/Improvisor.ts","../src/Trio.ts","../src/instruments/MidiOut.ts","../src/musicians/Permutator.ts","../src/index.ts","../samples/piano/index.js","../samples/drumset.js","../src/sheet/SheetPlayer.ts","demo.js"],"names":["NAMES","split","names","accTypes","slice","filter","n","acc","indexOf","SHARPS","FLATS","REGEX","tokenize","str","m","exec","toUpperCase","replace","NO_NOTE","Object","freeze","pc","name","step","alt","oct","octStr","chroma","midi","freq","SEMI","properties","tokens","letter","p","charCodeAt","length","midiToFreq","memo","fn","cache","props","isMidiRange","note","value","tuning","Math","pow","L2","log","L440","freqToMidi","v","round","LETTERS","stepToLetter","fillStr","s","Array","join","numToStr","num","op","altToAcc","from","fromProps","baseNote","_a","assign","build","fromMidi","sharps","pcs","o","floor","simplify","sameAcc","alteration","useSharps","enharmonic","range","rotate","sort","unique","ascR","b","a","descR","times","arr","len","concat","compact","height","src","map","i","shuffle","rnd","random","t","permutations","reduce","perm","e","pos","newPerm","splice","IVL_TNL","IVL_STR","RegExp","SIZES","TYPES","CLASSES","types","NO_IVL","q","dir","type","simple","semitones","abs","qToAlt","test","altToQ","numToStep","ic","ivl","_b","_c","undefined","d","intervalProps","invert","IN","IQ","fromSemitones","c","transpose","trFifths","fifths","transposeBy","addIntervals","add","subtract","interval","FIFTHS","fOcts","f","FIFTH_OCTS","encode","ref","STEPS","unaltered","decode","encoder","encodeNote","noteProps","encodeIvl","iprops","arguments","tr","to","isDescending","decodeIvl","ivl1","ivl2","i1","i2","chromas","modes","isChroma","intervals","isEqual","isSubsetOf","isSupersetOf","includes","chr","pcsetNum","set","parseInt","clen","isArray","forEach","all","toString","normalize","binary","_","r","IVLS","s1","s2","notes","dictionary","raw","keys","data","index","ivls","push","key","alias","allKeys","dict","combine","scale","sdata","chord","cdata","pcset","exists","NO_SCALE","setnum","memoize","nameOrTonic","tonic","substring","modeNames","tonics","x","chords","inScale","toScale","supersets","isSuperset","subsets","isSubset","NO_CHORD","NUM_TYPES","Note","Interval","Distance","Dictionary","Scale","Chord","PcSet","webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","id","loaded","call","__esModule","canonicalize","convertChangesToXML","convertChangesToDMP","merge","parsePatch","applyPatches","applyPatch","createPatch","createTwoFilesPatch","structuredPatch","diffArrays","diffJson","diffCss","diffSentences","diffTrimmedLines","diffLines","diffWordsWithSpace","diffWords","diffChars","Diff","_base","_base2","_interopRequireDefault","_character","_word","_line","_sentence","_css","_json","_array","_apply","_parse","_merge","_create","_dmp","_xml","obj","prototype","diff","oldString","newString","options","callback","self","done","setTimeout","castInput","removeEmpty","newLen","oldLen","editLength","maxEditLength","bestPath","newPos","components","oldPos","extractCommon","count","execEditLength","diagonalPath","basePath","addPath","removePath","_oldPos","canAdd","canRemove","clonePath","pushComponent","buildValues","useLongestToken","ret","added","removed","last","commonCount","equals","left","right","comparator","ignoreCase","toLowerCase","array","chars","componentPos","componentLen","component","oldValue","tmp","lastComponent","pop","path","characterDiff","oldStr","newStr","wordDiff","_params","extendedWordChars","reWhitespace","ignoreWhitespace","generateOptions","defaults","hasOwnProperty","lineDiff","retLines","linesAndNewlines","line","newlineIsToken","trim","sentenceDiff","cssDiff","jsonDiff","_typeof","Symbol","iterator","constructor","objectPrototypeToString","_options","undefinedReplacement","_options$stringifyRep","stringifyReplacer","k","JSON","stringify","oldObj","newObj","stack","replacementStack","replacer","canonicalizedObj","toJSON","sortedKeys","_key","arrayDiff","oldArr","newArr","_distanceIterator","_distanceIterator2","source","uniDiff","Error","lines","delimiters","match","hunks","compareLine","lineNumber","operation","patchContent","errorCount","fuzzFactor","minLine","offset","removeEOFNL","addEOFNL","hunkFits","hunk","toPos","j","content","substr","maxLine","oldLines","localOffset","oldStart","diffOffset","_i","_hunk","_toPos","newLines","delimiter","linedelimiters","previousOperation","_k","currentIndex","processIndex","complete","loadFile","err","updatedContent","patched","diffstr","list","parseIndex","header","parseFileHeader","parseHunk","strict","fileHeader","keyPrefix","fileName","chunkHeaderIndex","chunkHeaderLine","chunkHeader","newStart","addCount","removeCount","start","wantForward","backwardExhausted","forwardExhausted","calcLineCount","_toConsumableArray","arr2","_calcOldNewLineCount","calcOldNewLineCount","mine","theirs","base","loadPatch","newFileName","fileNameChanged","oldFileName","oldHeader","newHeader","selectField","mineIndex","theirsIndex","mineOffset","theirsOffset","mineCurrent","Infinity","theirsCurrent","hunkBefore","cloneHunk","mergedHunk","min","mergeLines","param","patch","conflict","check","mineLines","theirOffset","theirLines","their","insertLeading","theirCurrent","mutualChange","_hunk$lines","apply","collectChange","_hunk$lines2","removal","insertTrailing","myChanges","theirChanges","allRemoves","arrayStartsWith","skipRemoveSuperset","_hunk$lines3","_hunk$lines4","arrayEqual","_hunk$lines5","swap","collectContext","merged","_hunk$lines6","insert","state","matchChanges","changes","matchIndex","contextChanges","conflicted","change","prev","removeChanges","delta","changeContent","myCount","theirCount","context","contextLines","entry","oldRangeStart","newRangeStart","curRange","oldLine","newLine","_loop","current","_curRange","_curRange2","_curRange3","contextSize","oldEOFNewline","newEOFNewline","escapeHTML","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","args","Item","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","piano","C1","Db1","D1","Eb1","E1","F1","Gb1","G1","Ab1","A1","Bb1","B1","C2","Db2","D2","Eb2","E2","F2","Gb2","G2","Ab2","A2","Bb2","B2","C3","Db3","D3","Eb3","E3","F3","Gb3","G3","Ab3","A3","Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","G4","Ab4","A4","Bb4","B4","C5","Db5","D5","Eb5","E5","F5","Gb5","G5","Ab5","A5","Bb5","B5","C6","Db6","D6","Eb6","E6","F6","Gb6","G6","Ab6","A6","Bb6","B6","C7","Db7","D7","Eb7","E7","F7","Gb7","G7","Ab7","A7","Bb7","B7","kick","snare","hihat","h","ride","crash","rimshot","rs","drumset","drumSamples","util","playlist","iRealReader","decodeURI","link","getStandard","standard","randomElement","songs","music","measures","RealParser","parseSheet","maxVoices","maxDistance","minDistance","minBottomDistance","minTopDistance","real","swing","pedal","noTopDrop","noTopAdd","noBottomDrop","noBottomAdd","filterChoices","choice","sortChoices","difference","window","onload","stop","document","getElementById","steps","alice","next","addEventListener","play","groove","SheetPlayer","composer","forms","time","giantSteps","bluesForAlice","melody","Snippet","parse2","knife"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACJA,IAAA,aAAA,gBAAA,QAAA,UAAA,CAAA,CAAA;AAEA,IAAA,QA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","file":"demo.800bcbc2.map","sourceRoot":"..","sourcesContent":["'use strict';\n\n//unscrambling hints from https://github.com/ironss/accompaniser/blob/master/irealb_parser.lua\n//strings are broken up in 50 character segments. each segment undergoes character substitution addressed by obfusc50()\nexports.ireal = function(s){\n  let r = '', p;\n\n  while(s.length > 50){\n    p = s.substring(0, 50);\n    s = s.substring(50)\n    if(s.length < 2){\n      r = r + p;\n    }else{\n      r = r + obfusc50(p);\n    }\n  }\n  r = r + s;\n  return r;\n}\n\nfunction obfusc50 (s){\n  //the first 5 characters are switched with the last 5\n  let newString = s.split('');\n  for(let i = 0; i < 5; i++){\n    newString[49 - i] = s[i];\n    newString[i] = s[49 - i];\n  }\n  //characters 10-24 are also switched\n  for(let i = 10; i < 24; i++){\n    newString[49 - i] = s[i];\n    newString[i] = s[49 - i];\n  }\n  return newString.join('');\n}\n","'use strict';\n\n//regex:\n//  letters A-G and W (W is an invisible slash chord)\n//  {1} only one of the aforementioned letters\n//  followed by zero or more of these: + - ^ h o # b digit\n//  followed by an optional group (to catch slash chords)\n//    that starts with a slash\n//    followed by A-G\n//    followed by optional # or b\n\nconst chordRegex = /[A-GW]{1}[\\+\\-\\^\\dhob#suad]*(\\/[A-G][#b]?)?/g;\nconst musicPrefix = \"1r34LbKcu7\";\nconst unscramble = require('./unscramble');\n\nclass Music {\n  constructor(data){\n    const parts = data.split(musicPrefix);\n    this.raw = unscramble.ireal(parts[1]);\n    //TODO: read the time signature\n    this.timeSignature = 'T44';\n    const musicData = removeNonMusicalInfo(this.raw);\n    this.measures = getMeasures(musicData)\n  }\n}\nmodule.exports = Music;\n\nfunction getMeasures(data){\n  let measures = data.split(/\\||LZ|K|Z|\\{|\\}|\\[|\\]/g)//measures are delimited by |, LZ, {, } (repeat markers), [, ] (double barlines). Also splitting on K because Kcl seems to indicate a repeat of the previous measure. Z is the end of a song usually.\n\n  measures = fillSingleRepeats(measures);\n  measures = fillDoubleRepeats(measures);\n\n  measures = measures.map((x, index, array) => x.match(chordRegex))\n    .filter(x => !!x)  //filter out blank measures. if empty measures like N.C. are needed this has to be modified\n\n  measures = fillInvisibleSlashChords(measures);\n\n  return measures;\n}\n\nfunction removeNonMusicalInfo(data){\n  //remove all the non-musical information\n  data = removeFromString(data, /<.*?>/); //comments delimited by carets < ... >, non-greedy match. do this first as these may contain other symbols that we look for later on.\n  data = removeFromString(data, /\\*\\s*\\*/); //stars with empty space in between *  *\n  data = removeFromString(data, /\\*\\w/); //section markers *A, *B, *C\n  data = removeFromString(data, /T\\d+/); //time signatures T44, T34\n  data = removeFromString(data, /N\\d/); //repeat markers N1, N2, ...\n  data = removeFromString(data, /Y+/); //vertical spacers\n  data = removeFromString(data, 'XyQ'); //empty space\n  data = removeFromString(data, /[npUSQ]/); //n: N.C, p: pause slash, U: END, S: Segno, Q: Coda, \n  //s: small (consider using s when implementing chord duration)\n  return data;\n}\n\nfunction fillDoubleRepeats(measures){\n  const r = m => m.indexOf('r') >= 0;\n\n  //an 'r' becomes the two previous measures (drawn as a double angled bar)\n  let repeatMeasureIdx = measures.findIndex(r);\n  while(repeatMeasureIdx != -1){\n    measures.splice(repeatMeasureIdx, 1, measures[repeatMeasureIdx - 2], measures[repeatMeasureIdx - 1]);\n    repeatMeasureIdx = measures.findIndex(r);\n  }\n  return measures;\n}\n\nfunction fillSingleRepeats(measures){\n  //the repeat marker is Kcl but we've already split on K, so only cl is left over\n  //x appears in its own measure, (drawn as a single angled bar)\n  const xcl = m => m.indexOf('x') >= 0 || m.indexOf('cl') >= 0;\n\n  let repeatMeasureIdx = measures.findIndex(xcl);\n  while(repeatMeasureIdx != -1){\n    measures[repeatMeasureIdx] = measures[repeatMeasureIdx - 1];\n    repeatMeasureIdx = measures.findIndex(xcl);\n  }\n  return measures;\n}\n\nfunction fillInvisibleSlashChords(measures){\n  const W = m => m.some(c => c[0] === 'W');\n\n  let invisibleMeasureIdx = measures.findIndex(W);\n  while(invisibleMeasureIdx != -1){\n    const curMeasure = measures[invisibleMeasureIdx];\n    const invisibleChordIdx = curMeasure.findIndex(c => c[0] === 'W')\n\n    if(invisibleChordIdx > 0){\n      const previousChord = curMeasure[invisibleChordIdx - 1].split(\"/\")[0];\n      curMeasure[invisibleChordIdx] = curMeasure[invisibleChordIdx].replace('W', previousChord);\n    }else{\n      const previousMeasure = measures[invisibleMeasureIdx - 1];\n      const previousChord = previousMeasure[previousMeasure.length - 1].split(\"/\")[0];\n      curMeasure[invisibleChordIdx] = curMeasure[invisibleChordIdx].replace('W', previousChord);\n    }\n    invisibleMeasureIdx = measures.findIndex(W);\n  }\n  return measures;\n}\n\nfunction removeFromString(string, toRemove){\n  return string.split(toRemove).join('');\n}\n\n","'use strict';\n\nconst Music = require('./Music');\nconst musicPrefix = \"1r34LbKcu7\";\n\nclass Song {\n  constructor(data){\n    const parts = data.split(/=+/).filter(x => x != \"\"); //split on one or more equal signs, remove the blanks\n    let offset = 0\n    this.title = parts[0];\n    this.composer = parts[1];\n    this.style = parts[2];\n    this.key = parts[3];\n    this.transpose = null;\n    if(parts[4].indexOf(musicPrefix) !== 0){\n      offset = 1;\n      this.transpose = parseInt(parts[4]) || null;\n    }\n    this.music = new Music(parts[4 + offset]);\n    this.compStyle = parts[5 + offset] || null;\n    this.bpm = parseInt(parts[6 + offset]) || null;\n    this.repeats = parseInt(parts[7 + offset]) || null;\n  }\n}\n\nmodule.exports = Song;","'use strict';\n\nconst Song = require('./Song');\nconst regex = /.*?irealb:\\/\\/([^\"]*)/;\n\nclass Playlist {\n  constructor(data){\n    const percentEncoded = regex.exec(data);\n    const percentDecoded = decodeURIComponent(percentEncoded[1]);\n    const parts = percentDecoded.split(\"===\");  //songs are separated by ===\n    if(parts.length > 1) this.name = parts.pop();  //playlist name\n    this.songs = parts.map(x => new Song(x));\n  }\n}\n\nmodule.exports = Playlist;","'use strict';\n\nconst Playlist = require('./Playlist');\n\n//class hierarchy: Playlist has many Songs. Song has one Music.\n\nmodule.exports = Playlist;","var NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\r\nvar names = function (accTypes) {\r\n    return typeof accTypes !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) {\r\n            var acc = n[1] || \" \";\r\n            return accTypes.indexOf(acc) !== -1;\r\n        });\r\n};\r\nvar SHARPS = names(\" #\");\r\nvar FLATS = names(\" b\");\r\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\nfunction tokenize(str) {\r\n    if (typeof str !== \"string\")\r\n        str = \"\";\r\n    var m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\nvar NO_NOTE = Object.freeze({\r\n    pc: null,\r\n    name: null,\r\n    step: null,\r\n    alt: null,\r\n    oct: null,\r\n    octStr: null,\r\n    chroma: null,\r\n    midi: null,\r\n    freq: null\r\n});\r\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nvar properties = function (str) {\r\n    var tokens = tokenize(str);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\")\r\n        return NO_NOTE;\r\n    var letter = tokens[0], acc = tokens[1], octStr = tokens[2];\r\n    var p = {\r\n        letter: letter,\r\n        acc: acc,\r\n        octStr: octStr,\r\n        pc: letter + acc,\r\n        name: letter + acc + octStr,\r\n        step: (letter.charCodeAt(0) + 3) % 7,\r\n        alt: acc[0] === \"b\" ? -acc.length : acc.length,\r\n        oct: octStr.length ? +octStr : null,\r\n        chroma: 0,\r\n        midi: null,\r\n        freq: null\r\n    };\r\n    p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\r\n    p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\r\n    p.freq = midiToFreq(p.midi);\r\n    return Object.freeze(p);\r\n};\r\nvar memo = function (fn, cache) {\r\n    if (cache === void 0) { cache = {}; }\r\n    return function (str) { return cache[str] || (cache[str] = fn(str)); };\r\n};\r\nvar props = memo(properties);\r\nvar name = function (str) { return props(str).name; };\r\nvar pc = function (str) { return props(str).pc; };\r\nvar isMidiRange = function (m) { return m >= 0 && m <= 127; };\r\nvar midi = function (note) {\r\n    if (typeof note !== \"number\" && typeof note !== \"string\") {\r\n        return null;\r\n    }\r\n    var midi = props(note).midi;\r\n    var value = midi || midi === 0 ? midi : +note;\r\n    return isMidiRange(value) ? value : null;\r\n};\r\nvar midiToFreq = function (midi, tuning) {\r\n    if (tuning === void 0) { tuning = 440; }\r\n    return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\r\n};\r\nvar freq = function (note) { return props(note).freq || midiToFreq(note); };\r\nvar L2 = Math.log(2);\r\nvar L440 = Math.log(440);\r\nvar freqToMidi = function (freq) {\r\n    var v = (12 * (Math.log(freq) - L440)) / L2 + 69;\r\n    return Math.round(v * 100) / 100;\r\n};\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar oct = function (str) { return props(str).oct; };\r\nvar LETTERS = \"CDEFGAB\";\r\nvar stepToLetter = function (step) { return LETTERS[step]; };\r\nvar fillStr = function (s, n) { return Array(n + 1).join(s); };\r\nvar numToStr = function (num, op) {\r\n    return typeof num !== \"number\" ? \"\" : op(num);\r\n};\r\nvar altToAcc = function (alt) {\r\n    return numToStr(alt, function (alt) { return (alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt)); });\r\n};\r\nvar from = function (fromProps, baseNote) {\r\n    if (fromProps === void 0) { fromProps = {}; }\r\n    if (baseNote === void 0) { baseNote = null; }\r\n    var _a = baseNote\r\n        ? Object.assign({}, props(baseNote), fromProps)\r\n        : fromProps, step = _a.step, alt = _a.alt, oct = _a.oct;\r\n    if (typeof step !== \"number\")\r\n        return null;\r\n    var letter = stepToLetter(step);\r\n    if (!letter)\r\n        return null;\r\n    var pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n};\r\nvar build = from;\r\nfunction fromMidi(num, sharps) {\r\n    if (sharps === void 0) { sharps = false; }\r\n    num = Math.round(num);\r\n    var pcs = sharps === true ? SHARPS : FLATS;\r\n    var pc = pcs[num % 12];\r\n    var o = Math.floor(num / 12) - 1;\r\n    return pc + o;\r\n}\r\nvar simplify = function (note, sameAcc) {\r\n    if (sameAcc === void 0) { sameAcc = true; }\r\n    var _a = props(note), alt = _a.alt, chroma = _a.chroma, midi = _a.midi;\r\n    if (chroma === null)\r\n        return null;\r\n    var alteration = alt;\r\n    var useSharps = sameAcc === false ? alteration < 0 : alteration > 0;\r\n    return midi === null\r\n        ? pc(fromMidi(chroma, useSharps))\r\n        : fromMidi(midi, useSharps);\r\n};\r\nvar enharmonic = function (note) { return simplify(note, false); };\n\nexport { names, tokenize, props, name, pc, midi, midiToFreq, freq, freqToMidi, chroma, oct, stepToLetter, altToAcc, from, build, fromMidi, simplify, enharmonic };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array\")\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nimport { props, name } from \"tonal-note\";\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ ; }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ ; }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b\n      ? ascR(a, b - a + 1)\n      : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate(times, arr) {\n  var len = arr.length;\n  var n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport var compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (name) {\n  var m = props(name).midi;\n  return m !== null ? m : props(name + \"-100\").midi;\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nexport function sort(src) {\n  return compact(src.map(name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nexport function unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nexport var shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nexport var permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n","var IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\r\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nvar TYPES = \"PMMPPMM\";\r\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\r\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\r\nvar names = function (types) {\r\n    return typeof types !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) { return types.indexOf(n[1]) !== -1; });\r\n};\r\nvar tokenize = function (str) {\r\n    var m = REGEX.exec(\"\" + str);\r\n    if (m === null)\r\n        return null;\r\n    return (m[1] ? [m[1], m[2]] : [m[4], m[3]]);\r\n};\r\nvar NO_IVL = Object.freeze({\r\n    name: null,\r\n    num: null,\r\n    q: null,\r\n    step: null,\r\n    alt: null,\r\n    dir: null,\r\n    type: null,\r\n    simple: null,\r\n    semitones: null,\r\n    chroma: null,\r\n    oct: null\r\n});\r\nvar fillStr = function (s, n) { return Array(Math.abs(n) + 1).join(s); };\r\nvar qToAlt = function (type, q) {\r\n    if (q === \"M\" && type === \"M\")\r\n        return 0;\r\n    if (q === \"P\" && type === \"P\")\r\n        return 0;\r\n    if (q === \"m\" && type === \"M\")\r\n        return -1;\r\n    if (/^A+$/.test(q))\r\n        return q.length;\r\n    if (/^d+$/.test(q))\r\n        return type === \"P\" ? -q.length : -q.length - 1;\r\n    return null;\r\n};\r\nvar altToQ = function (type, alt) {\r\n    if (alt === 0)\r\n        return type === \"M\" ? \"M\" : \"P\";\r\n    else if (alt === -1 && type === \"M\")\r\n        return \"m\";\r\n    else if (alt > 0)\r\n        return fillStr(\"A\", alt);\r\n    else if (alt < 0)\r\n        return fillStr(\"d\", type === \"P\" ? alt : alt + 1);\r\n    else\r\n        return null;\r\n};\r\nvar numToStep = function (num) { return (Math.abs(num) - 1) % 7; };\r\nvar properties = function (str) {\r\n    var t = tokenize(str);\r\n    if (t === null)\r\n        return NO_IVL;\r\n    var p = {\r\n        num: 0,\r\n        q: \"d\",\r\n        name: \"\",\r\n        type: \"M\",\r\n        step: 0,\r\n        dir: -1,\r\n        simple: 1,\r\n        alt: 0,\r\n        oct: 0,\r\n        semitones: 0,\r\n        chroma: 0,\r\n        ic: 0\r\n    };\r\n    p.num = +t[0];\r\n    p.q = t[1];\r\n    p.step = numToStep(p.num);\r\n    p.type = TYPES[p.step];\r\n    if (p.type === \"M\" && p.q === \"P\")\r\n        return NO_IVL;\r\n    p.name = \"\" + p.num + p.q;\r\n    p.dir = p.num < 0 ? -1 : 1;\r\n    p.simple = (p.num === 8 || p.num === -8\r\n        ? p.num\r\n        : p.dir * (p.step + 1));\r\n    p.alt = qToAlt(p.type, p.q);\r\n    p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\r\n    p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\r\n    p.chroma = ((((p.dir * (SIZES[p.step] + p.alt)) % 12) + 12) %\r\n        12);\r\n    return Object.freeze(p);\r\n};\r\nvar cache = {};\r\nfunction props(str) {\r\n    if (typeof str !== \"string\")\r\n        return NO_IVL;\r\n    return cache[str] || (cache[str] = properties(str));\r\n}\r\nvar num = function (str) { return props(str).num; };\r\nvar name = function (str) { return props(str).name; };\r\nvar semitones = function (str) { return props(str).semitones; };\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar ic = function (ivl) {\r\n    if (typeof ivl === \"string\")\r\n        ivl = props(ivl).chroma;\r\n    return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\r\n};\r\nvar build = function (_a) {\r\n    var _b = _a === void 0 ? {} : _a, num = _b.num, step = _b.step, alt = _b.alt, _c = _b.oct, oct = _c === void 0 ? 1 : _c, dir = _b.dir;\r\n    if (step !== undefined)\r\n        num = step + 1 + 7 * oct;\r\n    if (num === undefined)\r\n        return null;\r\n    if (typeof alt !== \"number\")\r\n        return null;\r\n    var d = typeof dir !== \"number\" ? \"\" : dir < 0 ? \"-\" : \"\";\r\n    var type = TYPES[numToStep(num)];\r\n    return (d + num + altToQ(type, alt));\r\n};\r\nvar simplify = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    return intervalProps.simple + intervalProps.q;\r\n};\r\nvar invert = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    var step = (7 - intervalProps.step) % 7;\r\n    var alt = intervalProps.type === \"P\" ? -intervalProps.alt : -(intervalProps.alt + 1);\r\n    return build({ step: step, alt: alt, oct: intervalProps.oct, dir: intervalProps.dir });\r\n};\r\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\r\nvar fromSemitones = function (num) {\r\n    var d = num < 0 ? -1 : 1;\r\n    var n = Math.abs(num);\r\n    var c = n % 12;\r\n    var o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n};\n\nexport { names, tokenize, qToAlt, altToQ, props, num, name, semitones, chroma, ic, build, simplify, invert, fromSemitones };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-distance.svg)](https://www.npmjs.com/package/tonal-distance)\n * [![tonal](https://img.shields.io/badge/tonal-distance-yellow.svg)](https://github.com/danigb/tonal/tree/master/packages/tonal/distance)\n *\n * Transpose notes by intervals and find distances between notes\n *\n * @example\n * // es6\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"C3\", \"C4\") // => \"1P\"\n *\n * @example\n * // es6 import selected functions\n * import { interval, semitones, transpose } from \"tonal-distance\"\n *\n * semitones(\"C\" ,\"D\") // => 2\n * interval(\"C4\", \"G4\") // => \"5P\"\n * transpose(\"C4\", \"P5\") // => \"G4\"\n *\n * @example\n * // included in tonal facade\n * const Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(\"C4\", \"P5\")\n * Tonal.Distance.transposeBy(\"P5\", \"C4\")\n *\n * @module Distance\n */\nimport { props as noteProps, build as fromNote } from \"tonal-note\";\nimport { props as iprops, build as ibuild } from \"tonal-interval\";\n\n// Map from letter step to number of fifths starting from \"C\":\n// { C: 0, D: 2, E: 4, F: -1, G: 1, A: 3, B: 5 }\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n\n// Given a number of fifths, return the octaves they span\nvar fOcts = function (f) { return Math.floor((f * 7) / 12); };\n\n// Get the number of octaves it span each step\nvar FIFTH_OCTS = FIFTHS.map(fOcts);\n\nvar encode = function (ref) {\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var dir = ref.dir; if ( dir === void 0 ) dir = 1;\n\n  var f = FIFTHS[step] + 7 * alt;\n  if (oct === null) { return [dir * f]; }\n  var o = oct - FIFTH_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n};\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nvar STEPS = [3, 0, 4, 1, 5, 2, 6];\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f) {\n  var i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\nvar decode = function (f, o, dir) {\n  var step = STEPS[unaltered(f)];\n  var alt = Math.floor((f + 1) / 7);\n  if (o === undefined) { return { step: step, alt: alt, dir: dir }; }\n  var oct = o + 4 * alt + FIFTH_OCTS[step];\n  return { step: step, alt: alt, oct: oct, dir: dir };\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\nvar encoder = function (props) { return memo(function (str) {\n    var p = props(str);\n    return p.name === null ? null : encode(p);\n  }); };\n\nvar encodeNote = encoder(noteProps);\nvar encodeIvl = encoder(iprops);\n\n/**\n * Transpose a note by an interval. The note can be a pitch class.\n *\n * This function can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranpose } from \"tonal-distance\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * // it works with pitch classes\n * transpose(\"D\", \"3M\") // => \"F#\"\n * // can be partially applied\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(transpose(\"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nexport function transpose(note, interval) {\n  if (arguments.length === 1) { return function (i) { return transpose(note, i); }; }\n  var n = encodeNote(note);\n  var i = encodeIvl(interval);\n  if (n === null || i === null) { return null; }\n  var tr = n.length === 1 ? [n[0] + i[0]] : [n[0] + i[0], n[1] + i[1]];\n  return fromNote(decode(tr[0], tr[1]));\n}\n\n/**\n * Transpose a pitch class by a number of perfect fifths.\n *\n * It can be partially applied.\n *\n * @function\n * @param {String} pitchClass - the pitch class\n * @param {Integer} fifhts - the number of fifths\n * @return {String} the transposed pitch class\n *\n * @example\n * import { trFifths } from \"tonal-transpose\"\n * [0, 1, 2, 3, 4].map(trFifths(\"C\")) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n * // or using tonal\n * Distance.trFifths(\"G4\", 1) // => \"D\"\n */\n\nexport function trFifths(note, fifths) {\n  if (arguments.length === 1) { return function (f) { return trFifths(note, f); }; }\n  var n = encodeNote(note);\n  if (n === null) { return null; }\n  return fromNote(decode(n[0] + fifths));\n}\n\n/**\n * Get the distance in fifths between pitch classes\n *\n * Can be partially applied.\n *\n * @param {String} to - note or pitch class\n * @param {String} from - note or pitch class\n */\nexport function fifths(from, to) {\n  if (arguments.length === 1) { return function (to) { return fifths(from, to); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (t === null || f === null) { return null; }\n  return t[0] - f[0];\n}\n\n/**\n * The same as transpose with the arguments inverted.\n *\n * Can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranposeBy } from \"tonal-distance\"\n * transposeBy(\"3m\", \"5P\") // => \"7m\"\n */\nexport function transposeBy(interval, note) {\n  if (arguments.length === 1) { return function (n) { return transpose(n, interval); }; }\n  return transpose(note, interval);\n}\n\nvar isDescending = function (e) { return e[0] * 7 + e[1] * 12 < 0; };\nvar decodeIvl = function (i) { return isDescending(i) ? decode(-i[0], -i[1], -1) : decode(i[0], i[1], 1); };\n\nexport function addIntervals(ivl1, ivl2, dir) {\n  var i1 = encodeIvl(ivl1);\n  var i2 = encodeIvl(ivl2);\n  if (i1 === null || i2 === null) { return null; }\n  var i = [i1[0] + dir * i2[0], i1[1] + dir * i2[1]];\n  return ibuild(decodeIvl(i));\n}\n\n/**\n * Add two intervals\n *\n * Can be partially applied.\n *\n * @param {String} interval1\n * @param {String} interval2\n * @return {String} the resulting interval\n * @example\n * import { add } from \"tonal-distance\"\n * add(\"3m\", \"5P\") // => \"7m\"\n */\nexport function add(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, 1);\n}\n\n/**\n * Subtract two intervals\n *\n * Can be partially applied\n *\n * @param {String} minuend\n * @param {String} subtrahend\n * @return {String} interval diference\n */\nexport function subtract(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, -1);\n}\n\n/**\n * Find the interval between two pitches. It works with pitch classes\n * (both must be pitch classes and the interval is always ascending)\n *\n * Can be partially applied\n *\n * @param {String} from - distance from\n * @param {String} to - distance to\n * @return {String} the interval distance\n *\n * @example\n * import { interval } from \"tonal-distance\"\n * interval(\"C2\", \"C3\") // => \"P8\"\n * interval(\"G\", \"B\") // => \"M3\"\n *\n * @example\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"M2\", \"P5\") // => \"P4\"\n */\nexport function interval(from, to) {\n  if (arguments.length === 1) { return function (t) { return interval(from, t); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (f === null || t === null || f.length !== t.length) { return null; }\n  var d =\n    f.length === 1\n      ? [t[0] - f[0], -Math.floor(((t[0] - f[0]) * 7) / 12)]\n      : [t[0] - f[0], t[1] - f[1]];\n  return ibuild(decodeIvl(d));\n}\n\n/**\n * Get the distance between two notes in semitones\n *\n * @param {String|Pitch} from - first note\n * @param {String|Pitch} to - last note\n * @return {Integer} the distance in semitones or null if not valid notes\n * @example\n * import { semitones } from \"tonal-distance\"\n * semitones(\"C3\", \"A2\") // => -3\n * // or use tonal\n * Tonal.Distance.semitones(\"C3\", \"G3\") // => 7\n */\nexport function semitones(from, to) {\n  if (arguments.length === 1) { return function (t) { return semitones(from, t); }; }\n  var f = noteProps(from);\n  var t = noteProps(to);\n  return f.midi !== null && t.midi !== null\n    ? t.midi - f.midi\n    : f.chroma !== null && t.chroma !== null\n      ? (t.chroma - f.chroma + 12) % 12\n      : null;\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\nimport { chroma as notechr } from \"tonal-note\";\nimport { chroma as ivlchr } from \"tonal-interval\";\nimport { rotate, range, compact } from \"tonal-array\";\n\nvar chr = function (str) { return notechr(str) || ivlchr(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nexport function chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nexport function chromas(n) {\n  all = all || range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nexport function modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return compact(\n    binary.map(function(_, i) {\n      var r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nexport function isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nexport function intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nexport function includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n *\n * `tonal-dictionary` contains a dictionary of musical scales and chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Dictionary from \"tonal-dictionary\"\n * // es5\n * const Dictionary = require(\"tonal-dictionary\")\n *\n * @example\n * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n *\n * @module Dictionary\n */\nimport sdata from \"./data/scales.json\";\nimport cdata from \"./data/chords.json\";\nimport { chroma } from \"tonal-pcset\";\n\nexport var dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = chroma(ivls);\n\n    add(key, ivls, chr);\n    if (alias) { alias.forEach(function (a) { return add(a, ivls, chr); }); }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) { return data[name]; };\n  dict.names = function (p) {\n    if (typeof p === \"string\") { return (index[p] || []).slice(); }\n    else { return (p === true ? allKeys : keys).slice(); }\n  };\n  return dict;\n};\n\nexport var combine = function (a, b) {\n  var dict = function (name) { return a(name) || b(name); };\n  dict.names = function (p) { return a.names(p).concat(b.names(p)); };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nexport var scale = dictionary(sdata);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nexport var chord = dictionary(cdata);\nexport var pcset = combine(scale, chord);\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-scale.svg?style=flat-square)](https://www.npmjs.com/package/tonal-scale)\n *\n * A scale is a collection of pitches in ascending or descending order.\n *\n * This module provides functions to get and manipulate scales.\n *\n * @example\n * // es6\n * import * as Scale from \"tonal-scale\"\n * // es5\n * const Scale = require(\"tonal-scale\");\n *\n * @example\n * Scale.notes(\"Ab bebop\") // => [ \"Ab\", \"Bb\", \"C\", \"Db\", \"Eb\", \"F\", \"Gb\", \"G\" ]\n * Scale.names() => [\"major\", \"minor\", ...]\n * @module Scale\n */\nimport { name as noteName, pc } from \"tonal-note\";\nimport {\n  modes as pcsetModes,\n  chroma,\n  isSubsetOf,\n  isSupersetOf\n} from \"tonal-pcset\";\nimport { transpose } from \"tonal-distance\";\nimport { scale, chord } from \"tonal-dictionary\";\nimport { compact, unique, rotate } from \"tonal-array\";\n\nvar NO_SCALE = Object.freeze({\n  name: null,\n  intervals: [],\n  names: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = scale(name);\n  if (!intervals) { return NO_SCALE; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = scale.names(s.chroma);\n  return Object.freeze(s);\n};\n\nvar memoize = function (fn, cache) { return function (str) { return cache[str] || (cache[str] = fn(str)); }; };\n\n/**\n * Get scale properties. It returns an object with:\n * - name: the scale name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the scale intervals\n * - chroma:  scale croma (see pcset)\n * - setnum: scale chroma number\n *\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Object}\n */\nexport var props = memoize(properties, {});\n\n/**\n * Return the available scale names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the scale names\n *\n * @example\n * Scale.names() // => [\"maj7\", ...]\n */\nexport var names = scale.names;\n\n/**\n * Given a scale name, return its intervals. The name can be the type and\n * optionally the tonic (which is ignored)\n *\n * It retruns an empty array when no scale found\n *\n * @function\n * @param {String} name - the scale name (tonic and type, tonic is optional)\n * @return {Array<String>} the scale intervals if is a known scale or an empty\n * array if no scale found\n * @example\n * Scale.intervals(\"major\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\" ]\n */\nexport var intervals = function (name) {\n  var p = tokenize(name);\n  return props(p[1]).intervals;\n};\n\n/**\n * Get the notes (pitch classes) of a scale.\n *\n * Note that it always returns an array, and the values are only pitch classes.\n *\n * @function\n * @param {String} tonic\n * @param {String} nameOrTonic - the scale name or tonic (if 2nd param)\n * @param {String} [name] - the scale name without tonic\n * @return {Array} a pitch classes array\n *\n * @example\n * Scale.notes(\"C\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C4\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"A4\", \"no-scale\") // => []\n * Scale.notes(\"blah\", \"major\") // => []\n */\nexport function notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return intervals(name).map(transpose(p[0]));\n}\n\n/**\n * Check if the given name is a known scale from the scales dictionary\n *\n * @function\n * @param {String} name - the scale name\n * @return {Boolean}\n */\nexport function exists(name) {\n  var p = tokenize(name);\n  return scale(p[1]) !== undefined;\n}\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {String} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * Scale.tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * Scale.tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * Scale.tokenize() // => [\"\", \"\"]\n */\nexport function tokenize(str) {\n  if (typeof str !== \"string\") { return [\"\", \"\"]; }\n  var i = str.indexOf(\" \");\n  var tonic = noteName(str.substring(0, i)) || noteName(str) || \"\";\n  var name = tonic !== \"\" ? str.substring(tonic.length + 1) : str;\n  return [tonic, name.length ? name : \"\"];\n}\n\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {String} name - scale name\n */\nexport var modeNames = function (name) {\n  var ivls = intervals(name);\n  var tonics = notes(name);\n\n  return pcsetModes(ivls)\n    .map(function (chroma, i) {\n      var name = scale.names(chroma)[0];\n      if (name) { return [tonics[i] || ivls[i], name]; }\n    })\n    .filter(function (x) { return x; });\n};\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {String} name\n */\nexport var chords = function (name) {\n  var inScale = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return inScale(chord(name)); });\n};\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {Array} notes\n * @return {Array}\n */\nexport var toScale = function (notes) {\n  var pcset = compact(notes.map(pc));\n  if (!pcset.length) { return pcset; }\n  var tonic = pcset[0];\n  var scale = unique(pcset);\n  return rotate(scale.indexOf(tonic), scale);\n};\n\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSuperset(scale(name)); });\n};\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSubset(scale(name)); });\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-chord.svg)](https://www.npmjs.com/package/tonal-chord)\n * [![tonal](https://img.shields.io/badge/tonal-chord-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-chord` is a collection of functions to manipulate musical chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Chord from \"tonal-chord\"\n * // es5\n * const Chord = require(\"tonal-chord\")\n *\n * @example\n * Chord.notes(\"CMaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n *\n * @module Chord\n */\nimport { tokenize as split } from \"tonal-note\";\nimport { transpose } from \"tonal-distance\";\nimport { chord } from \"tonal-dictionary\";\nimport { chroma, isSubsetOf, isSupersetOf } from \"tonal-pcset\";\n\n/**\n * Return the available chord names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the chord names\n *\n * @example\n * Chord.names() // => [\"maj7\", ...]\n */\nexport var names = chord.names;\n\nvar NO_CHORD = Object.freeze({\n  name: null,\n  names: [],\n  intervals: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = chord(name);\n  if (!intervals) { return NO_CHORD; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = chord.names(s.chroma);\n  return s;\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\n/**\n * Get chord properties. It returns an object with:\n *\n * - name: the chord name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the chord intervals\n * - chroma:  chord croma (see pcset)\n * - setnum: chord chroma number\n *\n * @function\n * @param {String} name - the chord name (without tonic)\n * @return {Object} an object with the properties or a object with all properties\n * set to null if not valid chord name\n */\nexport var props = memo(properties);\n\n/**\n * Get chord intervals. It always returns an array\n *\n * @function\n * @param {String} name - the chord name (optionally a tonic and type)\n * @return {Array<String>} a list of intervals or null if the type is not known\n */\nexport var intervals = function (name) { return props(tokenize(name)[1]).intervals; };\n\n/**\n * Get the chord notes of a chord. This function accepts either a chord name\n * (for example: \"Cmaj7\") or a list of notes.\n *\n * It always returns an array, even if the chord is not found.\n *\n * @function\n * @param {String} nameOrTonic - name of the chord or the tonic (if the second parameter is present)\n * @param {String} [name] - (Optional) name if the first parameter is the tonic\n * @return {Array} an array of notes or an empty array\n *\n * @example\n * Chord.notes(\"Cmaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n * Chord.notes(\"C\", \"maj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n */\nexport function notes(nameOrTonic, name) {\n  if (name) { return props(name).intervals.map(transpose(nameOrTonic)); }\n  var ref = tokenize(nameOrTonic);\n  var tonic = ref[0];\n  var type = ref[1];\n  return props(type).intervals.map(transpose(tonic));\n}\n\n/**\n * Check if a given name correspond to a chord in the dictionary\n *\n * @function\n * @param {String} name\n * @return {Boolean}\n * @example\n * Chord.exists(\"CMaj7\") // => true\n * Chord.exists(\"Maj7\") // => true\n * Chord.exists(\"Ablah\") // => false\n */\nexport var exists = function (name) { return chord(tokenize(name)[1]) !== undefined; };\n\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSuperset(chord(name)); });\n};\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSubset(chord(name)); });\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nvar NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {String} name - the chord name\n * @return {Array} an array with [type, tonic]\n * @example\n * Chord.tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * Chord.tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * Chord.tokenize(\"mMaj7\") // => [ \"\", \"mMaj7\" ]\n * Chord.tokenize(\"Cnonsense\") // => [ \"C\", \"nonsense\" ]\n */\nexport function tokenize(name) {\n  var p = split(name);\n  if (p[0] === \"\") { return [\"\", name]; }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (p[0] === \"A\" && p[3] === \"ug\") { return [\"\", \"aug\"]; }\n\n  if (NUM_TYPES.test(p[2])) {\n    return [p[0] + p[1], p[2] + p[3]];\n  } else {\n    return [p[0] + p[1] + p[2], p[3]];\n  }\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-key.svg?style=flat-square)](https://www.npmjs.com/package/tonal-key)\n *\n * The `Tonal` module is a facade to the rest of the modules. They are namespaced,\n * so for example to use `pc` function from `tonal-note` you have to write:\n * `Tonal.Note.pc`\n *\n * It exports the following modules:\n * - Note\n * - Interval\n * - Distance\n * - Scale\n * - Chord\n * - PcSet\n *\n * Additionally this facade exports some functions without namespace (see \"Methods\" below)\n *\n * @example\n * // es6 modules\n * import * as Tonal from \"tonal\"\n * Tonal.Note.name(\"cx\") // => \"C##\"\n *\n * @example\n * import { Note } from \"tonal\"\n * Note.name(\"bb\") // => \"Bb\"\n *\n * @example\n * // es5 node modules\n * var Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(Tonal.Note.pc(\"C#2\"), \"M3\") // => \"E#\"\n * Tonal.Chord.notes(\"Dmaj7\") // => [\"D\", \"F#\", \"A\", \"C#\"]\n *\n * @module Tonal\n */\nimport * as Array from \"tonal-array\";\nimport * as Note from \"tonal-note\";\nimport * as Interval from \"tonal-interval\";\nimport * as Distance from \"tonal-distance\";\nimport * as Dictionary from \"tonal-dictionary\";\nimport * as Scale from \"tonal-scale\";\nimport * as Chord from \"tonal-chord\";\nimport * as PcSet from \"tonal-pcset\";\n\nexport { Array, Note, Interval, Distance, Scale, Chord, PcSet, Dictionary };\n\n/**\n * Transpose a note by an interval\n * @function\n * @param {String} note\n * @param {String} interval\n * @return {String} the transported note\n * @see Distance.transpose\n */\nexport const transpose = Distance.transpose;\n\n/**\n * Get the interval from two notes\n * @function\n * @param {String} from\n * @param {String} to\n * @return {String} the interval in reverse shorthand notation\n * @see Distance.interval\n */\nexport const interval = Distance.interval;\n\n/**\n * Get note properties\n * @function\n * @param {String} note - the note name\n * @return {Object}\n * @see Note.props\n * @example\n * Tonal.note(\"A4\").chroma // => 9\n */\nexport const note = Note.props;\n\n/**\n * Get midi note number\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.midi\n * @example\n * Tonal.midi(\"A4\") // => 49\n */\nexport const midi = Note.midi;\n\n/**\n * Get note frequency using equal tempered tuning at 440\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.freq\n * @example\n * Tonal.freq(\"A4\") // => 440\n */\nexport const freq = Note.freq;\n\n/**\n * Get intervals from a chord type\n * @function\n * @param {String} type - the chord type (no tonic)\n * @return {Array} an array of intervals or undefined if the chord type is not known\n * @see Dictionary.chord\n * @example\n * Tonal.chord(\"m7b5\") // => [\"1P\", \"3m\", \"5d\", \"7m\"]\n */\nexport const chord = Dictionary.chord;\n\n/**\n * Get intervals from scale name\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Array} an array of intervals or undefiend if the scale is not kown\n * @example\n * Tonal.scale(\"major\") // => [\"1P\", \"2M\", \"3M\"...]\n */\nexport const scale = Dictionary.scale;\n","import { Note } from 'tonal';\nimport { Chord } from 'tonal';\nimport { Interval } from 'tonal';\nimport { Distance } from 'tonal';\n\nexport declare type intervalDirection = 'up' | 'down';\nexport declare type step = string | number;\n\nexport class Harmony {\n    static isBlack(note) {\n        return Note.props(note).acc !== '';\n    }\n\n    static isSameNote(noteA, noteB) {\n        return Note.midi(noteA) === Note.midi(noteB);\n    }\n\n    static getTonalChord(chord: string) {\n        if (!chord) {\n            return null;\n        }\n        chord = chord\n            .replace(/([A-G][b|#]?)(69)/, '$1M69')\n            .replace('-', 'm')\n            .replace('^', 'M')\n            .replace('h7', 'm7b5')\n            .replace('h', 'dim');\n        /**\n         * Chords that dont work:\n         * slash cords are ignored\n         * 7b9b5 does not work\n         * \n         */\n        const tokens = Chord.tokenize(chord);\n        const s = tokens[1].split('/');\n        return tokens[0] + (s[0] || 'M');\n    }\n\n    static getBassNote(chord: string) {\n        if (!chord) {\n            return null;\n        }\n        if (chord.includes('/')) {\n            return chord.split('/')[1];\n        }\n        return chord.match((/[A-G][b|#]?/))[0];\n    }\n\n\n    static getMidi(note, offset = 0) {\n        return Note.midi(note) - offset;\n    }\n\n\n    static intervalComplement(interval) {\n        const fix = {\n            '8P': '1P',\n            '8d': '1A',\n            '8A': '1d',\n            '1A': '8d',\n            '1d': '8A',\n        }\n        const fixIndex = Object.keys(fix).find(key => interval.match(key));\n        if (fixIndex) {\n            return fix[fixIndex];\n        }\n\n        return Interval.invert(interval);\n    }\n\n    static invertInterval(interval) {\n        if (!interval) {\n            return null;\n        }\n        const positive = interval.replace('-', '');\n        const complement = Harmony.intervalComplement(positive);\n        const isNegative = interval.length > positive.length;\n        return (isNegative ? '' : '-') + complement;\n    }\n\n    /** Transforms interval into one octave (octave+ get octaved down) */\n    static fixInterval(interval = '', simplify = false) {\n        let fix: { [key: string]: string } = {\n            '0A': '1P',\n            '-0A': '1P',\n            /*  */\n        }\n        if (simplify) {\n            fix = {\n                ...fix,\n                '8P': '1P',\n                '-8P': '1P',\n                /* '-1A': '-2m',\n                '1A': '2m',\n                '8d': '7M',\n                '-8d': '-7M', */\n            }\n            interval = Interval.simplify(interval);\n        }\n        if (Object.keys(fix).includes(interval)) {\n            return fix[interval];\n        }\n        return interval;\n    }\n\n    /** inverts the interval if it does not go to the desired direction */\n    static forceDirection(interval, direction: intervalDirection, noUnison = false) {\n        const semitones = Interval.semitones(interval);\n        if ((direction === 'up' && semitones < 0) ||\n            (direction === 'down' && semitones > 0)) {\n            return Harmony.invertInterval(interval);\n        }\n        if (interval === '1P' && noUnison) {\n            return (direction === 'down' ? '-' : '') + '8P';\n        }\n        return interval;\n    }\n\n    // use Interval.ic?\n    static minInterval(interval, direction?: intervalDirection, noUnison?) {\n        interval = Harmony.fixInterval(interval, true);\n        if (direction) {\n            return Harmony.forceDirection(interval, direction, noUnison)\n        }\n        let inversion = Harmony.invertInterval(interval);\n        if (Math.abs(Interval.semitones(inversion)) < Math.abs(Interval.semitones(interval))) {\n            interval = inversion;\n        }\n        return interval;\n    }\n\n    // returns array of intervals that lead the voices of chord A to chordB\n    static minIntervals(chordA, chordB) {\n        return chordA.map((n, i) => Harmony.minInterval(Distance.interval(n, chordB[i])));\n    }\n\n    static mapMinInterval(direction?: intervalDirection) {\n        return (interval) => Harmony.minInterval(interval, direction);\n    }\n\n    // sort function\n    static sortMinInterval(preferredDirection: intervalDirection = 'up', accessor = (i => i)) {\n        return (a, b) => {\n            const diff = Math.abs(Interval.semitones(accessor(a))) - Math.abs(Interval.semitones(accessor(b)));\n            if (diff === 0) {\n                return preferredDirection === 'up' ? -1 : 1;\n            }\n            return diff;\n        }\n    }\n\n    /** Returns the note with the least distance to \"from\" */\n    static getNearestNote(from, to, direction?: intervalDirection) {\n        let interval = Harmony.minInterval(Distance.interval(Note.pc(from), Note.pc(to)), direction);\n        return Distance.transpose(from, interval);\n    }\n\n    /** Returns the note with the least distance to \"from\". TODO: add range */\n    static getNearestTargets(from, targets, preferredDirection: intervalDirection = 'down', flip = false) {\n        let intervals = targets\n            .map((target) => Distance.interval(Note.pc(from), target))\n            .map(Harmony.mapMinInterval(preferredDirection))\n            .sort(Harmony.sortMinInterval(preferredDirection))\n        /* if (flip) {\n            intervals = intervals.reverse();\n        } */\n        return intervals.map(i => Distance.transpose(from, i));\n    }\n\n    static intervalMatrix(from, to) {\n        return to.map(note => from\n            .map(n => {\n                return Distance.interval(n, note)\n            })\n            .map(d => Harmony.minInterval(d))\n            /* .map(i => i.slice(0, 2) === '--' ? i.slice(1) : i) */\n        )\n    }\n\n}","import { Pulse } from \"../Pulse\";\nimport { Harmony } from '../harmony/Harmony';\n\nexport interface NoteEvent {\n    note: string;\n    midi?: number;\n    gain?: number;\n    off?: number;\n    deadline?: number;\n}\n\nexport class Instrument {\n    midiOffset = 0;\n    onTrigger: (events: { on: NoteEvent[], off: NoteEvent[], active: NoteEvent[] }) => any;\n    ready: Promise<any>;\n    gain = 1;\n\n    activeEvents = [];\n    context: any;\n    mix: any;\n    constructor({ context, gain, mix, onTrigger, midiOffset }: any = {}) {\n        this.onTrigger = onTrigger;\n        this.midiOffset = midiOffset || this.midiOffset;\n        this.gain = gain || this.gain;\n        this.init({ context, mix });\n    }\n\n    init({ context, mix }) {\n        if (!context && (!mix || !mix.context)) {\n            console.warn(`you should pass a context or a mix (gainNode) to a new Instrument. \n            You can also Call init with {context,mix} to setup the Instrument later`);\n            return;\n        }\n        this.context = context || mix.context;\n        this.mix = mix || this.context.destination;\n    }\n\n    playNotes(notes: string[], settings: any = {}) {\n        const deadline = (settings.deadline || this.context.currentTime);\n        settings = Object.assign({\n            duration: 2000,\n            gain: 1,\n        }, settings, { deadline });\n        if (settings.interval) {\n            // call recursively with single notes at interval\n            return notes.map((note, index) => {\n                this.playNotes([note], Object.assign({}, settings, {\n                    interval: 0,\n                    deadline: deadline + index * settings.interval\n                }))\n            });\n        }\n        const midi = notes.map(note => Harmony.getMidi(note, this.midiOffset));\n        const noteOff = settings.deadline + settings.duration / 1000;\n\n        const notesOn = notes.map((note, index) => ({\n            note,\n            midi: midi[index],\n            gain: settings.gain,\n            noteOff,\n            deadline: settings.deadline\n        }));\n\n        if (settings.pulse && this.onTrigger) {\n            settings.pulse.clock.callbackAtTime((deadline) => {\n                this.activeEvents = this.activeEvents.concat(notesOn);\n                this.onTrigger({ on: notesOn, off: [], active: this.activeEvents });\n            }, settings.deadline);\n        }\n        if (settings.duration && settings.pulse) {\n            settings.pulse.clock.callbackAtTime((deadline) => {\n                // find out which notes need to be deactivated\n                const notesOff = notes\n                    .filter(note => !this.activeEvents\n                        .find(event => {\n                            const keep = note === event.note && event.noteOff > deadline;\n                            if (keep) {\n                                console.log('keep', note);\n                            }\n                            return keep;\n                        })).map(note => this.activeEvents.find(e => e.note === note));\n\n                this.activeEvents = this.activeEvents\n                    .filter(e => !notesOff.includes(e));\n\n                if (this.onTrigger) {\n                    this.onTrigger({ on: [], off: notesOff, active: this.activeEvents });\n                }\n            }, noteOff);\n        }\n        return this.playKeys(midi, settings);\n    }\n\n    playKeys(keys: number[], settings?) {\n        // TODO: fire callbacks after keys.map((key,i)=>i*settings.interval)?\n    }\n}","import { Instrument } from './Instrument';\nimport { Note } from 'tonal';\nimport { adsr } from '../util/util';\n\nexport class Synthesizer extends Instrument {\n    duration = 200;\n    type = 'sine';\n    gain = 0.9;\n    attack = .05;\n    decay = .05;\n    sustain = .4;\n    release = .1;\n\n    constructor(props: any) {\n        super(props);\n        this.duration = props.duration || this.duration;\n        this.type = props.type || this.type;\n        this.gain = props.gain || this.gain;\n    }\n\n    getVoice(type = 'sine', gain = 0, key) {\n        const frequency = Note.freq(key);\n        const oscNode = this.context.createOscillator();\n        oscNode.type = type;\n        const gainNode = this.context.createGain();\n        oscNode.connect(gainNode);\n        gainNode.gain.value = typeof gain === 'number' ? gain : 0.8;\n        gainNode.connect(this.mix);\n        oscNode.frequency.value = frequency;\n        return { oscNode, gainNode, key, frequency };\n    }\n\n    lowestGain(a, b) {\n        return a.gain.gain.value < b.gain.gain.value ? -1 : 0;\n    }\n\n    startKeys(keys: number[], settings: any = {}) {\n\n    }\n\n    playKeys(keys: number[], settings: any = {}) {\n        super.playKeys(keys, settings); // fires callback   \n        //const time = this.context.currentTime + settings.deadline / 1000;\n        const time = settings.deadline || this.context.currentTime;\n        const interval = settings.interval || 0;\n        return keys.map((key, i) => {\n            const delay = i * interval;\n            const [endless, attack, decay, sustain, release, duration, gain] =\n                [\n                    settings.endless,\n                    settings.attack || this.attack,\n                    settings.decay || this.decay,\n                    settings.sustain || this.sustain,\n                    settings.release || this.release,\n                    (settings.duration || this.duration) / 1000,\n                    (settings.gain || 1) * this.gain\n                ]\n            const voice = this.getVoice(this.type, 0, key);\n            adsr({ attack, decay, sustain, release, gain, duration, endless }, time + delay, voice.gainNode.gain);\n            voice.oscNode.start(settings.deadline + delay);\n            return voice;\n        });\n    }\n\n    stopVoice(voice, settings: any = {}) {\n        if (!voice) {\n            return;\n        }\n        const time = settings.deadline || this.context.currentTime;\n        voice.gainNode.gain.setTargetAtTime(0, time, settings.release || this.release);\n        //voice.oscNode.stop()\n    }\n\n    stopVoices(voices, settings) {\n        voices.forEach(voice => {\n            this.stopVoice(voice, settings);\n        });\n    }\n}","import * as Chord from 'tonal-chord';\nimport * as Scale from 'tonal-scale';\n\nexport const chords = [\n    {\n        symbol: 'm',\n        long: 'minor',\n        short: '-',\n        groups: ['Basic', 'Triads']\n    },\n    {\n        symbol: 'M',\n        long: 'major',\n        short: '',\n        groups: ['Basic', 'Triads']\n    },\n    {\n        symbol: 'o',\n        groups: ['Basic', 'Symmetric', 'Triads'],\n        long: 'Vermindert'\n        /* short: 'o' */\n    },\n    {\n        symbol: 'M#5', // = Mb6\n        groups: ['Advanced', 'Symmetric', 'Triads'],\n        short: '#5'\n    },\n    {\n        symbol: 'Msus4',\n        groups: ['Advanced', 'Symmetric'],\n        short: 'sus4'\n    },\n    {\n        symbol: 'Msus2',\n        groups: ['Advanced', 'Symmetric'],\n        short: 'sus2'\n    },\n    // 5 4 64 m#5 Mb5  7no5  \n    {\n        symbol: '7',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n        long: 'Dominantsept'\n    },\n    {\n        symbol: '7#11',\n        groups: ['Advanced', 'Diatonic', 'Modes'],\n        long: 'Dominant #11'\n    },\n    {\n        symbol: 'M6',\n        groups: ['Advanced'],\n        long: 'major 6',\n        short: '6'\n    },\n    {\n        symbol: 'o7',\n        groups: ['Advanced', 'Symmetric', 'Diatonic'], // HM 7 chord\n        long: 'Vermindert 7',\n    },\n    {\n        symbol: 'm7',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n        long: 'minor 7',\n        short: '-7'\n    },\n    {\n        symbol: 'oM7',\n        groups: ['Expert'],\n        long: 'diminished major 7',\n        short: 'o7'\n    },\n    {\n        symbol: 'm7b5',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n        long: 'Halbvermindert',\n        short: '-7b5'\n    },\n    {\n        symbol: '7#5',\n        groups: ['Advanced', 'Symmetric'],\n        long: 'Dominantsept #5'\n    },\n    {\n        symbol: 'Maj7',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n        long: 'Major 7',\n        short: '7'\n    },\n    {\n        symbol: 'mMaj7',\n        short: '-7',\n        groups: ['Advanced', 'Diatonic']\n    },\n    {\n        symbol: 'M7#5',\n        groups: ['Advanced', 'Diatonic'],\n        short: '7#5'\n    },\n    {\n        symbol: '7sus4',\n        groups: ['Advanced'],\n    },\n    {\n        symbol: '9',\n        groups: ['Advanced'],\n    },\n    {\n        symbol: 'M9',\n        groups: ['Advanced'],\n        short: '9'\n    },\n    {\n        symbol: 'M69',\n        groups: ['Advanced'],\n        short: '69'\n    }\n    /*\n7b13 M7b5 m7#5 9no5  M7b6 7b5 Madd9 mb6b9 mb6M7 madd4 sus24 madd9 Maddb9 +add#9 M7sus4 7#5sus4 M#5add9 M7#5sus4\n11 m9 m6 9#5 7b9 7#9 M69 9b5 m69 mM9 7b6 m9b5 m9#5 7#11 M7b9 9b13 o7M7 M9b5 11b9 M9#5 7add6 M6#11 M7#11 7#5#9 13no5 9sus4 7#5b9 M9sus4 7sus4b9 m7add11 mMaj7b6 M9#5sus4\n13 m11 M13 9#11 13#9 13b5 13b9 m11b5 7b9#9 mM9b6 M9#11 9#5#11 7#9b13 7b9b13 13sus4 m11A 5 7#9#11 7b9#11 M69#11 7#11b13 M7#9#11 M7add13 7#5b9#11 7sus4b9b13\nm13 13#11 M13#11 13b9#11 9#11b13 13#9#11 7b9b13#11 7#9#11b13\n    */\n];\n\nexport const scales = [\n    {\n        symbol: 'major pentatonic',\n        groups: ['Basic', 'Pentatonic'],\n    },\n    {\n        symbol: 'minor pentatonic',\n        groups: ['Basic', 'Pentatonic'],\n    },\n    {\n        symbol: 'minor blues',\n        groups: ['Basic'],\n    },\n    // gregorian modes\n    {\n        symbol: 'major',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'dorian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'phrygian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'lydian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'mixolydian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'aeolian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'locrian',\n        groups: ['Basic', 'Diatonic', 'Modes'],\n    },\n    {\n        symbol: 'whole tone',\n        groups: ['Advanced', 'Symmetric']\n    },\n    {\n        symbol: 'diminished',\n        groups: ['Advanced', 'Symmetric']\n    },\n    //HTGT ?\n    {\n        symbol: 'augmented',\n        groups: ['Advanced', 'Symmetric']\n    },\n    {\n        symbol: 'chromatic',\n        groups: ['Expert', 'Symmetric']\n    },\n    // harmonic minor modes\n    {\n        symbol: 'harmonic minor', // HM 1\n        groups: ['Advanced', 'Diatonic']\n    },\n    // HM 2 locrian #6 !\n    {\n        symbol: 'ionian augmented', // HM 3\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'dorian #4', // HM 4\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'spanish', // HM 5\n        groups: ['Advanced', 'Diatonic']\n    },\n    // HM 6 lydian #9\n    // HM 7 ???\n\n    // melodic minor modes\n    {\n        symbol: 'melodic minor', // MM 1\n        groups: ['Advanced', 'Diatonic']\n    },\n    {\n        symbol: 'melodic minor second mode', // MM 2\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'lydian augmented', // MM 3\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'lydian dominant', // MM 4\n        groups: ['Advanced', 'Diatonic'],\n        long: 'mixolydian #11'\n    },\n    {\n        symbol: 'melodic minor fifth mode', // MM 5\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'locrian #2', // MM 6\n        groups: ['Expert', 'Diatonic']\n    },\n    {\n        symbol: 'altered', // MM 7\n        groups: ['Advanced', 'Diatonic']\n    },\n    //non european\n    {\n        symbol: 'kumoijoshi',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'iwato',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'pelog',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    // hyojo?\n    {\n        symbol: 'egyptian',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'in-sen',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'scriabin',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'ritusen',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'hirajoshi',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'malkos raga',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    {\n        symbol: 'vietnamese 1',\n        groups: ['Exotic', 'Pentatonic']\n    },\n    /* {\n        symbol: 'vietnamese 2',\n        groups: ['Exotic', 'Pentatonic'] // = minor pentatonic\n    }, */\n    {\n        symbol: 'lydian pentatonic', // = China (Sikora S. 61)\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'mixolydian pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'ionian pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'locrian pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'flat six pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'minor six pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'minor #7M pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'lydian #5P pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'whole tone pentatonic',\n        groups: ['Pentatonic', 'Symmetric']\n    },\n    {\n        symbol: 'flat three pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'super locrian pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'major flat two pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'lydian dominant pentatonic',\n        groups: ['Pentatonic']\n    },\n    {\n        symbol: 'neopolitan major pentatonic',\n        groups: ['Pentatonic']\n    }\n\n    /*            \n    mystery #1 piongio    prometheus major blues minor hexatonic six tone symmetric prometheus neopolitan\n     persian  spanish  oriental flamenco balinese   todi raga enigmatic lydian #9 neopolitan locrian #2  lydian minor  locrian major  romanian minor harmonic major hungarian major hungarian minor lydian dominant   neopolitan minor neopolitan major lydian diminished leading whole tone augmented heptatonic double harmonic major double harmonic lydian melodic minor fifth mode melodic minor second mode\n    bebop kafi raga  purvi raga ichikosucho bebop minor minor bebop bebop major bebop locrian bebop dominant spanish heptatonic minor six diminished\n    composite blues\n    */\n];\n\nexport const symbols = { chords, scales };\n\nexport const levels = ['Basic', 'Advanced', 'Expert'];\n\nexport function groupFilter(group) {\n    return (item) => {\n        const level = Math.max(item.groups.filter(group => levels.indexOf(group) !== -1)\n            .map(group => levels.indexOf(group) + 1));\n        const groups = level > 0 ? Array.from(new Set(levels.slice(level).concat(item.groups))) : item.groups;\n        return groups.indexOf(group) !== -1;\n    };\n}\n\nexport function scaleNames(group = 'Basic') {\n    if (!group || group === 'All') {\n        return Scale.names();\n    }\n    return scales.filter(groupFilter(group))\n        .map(scale => scale.symbol);\n}\nexport function chordNames(group = 'Basic') {\n    if (!group || group === 'All') {\n        return Chord.names();\n    }\n    return chords.filter(groupFilter(group))\n        .map(scale => scale.symbol);\n}\n\nexport function groupNames() {\n    return Array.from(new Set(levels.concat(scales.concat(chords)\n        .map(item => item.groups)\n        .reduce((groups, current) => groups.concat(current))))).concat(['All']);\n}\n\nexport function symbolName(type, symbol, long) {\n    const pool = symbols[type + 's'];\n    const match = pool.find(item => item.symbol === symbol);\n    if (!match) {\n        return symbol;\n    }\n    /* return symbol; */\n    return (long ? match.long : match.short) || symbol;\n}\n\nexport function scaleName(symbol, long = false) {\n    return symbolName('scale', symbol, long);\n}\n\nexport function chordName(symbol, long = false) {\n    return symbolName('chord', symbol, long);\n}\n\nexport function randomItem(array) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\nexport function randomScale(group) {\n    return randomItem(scaleNames(group));\n}\n\nexport function randomChord(group) {\n    return randomItem(chordNames(group));\n}","import { Chord, Distance, Interval, Note, PcSet, Scale } from 'tonal';\nimport { Synthesizer } from '../instruments/Synthesizer';\nimport { scaleNames } from '../symbols';\nimport { Harmony, step, intervalDirection } from '../harmony/Harmony';\n\nconst steps = {\n    '1P': ['1', '8'],\n    '2m': ['b9', 'b2'],\n    '2M': ['9', '2',],\n    '2A': ['#9', '#2'],\n    '3m': ['b3'],\n    '3M': ['3'],\n    '4P': ['11', '4'],\n    '4A': ['#11', '#4'],\n    '5d': ['b5'],\n    '5P': ['5'],\n    '5A': ['#5'],\n    '6m': ['b13', 'b6'],\n    '6M': ['13', '6'],\n    '7m': ['b7'],\n    '7M': ['7', '^7', 'maj7']\n};\n\n/*\nLower Interval Limits (just guidelines):\n2m: E3-F3\n2M: Eb3-F3\n3m: C3-Eb3\n3M: Bb2-D3\n4P: Bb2-Eb3\n5D: B2-F3\n5P: Bb1-F2\n6m: F2-Db3\n6M: F2-D3\n7m: F2-Eb3\n7m: F2-E3\n8P: -\n\nmore rough: top note should be D3 or higher.\ntaken from https://www.youtube.com/watch?v=iW6YeDJklhQ\n*/\n\nexport function randomNumber(n) {\n    return Math.floor(Math.random() * n)\n}\n\nexport function arraySum(array) {\n    return array.reduce((s, i) => s + i, 0);\n}\n\nexport function randomElement(array, weighted?) {\n    if (!weighted) {\n        return array[randomNumber(array.length)];\n    }\n    const r = randomNumber(arraySum(weighted)) + 1;\n    const total = weighted\n        .reduce((abs, w, i) => abs.concat(w + (abs.length ? abs[i - 1] : 0)), []);\n    return array[total.indexOf(total.find((s, i) => s >= r))];\n}\n\nexport function shuffleArray(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\n/** OLD SHEET / RHYTHM STUFF */\n\n/** Travels path along measures */\nexport function getPath(path, measures, traveled = []) {\n    if (!Array.isArray(measures[path[0]]) || path.length === 1) {\n        return measures[Math.min(path[0], measures.length - 1)];\n    }\n    return this.getPath(path.slice(1), measures[path[0]], traveled.concat(path[0]));\n}\n\nexport function getDuration(divisions, noteLength = 1, measureLength = 1) {\n    return noteLength * divisions.reduce((f, d) => f / d, 1000) * measureLength; // fraction of one\n}\n\nexport function resolveChords(pattern, measures, path, divisions = []) {\n    if (Array.isArray(pattern)) {\n        // division: array of children lengths down the path (to calculate fraction)\n        divisions = [].concat(divisions, [pattern.length]);\n        return pattern.map((p, i) => this.resolveChords(p, measures, path.concat([i]), divisions));\n    }\n    if (pattern === 0) {\n        return 0;\n    }\n    const fraction = getDuration(divisions, pattern);\n    if (fraction === 0) {\n        console.warn('fraction is 0', pattern);\n    }\n    if (fraction === NaN) {\n        console.warn('fraction NaN', divisions, pattern);\n    }\n    return { chord: this.getPath(path, measures), pattern, path, divisions, fraction };\n}\n\nexport function hasOff(pattern, division = 3) {\n    return Array.isArray(pattern) && pattern.length === division && pattern[division - 1] !== 0;\n}\n\n// replaces offs on last beat with next chord + erases next one\nexport function offbeatReducer(settings) {\n    // TODO: find out why some offbeats sound sketchy\n    return (measures, bar, index) => {\n        const last = index > 0 ? measures[index - 1] : null;\n        if (last && this.hasOff(last[settings.cycle - 1], settings.division)) {\n            last[settings.cycle - 1][settings.division - 1] = bar[0];\n            bar[0] = 0;\n        }\n        return measures.concat([bar]);\n    };\n}\n\n\nexport function randomSynth(mix, allowed = ['sine', 'triangle', 'square', 'sawtooth'], settings = {}) {\n    const gains = {\n        sine: 0.9,\n        triangle: 0.8,\n        square: 0.2,\n        sawtooth: 0.3\n    }\n    const wave = randomElement(allowed);\n    return new Synthesizer(Object.assign({ gain: gains[wave], type: wave, mix }, settings));\n}\n\nexport interface ADSRParams {\n    attack?: number,\n    decay?: number,\n    sustain?: number,\n    release?: number,\n    gain?: number,\n    duration?: number,\n    endless?: boolean\n}\n\nexport function adsr({ attack, decay, sustain, release, gain, duration, endless }: ADSRParams, time, param) {\n    // console.log('adsr', attack, decay, sustain, release, gain, duration, time);\n    param.linearRampToValueAtTime(gain, time + attack);\n    param.setTargetAtTime(sustain * gain, time + Math.min(attack + decay, duration), decay);\n    if (!endless) {\n        param.setTargetAtTime(0, time + Math.max(duration - attack - decay, attack + decay, duration), release);\n    }\n}\n\nexport function randomDelay(maxMs) {\n    return Math.random() * maxMs * 2 / 1000;\n}\n\nexport function isInRange(note, range) {\n    return Distance.semitones(note, range[0]) <= 0 && Distance.semitones(note, range[1]) >= 0;\n}\n\nexport function transposeNotes(notes, interval) {\n    return notes.map(note => Distance.transpose(note, interval));\n}\n\nexport function transposeToRange(notes, range, times = 0) {\n    if (times > 10) {\n        return notes;\n    }\n    if (notes.find(note => Distance.semitones(note, range[0]) > 0)) {\n        notes = notes.map(note => Distance.transpose(note, '8P'));\n        console.log('tp up');\n        return transposeToRange(notes, range, ++times);\n    }\n    if (notes.find(note => Distance.semitones(note, range[1]) < 0)) {\n        console.log('tp down');\n        notes = notes.map(note => Distance.transpose(note, '-8P'));\n        return transposeToRange(notes, range, ++times);\n    }\n    return notes;\n}\n\nexport function getAverageMidi(notes, offset?) {\n    return notes.reduce((sum, note) => sum + Harmony.getMidi(note, offset), 0) / notes.length;\n}\n\nexport function getDistancesToRangeEnds(notes: string[], range: string[]) {\n    if (notes.length > 2) {\n        notes = [notes[0], notes[notes.length - 1]];\n    }\n    const midi = notes.map(n => Harmony.getMidi(n));\n    const rangeMidi = range.map(n => Harmony.getMidi(n));\n    return [midi[0] - rangeMidi[0], rangeMidi[1] - midi[1]];\n}\n\nexport function getRangePosition(note: string | number, range) {\n    note = Harmony.getMidi(note);\n    range = range.map(n => Harmony.getMidi(n));\n    const semitones = [note - range[0], range[1] - range[0]];\n    return semitones[0] / semitones[1];\n}\n\nexport function getRangeDirection(note, range, defaultDirection: intervalDirection = 'down', border = 0): { direction: intervalDirection, force: boolean } {\n    const position = getRangePosition(note, range);\n    if (position <= border) {\n        return { direction: 'up', force: true }\n    } if (position >= (1 - border)) {\n        return { direction: 'down', force: true }\n    }\n    return {\n        direction: defaultDirection, force: false\n    }\n}\n\n// accepts both strings or numbers where negative means minor, \n// returns unified step string that can be turned into an interval\nexport function getStep(step: step) {\n    if (typeof step === 'number' && step < 0) {\n        step = 'b' + (step * -1);\n    }\n    return step + ''; // to string\n}\n\nexport function getIntervalFromStep(step: step) {\n    step = getStep(step);\n    const interval = Object.keys(steps)\n        .find(i => steps[i].includes(step));\n    if (!interval) {\n        // console.warn(`step ${step} has no defined inteval`);\n    }\n    return interval;\n}\n\nexport function getStepsFromDegree(degree) {\n    return\n}\n\nexport function getStepInChord(note, chord, group?) {\n    return getStepFromInterval(\n        Distance.interval(\n            Chord.tokenize(Harmony.getTonalChord(chord))[0],\n            Note.pc(note))\n    );\n}\n\nexport function getChordScales(chord, group = 'Diatonic') {\n    const tokens = Chord.tokenize(Harmony.getTonalChord(chord));\n    const isSuperset = PcSet.isSupersetOf(Chord.intervals(tokens[1]));\n    return scaleNames(group).filter(name => isSuperset(Scale.intervals(name)));\n}\n\nexport function pickChordScale(chord, group = 'Diatonic') {\n    const scales = getChordScales(chord);\n    if (!scales.length) {\n        console.warn(`cannot pick chord scale: no scales found for chord ${chord} in group ${group}`);\n        return;\n    }\n    return scales[0];\n}\n\n\nexport function findDegree(degreeOrStep: number | step, intervalsOrSteps: string[]) {\n    const intervals = intervalsOrSteps.map(i => isInterval(i) ? i : getIntervalFromStep(i));\n    if (typeof degreeOrStep === 'number') { // is degree\n        const degree = Math.abs(degreeOrStep);\n        return intervals.find(i => {\n            i = Harmony.minInterval(i, 'up');\n            if (!steps[i]) {\n                console.error('interval', i, 'is not valid', intervals);\n            }\n            return !!(steps[i].find(step => getDegreeFromStep(step) === degree));\n        });\n    }\n    // is step\n    const step = getStep(degreeOrStep);\n    return intervals.find(i => i.includes(step) ||\n        i === getIntervalFromStep(step));\n}\n\nexport function hasDegree(degree, intervals) {\n    return !!findDegree(degree, intervals);\n}\n\nexport function hasAllDegrees(degrees, intervals) {\n    return degrees.reduce((res, d) => res && hasDegree(d, intervals), true);\n}\n\nexport function getScaleDegree(degree, scale) {\n    return findDegree(degree, Scale.intervals(scale));\n}\n\n\nexport function getScalePattern(pattern, scale) {\n    return pattern.map(degree => getScaleDegree(degree, scale));\n}\n\nexport function renderIntervals(intervals, root) {\n    return intervals.map(i => Distance.transpose(root, i));\n}\n\nexport function renderSteps(steps, root) {\n    return renderIntervals(steps.map(step => getIntervalFromStep(step)), root);\n}\n\nexport function permutateIntervals(intervals, pattern) {\n    return pattern.map(d => findDegree(d, intervals));\n}\n\nexport function getStepFromInterval(interval) {\n    return steps[interval] ? steps[interval][0] : 0;\n}\n\nexport function getDegreeFromInterval(interval = '-1', simplify = false) {\n    const fixed = Harmony.fixInterval(interval, simplify) || '';\n    const match = fixed.match(/[-]?([1-9])+/);\n    if (!match) {\n        return 0;\n    }\n    return Math.abs(parseInt(match[0], 10));\n}\n\nexport function getDegreeFromStep(step: step) {\n    step = getStep(step);\n    return parseInt(step.match(/([1-9])+/)[0], 10);\n}\n\nexport function getDegreeInChord(degree, chord) {\n    chord = Harmony.getTonalChord(chord);\n    const intervals = Chord.intervals(chord);\n    const tokens = Chord.tokenize(chord);\n    return Distance.transpose(tokens[0], findDegree(degree, intervals));\n}\n\nexport function getPatternInChord(pattern, chord) {\n    chord = Harmony.getTonalChord(chord);\n    const intervals = Chord.intervals(chord);\n    const tokens = Chord.tokenize(chord);\n    let permutation;\n    if (hasAllDegrees(pattern, intervals)) {\n        permutation = permutateIntervals(intervals, pattern);\n    } else {\n        // not all degrees of the pattern are in the chord > get scale\n        const scale = pickChordScale(chord);\n        permutation = permutateIntervals(Scale.intervals(scale), pattern);\n    }\n    if (tokens[0]) {\n        return renderIntervals(permutation, tokens[0]);\n    }\n    return permutation;\n}\n\n// TODO: other way around: find fixed interval pattern in a scale\n// TODO: motives aka start pattern from same note in different scale\n// TODO: motives aka start pattern from different note in same scale\n// TODO: motives aka start pattern from different note in different scale\n\nexport function getDigitalPattern(chord) {\n    chord = Harmony.getTonalChord(chord);\n    const intervals = Chord.intervals(chord);\n    if (intervals.includes('3m')) {\n        return [1, 3, 4, 5];\n    } else if (intervals.includes('3M')) {\n        return [1, 2, 3, 5];\n    } else {\n        return [1, 1, 1, 1];\n    }\n}\n\nexport function renderDigitalPattern(chord) {\n    return getPatternInChord(getDigitalPattern(chord), chord);\n}\n\nexport function getGuideTones(chord) {\n    chord = Harmony.getTonalChord(chord);\n    return getPatternInChord([3, 7], chord);\n}\n\n\nexport function isFirstInPath(path, index) {\n    return path.slice(index)\n        .reduce((sum, value) => sum + value, 0) === 0;\n}\n\nexport function isBarStart(path) {\n    return isFirstInPath(path, 1);\n}\n\nexport function isFormStart(path) {\n    return isFirstInPath(path, 0);\n}\n\nexport function isOffbeat(path) {\n    return path[2] !== 0;\n}\n\n\nexport function otherDirection(direction, defaultDirection?) {\n    if (direction === 'up') {\n        return 'down';\n    } else if (direction === 'down') {\n        return 'up'\n    }\n    return defaultDirection;\n}\n\n\n\nexport function totalDiff(diff) {\n    const total = diff.reduce((weight, diff) => {\n        weight.added += diff.added ? diff.count : 0;\n        weight.removed += diff.added ? diff.count : 0;\n        weight.kept += (!diff.added && !diff.removed) ? diff.count : 0;\n        return weight;\n    }, { added: 0, removed: 0, kept: 0, balance: 0 });\n    total.balance = total.added - total.removed;\n    total.changes = total.added + total.removed;\n    return total;\n}\n\n/** Reorders the given notes to contain the given step as close as possible */\nexport function sortByDegree(notes, degree) {\n    degree = Math.max(degree, (degree + 8) % 8)\n    /* const semitones = Interval.semitones(interval); */\n    const diffDegrees = (a, b) => Math.abs(getDegreeFromInterval(Distance.interval(a, b)) - degree);\n    /* const diffTones = (a, b) => Math.abs(Distance.interval(a, b) - semitones); */\n    notes = notes.slice(1).reduce((chain, note) => {\n        const closest = notes\n            .filter(n => !chain.includes(n))\n            .sort((a, b) => diffDegrees(chain[0], a) < diffDegrees(chain[0], b) ? -1 : 1);\n        chain.unshift(closest[0]);\n        return chain;\n    }, [notes[0]]).reverse();\n\n    return notes;\n}\n\n/** Returns the given notes with octaves either moving bottom up or top down */\nexport function renderAbsoluteNotes(notes, octave = 3, direction: intervalDirection = 'up') {\n    return notes.reduce((absolute, current, index, notes) => {\n        if (index === 0) {\n            return [current + octave];\n        }\n        let interval = Distance.interval(notes[index - 1], current);\n        interval = Harmony.minInterval(interval, direction);\n        if (interval === '1P') {\n            interval = direction === 'down' ? '-8P' : '8P';\n        }\n        absolute.push(Distance.transpose(absolute[index - 1], interval));\n        return absolute;\n    }, []);\n}\n\nexport function getIntervals(notes) {\n    return notes.reduce((intervals, note, index, notes) => {\n        if (index === 0) {\n            return [];\n        }\n        intervals.push(Distance.interval(notes[index - 1], note));\n        return intervals;\n    }, []);\n}\n\nexport function isInterval(interval) {\n    return typeof Interval.semitones(interval) === 'number';\n}\n\nexport function smallestInterval(intervals) {\n    return intervals.reduce((min, current) => {\n        if (!min || Distance.semitones(current) < Distance.semitones(min)) {\n            return current;\n        }\n        return min;\n    });\n}\n\nexport function sortNotes(notes, direction: intervalDirection = 'up') {\n    return notes.sort((a, b) => Harmony.getMidi(a) - Harmony.getMidi(b));\n}\n\nexport function analyzeVoicing(notes, root?) {\n    if (!notes || notes.length < 2) {\n        throw new Error('Can only analyze Voicing with at least two notes');\n    }\n    notes = sortNotes(notes);\n    root = root || notes[0]; // TODO: get degrees\n    const intervals = getIntervals(notes);\n    const sortedIntervals = intervals.sort(Harmony.sortMinInterval());\n    return {\n        notes,\n        minInterval: sortedIntervals[0],\n        maxInterval: sortedIntervals[sortedIntervals.length - 1],\n        intervals,\n        spread: Distance.interval(notes[0], notes[notes.length - 1])\n    }\n}\n\n\nexport function semitoneDifference(intervals) {\n    return intervals.reduce((semitones, interval) => {\n        return semitones + Math.abs(Interval.semitones(interval))\n    }, 0);\n}\nexport function semitoneMovement(intervals) {\n    return intervals.reduce((semitones, interval) => {\n        return semitones + Interval.semitones(interval)\n    }, 0);\n}\n\nexport function longestChild(array: any[][]) {\n    return array.reduce((max, current) => (current.length > max.length ? current : max), array[0]);\n}\n\nexport function isPitchClass(note) {\n    return Note.pc(note) === note;\n}\n\n\nexport function mapTree(\n    tree,\n    modifier?,\n    simplify = false,\n    path = [],\n    siblings = [],\n    position = 0) {\n    // skip current tree if only one child\n    if (simplify && Array.isArray(tree) && tree.length === 1) {\n        return mapTree(\n            tree[0], modifier, simplify,\n            path, siblings, position\n        );\n    }\n\n    let fraction = siblings.reduce((f, d) => f / d, 1);\n    if (!Array.isArray(tree)) {\n        return modifier ? modifier(tree, { path, siblings, fraction, position }) : tree;\n    }\n    if (Array.isArray(tree)) {\n        siblings = siblings.concat([tree.length]);\n        fraction = fraction / tree.length;\n        return tree.map((subtree, index) =>\n            mapTree(\n                subtree, modifier, simplify,\n                path.concat([index]),\n                siblings,\n                position + index * fraction\n            )\n        )\n    }\n}\n\nexport function flattenTree(tree) {\n    const flat = []\n    mapTree(tree, (value, props) => flat.push(Object.assign(props, { value })));\n    return flat;\n}\n\nexport function expandTree(tree) {\n    // TODO\n}\n\n/* Returns true if the given intervals are all present in the chords interval structure\nIntervals can be appendend with \"?\" to indicate that those degrees could also be omitted \n(but when present they should match)\n*/\nexport function chordHasIntervals(chord, intervals) {\n    chord = Harmony.getTonalChord(chord);\n    const has = Chord.intervals(chord);\n    return intervals.reduce((match, current) => {\n        const isOptional = current.includes('?');\n        const isForbidden = current.includes('!');\n        if (isOptional) {\n            current = current.replace('?', '');\n            return (!hasDegree(getDegreeFromInterval(current), has) ||\n                has.includes(current)) && match;\n        }\n        if (isForbidden) {\n            current = current.replace('!', '');\n            return !hasDegree(getDegreeFromInterval(current), has);\n        }\n        return has.includes(current) && match;\n    }, true);\n}\n\nexport function isDominantChord(chord) {\n    return chordHasIntervals(chord, ['3M', '7m']) || chordHasIntervals(chord, ['!3', '4P', '7m']);\n}\nexport function isMajorChord(chord) {\n    return chordHasIntervals(chord, ['3M', '7M?']);\n}\nexport function isMinorChord(chord) {\n    return chordHasIntervals(chord, ['3m']);\n}\nexport function isMinorTonic(chord) {\n    return chordHasIntervals(chord, ['3m', '5P', '13M?', '7M?']);\n}\n\nexport function getChordType(chord) {\n    if (isDominantChord(chord)) {\n        return 'dominant';\n    }\n    if (isMajorChord(chord)) {\n        return 'major';\n    }\n    if (isMinorTonic(chord)) {\n        return 'minor-tonic';\n    }\n    if (isMinorChord(chord)) {\n        return 'minor';\n    }\n}\n\nexport function getChordNotes(chord, validate?) {\n    chord = Harmony.getTonalChord(chord);\n    const tokens = Chord.tokenize(chord);\n    const notes = Chord.notes(chord);\n    return notes.filter(note => {\n        const interval = Distance.interval(tokens[0], note);\n        return !validate || validate(note, {\n            root: tokens[0],\n            symbol: tokens[1],\n            interval,\n            step: getStepFromInterval(interval),\n            degree: getDegreeFromInterval(interval)\n        });\n    });\n}\n\nexport function validateWithoutRoot(note, { degree }) {\n    return degree !== 1;\n}\n\n// OLD...\nexport function getVoicing(chord, { voices, previousVoicing, omitRoot, quartal }: {\n    previousVoicing?: string[],\n    voices?: number,\n    omitRoot?: boolean,\n    quartal?: boolean\n} = {}) {\n    chord = Harmony.getTonalChord(chord);\n    const tokens = Chord.tokenize(chord);\n    let notes = Chord.notes(chord);\n    if (omitRoot) {\n        notes = notes.filter(n => n !== tokens[0]);\n    }\n    if (quartal) {\n    }\n    if (previousVoicing) {\n\n    }\n    return notes;\n}\n\nexport function semitoneDistance(noteA, noteB) {\n    return Interval.semitones(Distance.interval(noteA, noteB));\n}\n\nexport function noteArray(range) {\n    const slots = Interval.semitones(Distance.interval(range[0], range[1]));\n    return new Array(slots + 1)\n        .fill('')\n        .map((v, i) => Distance.transpose(range[0], Interval.fromSemitones(i)))\n        .map(n => Note.simplify(n))\n}\n\n\nexport function factorial(n) {\n    let value = 1;\n    for (let i = 2; i <= n; ++i) {\n        value *= i;\n    }\n    return value;\n}\n\n\n\n// finds best combination following the given notes, based on minimal movement\n/* export function bestCombination(notes, combinations = []) {\n    return combinations.reduce((best, current) => {\n        const currentMovement = voicingDifference(notes, current);\n        const bestMovement = voicingDifference(notes, best);\n        if (Math.abs(currentMovement) < Math.abs(bestMovement)) {\n            return current;\n        }\n        return best;\n    });\n} */\n\n/* export function sortCombinationsByMovement(notes, combinations, direction: intervalDirection = 'up', min = true) {\n    const movements = combinations.map((combination) => ({\n        movement: voicingMovement(notes, combination, min),\n        combination\n    }));\n    let right = movements.filter(move => direction === 'up' ? move >= 0 : move <= 0);\n    if (!right.length) {\n        right = movements;\n    }\n    let sorted = right.sort((a, b) => a.movement - b.movement);\n    if (direction === 'down') {\n        sorted = sorted.reverse();\n    }\n    return sorted.map(movement => movement.combination);\n}\n */","import { randomElement } from \"../util/util\";\n\nconst off = () => randomElement([0, [0, 0, 2]], [6, 1]);\nconst eightFour = () => randomElement(\n    [[1, 0, 1], 1, [0, 0, 1, 1]],\n    [4, 2, 1]\n);\nconst eightOff = () => randomElement(\n    [[1, 0, 1], [0, 0, 1]],\n    [4, 1]\n);\nconst halfTriplet = () => randomElement(\n    [\n        [2, 0],\n        [[2, 0, 2], [0, 2, 0]],\n        [1, 1, 1, 1]\n    ],\n    [2, 1, 1]\n);\n\n\nexport const swing = {\n    name: 'Swing',\n    tempo: 130,\n    chords: ({ measure, settings }) => {\n        const r = Math.random() > 0.5 ? .6 : 0;\n        const t = `${settings.cycle}/${measure.length}`;\n        if (t === '4/1') {\n            return randomElement([\n                [[1, 0], [0, 0, 7], 0, 0],\n                [1, [0, 0, 2], 0, off()],\n                [[0, 0, 1], 0, 2, 0],\n                [[0, 0, 4], 0, 1, 0],\n                [2, 0, 0, 0],\n                [3, 0, 0, 0],\n                [1, 0, r, off()],\n                [[0, 0, 2], 0, r, 0],\n                [1.5, [0, 0, 2], 0, off()],\n            ]);//, [2, 1, 1]\n        }\n        if (t === '4/2') {\n            return randomElement([\n                [[1, 0], [0, 0, 7], 0, 0],\n                [1, [0, 0, 3], 0, 0],\n                [1, 0, 2, 0],\n                [2, 0, 1, 0],\n                [1, 0, .7, off()],\n                [[1, 0, 0], 0, .7, off()],\n                [[4, 0, 0], [0, 0, 2.8], 0, off()],\n            ]);\n        }\n\n        if (t === '4/3') {\n            return [1, [0, 0, 2], [0, 0, 4], 0];\n        }\n        if ('4/4') {\n            return randomElement([\n                [1, 1, 1, 1],\n                [[1, 0, 2], [0, 0, 2], 0, 1]\n            ]);\n        }\n    },\n    bass: () => randomElement([\n        [1, 1, 1, 1],\n    ]),\n    crash: ({ measures, index }) => {\n        const fill = index !== 0 && index % measures.length === 0;\n        if (fill) {\n            return [4, 0, 0, 0];\n        }\n        return [0, 0, 0, 0];\n    },\n    ride: ({ measures, index }) => {\n        return randomElement([\n            [.6, [.9, 0, 1], .6, [.9, 0, 1]],\n            [.6, [.4, 0, 1], .8, [0, 0, 1],],\n            [.6, .9, [.6, 0, 1], 1],\n            [.6, .9, .6, [.9, 0, 1]],\n        ], [3, 2, 1, 2])\n    },\n    hihat: () => [0, .8, 0, 1],\n    solo: () => randomElement([\n        [eightFour(), eightFour(), eightFour(), eightFour()],\n        [eightFour(), 2, 0, eightFour()],\n        [0, 0, eightFour(), eightFour()],\n        [[1, 0, 4], 0, eightFour(), eightFour()],\n        [3, 0, 0, eightFour()],\n        /* [0, 1, 2, 0], */\n        [...halfTriplet(), ...halfTriplet()],\n        [eightOff(), eightOff(), eightOff(), eightOff()],\n    ])\n    /* solo: () => [1, 1, 0, 1] */\n};","import { Measure, MeasureOrString } from './Measure';\n\nexport type Leadsheet = Array<MeasureOrString>;\n\nexport type Song = {\n    name: string,\n    composer?: string,\n    style?: string,\n    bpm?: number,\n    repeats?: number,\n    key?: string,\n    sheet: Leadsheet\n}\n\nexport type JumpSign = {\n    pair?: string,\n    move?: number,\n    fine?: boolean,\n    validator?: (state) => boolean,\n}\n\nexport type SheetState = {\n    measures?: [],\n    index?: number,\n    sheet?: Leadsheet,\n    jumps?: { [key: number]: number },\n    visits?: { [key: number]: number },\n    nested?: boolean,\n    fallbackToZero?: boolean,\n    forms?: number;\n    firstTime?: boolean; // flips to false after first chorus is complete\n    lastTime?: boolean; // flips to true when last chorus starts\n}\n\n\nexport class Sheet {\n    static jumpSigns: { [sign: string]: JumpSign } = {\n        '}': { pair: '{', move: -1 },\n        'DC': {},\n        'DS': { pair: 'Segno', move: -1 },\n        'DS.Fine': { pair: 'Segno', move: -1 },\n        'DS.Coda': { pair: 'Segno', move: -1 },\n        'DC.Fine': {},\n        'DC.Coda': {},\n        'Fine': {\n            fine: true,\n            validator: (state) => Sheet.readyForFineOrCoda(state)\n        },\n        'ToCoda': {\n            pair: 'Coda', move: 1,\n            validator: (state) => Sheet.readyForFineOrCoda(state)\n        }\n    };\n\n    static render(sheet, options = {}): Leadsheet {\n        let state: SheetState = {\n            sheet,\n            measures: [],\n            forms: 1,\n            nested: true,\n            fallbackToZero: true,\n            firstTime: true,\n            ...options\n        };\n        state = {\n            ...state,\n            ...Sheet.newForm(state)\n        };\n\n        let runs = 0;\n        while (runs < 100 && state.index < sheet.length) {\n            runs++;\n            state = Sheet.nextMeasure(state);\n        }\n        return state.measures/* .map(m => Measure.from(m)) */;\n    }\n\n    static nextMeasure(state): SheetState {\n        state = {\n            ...state,\n            ...Sheet.nextSection(state)\n        } // moves to the right house (if any)\n        let { sheet, index, measures } = state;\n        state = {\n            ...state,\n            measures: measures.concat([{\n                ...Measure.from(sheet[index]),\n                index: index // add index for mapping\n            }]),\n            ...Sheet.nextIndex(state),\n        }\n        return Sheet.nextForm(state);\n    }\n\n    static nextIndex(state): SheetState {\n        let { sheet, index, jumps, nested, fallbackToZero } = state;\n        if (!Sheet.shouldJump({ sheet, index, jumps })) {\n            return {\n                index: index + 1\n            };\n        }\n        const braces = [Sheet.getJumpDestination({ sheet, index, fallbackToZero, nested }), index];\n        jumps = Sheet.wipeKeys(jumps, [braces[0], braces[1] - 1]); // wipes indices inside braces\n        return {\n            index: braces[0],\n            jumps: { // count jumps up\n                ...jumps,\n                [braces[1]]: (jumps[braces[1]] || 0) + 1\n            }\n        }\n    }\n\n    static newForm(state): SheetState {\n        return {\n            ...state,\n            index: 0,\n            jumps: {},\n            visits: {},\n            lastTime: state.forms === 1,\n        }\n    }\n\n    static nextForm(state, force = false): SheetState {\n        let { sheet, index, forms } = state;\n        if (force || (index >= sheet.length && forms > 1)) {\n            return Sheet.newForm({\n                ...state,\n                firstTime: false,\n                forms: forms - 1\n            });\n        }\n        return state;\n    }\n\n    // moves the index to the current house (if any)\n    static nextSection(state: SheetState): SheetState {\n        let { sheet, index, visits, firstTime, lastTime } = state;\n        // skip intro when not firstTime\n        if (!firstTime && Measure.from(sheet[index]).section === 'IN') {\n            return {\n                index: Sheet.getNextSectionIndex({ sheet, index }),\n            }\n        }\n        // skip coda when not last time\n        if (Measure.hasSign('Coda', sheet[index]) && !Sheet.readyForFineOrCoda(state)) {\n            return Sheet.nextForm(state, true);\n        }\n        if (!Measure.hasHouse(sheet[index], 1)) {\n            return {};\n        }\n        let next = Sheet.getNextHouseIndex({ sheet, index, visits });\n        if (next === -1) {\n            next = index;\n            visits = {}; // reset visits\n        }\n        return {\n            visits: {\n                ...visits,\n                [next]: (visits[next] || 0) + 1\n            },\n            index: next\n        }\n    }\n    /** Starts at a given index, stops when the pair functions returned equally often */\n    static findPair(\n        sheet,\n        index: number,\n        pairs: Array<(measure?: Measure, options?: { sheet?: Leadsheet, index?: number }) => boolean>,\n        move = 1,\n        stack = 0): number {\n        let match = -1; // start with no match\n        while (match === -1 && index >= 0 && index < sheet.length) {\n            if (pairs[0](sheet[index], { sheet, index })) { // same sign\n                stack++;\n            }\n            if (pairs[1](sheet[index], { sheet, index })) { // pair sign\n                stack--;\n            }\n            if (stack === 0) { // all pairs resolved > match!\n                match = index;\n            } else {\n                index += move;\n            }\n        }\n        return match;\n    }\n\n    static findMatch(\n        sheet,\n        index: number,\n        find: (measure?: Measure, options?: { sheet?: Leadsheet, index?: number }) => boolean,\n        move = 1): number {\n        let match = -1; // start with no match\n        while (match === -1 && index >= 0 && index < sheet.length) {\n            if (find(sheet[index], { sheet, index })) {\n                match = index;\n            } else {\n                index += move;\n            }\n        }\n        return match;\n\n    }\n    // simple matching for brace start, ignores nested repeats\n    static getJumpDestination(state: SheetState): number {\n        let { sheet, index, fallbackToZero, nested } = state;\n        const sign = Measure.getJumpSign(sheet[index]);\n        // if fine > jump till end\n        if (sign.fine) { return sheet.length; }\n        // if no pair given => da capo\n        if (!sign.pair) { return 0; }\n        // if nested mode on and opening brace is searched, use getBracePair..\n        if (nested !== false && sign.pair === '{') {\n            return Sheet.getBracePair({ sheet, index, fallbackToZero });\n        }\n        const destination = Sheet.findMatch(sheet, index,\n            (m) => Measure.hasSign(sign.pair, m),\n            sign.move || -1); // default move back\n        if (fallbackToZero) {\n            // default to zero when searching repeat start (could be forgotten)\n            return destination === -1 ? 0 : destination;\n        }\n        return destination;\n    }\n\n    // returns the index of the repeat sign that pairs with the given index\n    static getBracePair(\n        { sheet, index, fallbackToZero }: { sheet: Leadsheet, index: number, fallbackToZero?: boolean }\n    ): number {\n        if (fallbackToZero === undefined) {\n            fallbackToZero = true;\n        }\n        if (Measure.hasSign('{', sheet[index])) {\n            return Sheet.findPair(sheet, index,\n                [\n                    (m) => Measure.hasSign('{', m),\n                    (m) => Measure.hasSign('}', m),\n                ]\n                , 1);\n        } else if (Measure.hasSign('}', sheet[index])) {\n            const pair = Sheet.findPair(sheet, index,\n                [\n                    (m, state) => {\n                        // this logic could be infinitely complex, having many side effects and interpretations\n                        // the current behaviour is similar to musescore or ireal handling braces\n                        if (!Measure.hasSign('}', m)) {\n                            return false;\n                        }\n                        if (index === state.index) {\n                            return true;\n                        }\n                        const relatedHouse = Sheet.getRelatedHouse({ sheet, index: state.index });\n                        return relatedHouse === -1;\n                    },\n                    (m) => Measure.hasSign('{', m)\n                ]\n                , -1);\n            if (fallbackToZero) {\n                return pair === -1 ? 0 : pair; // default to zero when searching repeat start (could be forgotten)\n            }\n            return pair;\n        }\n        return -1;\n    }\n\n    // returns true if the house at the given index has not been visited enough times\n    static canVisitHouse({ sheet, index, visits }): boolean {\n        let houses = sheet[index].house;\n        if (houses === undefined) {\n            return false;\n        }\n        if (!Array.isArray(houses)) {\n            houses = [houses];\n        }\n        const visited = visits[index] || 0;\n        return visited < houses.length\n    }\n\n    // returns the next house that can be visited (from the given index)\n    static getNextHouseIndex({ sheet, index, visits }, move = 1): number {\n        return Sheet.findMatch(sheet, index,\n            (m, step) => Measure.hasHouse(m) && Sheet.canVisitHouse({ sheet, index: step.index, visits })\n            , move);\n    }\n\n    static getNextSectionIndex({ sheet, index }, move = 1): number {\n        return Sheet.findMatch(sheet, index + 1,\n            (m) => Measure.from(m).section !== undefined, 1);\n    }\n\n    // wipes all keys in the given range\n    static wipeKeys(numberMap, range): { [key: number]: number } {\n        const wiped = {};\n        Object.keys(numberMap)\n            .map(i => parseInt(i))\n            .filter(i => i < range[0] || i > range[1])\n            .forEach(i => wiped[i] = numberMap[i]);\n        return wiped;\n    }\n\n\n    static getRelatedHouse({ sheet, index }): number {\n        const latestHouse = Sheet.findPair(sheet, index,\n            [\n                (m, state) => index === state.index || Measure.hasSign('}', m),\n                (m) => Measure.hasHouse(m)\n            ], -1);\n        return latestHouse;\n    }\n\n    static isFirstHouse({ sheet, index }): boolean {\n        return Measure.hasHouse(sheet[index], 1);\n    }\n\n    static getAllowedJumps({ sheet, index }) {\n        if (!Measure.hasJumpSign(sheet[index])) {\n            return 0;\n        }\n        const measure = Measure.from(sheet[index]);\n        if (measure.times !== undefined) {\n            return measure.times;\n        }\n        return 1;\n    }\n\n    static readyForFineOrCoda({ sheet, index, jumps, lastTime }: SheetState): boolean {\n        const signs = Object.keys(Sheet.jumpSigns)\n            .filter(s => s.includes('DC') || s.includes('DS'));\n        const backJump = Sheet.findMatch(sheet, index,\n            (m) => signs.reduce((match, sign) => match || Measure.hasSign(sign, m), false)\n        );\n        if (backJump === -1) {\n            return lastTime; // last time\n        }\n        return jumps[backJump] > 0;\n    }\n\n\n    static shouldJump({ sheet, index, jumps }: SheetState) {\n        if (!Measure.hasJumpSign(sheet[index])) {\n            return false;\n        }\n        const sign = Measure.getJumpSign(sheet[index]);\n        if (sign.validator && !sign.validator({ sheet, index, jumps })) {\n            return false;\n        }\n        const allowedJumps = Sheet.getAllowedJumps({ sheet, index });\n        const timesJumped = jumps[index] || 0;\n        return timesJumped < allowedJumps;\n    }\n}\n\n/*\nTODO:\n\nmore typings\nspecial sections:\nIN: only play the first time\nCODA: only play last time\n\ntest standards:\n- Alice in Wonderland (dc al 2nd ending)\n- All or Nothing at All (dc al coda)\n- Are you real (intro + coda)\n- Armageddon (intro)\n- The Bat (coda sign inside repeat): ireal plays coda directly first time..\n- Bennys Tune (intro+coda sign inside repeat): ireal plays coda directly first time..\n- Bess You Is My Woman (coda sign inside repeat): ireal plays coda directly first time..\n- Blessed Relief (nested repeats, with odd behaviour)\n- Blue in Green (coda)\n- Miles Ahead (coda)\n*/\n","import { JumpSign, Sheet } from './Sheet';\n\nexport type MeasureOrString = Measure | string[] | string;\n\nexport interface Measure {\n    chords?: string[],\n    //voices?: string[][],\n    signs?: string[],\n    comments?: string[],\n    house?: number | number[],\n    times?: number,\n    section?: string,\n    idle?: true // bar is repeated\n};\n\nexport class Measure implements Measure {\n    static from(measure: MeasureOrString): Measure {\n        if (typeof measure === 'string') {\n            return {\n                chords: [measure]\n            }\n        }\n        if (Array.isArray(measure)) {\n            return {\n                chords: [].concat(measure)\n            }\n        }\n        return Object.assign({}, measure);\n        // return measure;\n    }\n\n    static hasSign(sign: string, measure: MeasureOrString): boolean {\n        measure = Measure.from(measure);\n        return !!measure.signs && measure.signs.includes(sign);\n    }\n\n    static hasHouse(measure: MeasureOrString, number?: number): boolean {\n        measure = Measure.from(measure);\n        let { house } = measure;\n        if (!house) {\n            return false;\n        } else if (number === undefined) {\n            return true;\n        }\n        if (!Array.isArray(house)) {\n            house = [house];\n        }\n        return house.includes(number);\n    }\n\n    static getJumpSign(measure): JumpSign {\n        const signs = (Measure.from(measure).signs || [])\n            .filter(s => Object.keys(Sheet.jumpSigns).includes(s));\n        if (signs.length > 1) {\n            console.warn('measure cannot contain more than one repeat sign', measure);\n        }\n        return Sheet.jumpSigns[signs[0]];\n    }\n\n    static hasJumpSign(measure: MeasureOrString): boolean {\n        return Object.keys(Sheet.jumpSigns)\n            .reduce((match, current) => match || Measure.hasSign(current, measure), false);\n    }\n}","import { Leadsheet } from \"./Sheet\";\nimport { Measure } from './Measure';\n\n// extension of https://github.com/daumling/ireal-renderer/blob/master/src/ireal-renderer.js\n\nexport class RealParser {\n    /**\n     * The RegExp for a complete chord. The match array contains:\n     * 1 - the base note\n     * 2 - the modifiers (+-ohd0123456789 and su for sus)\n     * 3 - any comments (may be e.g. add, sub, or private stuff)\n     * 4 - the \"over\" part starting with a slash\n     * 5 - the top chord as (chord)\n     * @type RegExp\n     */\n\n    static chordRegex = /^([ A-GW][b#]?)((?:sus|[\\+\\-\\^\\dhob#])*)(\\*.+?\\*)*(\\/[A-G][#b]?)?(\\(.*?\\))?/;\n\n    static regExps = [\n        /^\\*[a-zA-Z]/,\t\t\t\t\t\t\t// section\n        /^T\\d\\d/,\t\t\t\t\t\t\t\t// time measurement\n        /^N./,\t\t\t\t\t\t\t\t\t// repeat marker\n        /^<.*?>/,\t\t\t\t\t\t\t\t// comments\n        /^ \\(.*?\\)/,\t\t\t\t\t\t\t// blank and (note)\n        RealParser.chordRegex,\t\t\t\t// chords\n        /^LZ/,\t\t\t\t\t\t\t\t\t// 1 cell + right bar\n        /^XyQ/,\t\t\t\t\t\t\t\t\t// 3 empty cells\n        /^Kcl/\t\t\t\t\t\t\t\t\t// repeat last bar\n    ];\n\n    static replacements = {\n        \"LZ\": [\" \", \"|\"],\n        \"XyQ\": [\" \", \" \", \" \"],\n        \"Kcl\": [\"|\", \"x\", \" \"]\n    };\n\n    static getChord(iRealChord) {\n        return iRealChord.note + iRealChord.modifiers + (iRealChord.over ? '/' + this.getChord(iRealChord.over) : '');\n    }\n\n    static parseSheet(raw): Leadsheet {\n        return RealParser.getSheet(RealParser.parse(raw));\n    }\n\n    static getSheet(tokens): Leadsheet {\n        const parsed = tokens\n            .reduce((current, token, index, array) => {\n                const lastBarEnded = ['{', '|', '[', '||' /* 'Z',  *//* , ']' */]\n                    .includes(token.bars || token.token);\n                let signs = token.annots || [];\n                const repeatStart = (token.bars || token.token) === '{';\n                const repeatEnd = (token.bars || token.token) === '}';\n                if (repeatStart) {\n                    signs.push('{');\n                }\n                if (repeatEnd) {\n                    signs.push('}');\n                }\n                // current.measure ends\n                if (lastBarEnded) {\n                    if (current.measure) {\n                        // simplify measure if no signs\n                        /* if (Object.keys(current.measure).find(k=>k)) {\n                            current.measure = current.measure.chords;\n                        } */\n                        current.measures.push(current.measure);\n                    }\n                    current.measure = { chords: [] };\n                }\n\n                const sectionStart = signs.find(a => a.match(/^\\*[a-zA-Z]/));\n                if (sectionStart) {\n                    signs = signs.filter(s => s !== sectionStart);\n                    current.measure.section = sectionStart.replace('*', '');\n                }\n\n                const hasCodaSign = signs.includes('Q');\n                if (hasCodaSign) {\n                    signs = signs.filter(s => s !== 'Q');\n                    let codaSign = 'ToCoda';\n                    if (!!current.measures.find(m => Measure.hasSign('ToCoda', m))) {\n                        codaSign = 'Coda';\n                    }\n                    current.measure.signs = (current.measure.signs || []).concat([codaSign]);\n                }\n\n                const houseStart = signs.find(s => !!s.match(/^N./));\n                if (houseStart) {\n                    signs = signs.filter(s => s !== houseStart);\n                    current.measure.house = parseInt(houseStart.replace('N', ''));\n                }\n\n                const time = signs.find(a => a.match(/^T\\d\\d/));\n                if (time) {\n                    signs = signs.filter(s => s !== time);\n                    current.measure.time = time.replace('T', '');\n                }\n\n                if (token.chord) {\n                    current.measure.chords.push(this.getChord(token.chord));\n                } else if (token.token === 'n') {\n                    current.measure.chords.push(0);\n                }\n\n                const last = current.measures[current.measures.length - 1];\n                if (last && last.chords[0] === 'r') {\n                    last.chords = current.measures[current.measures.length - 3].chords;\n                    current.measure.chords = current.measures[current.measures.length - 2].chords;\n                }\n                if (last && current.measure.chords[0] === 'x') {\n                    current.measure.chords = [].concat(last.chords);\n                    current.measure.idle = true;\n                }\n\n                if (signs.length) {\n                    current.measure.signs = (current.measure.signs || [])\n                        .concat(signs);\n                }\n                if (token.comments.length) {\n                    current.measure.comments = (current.measure.comments || [])\n                        .concat(token.comments.map(c => c.trim()));\n                }\n                return current;\n            }, { measure: null, signs: null, measures: [] });\n        if (parsed.measure.chords.length) {\n            parsed.measures.push(parsed.measure);\n        }\n        return parsed.measures;\n    }\n\n\n    static parse(raw: string): any {\n        var text = raw;\n        var arr = [], headers = [], comments = [];\n        var i;\n        text = text.trim();\n        // text = text.trimRight();\n        while (text) {\n            var found = false;\n            for (i = 0; i < RealParser.regExps.length; i++) {\n                var match = RealParser.regExps[i].exec(text);\n\n                if (match) {\n                    found = true;\n                    if (match.length <= 2) {\n                        const replacement = match[0];\n                        var repl = RealParser.replacements[replacement];\n                        arr = arr.concat(repl ? repl : [replacement]);\n                        text = text.substr(replacement.length);\n                    }\n                    else { // a chord\n                        arr.push(match);\n                        text = text.substr(match[0].length);\n                    }\n                    break;\n                }\n            }\n            if (!found) {\n                // ignore the comma separator\n                if (text[0] !== ',')\n                    arr.push(text[0]);\n                text = text.substr(1);\n            }\n        }\n        //\t\tconsole.log(arr);\n        // pass 2: extract prefixes, suffixes, annotations and comments\n        var out = [];\n        var obj = RealParser.newToken(out);\n        for (i = 0; i < arr.length; i++) {\n            var token = arr[i];\n            if (token instanceof Array) {\n                obj.chord = RealParser.parseChord(token);\n                token = \" \";\n            }\n            switch (token[0]) {\n                case ',': token = null; break; // separator\n                case 'S':\t// segno\n                case 'T':\t// time measurement\n                case 'Q':\t// coda\n                case 'N':\t// repeat\n                case 'U':\t// END\n                case 's':\t// small\n                case 'l':\t// normal\n                case 'f':\t// fermata\n                case '*': obj.annots.push(token); token = null; break;\n                case 'Y': obj.spacer++; token = null; break;\n                case 'r':\n                case 'x':\n                case 'W':\n                    obj.chord = new iRealChord(token, \"\", null, null);\n                    break;\n                case '<':\n                    token = token.substr(1, token.length - 2);\n                    token = token.replace(/XyQ/g, \"   \");\t// weird; needs to be done\n                    obj.comments.push(token);\n                    token = null; break;\n                default:\n            }\n            if (token) {\n                if (\"]}Z\".indexOf(arr[i + 1]) >= 0)\n                    obj.bars += arr[++i];\n                if (\"{[|\".indexOf(token) >= 0) {\n                    obj.bars += token; token = null;\n                }\n            }\n            if (token && i < arr.length - 1) {\n                obj.token = token;\n                obj = RealParser.newToken(out);\n            }\n        }\n        return out;\n    }\n\n\n\n    static parseChord(match) {\n        var note = match[1] || \" \";\n        var modifiers = match[2] || \"\";\n        var comment = match[3] || \"\";\n        if (comment)\n            modifiers += comment.substr(1, comment.length - 2).replace(\"XyQ\", \"   \");\n        var over = match[4] || \"\";\n        if (over[0] === '/')\n            over = over.substr(1);\n        var alternate = match[5] || null;\n        if (alternate) {\n            match = RealParser.chordRegex.exec(alternate.substr(1, alternate.length - 2));\n            if (!match)\n                alternate = null;\n            else\n                alternate = this.parseChord(match);\n        }\n        // empty cell?\n        if (note === \" \" && !alternate && !over)\n            return null;\n        if (over) {\n            var offset = (over[1] === '#' || over[1] === 'b') ? 2 : 1;\n            over = new iRealChord(over.substr(0, offset), over.substr(offset), null, null);\n        }\n        else\n            over = null;\n        return new iRealChord(note, modifiers, over, alternate);\n    }\n\n    static newToken(arr) {\n        var obj = new iRealToken;\n        arr.push(obj);\n        return obj;\n    }\n\n}\n\nclass iRealChord {\n    note: any;\n    modifiers: any;\n    over: any;\n    alternate: any;\n    constructor(note, modifiers, over, alternate) {\n        this.note = note;\n        this.modifiers = modifiers;\n        this.over = over;\n        this.alternate = alternate;\n    }\n}\n\nclass iRealToken {\n    chord: any;\n    spacer: number;\n    bars: string;\n    comments: any[];\n    token: any;\n    annots: any[];\n    constructor() {\n        this.annots = [];\n        this.comments = [];\n        this.bars = \"\";\n        this.spacer = 0;\n        this.chord = null;\n    }\n}","/*!\n\n diff v3.5.0\n\nSoftware License Agreement (BSD License)\n\nCopyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>\n\nAll rights reserved.\n\nRedistribution and use of this software in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above\n  copyright notice, this list of conditions and the\n  following disclaimer.\n\n* Redistributions in binary form must reproduce the above\n  copyright notice, this list of conditions and the\n  following disclaimer in the documentation and/or other\n  materials provided with the distribution.\n\n* Neither the name of Kevin Decker nor the names of its\n  contributors may be used to endorse or promote products\n  derived from this software without specific prior\n  written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR\nIMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\nFITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\nCONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER\nIN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\nOF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n@license\n*/\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JsDiff\"] = factory();\n\telse\n\t\troot[\"JsDiff\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.canonicalize = exports.convertChangesToXML = exports.convertChangesToDMP = exports.merge = exports.parsePatch = exports.applyPatches = exports.applyPatch = exports.createPatch = exports.createTwoFilesPatch = exports.structuredPatch = exports.diffArrays = exports.diffJson = exports.diffCss = exports.diffSentences = exports.diffTrimmedLines = exports.diffLines = exports.diffWordsWithSpace = exports.diffWords = exports.diffChars = exports.Diff = undefined;\n\n\t/*istanbul ignore end*/var /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\t/*istanbul ignore end*/var /*istanbul ignore start*/_character = __webpack_require__(2) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_word = __webpack_require__(3) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_line = __webpack_require__(5) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_sentence = __webpack_require__(6) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_css = __webpack_require__(7) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_json = __webpack_require__(8) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_array = __webpack_require__(9) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_apply = __webpack_require__(10) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_parse = __webpack_require__(11) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_merge = __webpack_require__(13) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_create = __webpack_require__(14) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_dmp = __webpack_require__(16) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_xml = __webpack_require__(17) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/* See LICENSE file for terms of use */\n\n\t/*\n\t * Text diff implementation.\n\t *\n\t * This library supports the following APIS:\n\t * JsDiff.diffChars: Character by character diff\n\t * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n\t * JsDiff.diffLines: Line based diff\n\t *\n\t * JsDiff.diffCss: Diff targeted at CSS content\n\t *\n\t * These methods are based on the implementation proposed in\n\t * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n\t * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n\t */\n\texports. /*istanbul ignore end*/Diff = _base2['default'];\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffChars = _character.diffChars;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffWords = _word.diffWords;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffWordsWithSpace = _word.diffWordsWithSpace;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffLines = _line.diffLines;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffTrimmedLines = _line.diffTrimmedLines;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffSentences = _sentence.diffSentences;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffCss = _css.diffCss;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffJson = _json.diffJson;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffArrays = _array.diffArrays;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/structuredPatch = _create.structuredPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/createTwoFilesPatch = _create.createTwoFilesPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/createPatch = _create.createPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/applyPatch = _apply.applyPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/applyPatches = _apply.applyPatches;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/parsePatch = _parse.parsePatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/merge = _merge.merge;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/convertChangesToDMP = _dmp.convertChangesToDMP;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/convertChangesToXML = _xml.convertChangesToXML;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/canonicalize = _json.canonicalize;\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJEaWZmIiwiZGlmZkNoYXJzIiwiZGlmZldvcmRzIiwiZGlmZldvcmRzV2l0aFNwYWNlIiwiZGlmZkxpbmVzIiwiZGlmZlRyaW1tZWRMaW5lcyIsImRpZmZTZW50ZW5jZXMiLCJkaWZmQ3NzIiwiZGlmZkpzb24iLCJkaWZmQXJyYXlzIiwic3RydWN0dXJlZFBhdGNoIiwiY3JlYXRlVHdvRmlsZXNQYXRjaCIsImNyZWF0ZVBhdGNoIiwiYXBwbHlQYXRjaCIsImFwcGx5UGF0Y2hlcyIsInBhcnNlUGF0Y2giLCJtZXJnZSIsImNvbnZlcnRDaGFuZ2VzVG9ETVAiLCJjb252ZXJ0Q2hhbmdlc1RvWE1MIiwiY2Fub25pY2FsaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozt1QkFnQkE7Ozs7dUJBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFqQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7O2dDQWtDRUEsSTt5REFFQUMsUzt5REFDQUMsUzt5REFDQUMsa0I7eURBQ0FDLFM7eURBQ0FDLGdCO3lEQUNBQyxhO3lEQUVBQyxPO3lEQUNBQyxRO3lEQUVBQyxVO3lEQUVBQyxlO3lEQUNBQyxtQjt5REFDQUMsVzt5REFDQUMsVTt5REFDQUMsWTt5REFDQUMsVTt5REFDQUMsSzt5REFDQUMsbUI7eURBQ0FDLG1CO3lEQUNBQyxZIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogU2VlIExJQ0VOU0UgZmlsZSBmb3IgdGVybXMgb2YgdXNlICovXG5cbi8qXG4gKiBUZXh0IGRpZmYgaW1wbGVtZW50YXRpb24uXG4gKlxuICogVGhpcyBsaWJyYXJ5IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgQVBJUzpcbiAqIEpzRGlmZi5kaWZmQ2hhcnM6IENoYXJhY3RlciBieSBjaGFyYWN0ZXIgZGlmZlxuICogSnNEaWZmLmRpZmZXb3JkczogV29yZCAoYXMgZGVmaW5lZCBieSBcXGIgcmVnZXgpIGRpZmYgd2hpY2ggaWdub3JlcyB3aGl0ZXNwYWNlXG4gKiBKc0RpZmYuZGlmZkxpbmVzOiBMaW5lIGJhc2VkIGRpZmZcbiAqXG4gKiBKc0RpZmYuZGlmZkNzczogRGlmZiB0YXJnZXRlZCBhdCBDU1MgY29udGVudFxuICpcbiAqIFRoZXNlIG1ldGhvZHMgYXJlIGJhc2VkIG9uIHRoZSBpbXBsZW1lbnRhdGlvbiBwcm9wb3NlZCBpblxuICogXCJBbiBPKE5EKSBEaWZmZXJlbmNlIEFsZ29yaXRobSBhbmQgaXRzIFZhcmlhdGlvbnNcIiAoTXllcnMsIDE5ODYpLlxuICogaHR0cDovL2NpdGVzZWVyeC5pc3QucHN1LmVkdS92aWV3ZG9jL3N1bW1hcnk/ZG9pPTEwLjEuMS40LjY5MjdcbiAqL1xuaW1wb3J0IERpZmYgZnJvbSAnLi9kaWZmL2Jhc2UnO1xuaW1wb3J0IHtkaWZmQ2hhcnN9IGZyb20gJy4vZGlmZi9jaGFyYWN0ZXInO1xuaW1wb3J0IHtkaWZmV29yZHMsIGRpZmZXb3Jkc1dpdGhTcGFjZX0gZnJvbSAnLi9kaWZmL3dvcmQnO1xuaW1wb3J0IHtkaWZmTGluZXMsIGRpZmZUcmltbWVkTGluZXN9IGZyb20gJy4vZGlmZi9saW5lJztcbmltcG9ydCB7ZGlmZlNlbnRlbmNlc30gZnJvbSAnLi9kaWZmL3NlbnRlbmNlJztcblxuaW1wb3J0IHtkaWZmQ3NzfSBmcm9tICcuL2RpZmYvY3NzJztcbmltcG9ydCB7ZGlmZkpzb24sIGNhbm9uaWNhbGl6ZX0gZnJvbSAnLi9kaWZmL2pzb24nO1xuXG5pbXBvcnQge2RpZmZBcnJheXN9IGZyb20gJy4vZGlmZi9hcnJheSc7XG5cbmltcG9ydCB7YXBwbHlQYXRjaCwgYXBwbHlQYXRjaGVzfSBmcm9tICcuL3BhdGNoL2FwcGx5JztcbmltcG9ydCB7cGFyc2VQYXRjaH0gZnJvbSAnLi9wYXRjaC9wYXJzZSc7XG5pbXBvcnQge21lcmdlfSBmcm9tICcuL3BhdGNoL21lcmdlJztcbmltcG9ydCB7c3RydWN0dXJlZFBhdGNoLCBjcmVhdGVUd29GaWxlc1BhdGNoLCBjcmVhdGVQYXRjaH0gZnJvbSAnLi9wYXRjaC9jcmVhdGUnO1xuXG5pbXBvcnQge2NvbnZlcnRDaGFuZ2VzVG9ETVB9IGZyb20gJy4vY29udmVydC9kbXAnO1xuaW1wb3J0IHtjb252ZXJ0Q2hhbmdlc1RvWE1MfSBmcm9tICcuL2NvbnZlcnQveG1sJztcblxuZXhwb3J0IHtcbiAgRGlmZixcblxuICBkaWZmQ2hhcnMsXG4gIGRpZmZXb3JkcyxcbiAgZGlmZldvcmRzV2l0aFNwYWNlLFxuICBkaWZmTGluZXMsXG4gIGRpZmZUcmltbWVkTGluZXMsXG4gIGRpZmZTZW50ZW5jZXMsXG5cbiAgZGlmZkNzcyxcbiAgZGlmZkpzb24sXG5cbiAgZGlmZkFycmF5cyxcblxuICBzdHJ1Y3R1cmVkUGF0Y2gsXG4gIGNyZWF0ZVR3b0ZpbGVzUGF0Y2gsXG4gIGNyZWF0ZVBhdGNoLFxuICBhcHBseVBhdGNoLFxuICBhcHBseVBhdGNoZXMsXG4gIHBhcnNlUGF0Y2gsXG4gIG1lcmdlLFxuICBjb252ZXJ0Q2hhbmdlc1RvRE1QLFxuICBjb252ZXJ0Q2hhbmdlc1RvWE1MLFxuICBjYW5vbmljYWxpemVcbn07XG4iXX0=\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports['default'] = /*istanbul ignore end*/Diff;\n\tfunction Diff() {}\n\n\tDiff.prototype = {\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/diff: function diff(oldString, newString) {\n\t    /*istanbul ignore start*/var /*istanbul ignore end*/options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t    var callback = options.callback;\n\t    if (typeof options === 'function') {\n\t      callback = options;\n\t      options = {};\n\t    }\n\t    this.options = options;\n\n\t    var self = this;\n\n\t    function done(value) {\n\t      if (callback) {\n\t        setTimeout(function () {\n\t          callback(undefined, value);\n\t        }, 0);\n\t        return true;\n\t      } else {\n\t        return value;\n\t      }\n\t    }\n\n\t    // Allow subclasses to massage the input prior to running\n\t    oldString = this.castInput(oldString);\n\t    newString = this.castInput(newString);\n\n\t    oldString = this.removeEmpty(this.tokenize(oldString));\n\t    newString = this.removeEmpty(this.tokenize(newString));\n\n\t    var newLen = newString.length,\n\t        oldLen = oldString.length;\n\t    var editLength = 1;\n\t    var maxEditLength = newLen + oldLen;\n\t    var bestPath = [{ newPos: -1, components: [] }];\n\n\t    // Seed editLength = 0, i.e. the content starts with the same values\n\t    var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\t    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n\t      // Identity per the equality and tokenizer\n\t      return done([{ value: this.join(newString), count: newString.length }]);\n\t    }\n\n\t    // Main worker method. checks all permutations of a given edit length for acceptance.\n\t    function execEditLength() {\n\t      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n\t        var basePath = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\t        var addPath = bestPath[diagonalPath - 1],\n\t            removePath = bestPath[diagonalPath + 1],\n\t            _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\t        if (addPath) {\n\t          // No one else is going to attempt to use this value, clear it\n\t          bestPath[diagonalPath - 1] = undefined;\n\t        }\n\n\t        var canAdd = addPath && addPath.newPos + 1 < newLen,\n\t            canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\t        if (!canAdd && !canRemove) {\n\t          // If this path is a terminal then prune\n\t          bestPath[diagonalPath] = undefined;\n\t          continue;\n\t        }\n\n\t        // Select the diagonal that we want to branch from. We select the prior\n\t        // path whose position in the new string is the farthest from the origin\n\t        // and does not pass the bounds of the diff graph\n\t        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n\t          basePath = clonePath(removePath);\n\t          self.pushComponent(basePath.components, undefined, true);\n\t        } else {\n\t          basePath = addPath; // No need to clone, we've pulled it from the list\n\t          basePath.newPos++;\n\t          self.pushComponent(basePath.components, true, undefined);\n\t        }\n\n\t        _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n\t        // If we have hit the end of both strings, then we are done\n\t        if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n\t          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n\t        } else {\n\t          // Otherwise track this path as a potential candidate and continue.\n\t          bestPath[diagonalPath] = basePath;\n\t        }\n\t      }\n\n\t      editLength++;\n\t    }\n\n\t    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n\t    // sync and async mode which is never fun. Loops over execEditLength until a value\n\t    // is produced.\n\t    if (callback) {\n\t      (function exec() {\n\t        setTimeout(function () {\n\t          // This should not happen, but we want to be safe.\n\t          /* istanbul ignore next */\n\t          if (editLength > maxEditLength) {\n\t            return callback();\n\t          }\n\n\t          if (!execEditLength()) {\n\t            exec();\n\t          }\n\t        }, 0);\n\t      })();\n\t    } else {\n\t      while (editLength <= maxEditLength) {\n\t        var ret = execEditLength();\n\t        if (ret) {\n\t          return ret;\n\t        }\n\t      }\n\t    }\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/pushComponent: function pushComponent(components, added, removed) {\n\t    var last = components[components.length - 1];\n\t    if (last && last.added === added && last.removed === removed) {\n\t      // We need to clone here as the component clone operation is just\n\t      // as shallow array clone\n\t      components[components.length - 1] = { count: last.count + 1, added: added, removed: removed };\n\t    } else {\n\t      components.push({ count: 1, added: added, removed: removed });\n\t    }\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n\t    var newLen = newString.length,\n\t        oldLen = oldString.length,\n\t        newPos = basePath.newPos,\n\t        oldPos = newPos - diagonalPath,\n\t        commonCount = 0;\n\t    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n\t      newPos++;\n\t      oldPos++;\n\t      commonCount++;\n\t    }\n\n\t    if (commonCount) {\n\t      basePath.components.push({ count: commonCount });\n\t    }\n\n\t    basePath.newPos = newPos;\n\t    return oldPos;\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/equals: function equals(left, right) {\n\t    if (this.options.comparator) {\n\t      return this.options.comparator(left, right);\n\t    } else {\n\t      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n\t    }\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/removeEmpty: function removeEmpty(array) {\n\t    var ret = [];\n\t    for (var i = 0; i < array.length; i++) {\n\t      if (array[i]) {\n\t        ret.push(array[i]);\n\t      }\n\t    }\n\t    return ret;\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/castInput: function castInput(value) {\n\t    return value;\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/tokenize: function tokenize(value) {\n\t    return value.split('');\n\t  },\n\t  /*istanbul ignore start*/ /*istanbul ignore end*/join: function join(chars) {\n\t    return chars.join('');\n\t  }\n\t};\n\n\tfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n\t  var componentPos = 0,\n\t      componentLen = components.length,\n\t      newPos = 0,\n\t      oldPos = 0;\n\n\t  for (; componentPos < componentLen; componentPos++) {\n\t    var component = components[componentPos];\n\t    if (!component.removed) {\n\t      if (!component.added && useLongestToken) {\n\t        var value = newString.slice(newPos, newPos + component.count);\n\t        value = value.map(function (value, i) {\n\t          var oldValue = oldString[oldPos + i];\n\t          return oldValue.length > value.length ? oldValue : value;\n\t        });\n\n\t        component.value = diff.join(value);\n\t      } else {\n\t        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n\t      }\n\t      newPos += component.count;\n\n\t      // Common case\n\t      if (!component.added) {\n\t        oldPos += component.count;\n\t      }\n\t    } else {\n\t      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n\t      oldPos += component.count;\n\n\t      // Reverse add and remove so removes are output first to match common convention\n\t      // The diffing algorithm is tied to add then remove output and this is the simplest\n\t      // route to get the desired output with minimal overhead.\n\t      if (componentPos && components[componentPos - 1].added) {\n\t        var tmp = components[componentPos - 1];\n\t        components[componentPos - 1] = components[componentPos];\n\t        components[componentPos] = tmp;\n\t      }\n\t    }\n\t  }\n\n\t  // Special case handle for when one terminal is ignored (i.e. whitespace).\n\t  // For this case we merge the terminal into the prior string and drop the change.\n\t  // This is only available for string mode.\n\t  var lastComponent = components[componentLen - 1];\n\t  if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n\t    components[componentLen - 2].value += lastComponent.value;\n\t    components.pop();\n\t  }\n\n\t  return components;\n\t}\n\n\tfunction clonePath(path) {\n\t  return { newPos: path.newPos, components: path.components.slice(0) };\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2Jhc2UuanMiXSwibmFtZXMiOlsiRGlmZiIsInByb3RvdHlwZSIsImRpZmYiLCJvbGRTdHJpbmciLCJuZXdTdHJpbmciLCJvcHRpb25zIiwiY2FsbGJhY2siLCJzZWxmIiwiZG9uZSIsInZhbHVlIiwic2V0VGltZW91dCIsInVuZGVmaW5lZCIsImNhc3RJbnB1dCIsInJlbW92ZUVtcHR5IiwidG9rZW5pemUiLCJuZXdMZW4iLCJsZW5ndGgiLCJvbGRMZW4iLCJlZGl0TGVuZ3RoIiwibWF4RWRpdExlbmd0aCIsImJlc3RQYXRoIiwibmV3UG9zIiwiY29tcG9uZW50cyIsIm9sZFBvcyIsImV4dHJhY3RDb21tb24iLCJqb2luIiwiY291bnQiLCJleGVjRWRpdExlbmd0aCIsImRpYWdvbmFsUGF0aCIsImJhc2VQYXRoIiwiYWRkUGF0aCIsInJlbW92ZVBhdGgiLCJjYW5BZGQiLCJjYW5SZW1vdmUiLCJjbG9uZVBhdGgiLCJwdXNoQ29tcG9uZW50IiwiYnVpbGRWYWx1ZXMiLCJ1c2VMb25nZXN0VG9rZW4iLCJleGVjIiwicmV0IiwiYWRkZWQiLCJyZW1vdmVkIiwibGFzdCIsInB1c2giLCJjb21tb25Db3VudCIsImVxdWFscyIsImxlZnQiLCJyaWdodCIsImNvbXBhcmF0b3IiLCJpZ25vcmVDYXNlIiwidG9Mb3dlckNhc2UiLCJhcnJheSIsImkiLCJzcGxpdCIsImNoYXJzIiwiY29tcG9uZW50UG9zIiwiY29tcG9uZW50TGVuIiwiY29tcG9uZW50Iiwic2xpY2UiLCJtYXAiLCJvbGRWYWx1ZSIsInRtcCIsImxhc3RDb21wb25lbnQiLCJwb3AiLCJwYXRoIl0sIm1hcHBpbmdzIjoiOzs7NENBQXdCQSxJO0FBQVQsU0FBU0EsSUFBVCxHQUFnQixDQUFFOztBQUVqQ0EsS0FBS0MsU0FBTCxHQUFpQjtBQUFBLG1EQUNmQyxJQURlLGdCQUNWQyxTQURVLEVBQ0NDLFNBREQsRUFDMEI7QUFBQSx3REFBZEMsT0FBYyx1RUFBSixFQUFJOztBQUN2QyxRQUFJQyxXQUFXRCxRQUFRQyxRQUF2QjtBQUNBLFFBQUksT0FBT0QsT0FBUCxLQUFtQixVQUF2QixFQUFtQztBQUNqQ0MsaUJBQVdELE9BQVg7QUFDQUEsZ0JBQVUsRUFBVjtBQUNEO0FBQ0QsU0FBS0EsT0FBTCxHQUFlQSxPQUFmOztBQUVBLFFBQUlFLE9BQU8sSUFBWDs7QUFFQSxhQUFTQyxJQUFULENBQWNDLEtBQWQsRUFBcUI7QUFDbkIsVUFBSUgsUUFBSixFQUFjO0FBQ1pJLG1CQUFXLFlBQVc7QUFBRUosbUJBQVNLLFNBQVQsRUFBb0JGLEtBQXBCO0FBQTZCLFNBQXJELEVBQXVELENBQXZEO0FBQ0EsZUFBTyxJQUFQO0FBQ0QsT0FIRCxNQUdPO0FBQ0wsZUFBT0EsS0FBUDtBQUNEO0FBQ0Y7O0FBRUQ7QUFDQU4sZ0JBQVksS0FBS1MsU0FBTCxDQUFlVCxTQUFmLENBQVo7QUFDQUMsZ0JBQVksS0FBS1EsU0FBTCxDQUFlUixTQUFmLENBQVo7O0FBRUFELGdCQUFZLEtBQUtVLFdBQUwsQ0FBaUIsS0FBS0MsUUFBTCxDQUFjWCxTQUFkLENBQWpCLENBQVo7QUFDQUMsZ0JBQVksS0FBS1MsV0FBTCxDQUFpQixLQUFLQyxRQUFMLENBQWNWLFNBQWQsQ0FBakIsQ0FBWjs7QUFFQSxRQUFJVyxTQUFTWCxVQUFVWSxNQUF2QjtBQUFBLFFBQStCQyxTQUFTZCxVQUFVYSxNQUFsRDtBQUNBLFFBQUlFLGFBQWEsQ0FBakI7QUFDQSxRQUFJQyxnQkFBZ0JKLFNBQVNFLE1BQTdCO0FBQ0EsUUFBSUcsV0FBVyxDQUFDLEVBQUVDLFFBQVEsQ0FBQyxDQUFYLEVBQWNDLFlBQVksRUFBMUIsRUFBRCxDQUFmOztBQUVBO0FBQ0EsUUFBSUMsU0FBUyxLQUFLQyxhQUFMLENBQW1CSixTQUFTLENBQVQsQ0FBbkIsRUFBZ0NoQixTQUFoQyxFQUEyQ0QsU0FBM0MsRUFBc0QsQ0FBdEQsQ0FBYjtBQUNBLFFBQUlpQixTQUFTLENBQVQsRUFBWUMsTUFBWixHQUFxQixDQUFyQixJQUEwQk4sTUFBMUIsSUFBb0NRLFNBQVMsQ0FBVCxJQUFjTixNQUF0RCxFQUE4RDtBQUM1RDtBQUNBLGFBQU9ULEtBQUssQ0FBQyxFQUFDQyxPQUFPLEtBQUtnQixJQUFMLENBQVVyQixTQUFWLENBQVIsRUFBOEJzQixPQUFPdEIsVUFBVVksTUFBL0MsRUFBRCxDQUFMLENBQVA7QUFDRDs7QUFFRDtBQUNBLGFBQVNXLGNBQVQsR0FBMEI7QUFDeEIsV0FBSyxJQUFJQyxlQUFlLENBQUMsQ0FBRCxHQUFLVixVQUE3QixFQUF5Q1UsZ0JBQWdCVixVQUF6RCxFQUFxRVUsZ0JBQWdCLENBQXJGLEVBQXdGO0FBQ3RGLFlBQUlDLDBDQUFKO0FBQ0EsWUFBSUMsVUFBVVYsU0FBU1EsZUFBZSxDQUF4QixDQUFkO0FBQUEsWUFDSUcsYUFBYVgsU0FBU1EsZUFBZSxDQUF4QixDQURqQjtBQUFBLFlBRUlMLFVBQVMsQ0FBQ1EsYUFBYUEsV0FBV1YsTUFBeEIsR0FBaUMsQ0FBbEMsSUFBdUNPLFlBRnBEO0FBR0EsWUFBSUUsT0FBSixFQUFhO0FBQ1g7QUFDQVYsbUJBQVNRLGVBQWUsQ0FBeEIsSUFBNkJqQixTQUE3QjtBQUNEOztBQUVELFlBQUlxQixTQUFTRixXQUFXQSxRQUFRVCxNQUFSLEdBQWlCLENBQWpCLEdBQXFCTixNQUE3QztBQUFBLFlBQ0lrQixZQUFZRixjQUFjLEtBQUtSLE9BQW5CLElBQTZCQSxVQUFTTixNQUR0RDtBQUVBLFlBQUksQ0FBQ2UsTUFBRCxJQUFXLENBQUNDLFNBQWhCLEVBQTJCO0FBQ3pCO0FBQ0FiLG1CQUFTUSxZQUFULElBQXlCakIsU0FBekI7QUFDQTtBQUNEOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFlBQUksQ0FBQ3FCLE1BQUQsSUFBWUMsYUFBYUgsUUFBUVQsTUFBUixHQUFpQlUsV0FBV1YsTUFBekQsRUFBa0U7QUFDaEVRLHFCQUFXSyxVQUFVSCxVQUFWLENBQVg7QUFDQXhCLGVBQUs0QixhQUFMLENBQW1CTixTQUFTUCxVQUE1QixFQUF3Q1gsU0FBeEMsRUFBbUQsSUFBbkQ7QUFDRCxTQUhELE1BR087QUFDTGtCLHFCQUFXQyxPQUFYLENBREssQ0FDaUI7QUFDdEJELG1CQUFTUixNQUFUO0FBQ0FkLGVBQUs0QixhQUFMLENBQW1CTixTQUFTUCxVQUE1QixFQUF3QyxJQUF4QyxFQUE4Q1gsU0FBOUM7QUFDRDs7QUFFRFksa0JBQVNoQixLQUFLaUIsYUFBTCxDQUFtQkssUUFBbkIsRUFBNkJ6QixTQUE3QixFQUF3Q0QsU0FBeEMsRUFBbUR5QixZQUFuRCxDQUFUOztBQUVBO0FBQ0EsWUFBSUMsU0FBU1IsTUFBVCxHQUFrQixDQUFsQixJQUF1Qk4sTUFBdkIsSUFBaUNRLFVBQVMsQ0FBVCxJQUFjTixNQUFuRCxFQUEyRDtBQUN6RCxpQkFBT1QsS0FBSzRCLFlBQVk3QixJQUFaLEVBQWtCc0IsU0FBU1AsVUFBM0IsRUFBdUNsQixTQUF2QyxFQUFrREQsU0FBbEQsRUFBNkRJLEtBQUs4QixlQUFsRSxDQUFMLENBQVA7QUFDRCxTQUZELE1BRU87QUFDTDtBQUNBakIsbUJBQVNRLFlBQVQsSUFBeUJDLFFBQXpCO0FBQ0Q7QUFDRjs7QUFFRFg7QUFDRDs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxRQUFJWixRQUFKLEVBQWM7QUFDWCxnQkFBU2dDLElBQVQsR0FBZ0I7QUFDZjVCLG1CQUFXLFlBQVc7QUFDcEI7QUFDQTtBQUNBLGNBQUlRLGFBQWFDLGFBQWpCLEVBQWdDO0FBQzlCLG1CQUFPYixVQUFQO0FBQ0Q7O0FBRUQsY0FBSSxDQUFDcUIsZ0JBQUwsRUFBdUI7QUFDckJXO0FBQ0Q7QUFDRixTQVZELEVBVUcsQ0FWSDtBQVdELE9BWkEsR0FBRDtBQWFELEtBZEQsTUFjTztBQUNMLGFBQU9wQixjQUFjQyxhQUFyQixFQUFvQztBQUNsQyxZQUFJb0IsTUFBTVosZ0JBQVY7QUFDQSxZQUFJWSxHQUFKLEVBQVM7QUFDUCxpQkFBT0EsR0FBUDtBQUNEO0FBQ0Y7QUFDRjtBQUNGLEdBOUdjO0FBQUEsbURBZ0hmSixhQWhIZSx5QkFnSERiLFVBaEhDLEVBZ0hXa0IsS0FoSFgsRUFnSGtCQyxPQWhIbEIsRUFnSDJCO0FBQ3hDLFFBQUlDLE9BQU9wQixXQUFXQSxXQUFXTixNQUFYLEdBQW9CLENBQS9CLENBQVg7QUFDQSxRQUFJMEIsUUFBUUEsS0FBS0YsS0FBTCxLQUFlQSxLQUF2QixJQUFnQ0UsS0FBS0QsT0FBTCxLQUFpQkEsT0FBckQsRUFBOEQ7QUFDNUQ7QUFDQTtBQUNBbkIsaUJBQVdBLFdBQVdOLE1BQVgsR0FBb0IsQ0FBL0IsSUFBb0MsRUFBQ1UsT0FBT2dCLEtBQUtoQixLQUFMLEdBQWEsQ0FBckIsRUFBd0JjLE9BQU9BLEtBQS9CLEVBQXNDQyxTQUFTQSxPQUEvQyxFQUFwQztBQUNELEtBSkQsTUFJTztBQUNMbkIsaUJBQVdxQixJQUFYLENBQWdCLEVBQUNqQixPQUFPLENBQVIsRUFBV2MsT0FBT0EsS0FBbEIsRUFBeUJDLFNBQVNBLE9BQWxDLEVBQWhCO0FBQ0Q7QUFDRixHQXpIYztBQUFBLG1EQTBIZmpCLGFBMUhlLHlCQTBIREssUUExSEMsRUEwSFN6QixTQTFIVCxFQTBIb0JELFNBMUhwQixFQTBIK0J5QixZQTFIL0IsRUEwSDZDO0FBQzFELFFBQUliLFNBQVNYLFVBQVVZLE1BQXZCO0FBQUEsUUFDSUMsU0FBU2QsVUFBVWEsTUFEdkI7QUFBQSxRQUVJSyxTQUFTUSxTQUFTUixNQUZ0QjtBQUFBLFFBR0lFLFNBQVNGLFNBQVNPLFlBSHRCO0FBQUEsUUFLSWdCLGNBQWMsQ0FMbEI7QUFNQSxXQUFPdkIsU0FBUyxDQUFULEdBQWFOLE1BQWIsSUFBdUJRLFNBQVMsQ0FBVCxHQUFhTixNQUFwQyxJQUE4QyxLQUFLNEIsTUFBTCxDQUFZekMsVUFBVWlCLFNBQVMsQ0FBbkIsQ0FBWixFQUFtQ2xCLFVBQVVvQixTQUFTLENBQW5CLENBQW5DLENBQXJELEVBQWdIO0FBQzlHRjtBQUNBRTtBQUNBcUI7QUFDRDs7QUFFRCxRQUFJQSxXQUFKLEVBQWlCO0FBQ2ZmLGVBQVNQLFVBQVQsQ0FBb0JxQixJQUFwQixDQUF5QixFQUFDakIsT0FBT2tCLFdBQVIsRUFBekI7QUFDRDs7QUFFRGYsYUFBU1IsTUFBVCxHQUFrQkEsTUFBbEI7QUFDQSxXQUFPRSxNQUFQO0FBQ0QsR0E3SWM7QUFBQSxtREErSWZzQixNQS9JZSxrQkErSVJDLElBL0lRLEVBK0lGQyxLQS9JRSxFQStJSztBQUNsQixRQUFJLEtBQUsxQyxPQUFMLENBQWEyQyxVQUFqQixFQUE2QjtBQUMzQixhQUFPLEtBQUszQyxPQUFMLENBQWEyQyxVQUFiLENBQXdCRixJQUF4QixFQUE4QkMsS0FBOUIsQ0FBUDtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU9ELFNBQVNDLEtBQVQsSUFDRCxLQUFLMUMsT0FBTCxDQUFhNEMsVUFBYixJQUEyQkgsS0FBS0ksV0FBTCxPQUF1QkgsTUFBTUcsV0FBTixFQUR4RDtBQUVEO0FBQ0YsR0F0SmM7QUFBQSxtREF1SmZyQyxXQXZKZSx1QkF1SkhzQyxLQXZKRyxFQXVKSTtBQUNqQixRQUFJWixNQUFNLEVBQVY7QUFDQSxTQUFLLElBQUlhLElBQUksQ0FBYixFQUFnQkEsSUFBSUQsTUFBTW5DLE1BQTFCLEVBQWtDb0MsR0FBbEMsRUFBdUM7QUFDckMsVUFBSUQsTUFBTUMsQ0FBTixDQUFKLEVBQWM7QUFDWmIsWUFBSUksSUFBSixDQUFTUSxNQUFNQyxDQUFOLENBQVQ7QUFDRDtBQUNGO0FBQ0QsV0FBT2IsR0FBUDtBQUNELEdBL0pjO0FBQUEsbURBZ0tmM0IsU0FoS2UscUJBZ0tMSCxLQWhLSyxFQWdLRTtBQUNmLFdBQU9BLEtBQVA7QUFDRCxHQWxLYztBQUFBLG1EQW1LZkssUUFuS2Usb0JBbUtOTCxLQW5LTSxFQW1LQztBQUNkLFdBQU9BLE1BQU00QyxLQUFOLENBQVksRUFBWixDQUFQO0FBQ0QsR0FyS2M7QUFBQSxtREFzS2Y1QixJQXRLZSxnQkFzS1Y2QixLQXRLVSxFQXNLSDtBQUNWLFdBQU9BLE1BQU03QixJQUFOLENBQVcsRUFBWCxDQUFQO0FBQ0Q7QUF4S2MsQ0FBakI7O0FBMktBLFNBQVNXLFdBQVQsQ0FBcUJsQyxJQUFyQixFQUEyQm9CLFVBQTNCLEVBQXVDbEIsU0FBdkMsRUFBa0RELFNBQWxELEVBQTZEa0MsZUFBN0QsRUFBOEU7QUFDNUUsTUFBSWtCLGVBQWUsQ0FBbkI7QUFBQSxNQUNJQyxlQUFlbEMsV0FBV04sTUFEOUI7QUFBQSxNQUVJSyxTQUFTLENBRmI7QUFBQSxNQUdJRSxTQUFTLENBSGI7O0FBS0EsU0FBT2dDLGVBQWVDLFlBQXRCLEVBQW9DRCxjQUFwQyxFQUFvRDtBQUNsRCxRQUFJRSxZQUFZbkMsV0FBV2lDLFlBQVgsQ0FBaEI7QUFDQSxRQUFJLENBQUNFLFVBQVVoQixPQUFmLEVBQXdCO0FBQ3RCLFVBQUksQ0FBQ2dCLFVBQVVqQixLQUFYLElBQW9CSCxlQUF4QixFQUF5QztBQUN2QyxZQUFJNUIsUUFBUUwsVUFBVXNELEtBQVYsQ0FBZ0JyQyxNQUFoQixFQUF3QkEsU0FBU29DLFVBQVUvQixLQUEzQyxDQUFaO0FBQ0FqQixnQkFBUUEsTUFBTWtELEdBQU4sQ0FBVSxVQUFTbEQsS0FBVCxFQUFnQjJDLENBQWhCLEVBQW1CO0FBQ25DLGNBQUlRLFdBQVd6RCxVQUFVb0IsU0FBUzZCLENBQW5CLENBQWY7QUFDQSxpQkFBT1EsU0FBUzVDLE1BQVQsR0FBa0JQLE1BQU1PLE1BQXhCLEdBQWlDNEMsUUFBakMsR0FBNENuRCxLQUFuRDtBQUNELFNBSE8sQ0FBUjs7QUFLQWdELGtCQUFVaEQsS0FBVixHQUFrQlAsS0FBS3VCLElBQUwsQ0FBVWhCLEtBQVYsQ0FBbEI7QUFDRCxPQVJELE1BUU87QUFDTGdELGtCQUFVaEQsS0FBVixHQUFrQlAsS0FBS3VCLElBQUwsQ0FBVXJCLFVBQVVzRCxLQUFWLENBQWdCckMsTUFBaEIsRUFBd0JBLFNBQVNvQyxVQUFVL0IsS0FBM0MsQ0FBVixDQUFsQjtBQUNEO0FBQ0RMLGdCQUFVb0MsVUFBVS9CLEtBQXBCOztBQUVBO0FBQ0EsVUFBSSxDQUFDK0IsVUFBVWpCLEtBQWYsRUFBc0I7QUFDcEJqQixrQkFBVWtDLFVBQVUvQixLQUFwQjtBQUNEO0FBQ0YsS0FsQkQsTUFrQk87QUFDTCtCLGdCQUFVaEQsS0FBVixHQUFrQlAsS0FBS3VCLElBQUwsQ0FBVXRCLFVBQVV1RCxLQUFWLENBQWdCbkMsTUFBaEIsRUFBd0JBLFNBQVNrQyxVQUFVL0IsS0FBM0MsQ0FBVixDQUFsQjtBQUNBSCxnQkFBVWtDLFVBQVUvQixLQUFwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFJNkIsZ0JBQWdCakMsV0FBV2lDLGVBQWUsQ0FBMUIsRUFBNkJmLEtBQWpELEVBQXdEO0FBQ3RELFlBQUlxQixNQUFNdkMsV0FBV2lDLGVBQWUsQ0FBMUIsQ0FBVjtBQUNBakMsbUJBQVdpQyxlQUFlLENBQTFCLElBQStCakMsV0FBV2lDLFlBQVgsQ0FBL0I7QUFDQWpDLG1CQUFXaUMsWUFBWCxJQUEyQk0sR0FBM0I7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsTUFBSUMsZ0JBQWdCeEMsV0FBV2tDLGVBQWUsQ0FBMUIsQ0FBcEI7QUFDQSxNQUFJQSxlQUFlLENBQWYsSUFDRyxPQUFPTSxjQUFjckQsS0FBckIsS0FBK0IsUUFEbEMsS0FFSXFELGNBQWN0QixLQUFkLElBQXVCc0IsY0FBY3JCLE9BRnpDLEtBR0d2QyxLQUFLMkMsTUFBTCxDQUFZLEVBQVosRUFBZ0JpQixjQUFjckQsS0FBOUIsQ0FIUCxFQUc2QztBQUMzQ2EsZUFBV2tDLGVBQWUsQ0FBMUIsRUFBNkIvQyxLQUE3QixJQUFzQ3FELGNBQWNyRCxLQUFwRDtBQUNBYSxlQUFXeUMsR0FBWDtBQUNEOztBQUVELFNBQU96QyxVQUFQO0FBQ0Q7O0FBRUQsU0FBU1ksU0FBVCxDQUFtQjhCLElBQW5CLEVBQXlCO0FBQ3ZCLFNBQU8sRUFBRTNDLFFBQVEyQyxLQUFLM0MsTUFBZixFQUF1QkMsWUFBWTBDLEtBQUsxQyxVQUFMLENBQWdCb0MsS0FBaEIsQ0FBc0IsQ0FBdEIsQ0FBbkMsRUFBUDtBQUNEIiwiZmlsZSI6ImJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEaWZmKCkge31cblxuRGlmZi5wcm90b3R5cGUgPSB7XG4gIGRpZmYob2xkU3RyaW5nLCBuZXdTdHJpbmcsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICBmdW5jdGlvbiBkb25lKHZhbHVlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2sodW5kZWZpbmVkLCB2YWx1ZSk7IH0sIDApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBbGxvdyBzdWJjbGFzc2VzIHRvIG1hc3NhZ2UgdGhlIGlucHV0IHByaW9yIHRvIHJ1bm5pbmdcbiAgICBvbGRTdHJpbmcgPSB0aGlzLmNhc3RJbnB1dChvbGRTdHJpbmcpO1xuICAgIG5ld1N0cmluZyA9IHRoaXMuY2FzdElucHV0KG5ld1N0cmluZyk7XG5cbiAgICBvbGRTdHJpbmcgPSB0aGlzLnJlbW92ZUVtcHR5KHRoaXMudG9rZW5pemUob2xkU3RyaW5nKSk7XG4gICAgbmV3U3RyaW5nID0gdGhpcy5yZW1vdmVFbXB0eSh0aGlzLnRva2VuaXplKG5ld1N0cmluZykpO1xuXG4gICAgbGV0IG5ld0xlbiA9IG5ld1N0cmluZy5sZW5ndGgsIG9sZExlbiA9IG9sZFN0cmluZy5sZW5ndGg7XG4gICAgbGV0IGVkaXRMZW5ndGggPSAxO1xuICAgIGxldCBtYXhFZGl0TGVuZ3RoID0gbmV3TGVuICsgb2xkTGVuO1xuICAgIGxldCBiZXN0UGF0aCA9IFt7IG5ld1BvczogLTEsIGNvbXBvbmVudHM6IFtdIH1dO1xuXG4gICAgLy8gU2VlZCBlZGl0TGVuZ3RoID0gMCwgaS5lLiB0aGUgY29udGVudCBzdGFydHMgd2l0aCB0aGUgc2FtZSB2YWx1ZXNcbiAgICBsZXQgb2xkUG9zID0gdGhpcy5leHRyYWN0Q29tbW9uKGJlc3RQYXRoWzBdLCBuZXdTdHJpbmcsIG9sZFN0cmluZywgMCk7XG4gICAgaWYgKGJlc3RQYXRoWzBdLm5ld1BvcyArIDEgPj0gbmV3TGVuICYmIG9sZFBvcyArIDEgPj0gb2xkTGVuKSB7XG4gICAgICAvLyBJZGVudGl0eSBwZXIgdGhlIGVxdWFsaXR5IGFuZCB0b2tlbml6ZXJcbiAgICAgIHJldHVybiBkb25lKFt7dmFsdWU6IHRoaXMuam9pbihuZXdTdHJpbmcpLCBjb3VudDogbmV3U3RyaW5nLmxlbmd0aH1dKTtcbiAgICB9XG5cbiAgICAvLyBNYWluIHdvcmtlciBtZXRob2QuIGNoZWNrcyBhbGwgcGVybXV0YXRpb25zIG9mIGEgZ2l2ZW4gZWRpdCBsZW5ndGggZm9yIGFjY2VwdGFuY2UuXG4gICAgZnVuY3Rpb24gZXhlY0VkaXRMZW5ndGgoKSB7XG4gICAgICBmb3IgKGxldCBkaWFnb25hbFBhdGggPSAtMSAqIGVkaXRMZW5ndGg7IGRpYWdvbmFsUGF0aCA8PSBlZGl0TGVuZ3RoOyBkaWFnb25hbFBhdGggKz0gMikge1xuICAgICAgICBsZXQgYmFzZVBhdGg7XG4gICAgICAgIGxldCBhZGRQYXRoID0gYmVzdFBhdGhbZGlhZ29uYWxQYXRoIC0gMV0sXG4gICAgICAgICAgICByZW1vdmVQYXRoID0gYmVzdFBhdGhbZGlhZ29uYWxQYXRoICsgMV0sXG4gICAgICAgICAgICBvbGRQb3MgPSAocmVtb3ZlUGF0aCA/IHJlbW92ZVBhdGgubmV3UG9zIDogMCkgLSBkaWFnb25hbFBhdGg7XG4gICAgICAgIGlmIChhZGRQYXRoKSB7XG4gICAgICAgICAgLy8gTm8gb25lIGVsc2UgaXMgZ29pbmcgdG8gYXR0ZW1wdCB0byB1c2UgdGhpcyB2YWx1ZSwgY2xlYXIgaXRcbiAgICAgICAgICBiZXN0UGF0aFtkaWFnb25hbFBhdGggLSAxXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjYW5BZGQgPSBhZGRQYXRoICYmIGFkZFBhdGgubmV3UG9zICsgMSA8IG5ld0xlbixcbiAgICAgICAgICAgIGNhblJlbW92ZSA9IHJlbW92ZVBhdGggJiYgMCA8PSBvbGRQb3MgJiYgb2xkUG9zIDwgb2xkTGVuO1xuICAgICAgICBpZiAoIWNhbkFkZCAmJiAhY2FuUmVtb3ZlKSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBwYXRoIGlzIGEgdGVybWluYWwgdGhlbiBwcnVuZVxuICAgICAgICAgIGJlc3RQYXRoW2RpYWdvbmFsUGF0aF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWxlY3QgdGhlIGRpYWdvbmFsIHRoYXQgd2Ugd2FudCB0byBicmFuY2ggZnJvbS4gV2Ugc2VsZWN0IHRoZSBwcmlvclxuICAgICAgICAvLyBwYXRoIHdob3NlIHBvc2l0aW9uIGluIHRoZSBuZXcgc3RyaW5nIGlzIHRoZSBmYXJ0aGVzdCBmcm9tIHRoZSBvcmlnaW5cbiAgICAgICAgLy8gYW5kIGRvZXMgbm90IHBhc3MgdGhlIGJvdW5kcyBvZiB0aGUgZGlmZiBncmFwaFxuICAgICAgICBpZiAoIWNhbkFkZCB8fCAoY2FuUmVtb3ZlICYmIGFkZFBhdGgubmV3UG9zIDwgcmVtb3ZlUGF0aC5uZXdQb3MpKSB7XG4gICAgICAgICAgYmFzZVBhdGggPSBjbG9uZVBhdGgocmVtb3ZlUGF0aCk7XG4gICAgICAgICAgc2VsZi5wdXNoQ29tcG9uZW50KGJhc2VQYXRoLmNvbXBvbmVudHMsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmFzZVBhdGggPSBhZGRQYXRoOyAgIC8vIE5vIG5lZWQgdG8gY2xvbmUsIHdlJ3ZlIHB1bGxlZCBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgYmFzZVBhdGgubmV3UG9zKys7XG4gICAgICAgICAgc2VsZi5wdXNoQ29tcG9uZW50KGJhc2VQYXRoLmNvbXBvbmVudHMsIHRydWUsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cblxuICAgICAgICBvbGRQb3MgPSBzZWxmLmV4dHJhY3RDb21tb24oYmFzZVBhdGgsIG5ld1N0cmluZywgb2xkU3RyaW5nLCBkaWFnb25hbFBhdGgpO1xuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgaGl0IHRoZSBlbmQgb2YgYm90aCBzdHJpbmdzLCB0aGVuIHdlIGFyZSBkb25lXG4gICAgICAgIGlmIChiYXNlUGF0aC5uZXdQb3MgKyAxID49IG5ld0xlbiAmJiBvbGRQb3MgKyAxID49IG9sZExlbikge1xuICAgICAgICAgIHJldHVybiBkb25lKGJ1aWxkVmFsdWVzKHNlbGYsIGJhc2VQYXRoLmNvbXBvbmVudHMsIG5ld1N0cmluZywgb2xkU3RyaW5nLCBzZWxmLnVzZUxvbmdlc3RUb2tlbikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSB0cmFjayB0aGlzIHBhdGggYXMgYSBwb3RlbnRpYWwgY2FuZGlkYXRlIGFuZCBjb250aW51ZS5cbiAgICAgICAgICBiZXN0UGF0aFtkaWFnb25hbFBhdGhdID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZWRpdExlbmd0aCsrO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm1zIHRoZSBsZW5ndGggb2YgZWRpdCBpdGVyYXRpb24uIElzIGEgYml0IGZ1Z2x5IGFzIHRoaXMgaGFzIHRvIHN1cHBvcnQgdGhlXG4gICAgLy8gc3luYyBhbmQgYXN5bmMgbW9kZSB3aGljaCBpcyBuZXZlciBmdW4uIExvb3BzIG92ZXIgZXhlY0VkaXRMZW5ndGggdW50aWwgYSB2YWx1ZVxuICAgIC8vIGlzIHByb2R1Y2VkLlxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgKGZ1bmN0aW9uIGV4ZWMoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGhhcHBlbiwgYnV0IHdlIHdhbnQgdG8gYmUgc2FmZS5cbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgIGlmIChlZGl0TGVuZ3RoID4gbWF4RWRpdExlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFleGVjRWRpdExlbmd0aCgpKSB7XG4gICAgICAgICAgICBleGVjKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgIH0oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChlZGl0TGVuZ3RoIDw9IG1heEVkaXRMZW5ndGgpIHtcbiAgICAgICAgbGV0IHJldCA9IGV4ZWNFZGl0TGVuZ3RoKCk7XG4gICAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHB1c2hDb21wb25lbnQoY29tcG9uZW50cywgYWRkZWQsIHJlbW92ZWQpIHtcbiAgICBsZXQgbGFzdCA9IGNvbXBvbmVudHNbY29tcG9uZW50cy5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdCAmJiBsYXN0LmFkZGVkID09PSBhZGRlZCAmJiBsYXN0LnJlbW92ZWQgPT09IHJlbW92ZWQpIHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gY2xvbmUgaGVyZSBhcyB0aGUgY29tcG9uZW50IGNsb25lIG9wZXJhdGlvbiBpcyBqdXN0XG4gICAgICAvLyBhcyBzaGFsbG93IGFycmF5IGNsb25lXG4gICAgICBjb21wb25lbnRzW2NvbXBvbmVudHMubGVuZ3RoIC0gMV0gPSB7Y291bnQ6IGxhc3QuY291bnQgKyAxLCBhZGRlZDogYWRkZWQsIHJlbW92ZWQ6IHJlbW92ZWQgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tcG9uZW50cy5wdXNoKHtjb3VudDogMSwgYWRkZWQ6IGFkZGVkLCByZW1vdmVkOiByZW1vdmVkIH0pO1xuICAgIH1cbiAgfSxcbiAgZXh0cmFjdENvbW1vbihiYXNlUGF0aCwgbmV3U3RyaW5nLCBvbGRTdHJpbmcsIGRpYWdvbmFsUGF0aCkge1xuICAgIGxldCBuZXdMZW4gPSBuZXdTdHJpbmcubGVuZ3RoLFxuICAgICAgICBvbGRMZW4gPSBvbGRTdHJpbmcubGVuZ3RoLFxuICAgICAgICBuZXdQb3MgPSBiYXNlUGF0aC5uZXdQb3MsXG4gICAgICAgIG9sZFBvcyA9IG5ld1BvcyAtIGRpYWdvbmFsUGF0aCxcblxuICAgICAgICBjb21tb25Db3VudCA9IDA7XG4gICAgd2hpbGUgKG5ld1BvcyArIDEgPCBuZXdMZW4gJiYgb2xkUG9zICsgMSA8IG9sZExlbiAmJiB0aGlzLmVxdWFscyhuZXdTdHJpbmdbbmV3UG9zICsgMV0sIG9sZFN0cmluZ1tvbGRQb3MgKyAxXSkpIHtcbiAgICAgIG5ld1BvcysrO1xuICAgICAgb2xkUG9zKys7XG4gICAgICBjb21tb25Db3VudCsrO1xuICAgIH1cblxuICAgIGlmIChjb21tb25Db3VudCkge1xuICAgICAgYmFzZVBhdGguY29tcG9uZW50cy5wdXNoKHtjb3VudDogY29tbW9uQ291bnR9KTtcbiAgICB9XG5cbiAgICBiYXNlUGF0aC5uZXdQb3MgPSBuZXdQb3M7XG4gICAgcmV0dXJuIG9sZFBvcztcbiAgfSxcblxuICBlcXVhbHMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhcmF0b3IpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY29tcGFyYXRvcihsZWZ0LCByaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsZWZ0ID09PSByaWdodFxuICAgICAgICB8fCAodGhpcy5vcHRpb25zLmlnbm9yZUNhc2UgJiYgbGVmdC50b0xvd2VyQ2FzZSgpID09PSByaWdodC50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZUVtcHR5KGFycmF5KSB7XG4gICAgbGV0IHJldCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJheVtpXSkge1xuICAgICAgICByZXQucHVzaChhcnJheVtpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH0sXG4gIGNhc3RJbnB1dCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgdG9rZW5pemUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuc3BsaXQoJycpO1xuICB9LFxuICBqb2luKGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBidWlsZFZhbHVlcyhkaWZmLCBjb21wb25lbnRzLCBuZXdTdHJpbmcsIG9sZFN0cmluZywgdXNlTG9uZ2VzdFRva2VuKSB7XG4gIGxldCBjb21wb25lbnRQb3MgPSAwLFxuICAgICAgY29tcG9uZW50TGVuID0gY29tcG9uZW50cy5sZW5ndGgsXG4gICAgICBuZXdQb3MgPSAwLFxuICAgICAgb2xkUG9zID0gMDtcblxuICBmb3IgKDsgY29tcG9uZW50UG9zIDwgY29tcG9uZW50TGVuOyBjb21wb25lbnRQb3MrKykge1xuICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2NvbXBvbmVudFBvc107XG4gICAgaWYgKCFjb21wb25lbnQucmVtb3ZlZCkge1xuICAgICAgaWYgKCFjb21wb25lbnQuYWRkZWQgJiYgdXNlTG9uZ2VzdFRva2VuKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IG5ld1N0cmluZy5zbGljZShuZXdQb3MsIG5ld1BvcyArIGNvbXBvbmVudC5jb3VudCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uKHZhbHVlLCBpKSB7XG4gICAgICAgICAgbGV0IG9sZFZhbHVlID0gb2xkU3RyaW5nW29sZFBvcyArIGldO1xuICAgICAgICAgIHJldHVybiBvbGRWYWx1ZS5sZW5ndGggPiB2YWx1ZS5sZW5ndGggPyBvbGRWYWx1ZSA6IHZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb21wb25lbnQudmFsdWUgPSBkaWZmLmpvaW4odmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50LnZhbHVlID0gZGlmZi5qb2luKG5ld1N0cmluZy5zbGljZShuZXdQb3MsIG5ld1BvcyArIGNvbXBvbmVudC5jb3VudCkpO1xuICAgICAgfVxuICAgICAgbmV3UG9zICs9IGNvbXBvbmVudC5jb3VudDtcblxuICAgICAgLy8gQ29tbW9uIGNhc2VcbiAgICAgIGlmICghY29tcG9uZW50LmFkZGVkKSB7XG4gICAgICAgIG9sZFBvcyArPSBjb21wb25lbnQuY291bnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXBvbmVudC52YWx1ZSA9IGRpZmYuam9pbihvbGRTdHJpbmcuc2xpY2Uob2xkUG9zLCBvbGRQb3MgKyBjb21wb25lbnQuY291bnQpKTtcbiAgICAgIG9sZFBvcyArPSBjb21wb25lbnQuY291bnQ7XG5cbiAgICAgIC8vIFJldmVyc2UgYWRkIGFuZCByZW1vdmUgc28gcmVtb3ZlcyBhcmUgb3V0cHV0IGZpcnN0IHRvIG1hdGNoIGNvbW1vbiBjb252ZW50aW9uXG4gICAgICAvLyBUaGUgZGlmZmluZyBhbGdvcml0aG0gaXMgdGllZCB0byBhZGQgdGhlbiByZW1vdmUgb3V0cHV0IGFuZCB0aGlzIGlzIHRoZSBzaW1wbGVzdFxuICAgICAgLy8gcm91dGUgdG8gZ2V0IHRoZSBkZXNpcmVkIG91dHB1dCB3aXRoIG1pbmltYWwgb3ZlcmhlYWQuXG4gICAgICBpZiAoY29tcG9uZW50UG9zICYmIGNvbXBvbmVudHNbY29tcG9uZW50UG9zIC0gMV0uYWRkZWQpIHtcbiAgICAgICAgbGV0IHRtcCA9IGNvbXBvbmVudHNbY29tcG9uZW50UG9zIC0gMV07XG4gICAgICAgIGNvbXBvbmVudHNbY29tcG9uZW50UG9zIC0gMV0gPSBjb21wb25lbnRzW2NvbXBvbmVudFBvc107XG4gICAgICAgIGNvbXBvbmVudHNbY29tcG9uZW50UG9zXSA9IHRtcDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTcGVjaWFsIGNhc2UgaGFuZGxlIGZvciB3aGVuIG9uZSB0ZXJtaW5hbCBpcyBpZ25vcmVkIChpLmUuIHdoaXRlc3BhY2UpLlxuICAvLyBGb3IgdGhpcyBjYXNlIHdlIG1lcmdlIHRoZSB0ZXJtaW5hbCBpbnRvIHRoZSBwcmlvciBzdHJpbmcgYW5kIGRyb3AgdGhlIGNoYW5nZS5cbiAgLy8gVGhpcyBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igc3RyaW5nIG1vZGUuXG4gIGxldCBsYXN0Q29tcG9uZW50ID0gY29tcG9uZW50c1tjb21wb25lbnRMZW4gLSAxXTtcbiAgaWYgKGNvbXBvbmVudExlbiA+IDFcbiAgICAgICYmIHR5cGVvZiBsYXN0Q29tcG9uZW50LnZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgJiYgKGxhc3RDb21wb25lbnQuYWRkZWQgfHwgbGFzdENvbXBvbmVudC5yZW1vdmVkKVxuICAgICAgJiYgZGlmZi5lcXVhbHMoJycsIGxhc3RDb21wb25lbnQudmFsdWUpKSB7XG4gICAgY29tcG9uZW50c1tjb21wb25lbnRMZW4gLSAyXS52YWx1ZSArPSBsYXN0Q29tcG9uZW50LnZhbHVlO1xuICAgIGNvbXBvbmVudHMucG9wKCk7XG4gIH1cblxuICByZXR1cm4gY29tcG9uZW50cztcbn1cblxuZnVuY3Rpb24gY2xvbmVQYXRoKHBhdGgpIHtcbiAgcmV0dXJuIHsgbmV3UG9zOiBwYXRoLm5ld1BvcywgY29tcG9uZW50czogcGF0aC5jb21wb25lbnRzLnNsaWNlKDApIH07XG59XG4iXX0=\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.characterDiff = undefined;\n\texports. /*istanbul ignore end*/diffChars = diffChars;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var characterDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/characterDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\tfunction diffChars(oldStr, newStr, options) {\n\t  return characterDiff.diff(oldStr, newStr, options);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2NoYXJhY3Rlci5qcyJdLCJuYW1lcyI6WyJkaWZmQ2hhcnMiLCJjaGFyYWN0ZXJEaWZmIiwib2xkU3RyIiwibmV3U3RyIiwib3B0aW9ucyIsImRpZmYiXSwibWFwcGluZ3MiOiI7Ozs7Z0NBR2dCQSxTLEdBQUFBLFM7O0FBSGhCOzs7Ozs7dUJBRU8sSUFBTUMseUZBQWdCLHdFQUF0QjtBQUNBLFNBQVNELFNBQVQsQ0FBbUJFLE1BQW5CLEVBQTJCQyxNQUEzQixFQUFtQ0MsT0FBbkMsRUFBNEM7QUFBRSxTQUFPSCxjQUFjSSxJQUFkLENBQW1CSCxNQUFuQixFQUEyQkMsTUFBM0IsRUFBbUNDLE9BQW5DLENBQVA7QUFBcUQiLCJmaWxlIjoiY2hhcmFjdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGNvbnN0IGNoYXJhY3RlckRpZmYgPSBuZXcgRGlmZigpO1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZDaGFycyhvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykgeyByZXR1cm4gY2hhcmFjdGVyRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTsgfVxuIl19\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.wordDiff = undefined;\n\texports. /*istanbul ignore end*/diffWords = diffWords;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffWordsWithSpace = diffWordsWithSpace;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\t/*istanbul ignore end*/var /*istanbul ignore start*/_params = __webpack_require__(4) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/ // Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n\t//\n\t// Ranges and exceptions:\n\t// Latin-1 Supplement, 008000FF\n\t//  - U+00D7   Multiplication sign\n\t//  - U+00F7   Division sign\n\t// Latin Extended-A, 0100017F\n\t// Latin Extended-B, 0180024F\n\t// IPA Extensions, 025002AF\n\t// Spacing Modifier Letters, 02B002FF\n\t//  - U+02C7   &#711;  Caron\n\t//  - U+02D8   &#728;  Breve\n\t//  - U+02D9   &#729;  Dot Above\n\t//  - U+02DA   &#730;  Ring Above\n\t//  - U+02DB   &#731;  Ogonek\n\t//  - U+02DC   &#732;  Small Tilde\n\t//  - U+02DD   &#733;  Double Acute Accent\n\t// Latin Extended Additional, 1E001EFF\n\tvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\n\n\tvar reWhitespace = /\\S/;\n\n\tvar wordDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/wordDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\twordDiff.equals = function (left, right) {\n\t  if (this.options.ignoreCase) {\n\t    left = left.toLowerCase();\n\t    right = right.toLowerCase();\n\t  }\n\t  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n\t};\n\twordDiff.tokenize = function (value) {\n\t  var tokens = value.split(/(\\s+|\\b)/);\n\n\t  // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\t  for (var i = 0; i < tokens.length - 1; i++) {\n\t    // If we have an empty string in the next field and we have only word chars before and after, merge\n\t    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n\t      tokens[i] += tokens[i + 2];\n\t      tokens.splice(i + 1, 2);\n\t      i--;\n\t    }\n\t  }\n\n\t  return tokens;\n\t};\n\n\tfunction diffWords(oldStr, newStr, options) {\n\t  options = /*istanbul ignore start*/(0, _params.generateOptions) /*istanbul ignore end*/(options, { ignoreWhitespace: true });\n\t  return wordDiff.diff(oldStr, newStr, options);\n\t}\n\n\tfunction diffWordsWithSpace(oldStr, newStr, options) {\n\t  return wordDiff.diff(oldStr, newStr, options);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL3dvcmQuanMiXSwibmFtZXMiOlsiZGlmZldvcmRzIiwiZGlmZldvcmRzV2l0aFNwYWNlIiwiZXh0ZW5kZWRXb3JkQ2hhcnMiLCJyZVdoaXRlc3BhY2UiLCJ3b3JkRGlmZiIsImVxdWFscyIsImxlZnQiLCJyaWdodCIsIm9wdGlvbnMiLCJpZ25vcmVDYXNlIiwidG9Mb3dlckNhc2UiLCJpZ25vcmVXaGl0ZXNwYWNlIiwidGVzdCIsInRva2VuaXplIiwidmFsdWUiLCJ0b2tlbnMiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJzcGxpY2UiLCJvbGRTdHIiLCJuZXdTdHIiLCJkaWZmIl0sIm1hcHBpbmdzIjoiOzs7O2dDQW1EZ0JBLFMsR0FBQUEsUzt5REFLQUMsa0IsR0FBQUEsa0I7O0FBeERoQjs7Ozt1QkFDQTs7Ozt3QkFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQyxvQkFBb0IsK0RBQTFCOztBQUVBLElBQU1DLGVBQWUsSUFBckI7O0FBRU8sSUFBTUMsK0VBQVcsd0VBQWpCO0FBQ1BBLFNBQVNDLE1BQVQsR0FBa0IsVUFBU0MsSUFBVCxFQUFlQyxLQUFmLEVBQXNCO0FBQ3RDLE1BQUksS0FBS0MsT0FBTCxDQUFhQyxVQUFqQixFQUE2QjtBQUMzQkgsV0FBT0EsS0FBS0ksV0FBTCxFQUFQO0FBQ0FILFlBQVFBLE1BQU1HLFdBQU4sRUFBUjtBQUNEO0FBQ0QsU0FBT0osU0FBU0MsS0FBVCxJQUFtQixLQUFLQyxPQUFMLENBQWFHLGdCQUFiLElBQWlDLENBQUNSLGFBQWFTLElBQWIsQ0FBa0JOLElBQWxCLENBQWxDLElBQTZELENBQUNILGFBQWFTLElBQWIsQ0FBa0JMLEtBQWxCLENBQXhGO0FBQ0QsQ0FORDtBQU9BSCxTQUFTUyxRQUFULEdBQW9CLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbEMsTUFBSUMsU0FBU0QsTUFBTUUsS0FBTixDQUFZLFVBQVosQ0FBYjs7QUFFQTtBQUNBLE9BQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRixPQUFPRyxNQUFQLEdBQWdCLENBQXBDLEVBQXVDRCxHQUF2QyxFQUE0QztBQUMxQztBQUNBLFFBQUksQ0FBQ0YsT0FBT0UsSUFBSSxDQUFYLENBQUQsSUFBa0JGLE9BQU9FLElBQUksQ0FBWCxDQUFsQixJQUNLZixrQkFBa0JVLElBQWxCLENBQXVCRyxPQUFPRSxDQUFQLENBQXZCLENBREwsSUFFS2Ysa0JBQWtCVSxJQUFsQixDQUF1QkcsT0FBT0UsSUFBSSxDQUFYLENBQXZCLENBRlQsRUFFZ0Q7QUFDOUNGLGFBQU9FLENBQVAsS0FBYUYsT0FBT0UsSUFBSSxDQUFYLENBQWI7QUFDQUYsYUFBT0ksTUFBUCxDQUFjRixJQUFJLENBQWxCLEVBQXFCLENBQXJCO0FBQ0FBO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPRixNQUFQO0FBQ0QsQ0FoQkQ7O0FBa0JPLFNBQVNmLFNBQVQsQ0FBbUJvQixNQUFuQixFQUEyQkMsTUFBM0IsRUFBbUNiLE9BQW5DLEVBQTRDO0FBQ2pEQSxZQUFVLDhFQUFnQkEsT0FBaEIsRUFBeUIsRUFBQ0csa0JBQWtCLElBQW5CLEVBQXpCLENBQVY7QUFDQSxTQUFPUCxTQUFTa0IsSUFBVCxDQUFjRixNQUFkLEVBQXNCQyxNQUF0QixFQUE4QmIsT0FBOUIsQ0FBUDtBQUNEOztBQUVNLFNBQVNQLGtCQUFULENBQTRCbUIsTUFBNUIsRUFBb0NDLE1BQXBDLEVBQTRDYixPQUE1QyxFQUFxRDtBQUMxRCxTQUFPSixTQUFTa0IsSUFBVCxDQUFjRixNQUFkLEVBQXNCQyxNQUF0QixFQUE4QmIsT0FBOUIsQ0FBUDtBQUNEIiwiZmlsZSI6IndvcmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGlmZiBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0IHtnZW5lcmF0ZU9wdGlvbnN9IGZyb20gJy4uL3V0aWwvcGFyYW1zJztcblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGF0aW5fc2NyaXB0X2luX1VuaWNvZGVcbi8vXG4vLyBSYW5nZXMgYW5kIGV4Y2VwdGlvbnM6XG4vLyBMYXRpbi0xIFN1cHBsZW1lbnQsIDAwODDigJMwMEZGXG4vLyAgLSBVKzAwRDcgIMOXIE11bHRpcGxpY2F0aW9uIHNpZ25cbi8vICAtIFUrMDBGNyAgw7cgRGl2aXNpb24gc2lnblxuLy8gTGF0aW4gRXh0ZW5kZWQtQSwgMDEwMOKAkzAxN0Zcbi8vIExhdGluIEV4dGVuZGVkLUIsIDAxODDigJMwMjRGXG4vLyBJUEEgRXh0ZW5zaW9ucywgMDI1MOKAkzAyQUZcbi8vIFNwYWNpbmcgTW9kaWZpZXIgTGV0dGVycywgMDJCMOKAkzAyRkZcbi8vICAtIFUrMDJDNyAgy4cgJiM3MTE7ICBDYXJvblxuLy8gIC0gVSswMkQ4ICDLmCAmIzcyODsgIEJyZXZlXG4vLyAgLSBVKzAyRDkgIMuZICYjNzI5OyAgRG90IEFib3ZlXG4vLyAgLSBVKzAyREEgIMuaICYjNzMwOyAgUmluZyBBYm92ZVxuLy8gIC0gVSswMkRCICDLmyAmIzczMTsgIE9nb25la1xuLy8gIC0gVSswMkRDICDLnCAmIzczMjsgIFNtYWxsIFRpbGRlXG4vLyAgLSBVKzAyREQgIMudICYjNzMzOyAgRG91YmxlIEFjdXRlIEFjY2VudFxuLy8gTGF0aW4gRXh0ZW5kZWQgQWRkaXRpb25hbCwgMUUwMOKAkzFFRkZcbmNvbnN0IGV4dGVuZGVkV29yZENoYXJzID0gL15bYS16QS1aXFx1e0MwfS1cXHV7RkZ9XFx1e0Q4fS1cXHV7RjZ9XFx1e0Y4fS1cXHV7MkM2fVxcdXsyQzh9LVxcdXsyRDd9XFx1ezJERX0tXFx1ezJGRn1cXHV7MUUwMH0tXFx1ezFFRkZ9XSskL3U7XG5cbmNvbnN0IHJlV2hpdGVzcGFjZSA9IC9cXFMvO1xuXG5leHBvcnQgY29uc3Qgd29yZERpZmYgPSBuZXcgRGlmZigpO1xud29yZERpZmYuZXF1YWxzID0gZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgaWYgKHRoaXMub3B0aW9ucy5pZ25vcmVDYXNlKSB7XG4gICAgbGVmdCA9IGxlZnQudG9Mb3dlckNhc2UoKTtcbiAgICByaWdodCA9IHJpZ2h0LnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgcmV0dXJuIGxlZnQgPT09IHJpZ2h0IHx8ICh0aGlzLm9wdGlvbnMuaWdub3JlV2hpdGVzcGFjZSAmJiAhcmVXaGl0ZXNwYWNlLnRlc3QobGVmdCkgJiYgIXJlV2hpdGVzcGFjZS50ZXN0KHJpZ2h0KSk7XG59O1xud29yZERpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICBsZXQgdG9rZW5zID0gdmFsdWUuc3BsaXQoLyhcXHMrfFxcYikvKTtcblxuICAvLyBKb2luIHRoZSBib3VuZGFyeSBzcGxpdHMgdGhhdCB3ZSBkbyBub3QgY29uc2lkZXIgdG8gYmUgYm91bmRhcmllcy4gVGhpcyBpcyBwcmltYXJpbHkgdGhlIGV4dGVuZGVkIExhdGluIGNoYXJhY3RlciBzZXQuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIC8vIElmIHdlIGhhdmUgYW4gZW1wdHkgc3RyaW5nIGluIHRoZSBuZXh0IGZpZWxkIGFuZCB3ZSBoYXZlIG9ubHkgd29yZCBjaGFycyBiZWZvcmUgYW5kIGFmdGVyLCBtZXJnZVxuICAgIGlmICghdG9rZW5zW2kgKyAxXSAmJiB0b2tlbnNbaSArIDJdXG4gICAgICAgICAgJiYgZXh0ZW5kZWRXb3JkQ2hhcnMudGVzdCh0b2tlbnNbaV0pXG4gICAgICAgICAgJiYgZXh0ZW5kZWRXb3JkQ2hhcnMudGVzdCh0b2tlbnNbaSArIDJdKSkge1xuICAgICAgdG9rZW5zW2ldICs9IHRva2Vuc1tpICsgMl07XG4gICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAyKTtcbiAgICAgIGktLTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZXb3JkcyhvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZ2VuZXJhdGVPcHRpb25zKG9wdGlvbnMsIHtpZ25vcmVXaGl0ZXNwYWNlOiB0cnVlfSk7XG4gIHJldHVybiB3b3JkRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZXb3Jkc1dpdGhTcGFjZShvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykge1xuICByZXR1cm4gd29yZERpZmYuZGlmZihvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucyk7XG59XG4iXX0=\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/generateOptions = generateOptions;\n\tfunction generateOptions(options, defaults) {\n\t  if (typeof options === 'function') {\n\t    defaults.callback = options;\n\t  } else if (options) {\n\t    for (var name in options) {\n\t      /* istanbul ignore else */\n\t      if (options.hasOwnProperty(name)) {\n\t        defaults[name] = options[name];\n\t      }\n\t    }\n\t  }\n\t  return defaults;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3BhcmFtcy5qcyJdLCJuYW1lcyI6WyJnZW5lcmF0ZU9wdGlvbnMiLCJvcHRpb25zIiwiZGVmYXVsdHMiLCJjYWxsYmFjayIsIm5hbWUiLCJoYXNPd25Qcm9wZXJ0eSJdLCJtYXBwaW5ncyI6Ijs7O2dDQUFnQkEsZSxHQUFBQSxlO0FBQVQsU0FBU0EsZUFBVCxDQUF5QkMsT0FBekIsRUFBa0NDLFFBQWxDLEVBQTRDO0FBQ2pELE1BQUksT0FBT0QsT0FBUCxLQUFtQixVQUF2QixFQUFtQztBQUNqQ0MsYUFBU0MsUUFBVCxHQUFvQkYsT0FBcEI7QUFDRCxHQUZELE1BRU8sSUFBSUEsT0FBSixFQUFhO0FBQ2xCLFNBQUssSUFBSUcsSUFBVCxJQUFpQkgsT0FBakIsRUFBMEI7QUFDeEI7QUFDQSxVQUFJQSxRQUFRSSxjQUFSLENBQXVCRCxJQUF2QixDQUFKLEVBQWtDO0FBQ2hDRixpQkFBU0UsSUFBVCxJQUFpQkgsUUFBUUcsSUFBUixDQUFqQjtBQUNEO0FBQ0Y7QUFDRjtBQUNELFNBQU9GLFFBQVA7QUFDRCIsImZpbGUiOiJwYXJhbXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRzKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGRlZmF1bHRzLmNhbGxiYWNrID0gb3B0aW9ucztcbiAgfSBlbHNlIGlmIChvcHRpb25zKSB7XG4gICAgZm9yIChsZXQgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZGVmYXVsdHNbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGVmYXVsdHM7XG59XG4iXX0=\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.lineDiff = undefined;\n\texports. /*istanbul ignore end*/diffLines = diffLines;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/diffTrimmedLines = diffTrimmedLines;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\t/*istanbul ignore end*/var /*istanbul ignore start*/_params = __webpack_require__(4) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var lineDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/lineDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\tlineDiff.tokenize = function (value) {\n\t  var retLines = [],\n\t      linesAndNewlines = value.split(/(\\n|\\r\\n)/);\n\n\t  // Ignore the final empty token that occurs if the string ends with a new line\n\t  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n\t    linesAndNewlines.pop();\n\t  }\n\n\t  // Merge the content and line separators into single tokens\n\t  for (var i = 0; i < linesAndNewlines.length; i++) {\n\t    var line = linesAndNewlines[i];\n\n\t    if (i % 2 && !this.options.newlineIsToken) {\n\t      retLines[retLines.length - 1] += line;\n\t    } else {\n\t      if (this.options.ignoreWhitespace) {\n\t        line = line.trim();\n\t      }\n\t      retLines.push(line);\n\t    }\n\t  }\n\n\t  return retLines;\n\t};\n\n\tfunction diffLines(oldStr, newStr, callback) {\n\t  return lineDiff.diff(oldStr, newStr, callback);\n\t}\n\tfunction diffTrimmedLines(oldStr, newStr, callback) {\n\t  var options = /*istanbul ignore start*/(0, _params.generateOptions) /*istanbul ignore end*/(callback, { ignoreWhitespace: true });\n\t  return lineDiff.diff(oldStr, newStr, options);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2xpbmUuanMiXSwibmFtZXMiOlsiZGlmZkxpbmVzIiwiZGlmZlRyaW1tZWRMaW5lcyIsImxpbmVEaWZmIiwidG9rZW5pemUiLCJ2YWx1ZSIsInJldExpbmVzIiwibGluZXNBbmROZXdsaW5lcyIsInNwbGl0IiwibGVuZ3RoIiwicG9wIiwiaSIsImxpbmUiLCJvcHRpb25zIiwibmV3bGluZUlzVG9rZW4iLCJpZ25vcmVXaGl0ZXNwYWNlIiwidHJpbSIsInB1c2giLCJvbGRTdHIiLCJuZXdTdHIiLCJjYWxsYmFjayIsImRpZmYiXSwibWFwcGluZ3MiOiI7Ozs7Z0NBOEJnQkEsUyxHQUFBQSxTO3lEQUNBQyxnQixHQUFBQSxnQjs7QUEvQmhCOzs7O3VCQUNBOzs7O3VCQUVPLElBQU1DLCtFQUFXLHdFQUFqQjtBQUNQQSxTQUFTQyxRQUFULEdBQW9CLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbEMsTUFBSUMsV0FBVyxFQUFmO0FBQUEsTUFDSUMsbUJBQW1CRixNQUFNRyxLQUFOLENBQVksV0FBWixDQUR2Qjs7QUFHQTtBQUNBLE1BQUksQ0FBQ0QsaUJBQWlCQSxpQkFBaUJFLE1BQWpCLEdBQTBCLENBQTNDLENBQUwsRUFBb0Q7QUFDbERGLHFCQUFpQkcsR0FBakI7QUFDRDs7QUFFRDtBQUNBLE9BQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJSixpQkFBaUJFLE1BQXJDLEVBQTZDRSxHQUE3QyxFQUFrRDtBQUNoRCxRQUFJQyxPQUFPTCxpQkFBaUJJLENBQWpCLENBQVg7O0FBRUEsUUFBSUEsSUFBSSxDQUFKLElBQVMsQ0FBQyxLQUFLRSxPQUFMLENBQWFDLGNBQTNCLEVBQTJDO0FBQ3pDUixlQUFTQSxTQUFTRyxNQUFULEdBQWtCLENBQTNCLEtBQWlDRyxJQUFqQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUksS0FBS0MsT0FBTCxDQUFhRSxnQkFBakIsRUFBbUM7QUFDakNILGVBQU9BLEtBQUtJLElBQUwsRUFBUDtBQUNEO0FBQ0RWLGVBQVNXLElBQVQsQ0FBY0wsSUFBZDtBQUNEO0FBQ0Y7O0FBRUQsU0FBT04sUUFBUDtBQUNELENBeEJEOztBQTBCTyxTQUFTTCxTQUFULENBQW1CaUIsTUFBbkIsRUFBMkJDLE1BQTNCLEVBQW1DQyxRQUFuQyxFQUE2QztBQUFFLFNBQU9qQixTQUFTa0IsSUFBVCxDQUFjSCxNQUFkLEVBQXNCQyxNQUF0QixFQUE4QkMsUUFBOUIsQ0FBUDtBQUFpRDtBQUNoRyxTQUFTbEIsZ0JBQVQsQ0FBMEJnQixNQUExQixFQUFrQ0MsTUFBbEMsRUFBMENDLFFBQTFDLEVBQW9EO0FBQ3pELE1BQUlQLFVBQVUsOEVBQWdCTyxRQUFoQixFQUEwQixFQUFDTCxrQkFBa0IsSUFBbkIsRUFBMUIsQ0FBZDtBQUNBLFNBQU9aLFNBQVNrQixJQUFULENBQWNILE1BQWQsRUFBc0JDLE1BQXRCLEVBQThCTixPQUE5QixDQUFQO0FBQ0QiLCJmaWxlIjoibGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaWZmIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQge2dlbmVyYXRlT3B0aW9uc30gZnJvbSAnLi4vdXRpbC9wYXJhbXMnO1xuXG5leHBvcnQgY29uc3QgbGluZURpZmYgPSBuZXcgRGlmZigpO1xubGluZURpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICBsZXQgcmV0TGluZXMgPSBbXSxcbiAgICAgIGxpbmVzQW5kTmV3bGluZXMgPSB2YWx1ZS5zcGxpdCgvKFxcbnxcXHJcXG4pLyk7XG5cbiAgLy8gSWdub3JlIHRoZSBmaW5hbCBlbXB0eSB0b2tlbiB0aGF0IG9jY3VycyBpZiB0aGUgc3RyaW5nIGVuZHMgd2l0aCBhIG5ldyBsaW5lXG4gIGlmICghbGluZXNBbmROZXdsaW5lc1tsaW5lc0FuZE5ld2xpbmVzLmxlbmd0aCAtIDFdKSB7XG4gICAgbGluZXNBbmROZXdsaW5lcy5wb3AoKTtcbiAgfVxuXG4gIC8vIE1lcmdlIHRoZSBjb250ZW50IGFuZCBsaW5lIHNlcGFyYXRvcnMgaW50byBzaW5nbGUgdG9rZW5zXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXNBbmROZXdsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBsaW5lID0gbGluZXNBbmROZXdsaW5lc1tpXTtcblxuICAgIGlmIChpICUgMiAmJiAhdGhpcy5vcHRpb25zLm5ld2xpbmVJc1Rva2VuKSB7XG4gICAgICByZXRMaW5lc1tyZXRMaW5lcy5sZW5ndGggLSAxXSArPSBsaW5lO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmlnbm9yZVdoaXRlc3BhY2UpIHtcbiAgICAgICAgbGluZSA9IGxpbmUudHJpbSgpO1xuICAgICAgfVxuICAgICAgcmV0TGluZXMucHVzaChsaW5lKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0TGluZXM7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZkxpbmVzKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjaykgeyByZXR1cm4gbGluZURpZmYuZGlmZihvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spOyB9XG5leHBvcnQgZnVuY3Rpb24gZGlmZlRyaW1tZWRMaW5lcyhvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spIHtcbiAgbGV0IG9wdGlvbnMgPSBnZW5lcmF0ZU9wdGlvbnMoY2FsbGJhY2ssIHtpZ25vcmVXaGl0ZXNwYWNlOiB0cnVlfSk7XG4gIHJldHVybiBsaW5lRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTtcbn1cbiJdfQ==\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.sentenceDiff = undefined;\n\texports. /*istanbul ignore end*/diffSentences = diffSentences;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var sentenceDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/sentenceDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\tsentenceDiff.tokenize = function (value) {\n\t  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n\t};\n\n\tfunction diffSentences(oldStr, newStr, callback) {\n\t  return sentenceDiff.diff(oldStr, newStr, callback);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL3NlbnRlbmNlLmpzIl0sIm5hbWVzIjpbImRpZmZTZW50ZW5jZXMiLCJzZW50ZW5jZURpZmYiLCJ0b2tlbml6ZSIsInZhbHVlIiwic3BsaXQiLCJvbGRTdHIiLCJuZXdTdHIiLCJjYWxsYmFjayIsImRpZmYiXSwibWFwcGluZ3MiOiI7Ozs7Z0NBUWdCQSxhLEdBQUFBLGE7O0FBUmhCOzs7Ozs7dUJBR08sSUFBTUMsdUZBQWUsd0VBQXJCO0FBQ1BBLGFBQWFDLFFBQWIsR0FBd0IsVUFBU0MsS0FBVCxFQUFnQjtBQUN0QyxTQUFPQSxNQUFNQyxLQUFOLENBQVksdUJBQVosQ0FBUDtBQUNELENBRkQ7O0FBSU8sU0FBU0osYUFBVCxDQUF1QkssTUFBdkIsRUFBK0JDLE1BQS9CLEVBQXVDQyxRQUF2QyxFQUFpRDtBQUFFLFNBQU9OLGFBQWFPLElBQWIsQ0FBa0JILE1BQWxCLEVBQTBCQyxNQUExQixFQUFrQ0MsUUFBbEMsQ0FBUDtBQUFxRCIsImZpbGUiOiJzZW50ZW5jZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaWZmIGZyb20gJy4vYmFzZSc7XG5cblxuZXhwb3J0IGNvbnN0IHNlbnRlbmNlRGlmZiA9IG5ldyBEaWZmKCk7XG5zZW50ZW5jZURpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUuc3BsaXQoLyhcXFMuKz9bLiE/XSkoPz1cXHMrfCQpLyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZlNlbnRlbmNlcyhvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spIHsgcmV0dXJuIHNlbnRlbmNlRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjayk7IH1cbiJdfQ==\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.cssDiff = undefined;\n\texports. /*istanbul ignore end*/diffCss = diffCss;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var cssDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/cssDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\tcssDiff.tokenize = function (value) {\n\t  return value.split(/([{}:;,]|\\s+)/);\n\t};\n\n\tfunction diffCss(oldStr, newStr, callback) {\n\t  return cssDiff.diff(oldStr, newStr, callback);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2Nzcy5qcyJdLCJuYW1lcyI6WyJkaWZmQ3NzIiwiY3NzRGlmZiIsInRva2VuaXplIiwidmFsdWUiLCJzcGxpdCIsIm9sZFN0ciIsIm5ld1N0ciIsImNhbGxiYWNrIiwiZGlmZiJdLCJtYXBwaW5ncyI6Ijs7OztnQ0FPZ0JBLE8sR0FBQUEsTzs7QUFQaEI7Ozs7Ozt1QkFFTyxJQUFNQyw2RUFBVSx3RUFBaEI7QUFDUEEsUUFBUUMsUUFBUixHQUFtQixVQUFTQyxLQUFULEVBQWdCO0FBQ2pDLFNBQU9BLE1BQU1DLEtBQU4sQ0FBWSxlQUFaLENBQVA7QUFDRCxDQUZEOztBQUlPLFNBQVNKLE9BQVQsQ0FBaUJLLE1BQWpCLEVBQXlCQyxNQUF6QixFQUFpQ0MsUUFBakMsRUFBMkM7QUFBRSxTQUFPTixRQUFRTyxJQUFSLENBQWFILE1BQWIsRUFBcUJDLE1BQXJCLEVBQTZCQyxRQUE3QixDQUFQO0FBQWdEIiwiZmlsZSI6ImNzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaWZmIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBjb25zdCBjc3NEaWZmID0gbmV3IERpZmYoKTtcbmNzc0RpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUuc3BsaXQoLyhbe306OyxdfFxccyspLyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZkNzcyhvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spIHsgcmV0dXJuIGNzc0RpZmYuZGlmZihvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spOyB9XG4iXX0=\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.jsonDiff = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\texports. /*istanbul ignore end*/diffJson = diffJson;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/canonicalize = canonicalize;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\t/*istanbul ignore end*/var /*istanbul ignore start*/_line = __webpack_require__(5) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var objectPrototypeToString = Object.prototype.toString;\n\n\tvar jsonDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/jsonDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\t// Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n\t// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\tjsonDiff.useLongestToken = true;\n\n\tjsonDiff.tokenize = /*istanbul ignore start*/_line.lineDiff /*istanbul ignore end*/.tokenize;\n\tjsonDiff.castInput = function (value) {\n\t  /*istanbul ignore start*/var _options = /*istanbul ignore end*/this.options,\n\t      undefinedReplacement = _options.undefinedReplacement,\n\t      _options$stringifyRep = _options.stringifyReplacer,\n\t      stringifyReplacer = _options$stringifyRep === undefined ? function (k, v) /*istanbul ignore start*/{\n\t    return (/*istanbul ignore end*/typeof v === 'undefined' ? undefinedReplacement : v\n\t    );\n\t  } : _options$stringifyRep;\n\n\n\t  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n\t};\n\tjsonDiff.equals = function (left, right) {\n\t  return (/*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'))\n\t  );\n\t};\n\n\tfunction diffJson(oldObj, newObj, options) {\n\t  return jsonDiff.diff(oldObj, newObj, options);\n\t}\n\n\t// This function handles the presence of circular references by bailing out when encountering an\n\t// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\tfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n\t  stack = stack || [];\n\t  replacementStack = replacementStack || [];\n\n\t  if (replacer) {\n\t    obj = replacer(key, obj);\n\t  }\n\n\t  var i = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\n\t  for (i = 0; i < stack.length; i += 1) {\n\t    if (stack[i] === obj) {\n\t      return replacementStack[i];\n\t    }\n\t  }\n\n\t  var canonicalizedObj = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\n\t  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n\t    stack.push(obj);\n\t    canonicalizedObj = new Array(obj.length);\n\t    replacementStack.push(canonicalizedObj);\n\t    for (i = 0; i < obj.length; i += 1) {\n\t      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n\t    }\n\t    stack.pop();\n\t    replacementStack.pop();\n\t    return canonicalizedObj;\n\t  }\n\n\t  if (obj && obj.toJSON) {\n\t    obj = obj.toJSON();\n\t  }\n\n\t  if ( /*istanbul ignore start*/(typeof /*istanbul ignore end*/obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj !== null) {\n\t    stack.push(obj);\n\t    canonicalizedObj = {};\n\t    replacementStack.push(canonicalizedObj);\n\t    var sortedKeys = [],\n\t        _key = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\t    for (_key in obj) {\n\t      /* istanbul ignore else */\n\t      if (obj.hasOwnProperty(_key)) {\n\t        sortedKeys.push(_key);\n\t      }\n\t    }\n\t    sortedKeys.sort();\n\t    for (i = 0; i < sortedKeys.length; i += 1) {\n\t      _key = sortedKeys[i];\n\t      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n\t    }\n\t    stack.pop();\n\t    replacementStack.pop();\n\t  } else {\n\t    canonicalizedObj = obj;\n\t  }\n\t  return canonicalizedObj;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2pzb24uanMiXSwibmFtZXMiOlsiZGlmZkpzb24iLCJjYW5vbmljYWxpemUiLCJvYmplY3RQcm90b3R5cGVUb1N0cmluZyIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwianNvbkRpZmYiLCJ1c2VMb25nZXN0VG9rZW4iLCJ0b2tlbml6ZSIsImNhc3RJbnB1dCIsInZhbHVlIiwib3B0aW9ucyIsInVuZGVmaW5lZFJlcGxhY2VtZW50Iiwic3RyaW5naWZ5UmVwbGFjZXIiLCJrIiwidiIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcXVhbHMiLCJsZWZ0IiwicmlnaHQiLCJjYWxsIiwicmVwbGFjZSIsIm9sZE9iaiIsIm5ld09iaiIsImRpZmYiLCJvYmoiLCJzdGFjayIsInJlcGxhY2VtZW50U3RhY2siLCJyZXBsYWNlciIsImtleSIsImkiLCJsZW5ndGgiLCJjYW5vbmljYWxpemVkT2JqIiwicHVzaCIsIkFycmF5IiwicG9wIiwidG9KU09OIiwic29ydGVkS2V5cyIsImhhc093blByb3BlcnR5Iiwic29ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztnQ0FxQmdCQSxRLEdBQUFBLFE7eURBSUFDLFksR0FBQUEsWTs7QUF6QmhCOzs7O3VCQUNBOzs7O3VCQUVBLElBQU1DLDBCQUEwQkMsT0FBT0MsU0FBUCxDQUFpQkMsUUFBakQ7O0FBR08sSUFBTUMsK0VBQVcsd0VBQWpCO0FBQ1A7QUFDQTtBQUNBQSxTQUFTQyxlQUFULEdBQTJCLElBQTNCOztBQUVBRCxTQUFTRSxRQUFULEdBQW9CLGdFQUFTQSxRQUE3QjtBQUNBRixTQUFTRyxTQUFULEdBQXFCLFVBQVNDLEtBQVQsRUFBZ0I7QUFBQSxpRUFDK0UsS0FBS0MsT0FEcEY7QUFBQSxNQUM1QkMsb0JBRDRCLFlBQzVCQSxvQkFENEI7QUFBQSx1Q0FDTkMsaUJBRE07QUFBQSxNQUNOQSxpQkFETSx5Q0FDYyxVQUFDQyxDQUFELEVBQUlDLENBQUo7QUFBQSxtQ0FBVSxPQUFPQSxDQUFQ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QUFLVCxJQUFJLENBQVQsRUFBWUEsSUFBSU8sV0FBV04sTUFBM0IsRUFBbUNELEtBQUssQ0FBeEMsRUFBMkM7QUFDekNELGFBQU1RLFdBQVdQLENBQVgsQ0FBTjtBQUNBRSx1QkFBaUJILElBQWpCLElBQXdCN0IsYUFBYXlCLElBQUlJLElBQUosQ0FBYixFQUF1QkgsS0FBdkIsRUFBOEJDLGdCQUE5QixFQUFnREMsUUFBaEQsRUFBMERDLElBQTFELENBQXhCO0FBQ0Q7QUFDREgsVUFBTVMsR0FBTjtBQUNBUixxQkFBaUJRLEdBQWpCO0FBQ0QsR0FuQkQsTUFtQk87QUFDTEgsdUJBQW1CUCxHQUFuQjtBQUNEO0FBQ0QsU0FBT08sZ0JBQVA7QUFDRCIsImZpbGUiOiJqc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7bGluZURpZmZ9IGZyb20gJy4vbGluZSc7XG5cbmNvbnN0IG9iamVjdFByb3RvdHlwZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuXG5leHBvcnQgY29uc3QganNvbkRpZmYgPSBuZXcgRGlmZigpO1xuLy8gRGlzY3JpbWluYXRlIGJldHdlZW4gdHdvIGxpbmVzIG9mIHByZXR0eS1wcmludGVkLCBzZXJpYWxpemVkIEpTT04gd2hlcmUgb25lIG9mIHRoZW0gaGFzIGFcbi8vIGRhbmdsaW5nIGNvbW1hIGFuZCB0aGUgb3RoZXIgZG9lc24ndC4gVHVybnMgb3V0IGluY2x1ZGluZyB0aGUgZGFuZ2xpbmcgY29tbWEgeWllbGRzIHRoZSBuaWNlc3Qgb3V0cHV0OlxuanNvbkRpZmYudXNlTG9uZ2VzdFRva2VuID0gdHJ1ZTtcblxuanNvbkRpZmYudG9rZW5pemUgPSBsaW5lRGlmZi50b2tlbml6ZTtcbmpzb25EaWZmLmNhc3RJbnB1dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGNvbnN0IHt1bmRlZmluZWRSZXBsYWNlbWVudCwgc3RyaW5naWZ5UmVwbGFjZXIgPSAoaywgdikgPT4gdHlwZW9mIHYgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkUmVwbGFjZW1lbnQgOiB2fSA9IHRoaXMub3B0aW9ucztcblxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkoY2Fub25pY2FsaXplKHZhbHVlLCBudWxsLCBudWxsLCBzdHJpbmdpZnlSZXBsYWNlciksIHN0cmluZ2lmeVJlcGxhY2VyLCAnICAnKTtcbn07XG5qc29uRGlmZi5lcXVhbHMgPSBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICByZXR1cm4gRGlmZi5wcm90b3R5cGUuZXF1YWxzLmNhbGwoanNvbkRpZmYsIGxlZnQucmVwbGFjZSgvLChbXFxyXFxuXSkvZywgJyQxJyksIHJpZ2h0LnJlcGxhY2UoLywoW1xcclxcbl0pL2csICckMScpKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmSnNvbihvbGRPYmosIG5ld09iaiwgb3B0aW9ucykgeyByZXR1cm4ganNvbkRpZmYuZGlmZihvbGRPYmosIG5ld09iaiwgb3B0aW9ucyk7IH1cblxuLy8gVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBwcmVzZW5jZSBvZiBjaXJjdWxhciByZWZlcmVuY2VzIGJ5IGJhaWxpbmcgb3V0IHdoZW4gZW5jb3VudGVyaW5nIGFuXG4vLyBvYmplY3QgdGhhdCBpcyBhbHJlYWR5IG9uIHRoZSBcInN0YWNrXCIgb2YgaXRlbXMgYmVpbmcgcHJvY2Vzc2VkLiBBY2NlcHRzIGFuIG9wdGlvbmFsIHJlcGxhY2VyXG5leHBvcnQgZnVuY3Rpb24gY2Fub25pY2FsaXplKG9iaiwgc3RhY2ssIHJlcGxhY2VtZW50U3RhY2ssIHJlcGxhY2VyLCBrZXkpIHtcbiAgc3RhY2sgPSBzdGFjayB8fCBbXTtcbiAgcmVwbGFjZW1lbnRTdGFjayA9IHJlcGxhY2VtZW50U3RhY2sgfHwgW107XG5cbiAgaWYgKHJlcGxhY2VyKSB7XG4gICAgb2JqID0gcmVwbGFjZXIoa2V5LCBvYmopO1xuICB9XG5cbiAgbGV0IGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHN0YWNrW2ldID09PSBvYmopIHtcbiAgICAgIHJldHVybiByZXBsYWNlbWVudFN0YWNrW2ldO1xuICAgIH1cbiAgfVxuXG4gIGxldCBjYW5vbmljYWxpemVkT2JqO1xuXG4gIGlmICgnW29iamVjdCBBcnJheV0nID09PSBvYmplY3RQcm90b3R5cGVUb1N0cmluZy5jYWxsKG9iaikpIHtcbiAgICBzdGFjay5wdXNoKG9iaik7XG4gICAgY2Fub25pY2FsaXplZE9iaiA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICByZXBsYWNlbWVudFN0YWNrLnB1c2goY2Fub25pY2FsaXplZE9iaik7XG4gICAgZm9yIChpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY2Fub25pY2FsaXplZE9ialtpXSA9IGNhbm9uaWNhbGl6ZShvYmpbaV0sIHN0YWNrLCByZXBsYWNlbWVudFN0YWNrLCByZXBsYWNlciwga2V5KTtcbiAgICB9XG4gICAgc3RhY2sucG9wKCk7XG4gICAgcmVwbGFjZW1lbnRTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gY2Fub25pY2FsaXplZE9iajtcbiAgfVxuXG4gIGlmIChvYmogJiYgb2JqLnRvSlNPTikge1xuICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpIHtcbiAgICBzdGFjay5wdXNoKG9iaik7XG4gICAgY2Fub25pY2FsaXplZE9iaiA9IHt9O1xuICAgIHJlcGxhY2VtZW50U3RhY2sucHVzaChjYW5vbmljYWxpemVkT2JqKTtcbiAgICBsZXQgc29ydGVkS2V5cyA9IFtdLFxuICAgICAgICBrZXk7XG4gICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHNvcnRlZEtleXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3J0ZWRLZXlzLnNvcnQoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc29ydGVkS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAga2V5ID0gc29ydGVkS2V5c1tpXTtcbiAgICAgIGNhbm9uaWNhbGl6ZWRPYmpba2V5XSA9IGNhbm9uaWNhbGl6ZShvYmpba2V5XSwgc3RhY2ssIHJlcGxhY2VtZW50U3RhY2ssIHJlcGxhY2VyLCBrZXkpO1xuICAgIH1cbiAgICBzdGFjay5wb3AoKTtcbiAgICByZXBsYWNlbWVudFN0YWNrLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIGNhbm9uaWNhbGl6ZWRPYmogPSBvYmo7XG4gIH1cbiAgcmV0dXJuIGNhbm9uaWNhbGl6ZWRPYmo7XG59XG4iXX0=\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports.arrayDiff = undefined;\n\texports. /*istanbul ignore end*/diffArrays = diffArrays;\n\n\tvar /*istanbul ignore start*/_base = __webpack_require__(1) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _base2 = _interopRequireDefault(_base);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/var arrayDiff = /*istanbul ignore start*/exports. /*istanbul ignore end*/arrayDiff = new /*istanbul ignore start*/_base2['default'] /*istanbul ignore end*/();\n\tarrayDiff.tokenize = function (value) {\n\t  return value.slice();\n\t};\n\tarrayDiff.join = arrayDiff.removeEmpty = function (value) {\n\t  return value;\n\t};\n\n\tfunction diffArrays(oldArr, newArr, callback) {\n\t  return arrayDiff.diff(oldArr, newArr, callback);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2FycmF5LmpzIl0sIm5hbWVzIjpbImRpZmZBcnJheXMiLCJhcnJheURpZmYiLCJ0b2tlbml6ZSIsInZhbHVlIiwic2xpY2UiLCJqb2luIiwicmVtb3ZlRW1wdHkiLCJvbGRBcnIiLCJuZXdBcnIiLCJjYWxsYmFjayIsImRpZmYiXSwibWFwcGluZ3MiOiI7Ozs7Z0NBVWdCQSxVLEdBQUFBLFU7O0FBVmhCOzs7Ozs7dUJBRU8sSUFBTUMsaUZBQVksd0VBQWxCO0FBQ1BBLFVBQVVDLFFBQVYsR0FBcUIsVUFBU0MsS0FBVCxFQUFnQjtBQUNuQyxTQUFPQSxNQUFNQyxLQUFOLEVBQVA7QUFDRCxDQUZEO0FBR0FILFVBQVVJLElBQVYsR0FBaUJKLFVBQVVLLFdBQVYsR0FBd0IsVUFBU0gsS0FBVCxFQUFnQjtBQUN2RCxTQUFPQSxLQUFQO0FBQ0QsQ0FGRDs7QUFJTyxTQUFTSCxVQUFULENBQW9CTyxNQUFwQixFQUE0QkMsTUFBNUIsRUFBb0NDLFFBQXBDLEVBQThDO0FBQUUsU0FBT1IsVUFBVVMsSUFBVixDQUFlSCxNQUFmLEVBQXVCQyxNQUF2QixFQUErQkMsUUFBL0IsQ0FBUDtBQUFrRCIsImZpbGUiOiJhcnJheS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaWZmIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBjb25zdCBhcnJheURpZmYgPSBuZXcgRGlmZigpO1xuYXJyYXlEaWZmLnRva2VuaXplID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnNsaWNlKCk7XG59O1xuYXJyYXlEaWZmLmpvaW4gPSBhcnJheURpZmYucmVtb3ZlRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZkFycmF5cyhvbGRBcnIsIG5ld0FyciwgY2FsbGJhY2spIHsgcmV0dXJuIGFycmF5RGlmZi5kaWZmKG9sZEFyciwgbmV3QXJyLCBjYWxsYmFjayk7IH1cbiJdfQ==\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/applyPatch = applyPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/applyPatches = applyPatches;\n\n\tvar /*istanbul ignore start*/_parse = __webpack_require__(11) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_distanceIterator = __webpack_require__(12) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/var _distanceIterator2 = _interopRequireDefault(_distanceIterator);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\t/*istanbul ignore end*/function applyPatch(source, uniDiff) {\n\t  /*istanbul ignore start*/var /*istanbul ignore end*/options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  if (typeof uniDiff === 'string') {\n\t    uniDiff = /*istanbul ignore start*/(0, _parse.parsePatch) /*istanbul ignore end*/(uniDiff);\n\t  }\n\n\t  if (Array.isArray(uniDiff)) {\n\t    if (uniDiff.length > 1) {\n\t      throw new Error('applyPatch only works with a single input.');\n\t    }\n\n\t    uniDiff = uniDiff[0];\n\t  }\n\n\t  // Apply the diff to the input\n\t  var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n\t      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n\t      hunks = uniDiff.hunks,\n\t      compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) /*istanbul ignore start*/{\n\t    return (/*istanbul ignore end*/line === patchContent\n\t    );\n\t  },\n\t      errorCount = 0,\n\t      fuzzFactor = options.fuzzFactor || 0,\n\t      minLine = 0,\n\t      offset = 0,\n\t      removeEOFNL = /*istanbul ignore start*/void 0 /*istanbul ignore end*/,\n\t      addEOFNL = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\n\t  /**\n\t   * Checks if the hunk exactly fits on the provided location\n\t   */\n\t  function hunkFits(hunk, toPos) {\n\t    for (var j = 0; j < hunk.lines.length; j++) {\n\t      var line = hunk.lines[j],\n\t          operation = line.length > 0 ? line[0] : ' ',\n\t          content = line.length > 0 ? line.substr(1) : line;\n\n\t      if (operation === ' ' || operation === '-') {\n\t        // Context sanity check\n\t        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n\t          errorCount++;\n\n\t          if (errorCount > fuzzFactor) {\n\t            return false;\n\t          }\n\t        }\n\t        toPos++;\n\t      }\n\t    }\n\n\t    return true;\n\t  }\n\n\t  // Search best fit offsets for each hunk based on the previous ones\n\t  for (var i = 0; i < hunks.length; i++) {\n\t    var hunk = hunks[i],\n\t        maxLine = lines.length - hunk.oldLines,\n\t        localOffset = 0,\n\t        toPos = offset + hunk.oldStart - 1;\n\n\t    var iterator = /*istanbul ignore start*/(0, _distanceIterator2['default']) /*istanbul ignore end*/(toPos, minLine, maxLine);\n\n\t    for (; localOffset !== undefined; localOffset = iterator()) {\n\t      if (hunkFits(hunk, toPos + localOffset)) {\n\t        hunk.offset = offset += localOffset;\n\t        break;\n\t      }\n\t    }\n\n\t    if (localOffset === undefined) {\n\t      return false;\n\t    }\n\n\t    // Set lower text limit to end of the current hunk, so next ones don't try\n\t    // to fit over already patched text\n\t    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n\t  }\n\n\t  // Apply patch hunks\n\t  var diffOffset = 0;\n\t  for (var _i = 0; _i < hunks.length; _i++) {\n\t    var _hunk = hunks[_i],\n\t        _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\t    diffOffset += _hunk.newLines - _hunk.oldLines;\n\n\t    if (_toPos < 0) {\n\t      // Creating a new file\n\t      _toPos = 0;\n\t    }\n\n\t    for (var j = 0; j < _hunk.lines.length; j++) {\n\t      var line = _hunk.lines[j],\n\t          operation = line.length > 0 ? line[0] : ' ',\n\t          content = line.length > 0 ? line.substr(1) : line,\n\t          delimiter = _hunk.linedelimiters[j];\n\n\t      if (operation === ' ') {\n\t        _toPos++;\n\t      } else if (operation === '-') {\n\t        lines.splice(_toPos, 1);\n\t        delimiters.splice(_toPos, 1);\n\t        /* istanbul ignore else */\n\t      } else if (operation === '+') {\n\t        lines.splice(_toPos, 0, content);\n\t        delimiters.splice(_toPos, 0, delimiter);\n\t        _toPos++;\n\t      } else if (operation === '\\\\') {\n\t        var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\t        if (previousOperation === '+') {\n\t          removeEOFNL = true;\n\t        } else if (previousOperation === '-') {\n\t          addEOFNL = true;\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  // Handle EOFNL insertion/removal\n\t  if (removeEOFNL) {\n\t    while (!lines[lines.length - 1]) {\n\t      lines.pop();\n\t      delimiters.pop();\n\t    }\n\t  } else if (addEOFNL) {\n\t    lines.push('');\n\t    delimiters.push('\\n');\n\t  }\n\t  for (var _k = 0; _k < lines.length - 1; _k++) {\n\t    lines[_k] = lines[_k] + delimiters[_k];\n\t  }\n\t  return lines.join('');\n\t}\n\n\t// Wrapper that supports multiple file patches via callbacks.\n\tfunction applyPatches(uniDiff, options) {\n\t  if (typeof uniDiff === 'string') {\n\t    uniDiff = /*istanbul ignore start*/(0, _parse.parsePatch) /*istanbul ignore end*/(uniDiff);\n\t  }\n\n\t  var currentIndex = 0;\n\t  function processIndex() {\n\t    var index = uniDiff[currentIndex++];\n\t    if (!index) {\n\t      return options.complete();\n\t    }\n\n\t    options.loadFile(index, function (err, data) {\n\t      if (err) {\n\t        return options.complete(err);\n\t      }\n\n\t      var updatedContent = applyPatch(data, index, options);\n\t      options.patched(index, updatedContent, function (err) {\n\t        if (err) {\n\t          return options.complete(err);\n\t        }\n\n\t        processIndex();\n\t      });\n\t    });\n\t  }\n\t  processIndex();\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9hcHBseS5qcyJdLCJuYW1lcyI6WyJhcHBseVBhdGNoIiwiYXBwbHlQYXRjaGVzIiwic291cmNlIiwidW5pRGlmZiIsIm9wdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJFcnJvciIsImxpbmVzIiwic3BsaXQiLCJkZWxpbWl0ZXJzIiwibWF0Y2giLCJodW5rcyIsImNvbXBhcmVMaW5lIiwibGluZU51bWJlciIsImxpbmUiLCJvcGVyYXRpb24iLCJwYXRjaENvbnRlbnQiLCJlcnJvckNvdW50IiwiZnV6ekZhY3RvciIsIm1pbkxpbmUiLCJvZmZzZXQiLCJyZW1vdmVFT0ZOTCIsImFkZEVPRk5MIiwiaHVua0ZpdHMiLCJodW5rIiwidG9Qb3MiLCJqIiwiY29udGVudCIsInN1YnN0ciIsImkiLCJtYXhMaW5lIiwib2xkTGluZXMiLCJsb2NhbE9mZnNldCIsIm9sZFN0YXJ0IiwiaXRlcmF0b3IiLCJ1bmRlZmluZWQiLCJkaWZmT2Zmc2V0IiwibmV3TGluZXMiLCJkZWxpbWl0ZXIiLCJsaW5lZGVsaW1pdGVycyIsInNwbGljZSIsInByZXZpb3VzT3BlcmF0aW9uIiwicG9wIiwicHVzaCIsIl9rIiwiam9pbiIsImN1cnJlbnRJbmRleCIsInByb2Nlc3NJbmRleCIsImluZGV4IiwiY29tcGxldGUiLCJsb2FkRmlsZSIsImVyciIsImRhdGEiLCJ1cGRhdGVkQ29udGVudCIsInBhdGNoZWQiXSwibWFwcGluZ3MiOiI7OztnQ0FHZ0JBLFUsR0FBQUEsVTt5REFvSUFDLFksR0FBQUEsWTs7QUF2SWhCOztBQUNBOzs7Ozs7dUJBRU8sU0FBU0QsVUFBVCxDQUFvQkUsTUFBcEIsRUFBNEJDLE9BQTVCLEVBQW1EO0FBQUEsc0RBQWRDLE9BQWMsdUVBQUosRUFBSTs7QUFDeEQsTUFBSSxPQUFPRCxPQUFQLEtBQW1CLFFBQXZCLEVBQWlDO0FBQy9CQSxjQUFVLHdFQUFXQSxPQUFYLENBQVY7QUFDRDs7QUFFRCxNQUFJRSxNQUFNQyxP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QUFZO0FBQ1YsYUFBTzlDLFFBQVErQyxRQUFSLEVBQVA7QUFDRDs7QUFFRC9DLFlBQVFnRCxRQUFSLENBQWlCRixLQUFqQixFQUF3QixVQUFTRyxHQUFULEVBQWNDLElBQWQsRUFBb0I7QUFDMUMsVUFBSUQsR0FBSixFQUFTO0FBQ1AsZUFBT2pELFFBQVErQyxRQUFSLENBQWlCRSxHQUFqQixDQUFQO0FBQ0Q7O0FBRUQsVUFBSUUsaUJBQWlCdkQsV0FBV3NELElBQVgsRUFBaUJKLEtBQWpCLEVBQXdCOUMsT0FBeEIsQ0FBckI7QUFDQUEsY0FBUW9ELE9BQVIsQ0FBZ0JOLEtBQWhCLEVBQXVCSyxjQUF2QixFQUF1QyxVQUFTRixHQUFULEVBQWM7QUFDbkQsWUFBSUEsR0FBSixFQUFTO0FBQ1AsaUJBQU9qRCxRQUFRK0MsUUFBUixDQUFpQkUsR0FBakIsQ0FBUDtBQUNEOztBQUVESjtBQUNELE9BTkQ7QUFPRCxLQWJEO0FBY0Q7QUFDREE7QUFDRCIsImZpbGUiOiJhcHBseS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cGFyc2VQYXRjaH0gZnJvbSAnLi9wYXJzZSc7XG5pbXBvcnQgZGlzdGFuY2VJdGVyYXRvciBmcm9tICcuLi91dGlsL2Rpc3RhbmNlLWl0ZXJhdG9yJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2goc291cmNlLCB1bmlEaWZmLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKHR5cGVvZiB1bmlEaWZmID09PSAnc3RyaW5nJykge1xuICAgIHVuaURpZmYgPSBwYXJzZVBhdGNoKHVuaURpZmYpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodW5pRGlmZikpIHtcbiAgICBpZiAodW5pRGlmZi5sZW5ndGggPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FwcGx5UGF0Y2ggb25seSB3b3JrcyB3aXRoIGEgc2luZ2xlIGlucHV0LicpO1xuICAgIH1cblxuICAgIHVuaURpZmYgPSB1bmlEaWZmWzBdO1xuICB9XG5cbiAgLy8gQXBwbHkgdGhlIGRpZmYgdG8gdGhlIGlucHV0XG4gIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvXFxyXFxufFtcXG5cXHZcXGZcXHJcXHg4NV0vKSxcbiAgICAgIGRlbGltaXRlcnMgPSBzb3VyY2UubWF0Y2goL1xcclxcbnxbXFxuXFx2XFxmXFxyXFx4ODVdL2cpIHx8IFtdLFxuICAgICAgaHVua3MgPSB1bmlEaWZmLmh1bmtzLFxuXG4gICAgICBjb21wYXJlTGluZSA9IG9wdGlvbnMuY29tcGFyZUxpbmUgfHwgKChsaW5lTnVtYmVyLCBsaW5lLCBvcGVyYXRpb24sIHBhdGNoQ29udGVudCkgPT4gbGluZSA9PT0gcGF0Y2hDb250ZW50KSxcbiAgICAgIGVycm9yQ291bnQgPSAwLFxuICAgICAgZnV6ekZhY3RvciA9IG9wdGlvbnMuZnV6ekZhY3RvciB8fCAwLFxuICAgICAgbWluTGluZSA9IDAsXG4gICAgICBvZmZzZXQgPSAwLFxuXG4gICAgICByZW1vdmVFT0ZOTCxcbiAgICAgIGFkZEVPRk5MO1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGh1bmsgZXhhY3RseSBmaXRzIG9uIHRoZSBwcm92aWRlZCBsb2NhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gaHVua0ZpdHMoaHVuaywgdG9Qb3MpIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bmsubGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxldCBsaW5lID0gaHVuay5saW5lc1tqXSxcbiAgICAgICAgICBvcGVyYXRpb24gPSAobGluZS5sZW5ndGggPiAwID8gbGluZVswXSA6ICcgJyksXG4gICAgICAgICAgY29udGVudCA9IChsaW5lLmxlbmd0aCA+IDAgPyBsaW5lLnN1YnN0cigxKSA6IGxpbmUpO1xuXG4gICAgICBpZiAob3BlcmF0aW9uID09PSAnICcgfHwgb3BlcmF0aW9uID09PSAnLScpIHtcbiAgICAgICAgLy8gQ29udGV4dCBzYW5pdHkgY2hlY2tcbiAgICAgICAgaWYgKCFjb21wYXJlTGluZSh0b1BvcyArIDEsIGxpbmVzW3RvUG9zXSwgb3BlcmF0aW9uLCBjb250ZW50KSkge1xuICAgICAgICAgIGVycm9yQ291bnQrKztcblxuICAgICAgICAgIGlmIChlcnJvckNvdW50ID4gZnV6ekZhY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b1BvcysrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gU2VhcmNoIGJlc3QgZml0IG9mZnNldHMgZm9yIGVhY2ggaHVuayBiYXNlZCBvbiB0aGUgcHJldmlvdXMgb25lc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGh1bmsgPSBodW5rc1tpXSxcbiAgICAgICAgbWF4TGluZSA9IGxpbmVzLmxlbmd0aCAtIGh1bmsub2xkTGluZXMsXG4gICAgICAgIGxvY2FsT2Zmc2V0ID0gMCxcbiAgICAgICAgdG9Qb3MgPSBvZmZzZXQgKyBodW5rLm9sZFN0YXJ0IC0gMTtcblxuICAgIGxldCBpdGVyYXRvciA9IGRpc3RhbmNlSXRlcmF0b3IodG9Qb3MsIG1pbkxpbmUsIG1heExpbmUpO1xuXG4gICAgZm9yICg7IGxvY2FsT2Zmc2V0ICE9PSB1bmRlZmluZWQ7IGxvY2FsT2Zmc2V0ID0gaXRlcmF0b3IoKSkge1xuICAgICAgaWYgKGh1bmtGaXRzKGh1bmssIHRvUG9zICsgbG9jYWxPZmZzZXQpKSB7XG4gICAgICAgIGh1bmsub2Zmc2V0ID0gb2Zmc2V0ICs9IGxvY2FsT2Zmc2V0O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobG9jYWxPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNldCBsb3dlciB0ZXh0IGxpbWl0IHRvIGVuZCBvZiB0aGUgY3VycmVudCBodW5rLCBzbyBuZXh0IG9uZXMgZG9uJ3QgdHJ5XG4gICAgLy8gdG8gZml0IG92ZXIgYWxyZWFkeSBwYXRjaGVkIHRleHRcbiAgICBtaW5MaW5lID0gaHVuay5vZmZzZXQgKyBodW5rLm9sZFN0YXJ0ICsgaHVuay5vbGRMaW5lcztcbiAgfVxuXG4gIC8vIEFwcGx5IHBhdGNoIGh1bmtzXG4gIGxldCBkaWZmT2Zmc2V0ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBodW5rcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBodW5rID0gaHVua3NbaV0sXG4gICAgICAgIHRvUG9zID0gaHVuay5vbGRTdGFydCArIGh1bmsub2Zmc2V0ICsgZGlmZk9mZnNldCAtIDE7XG4gICAgZGlmZk9mZnNldCArPSBodW5rLm5ld0xpbmVzIC0gaHVuay5vbGRMaW5lcztcblxuICAgIGlmICh0b1BvcyA8IDApIHsgLy8gQ3JlYXRpbmcgYSBuZXcgZmlsZVxuICAgICAgdG9Qb3MgPSAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVuay5saW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgbGV0IGxpbmUgPSBodW5rLmxpbmVzW2pdLFxuICAgICAgICAgIG9wZXJhdGlvbiA9IChsaW5lLmxlbmd0aCA+IDAgPyBsaW5lWzBdIDogJyAnKSxcbiAgICAgICAgICBjb250ZW50ID0gKGxpbmUubGVuZ3RoID4gMCA/IGxpbmUuc3Vic3RyKDEpIDogbGluZSksXG4gICAgICAgICAgZGVsaW1pdGVyID0gaHVuay5saW5lZGVsaW1pdGVyc1tqXTtcblxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJyAnKSB7XG4gICAgICAgIHRvUG9zKys7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgIGxpbmVzLnNwbGljZSh0b1BvcywgMSk7XG4gICAgICAgIGRlbGltaXRlcnMuc3BsaWNlKHRvUG9zLCAxKTtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJysnKSB7XG4gICAgICAgIGxpbmVzLnNwbGljZSh0b1BvcywgMCwgY29udGVudCk7XG4gICAgICAgIGRlbGltaXRlcnMuc3BsaWNlKHRvUG9zLCAwLCBkZWxpbWl0ZXIpO1xuICAgICAgICB0b1BvcysrO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb24gPT09ICdcXFxcJykge1xuICAgICAgICBsZXQgcHJldmlvdXNPcGVyYXRpb24gPSBodW5rLmxpbmVzW2ogLSAxXSA/IGh1bmsubGluZXNbaiAtIDFdWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKHByZXZpb3VzT3BlcmF0aW9uID09PSAnKycpIHtcbiAgICAgICAgICByZW1vdmVFT0ZOTCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNPcGVyYXRpb24gPT09ICctJykge1xuICAgICAgICAgIGFkZEVPRk5MID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBFT0ZOTCBpbnNlcnRpb24vcmVtb3ZhbFxuICBpZiAocmVtb3ZlRU9GTkwpIHtcbiAgICB3aGlsZSAoIWxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICAgIGRlbGltaXRlcnMucG9wKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGFkZEVPRk5MKSB7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gICAgZGVsaW1pdGVycy5wdXNoKCdcXG4nKTtcbiAgfVxuICBmb3IgKGxldCBfayA9IDA7IF9rIDwgbGluZXMubGVuZ3RoIC0gMTsgX2srKykge1xuICAgIGxpbmVzW19rXSA9IGxpbmVzW19rXSArIGRlbGltaXRlcnNbX2tdO1xuICB9XG4gIHJldHVybiBsaW5lcy5qb2luKCcnKTtcbn1cblxuLy8gV3JhcHBlciB0aGF0IHN1cHBvcnRzIG11bHRpcGxlIGZpbGUgcGF0Y2hlcyB2aWEgY2FsbGJhY2tzLlxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hlcyh1bmlEaWZmLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgdW5pRGlmZiA9PT0gJ3N0cmluZycpIHtcbiAgICB1bmlEaWZmID0gcGFyc2VQYXRjaCh1bmlEaWZmKTtcbiAgfVxuXG4gIGxldCBjdXJyZW50SW5kZXggPSAwO1xuICBmdW5jdGlvbiBwcm9jZXNzSW5kZXgoKSB7XG4gICAgbGV0IGluZGV4ID0gdW5pRGlmZltjdXJyZW50SW5kZXgrK107XG4gICAgaWYgKCFpbmRleCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICB9XG5cbiAgICBvcHRpb25zLmxvYWRGaWxlKGluZGV4LCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuY29tcGxldGUoZXJyKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHVwZGF0ZWRDb250ZW50ID0gYXBwbHlQYXRjaChkYXRhLCBpbmRleCwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLnBhdGNoZWQoaW5kZXgsIHVwZGF0ZWRDb250ZW50LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvbXBsZXRlKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9jZXNzSW5kZXgoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHByb2Nlc3NJbmRleCgpO1xufVxuIl19\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/parsePatch = parsePatch;\n\tfunction parsePatch(uniDiff) {\n\t  /*istanbul ignore start*/var /*istanbul ignore end*/options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t  var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n\t      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n\t      list = [],\n\t      i = 0;\n\n\t  function parseIndex() {\n\t    var index = {};\n\t    list.push(index);\n\n\t    // Parse diff metadata\n\t    while (i < diffstr.length) {\n\t      var line = diffstr[i];\n\n\t      // File header found, end parsing diff metadata\n\t      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n\t        break;\n\t      }\n\n\t      // Diff index\n\t      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\t      if (header) {\n\t        index.index = header[1];\n\t      }\n\n\t      i++;\n\t    }\n\n\t    // Parse file headers if they are defined. Unified diff requires them, but\n\t    // there's no technical issues to have an isolated hunk without file header\n\t    parseFileHeader(index);\n\t    parseFileHeader(index);\n\n\t    // Parse hunks\n\t    index.hunks = [];\n\n\t    while (i < diffstr.length) {\n\t      var _line = diffstr[i];\n\n\t      if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n\t        break;\n\t      } else if (/^@@/.test(_line)) {\n\t        index.hunks.push(parseHunk());\n\t      } else if (_line && options.strict) {\n\t        // Ignore unexpected content unless in strict mode\n\t        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n\t      } else {\n\t        i++;\n\t      }\n\t    }\n\t  }\n\n\t  // Parses the --- and +++ headers, if none are found, no lines\n\t  // are consumed.\n\t  function parseFileHeader(index) {\n\t    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\t    if (fileHeader) {\n\t      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n\t      var data = fileHeader[2].split('\\t', 2);\n\t      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\t      if (/^\".*\"$/.test(fileName)) {\n\t        fileName = fileName.substr(1, fileName.length - 2);\n\t      }\n\t      index[keyPrefix + 'FileName'] = fileName;\n\t      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n\n\t      i++;\n\t    }\n\t  }\n\n\t  // Parses a hunk\n\t  // This assumes that we are at the start of a hunk.\n\t  function parseHunk() {\n\t    var chunkHeaderIndex = i,\n\t        chunkHeaderLine = diffstr[i++],\n\t        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n\n\t    var hunk = {\n\t      oldStart: +chunkHeader[1],\n\t      oldLines: +chunkHeader[2] || 1,\n\t      newStart: +chunkHeader[3],\n\t      newLines: +chunkHeader[4] || 1,\n\t      lines: [],\n\t      linedelimiters: []\n\t    };\n\n\t    var addCount = 0,\n\t        removeCount = 0;\n\t    for (; i < diffstr.length; i++) {\n\t      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n\t      // But they could be the header for the next file. Therefore prune such cases out.\n\t      if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n\t        break;\n\t      }\n\t      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n\t      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n\t        hunk.lines.push(diffstr[i]);\n\t        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n\t        if (operation === '+') {\n\t          addCount++;\n\t        } else if (operation === '-') {\n\t          removeCount++;\n\t        } else if (operation === ' ') {\n\t          addCount++;\n\t          removeCount++;\n\t        }\n\t      } else {\n\t        break;\n\t      }\n\t    }\n\n\t    // Handle the empty block count case\n\t    if (!addCount && hunk.newLines === 1) {\n\t      hunk.newLines = 0;\n\t    }\n\t    if (!removeCount && hunk.oldLines === 1) {\n\t      hunk.oldLines = 0;\n\t    }\n\n\t    // Perform optional sanity checking\n\t    if (options.strict) {\n\t      if (addCount !== hunk.newLines) {\n\t        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n\t      }\n\t      if (removeCount !== hunk.oldLines) {\n\t        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n\t      }\n\t    }\n\n\t    return hunk;\n\t  }\n\n\t  while (i < diffstr.length) {\n\t    parseIndex();\n\t  }\n\n\t  return list;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9wYXJzZS5qcyJdLCJuYW1lcyI6WyJwYXJzZVBhdGNoIiwidW5pRGlmZiIsIm9wdGlvbnMiLCJkaWZmc3RyIiwic3BsaXQiLCJkZWxpbWl0ZXJzIiwibWF0Y2giLCJsaXN0IiwiaSIsInBhcnNlSW5kZXgiLCJpbmRleCIsInB1c2giLCJsZW5ndGgiLCJsaW5lIiwidGVzdCIsImhlYWRlciIsImV4ZWMiLCJwYXJzZUZpbGVIZWFkZXIiLCJodW5rcyIsInBhcnNlSHVuayIsInN0cmljdCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbGVIZWFkZXIiLCJrZXlQcmVmaXgiLCJkYXRhIiwiZmlsZU5hbWUiLCJyZXBsYWNlIiwic3Vic3RyIiwidHJpbSIsImNodW5rSGVhZGVySW5kZXgiLCJjaHVua0hlYWRlckxpbmUiLCJjaHVua0hlYWRlciIsImh1bmsiLCJvbGRTdGFydCIsIm9sZExpbmVzIiwibmV3U3RhcnQiLCJuZXdMaW5lcyIsImxpbmVzIiwibGluZWRlbGltaXRlcnMiLCJhZGRDb3VudCIsInJlbW92ZUNvdW50IiwiaW5kZXhPZiIsIm9wZXJhdGlvbiJdLCJtYXBwaW5ncyI6Ijs7O2dDQUFnQkEsVSxHQUFBQSxVO0FBQVQsU0FBU0EsVUFBVCxDQUFvQkMsT0FBcEIsRUFBMkM7QUFBQSxzREFBZEMsT0FBYyx1RUFBSixFQUFJOztBQUNoRCxNQUFJQyxVQUFVRixRQUFRRyxLQUFSLENBQWMscUJBQWQsQ0FBZDtBQUFBLE1BQ0lDLGFBQWFKLFFBQVFLLEtBQVIsQ0FBYyxzQkFBZCxLQUF5QyxFQUQxRDtBQUFBLE1BRUlDLE9BQU8sRUFGWDtBQUFBLE1BR0lDLElBQUksQ0FIUjs7QUFLQSxXQUFTQyxVQUFULEdBQXNCO0FBQ3BCLFFBQUlDLFFBQVEsRUFBWjtBQUNBSCxTQUFLSSxJQUFMLENBQVVELEtBQVY7O0FBRUE7QUFDQSxXQUFPRixJQUFJTCxRQUFRUyxNQUFuQixFQUEyQjtBQUN6QixVQUFJQyxPQUFPVixRQUFR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QW9CO0FBQ2xCLFVBQUlxQixhQUFhUCxLQUFLSSxRQUF0QixFQUFnQztBQUM5QixjQUFNLElBQUlqQixLQUFKLENBQVUsc0RBQXNEVSxtQkFBbUIsQ0FBekUsQ0FBVixDQUFOO0FBQ0Q7QUFDRCxVQUFJVyxnQkFBZ0JSLEtBQUtFLFFBQXpCLEVBQW1DO0FBQ2pDLGNBQU0sSUFBSWYsS0FBSixDQUFVLHdEQUF3RFUsbUJBQW1CLENBQTNFLENBQVYsQ0FBTjtBQUNEO0FBQ0Y7O0FBRUQsV0FBT0csSUFBUDtBQUNEOztBQUVELFNBQU8xQixJQUFJTCxRQUFRUyxNQUFuQixFQUEyQjtBQUN6Qkg7QUFDRDs7QUFFRCxTQUFPRixJQUFQO0FBQ0QiLCJmaWxlIjoicGFyc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcGFyc2VQYXRjaCh1bmlEaWZmLCBvcHRpb25zID0ge30pIHtcbiAgbGV0IGRpZmZzdHIgPSB1bmlEaWZmLnNwbGl0KC9cXHJcXG58W1xcblxcdlxcZlxcclxceDg1XS8pLFxuICAgICAgZGVsaW1pdGVycyA9IHVuaURpZmYubWF0Y2goL1xcclxcbnxbXFxuXFx2XFxmXFxyXFx4ODVdL2cpIHx8IFtdLFxuICAgICAgbGlzdCA9IFtdLFxuICAgICAgaSA9IDA7XG5cbiAgZnVuY3Rpb24gcGFyc2VJbmRleCgpIHtcbiAgICBsZXQgaW5kZXggPSB7fTtcbiAgICBsaXN0LnB1c2goaW5kZXgpO1xuXG4gICAgLy8gUGFyc2UgZGlmZiBtZXRhZGF0YVxuICAgIHdoaWxlIChpIDwgZGlmZnN0ci5sZW5ndGgpIHtcbiAgICAgIGxldCBsaW5lID0gZGlmZnN0cltpXTtcblxuICAgICAgLy8gRmlsZSBoZWFkZXIgZm91bmQsIGVuZCBwYXJzaW5nIGRpZmYgbWV0YWRhdGFcbiAgICAgIGlmICgvXihcXC1cXC1cXC18XFwrXFwrXFwrfEBAKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gRGlmZiBpbmRleFxuICAgICAgbGV0IGhlYWRlciA9ICgvXig/OkluZGV4OnxkaWZmKD86IC1yIFxcdyspKylcXHMrKC4rPylcXHMqJC8pLmV4ZWMobGluZSk7XG4gICAgICBpZiAoaGVhZGVyKSB7XG4gICAgICAgIGluZGV4LmluZGV4ID0gaGVhZGVyWzFdO1xuICAgICAgfVxuXG4gICAgICBpKys7XG4gICAgfVxuXG4gICAgLy8gUGFyc2UgZmlsZSBoZWFkZXJzIGlmIHRoZXkgYXJlIGRlZmluZWQuIFVuaWZpZWQgZGlmZiByZXF1aXJlcyB0aGVtLCBidXRcbiAgICAvLyB0aGVyZSdzIG5vIHRlY2huaWNhbCBpc3N1ZXMgdG8gaGF2ZSBhbiBpc29sYXRlZCBodW5rIHdpdGhvdXQgZmlsZSBoZWFkZXJcbiAgICBwYXJzZUZpbGVIZWFkZXIoaW5kZXgpO1xuICAgIHBhcnNlRmlsZUhlYWRlcihpbmRleCk7XG5cbiAgICAvLyBQYXJzZSBodW5rc1xuICAgIGluZGV4Lmh1bmtzID0gW107XG5cbiAgICB3aGlsZSAoaSA8IGRpZmZzdHIubGVuZ3RoKSB7XG4gICAgICBsZXQgbGluZSA9IGRpZmZzdHJbaV07XG5cbiAgICAgIGlmICgvXihJbmRleDp8ZGlmZnxcXC1cXC1cXC18XFwrXFwrXFwrKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoL15AQC8udGVzdChsaW5lKSkge1xuICAgICAgICBpbmRleC5odW5rcy5wdXNoKHBhcnNlSHVuaygpKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZSAmJiBvcHRpb25zLnN0cmljdCkge1xuICAgICAgICAvLyBJZ25vcmUgdW5leHBlY3RlZCBjb250ZW50IHVubGVzcyBpbiBzdHJpY3QgbW9kZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbGluZSAnICsgKGkgKyAxKSArICcgJyArIEpTT04uc3RyaW5naWZ5KGxpbmUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZXMgdGhlIC0tLSBhbmQgKysrIGhlYWRlcnMsIGlmIG5vbmUgYXJlIGZvdW5kLCBubyBsaW5lc1xuICAvLyBhcmUgY29uc3VtZWQuXG4gIGZ1bmN0aW9uIHBhcnNlRmlsZUhlYWRlcihpbmRleCkge1xuICAgIGNvbnN0IGZpbGVIZWFkZXIgPSAoL14oLS0tfFxcK1xcK1xcKylcXHMrKC4qKSQvKS5leGVjKGRpZmZzdHJbaV0pO1xuICAgIGlmIChmaWxlSGVhZGVyKSB7XG4gICAgICBsZXQga2V5UHJlZml4ID0gZmlsZUhlYWRlclsxXSA9PT0gJy0tLScgPyAnb2xkJyA6ICduZXcnO1xuICAgICAgY29uc3QgZGF0YSA9IGZpbGVIZWFkZXJbMl0uc3BsaXQoJ1xcdCcsIDIpO1xuICAgICAgbGV0IGZpbGVOYW1lID0gZGF0YVswXS5yZXBsYWNlKC9cXFxcXFxcXC9nLCAnXFxcXCcpO1xuICAgICAgaWYgKC9eXCIuKlwiJC8udGVzdChmaWxlTmFtZSkpIHtcbiAgICAgICAgZmlsZU5hbWUgPSBmaWxlTmFtZS5zdWJzdHIoMSwgZmlsZU5hbWUubGVuZ3RoIC0gMik7XG4gICAgICB9XG4gICAgICBpbmRleFtrZXlQcmVmaXggKyAnRmlsZU5hbWUnXSA9IGZpbGVOYW1lO1xuICAgICAgaW5kZXhba2V5UHJlZml4ICsgJ0hlYWRlciddID0gKGRhdGFbMV0gfHwgJycpLnRyaW0oKTtcblxuICAgICAgaSsrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlcyBhIGh1bmtcbiAgLy8gVGhpcyBhc3N1bWVzIHRoYXQgd2UgYXJlIGF0IHRoZSBzdGFydCBvZiBhIGh1bmsuXG4gIGZ1bmN0aW9uIHBhcnNlSHVuaygpIHtcbiAgICBsZXQgY2h1bmtIZWFkZXJJbmRleCA9IGksXG4gICAgICAgIGNodW5rSGVhZGVyTGluZSA9IGRpZmZzdHJbaSsrXSxcbiAgICAgICAgY2h1bmtIZWFkZXIgPSBjaHVua0hlYWRlckxpbmUuc3BsaXQoL0BAIC0oXFxkKykoPzosKFxcZCspKT8gXFwrKFxcZCspKD86LChcXGQrKSk/IEBALyk7XG5cbiAgICBsZXQgaHVuayA9IHtcbiAgICAgIG9sZFN0YXJ0OiArY2h1bmtIZWFkZXJbMV0sXG4gICAgICBvbGRMaW5lczogK2NodW5rSGVhZGVyWzJdIHx8IDEsXG4gICAgICBuZXdTdGFydDogK2NodW5rSGVhZGVyWzNdLFxuICAgICAgbmV3TGluZXM6ICtjaHVua0hlYWRlcls0XSB8fCAxLFxuICAgICAgbGluZXM6IFtdLFxuICAgICAgbGluZWRlbGltaXRlcnM6IFtdXG4gICAgfTtcblxuICAgIGxldCBhZGRDb3VudCA9IDAsXG4gICAgICAgIHJlbW92ZUNvdW50ID0gMDtcbiAgICBmb3IgKDsgaSA8IGRpZmZzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIExpbmVzIHN0YXJ0aW5nIHdpdGggJy0tLScgY291bGQgYmUgbWlzdGFrZW4gZm9yIHRoZSBcInJlbW92ZSBsaW5lXCIgb3BlcmF0aW9uXG4gICAgICAvLyBCdXQgdGhleSBjb3VsZCBiZSB0aGUgaGVhZGVyIGZvciB0aGUgbmV4dCBmaWxlLiBUaGVyZWZvcmUgcHJ1bmUgc3VjaCBjYXNlcyBvdXQuXG4gICAgICBpZiAoZGlmZnN0cltpXS5pbmRleE9mKCctLS0gJykgPT09IDBcbiAgICAgICAgICAgICYmIChpICsgMiA8IGRpZmZzdHIubGVuZ3RoKVxuICAgICAgICAgICAgJiYgZGlmZnN0cltpICsgMV0uaW5kZXhPZignKysrICcpID09PSAwXG4gICAgICAgICAgICAmJiBkaWZmc3RyW2kgKyAyXS5pbmRleE9mKCdAQCcpID09PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBsZXQgb3BlcmF0aW9uID0gKGRpZmZzdHJbaV0ubGVuZ3RoID09IDAgJiYgaSAhPSAoZGlmZnN0ci5sZW5ndGggLSAxKSkgPyAnICcgOiBkaWZmc3RyW2ldWzBdO1xuXG4gICAgICBpZiAob3BlcmF0aW9uID09PSAnKycgfHwgb3BlcmF0aW9uID09PSAnLScgfHwgb3BlcmF0aW9uID09PSAnICcgfHwgb3BlcmF0aW9uID09PSAnXFxcXCcpIHtcbiAgICAgICAgaHVuay5saW5lcy5wdXNoKGRpZmZzdHJbaV0pO1xuICAgICAgICBodW5rLmxpbmVkZWxpbWl0ZXJzLnB1c2goZGVsaW1pdGVyc1tpXSB8fCAnXFxuJyk7XG5cbiAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJysnKSB7XG4gICAgICAgICAgYWRkQ291bnQrKztcbiAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb24gPT09ICctJykge1xuICAgICAgICAgIHJlbW92ZUNvdW50Kys7XG4gICAgICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uID09PSAnICcpIHtcbiAgICAgICAgICBhZGRDb3VudCsrO1xuICAgICAgICAgIHJlbW92ZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSB0aGUgZW1wdHkgYmxvY2sgY291bnQgY2FzZVxuICAgIGlmICghYWRkQ291bnQgJiYgaHVuay5uZXdMaW5lcyA9PT0gMSkge1xuICAgICAgaHVuay5uZXdMaW5lcyA9IDA7XG4gICAgfVxuICAgIGlmICghcmVtb3ZlQ291bnQgJiYgaHVuay5vbGRMaW5lcyA9PT0gMSkge1xuICAgICAgaHVuay5vbGRMaW5lcyA9IDA7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSBvcHRpb25hbCBzYW5pdHkgY2hlY2tpbmdcbiAgICBpZiAob3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIGlmIChhZGRDb3VudCAhPT0gaHVuay5uZXdMaW5lcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkZGVkIGxpbmUgY291bnQgZGlkIG5vdCBtYXRjaCBmb3IgaHVuayBhdCBsaW5lICcgKyAoY2h1bmtIZWFkZXJJbmRleCArIDEpKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZW1vdmVDb3VudCAhPT0gaHVuay5vbGRMaW5lcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbW92ZWQgbGluZSBjb3VudCBkaWQgbm90IG1hdGNoIGZvciBodW5rIGF0IGxpbmUgJyArIChjaHVua0hlYWRlckluZGV4ICsgMSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBodW5rO1xuICB9XG5cbiAgd2hpbGUgKGkgPCBkaWZmc3RyLmxlbmd0aCkge1xuICAgIHBhcnNlSW5kZXgoKTtcbiAgfVxuXG4gIHJldHVybiBsaXN0O1xufVxuIl19\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/\"use strict\";\n\n\texports.__esModule = true;\n\n\texports[\"default\"] = /*istanbul ignore end*/function (start, minLine, maxLine) {\n\t  var wantForward = true,\n\t      backwardExhausted = false,\n\t      forwardExhausted = false,\n\t      localOffset = 1;\n\n\t  return function iterator() {\n\t    if (wantForward && !forwardExhausted) {\n\t      if (backwardExhausted) {\n\t        localOffset++;\n\t      } else {\n\t        wantForward = false;\n\t      }\n\n\t      // Check if trying to fit beyond text length, and if not, check it fits\n\t      // after offset location (or desired location on first iteration)\n\t      if (start + localOffset <= maxLine) {\n\t        return localOffset;\n\t      }\n\n\t      forwardExhausted = true;\n\t    }\n\n\t    if (!backwardExhausted) {\n\t      if (!forwardExhausted) {\n\t        wantForward = true;\n\t      }\n\n\t      // Check if trying to fit before text beginning, and if not, check it fits\n\t      // before offset location\n\t      if (minLine <= start - localOffset) {\n\t        return -localOffset++;\n\t      }\n\n\t      backwardExhausted = true;\n\t      return iterator();\n\t    }\n\n\t    // We tried to fit hunk before text beginning and beyond text length, then\n\t    // hunk can't fit on the text. Return undefined\n\t  };\n\t};\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2Rpc3RhbmNlLWl0ZXJhdG9yLmpzIl0sIm5hbWVzIjpbInN0YXJ0IiwibWluTGluZSIsIm1heExpbmUiLCJ3YW50Rm9yd2FyZCIsImJhY2t3YXJkRXhoYXVzdGVkIiwiZm9yd2FyZEV4aGF1c3RlZCIsImxvY2FsT2Zmc2V0IiwiaXRlcmF0b3IiXSwibWFwcGluZ3MiOiI7Ozs7NENBR2UsVUFBU0EsS0FBVCxFQUFnQkMsT0FBaEIsRUFBeUJDLE9BQXpCLEVBQWtDO0FBQy9DLE1BQUlDLGNBQWMsSUFBbEI7QUFBQSxNQUNJQyxvQkFBb0IsS0FEeEI7QUFBQSxNQUVJQyxtQkFBbUIsS0FGdkI7QUFBQSxNQUdJQyxjQUFjLENBSGxCOztBQUtBLFNBQU8sU0FBU0MsUUFBVCxHQUFvQjtBQUN6QixRQUFJSixlQUFlLENBQUNFLGdCQUFwQixFQUFzQztBQUNwQyxVQUFJRCxpQkFBSixFQUF1QjtBQUNyQkU7QUFDRCxPQUZELE1BRU87QUFDTEgsc0JBQWMsS0FBZDtBQUNEOztBQUVEO0FBQ0E7QUFDQSxVQUFJSCxRQUFRTSxXQUFSLElBQXVCSixPQUEzQixFQUFvQztBQUNsQyxlQUFPSSxXQUFQO0FBQ0Q7O0FBRURELHlCQUFtQixJQUFuQjtBQUNEOztBQUVELFFBQUksQ0FBQ0QsaUJBQUwsRUFBd0I7QUFDdEIsVUFBSSxDQUFDQyxnQkFBTCxFQUF1QjtBQUNyQkYsc0JBQWMsSUFBZDtBQUNEOztBQUVEO0FBQ0E7QUFDQSxVQUFJRixXQUFXRCxRQUFRTSxXQUF2QixFQUFvQztBQUNsQyxlQUFPLENBQUNBLGFBQVI7QUFDRDs7QUFFREYsMEJBQW9CLElBQXBCO0FBQ0EsYUFBT0csVUFBUDtBQUNEOztBQUVEO0FBQ0E7QUFDRCxHQWxDRDtBQW1DRCxDIiwiZmlsZSI6ImRpc3RhbmNlLWl0ZXJhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSXRlcmF0b3IgdGhhdCB0cmF2ZXJzZXMgaW4gdGhlIHJhbmdlIG9mIFttaW4sIG1heF0sIHN0ZXBwaW5nXG4vLyBieSBkaXN0YW5jZSBmcm9tIGEgZ2l2ZW4gc3RhcnQgcG9zaXRpb24uIEkuZS4gZm9yIFswLCA0XSwgd2l0aFxuLy8gc3RhcnQgb2YgMiwgdGhpcyB3aWxsIGl0ZXJhdGUgMiwgMywgMSwgNCwgMC5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0YXJ0LCBtaW5MaW5lLCBtYXhMaW5lKSB7XG4gIGxldCB3YW50Rm9yd2FyZCA9IHRydWUsXG4gICAgICBiYWNrd2FyZEV4aGF1c3RlZCA9IGZhbHNlLFxuICAgICAgZm9yd2FyZEV4aGF1c3RlZCA9IGZhbHNlLFxuICAgICAgbG9jYWxPZmZzZXQgPSAxO1xuXG4gIHJldHVybiBmdW5jdGlvbiBpdGVyYXRvcigpIHtcbiAgICBpZiAod2FudEZvcndhcmQgJiYgIWZvcndhcmRFeGhhdXN0ZWQpIHtcbiAgICAgIGlmIChiYWNrd2FyZEV4aGF1c3RlZCkge1xuICAgICAgICBsb2NhbE9mZnNldCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FudEZvcndhcmQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdHJ5aW5nIHRvIGZpdCBiZXlvbmQgdGV4dCBsZW5ndGgsIGFuZCBpZiBub3QsIGNoZWNrIGl0IGZpdHNcbiAgICAgIC8vIGFmdGVyIG9mZnNldCBsb2NhdGlvbiAob3IgZGVzaXJlZCBsb2NhdGlvbiBvbiBmaXJzdCBpdGVyYXRpb24pXG4gICAgICBpZiAoc3RhcnQgKyBsb2NhbE9mZnNldCA8PSBtYXhMaW5lKSB7XG4gICAgICAgIHJldHVybiBsb2NhbE9mZnNldDtcbiAgICAgIH1cblxuICAgICAgZm9yd2FyZEV4aGF1c3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFiYWNrd2FyZEV4aGF1c3RlZCkge1xuICAgICAgaWYgKCFmb3J3YXJkRXhoYXVzdGVkKSB7XG4gICAgICAgIHdhbnRGb3J3YXJkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdHJ5aW5nIHRvIGZpdCBiZWZvcmUgdGV4dCBiZWdpbm5pbmcsIGFuZCBpZiBub3QsIGNoZWNrIGl0IGZpdHNcbiAgICAgIC8vIGJlZm9yZSBvZmZzZXQgbG9jYXRpb25cbiAgICAgIGlmIChtaW5MaW5lIDw9IHN0YXJ0IC0gbG9jYWxPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIC1sb2NhbE9mZnNldCsrO1xuICAgICAgfVxuXG4gICAgICBiYWNrd2FyZEV4aGF1c3RlZCA9IHRydWU7XG4gICAgICByZXR1cm4gaXRlcmF0b3IoKTtcbiAgICB9XG5cbiAgICAvLyBXZSB0cmllZCB0byBmaXQgaHVuayBiZWZvcmUgdGV4dCBiZWdpbm5pbmcgYW5kIGJleW9uZCB0ZXh0IGxlbmd0aCwgdGhlblxuICAgIC8vIGh1bmsgY2FuJ3QgZml0IG9uIHRoZSB0ZXh0LiBSZXR1cm4gdW5kZWZpbmVkXG4gIH07XG59XG4iXX0=\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/calcLineCount = calcLineCount;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/merge = merge;\n\n\tvar /*istanbul ignore start*/_create = __webpack_require__(14) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_parse = __webpack_require__(11) /*istanbul ignore end*/;\n\n\tvar /*istanbul ignore start*/_array = __webpack_require__(15) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\t/*istanbul ignore end*/function calcLineCount(hunk) {\n\t  /*istanbul ignore start*/var _calcOldNewLineCount = /*istanbul ignore end*/calcOldNewLineCount(hunk.lines),\n\t      oldLines = _calcOldNewLineCount.oldLines,\n\t      newLines = _calcOldNewLineCount.newLines;\n\n\t  if (oldLines !== undefined) {\n\t    hunk.oldLines = oldLines;\n\t  } else {\n\t    delete hunk.oldLines;\n\t  }\n\n\t  if (newLines !== undefined) {\n\t    hunk.newLines = newLines;\n\t  } else {\n\t    delete hunk.newLines;\n\t  }\n\t}\n\n\tfunction merge(mine, theirs, base) {\n\t  mine = loadPatch(mine, base);\n\t  theirs = loadPatch(theirs, base);\n\n\t  var ret = {};\n\n\t  // For index we just let it pass through as it doesn't have any necessary meaning.\n\t  // Leaving sanity checks on this to the API consumer that may know more about the\n\t  // meaning in their own context.\n\t  if (mine.index || theirs.index) {\n\t    ret.index = mine.index || theirs.index;\n\t  }\n\n\t  if (mine.newFileName || theirs.newFileName) {\n\t    if (!fileNameChanged(mine)) {\n\t      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n\t      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n\t      ret.newFileName = theirs.newFileName || mine.newFileName;\n\t      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n\t      ret.newHeader = theirs.newHeader || mine.newHeader;\n\t    } else if (!fileNameChanged(theirs)) {\n\t      // No header or no change in theirs, use ours\n\t      ret.oldFileName = mine.oldFileName;\n\t      ret.newFileName = mine.newFileName;\n\t      ret.oldHeader = mine.oldHeader;\n\t      ret.newHeader = mine.newHeader;\n\t    } else {\n\t      // Both changed... figure it out\n\t      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n\t      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n\t      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n\t      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n\t    }\n\t  }\n\n\t  ret.hunks = [];\n\n\t  var mineIndex = 0,\n\t      theirsIndex = 0,\n\t      mineOffset = 0,\n\t      theirsOffset = 0;\n\n\t  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n\t    var mineCurrent = mine.hunks[mineIndex] || { oldStart: Infinity },\n\t        theirsCurrent = theirs.hunks[theirsIndex] || { oldStart: Infinity };\n\n\t    if (hunkBefore(mineCurrent, theirsCurrent)) {\n\t      // This patch does not overlap with any of the others, yay.\n\t      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n\t      mineIndex++;\n\t      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n\t    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n\t      // This patch does not overlap with any of the others, yay.\n\t      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n\t      theirsIndex++;\n\t      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n\t    } else {\n\t      // Overlap, merge as best we can\n\t      var mergedHunk = {\n\t        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n\t        oldLines: 0,\n\t        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n\t        newLines: 0,\n\t        lines: []\n\t      };\n\t      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n\t      theirsIndex++;\n\t      mineIndex++;\n\n\t      ret.hunks.push(mergedHunk);\n\t    }\n\t  }\n\n\t  return ret;\n\t}\n\n\tfunction loadPatch(param, base) {\n\t  if (typeof param === 'string') {\n\t    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n\t      return (/*istanbul ignore start*/(0, _parse.parsePatch) /*istanbul ignore end*/(param)[0]\n\t      );\n\t    }\n\n\t    if (!base) {\n\t      throw new Error('Must provide a base reference or pass in a patch');\n\t    }\n\t    return (/*istanbul ignore start*/(0, _create.structuredPatch) /*istanbul ignore end*/(undefined, undefined, base, param)\n\t    );\n\t  }\n\n\t  return param;\n\t}\n\n\tfunction fileNameChanged(patch) {\n\t  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n\t}\n\n\tfunction selectField(index, mine, theirs) {\n\t  if (mine === theirs) {\n\t    return mine;\n\t  } else {\n\t    index.conflict = true;\n\t    return { mine: mine, theirs: theirs };\n\t  }\n\t}\n\n\tfunction hunkBefore(test, check) {\n\t  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n\t}\n\n\tfunction cloneHunk(hunk, offset) {\n\t  return {\n\t    oldStart: hunk.oldStart, oldLines: hunk.oldLines,\n\t    newStart: hunk.newStart + offset, newLines: hunk.newLines,\n\t    lines: hunk.lines\n\t  };\n\t}\n\n\tfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n\t  // This will generally result in a conflicted hunk, but there are cases where the context\n\t  // is the only overlap where we can successfully merge the content here.\n\t  var mine = { offset: mineOffset, lines: mineLines, index: 0 },\n\t      their = { offset: theirOffset, lines: theirLines, index: 0 };\n\n\t  // Handle any leading content\n\t  insertLeading(hunk, mine, their);\n\t  insertLeading(hunk, their, mine);\n\n\t  // Now in the overlap content. Scan through and select the best changes from each.\n\t  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n\t    var mineCurrent = mine.lines[mine.index],\n\t        theirCurrent = their.lines[their.index];\n\n\t    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n\t      // Both modified ...\n\t      mutualChange(hunk, mine, their);\n\t    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n\t      /*istanbul ignore start*/var _hunk$lines;\n\n\t      /*istanbul ignore end*/ // Mine inserted\n\t      /*istanbul ignore start*/(_hunk$lines = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/collectChange(mine)));\n\t    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n\t      /*istanbul ignore start*/var _hunk$lines2;\n\n\t      /*istanbul ignore end*/ // Theirs inserted\n\t      /*istanbul ignore start*/(_hunk$lines2 = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines2 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/collectChange(their)));\n\t    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n\t      // Mine removed or edited\n\t      removal(hunk, mine, their);\n\t    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n\t      // Their removed or edited\n\t      removal(hunk, their, mine, true);\n\t    } else if (mineCurrent === theirCurrent) {\n\t      // Context identity\n\t      hunk.lines.push(mineCurrent);\n\t      mine.index++;\n\t      their.index++;\n\t    } else {\n\t      // Context mismatch\n\t      conflict(hunk, collectChange(mine), collectChange(their));\n\t    }\n\t  }\n\n\t  // Now push anything that may be remaining\n\t  insertTrailing(hunk, mine);\n\t  insertTrailing(hunk, their);\n\n\t  calcLineCount(hunk);\n\t}\n\n\tfunction mutualChange(hunk, mine, their) {\n\t  var myChanges = collectChange(mine),\n\t      theirChanges = collectChange(their);\n\n\t  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n\t    // Special case for remove changes that are supersets of one another\n\t    if ( /*istanbul ignore start*/(0, _array.arrayStartsWith) /*istanbul ignore end*/(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n\t      /*istanbul ignore start*/var _hunk$lines3;\n\n\t      /*istanbul ignore end*/ /*istanbul ignore start*/(_hunk$lines3 = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines3 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/myChanges));\n\t      return;\n\t    } else if ( /*istanbul ignore start*/(0, _array.arrayStartsWith) /*istanbul ignore end*/(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n\t      /*istanbul ignore start*/var _hunk$lines4;\n\n\t      /*istanbul ignore end*/ /*istanbul ignore start*/(_hunk$lines4 = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines4 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/theirChanges));\n\t      return;\n\t    }\n\t  } else if ( /*istanbul ignore start*/(0, _array.arrayEqual) /*istanbul ignore end*/(myChanges, theirChanges)) {\n\t    /*istanbul ignore start*/var _hunk$lines5;\n\n\t    /*istanbul ignore end*/ /*istanbul ignore start*/(_hunk$lines5 = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines5 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/myChanges));\n\t    return;\n\t  }\n\n\t  conflict(hunk, myChanges, theirChanges);\n\t}\n\n\tfunction removal(hunk, mine, their, swap) {\n\t  var myChanges = collectChange(mine),\n\t      theirChanges = collectContext(their, myChanges);\n\t  if (theirChanges.merged) {\n\t    /*istanbul ignore start*/var _hunk$lines6;\n\n\t    /*istanbul ignore end*/ /*istanbul ignore start*/(_hunk$lines6 = /*istanbul ignore end*/hunk.lines).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_hunk$lines6 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/theirChanges.merged));\n\t  } else {\n\t    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n\t  }\n\t}\n\n\tfunction conflict(hunk, mine, their) {\n\t  hunk.conflict = true;\n\t  hunk.lines.push({\n\t    conflict: true,\n\t    mine: mine,\n\t    theirs: their\n\t  });\n\t}\n\n\tfunction insertLeading(hunk, insert, their) {\n\t  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n\t    var line = insert.lines[insert.index++];\n\t    hunk.lines.push(line);\n\t    insert.offset++;\n\t  }\n\t}\n\tfunction insertTrailing(hunk, insert) {\n\t  while (insert.index < insert.lines.length) {\n\t    var line = insert.lines[insert.index++];\n\t    hunk.lines.push(line);\n\t  }\n\t}\n\n\tfunction collectChange(state) {\n\t  var ret = [],\n\t      operation = state.lines[state.index][0];\n\t  while (state.index < state.lines.length) {\n\t    var line = state.lines[state.index];\n\n\t    // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\t    if (operation === '-' && line[0] === '+') {\n\t      operation = '+';\n\t    }\n\n\t    if (operation === line[0]) {\n\t      ret.push(line);\n\t      state.index++;\n\t    } else {\n\t      break;\n\t    }\n\t  }\n\n\t  return ret;\n\t}\n\tfunction collectContext(state, matchChanges) {\n\t  var changes = [],\n\t      merged = [],\n\t      matchIndex = 0,\n\t      contextChanges = false,\n\t      conflicted = false;\n\t  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n\t    var change = state.lines[state.index],\n\t        match = matchChanges[matchIndex];\n\n\t    // Once we've hit our add, then we are done\n\t    if (match[0] === '+') {\n\t      break;\n\t    }\n\n\t    contextChanges = contextChanges || change[0] !== ' ';\n\n\t    merged.push(match);\n\t    matchIndex++;\n\n\t    // Consume any additions in the other block as a conflict to attempt\n\t    // to pull in the remaining context after this\n\t    if (change[0] === '+') {\n\t      conflicted = true;\n\n\t      while (change[0] === '+') {\n\t        changes.push(change);\n\t        change = state.lines[++state.index];\n\t      }\n\t    }\n\n\t    if (match.substr(1) === change.substr(1)) {\n\t      changes.push(change);\n\t      state.index++;\n\t    } else {\n\t      conflicted = true;\n\t    }\n\t  }\n\n\t  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n\t    conflicted = true;\n\t  }\n\n\t  if (conflicted) {\n\t    return changes;\n\t  }\n\n\t  while (matchIndex < matchChanges.length) {\n\t    merged.push(matchChanges[matchIndex++]);\n\t  }\n\n\t  return {\n\t    merged: merged,\n\t    changes: changes\n\t  };\n\t}\n\n\tfunction allRemoves(changes) {\n\t  return changes.reduce(function (prev, change) {\n\t    return prev && change[0] === '-';\n\t  }, true);\n\t}\n\tfunction skipRemoveSuperset(state, removeChanges, delta) {\n\t  for (var i = 0; i < delta; i++) {\n\t    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\t    if (state.lines[state.index + i] !== ' ' + changeContent) {\n\t      return false;\n\t    }\n\t  }\n\n\t  state.index += delta;\n\t  return true;\n\t}\n\n\tfunction calcOldNewLineCount(lines) {\n\t  var oldLines = 0;\n\t  var newLines = 0;\n\n\t  lines.forEach(function (line) {\n\t    if (typeof line !== 'string') {\n\t      var myCount = calcOldNewLineCount(line.mine);\n\t      var theirCount = calcOldNewLineCount(line.theirs);\n\n\t      if (oldLines !== undefined) {\n\t        if (myCount.oldLines === theirCount.oldLines) {\n\t          oldLines += myCount.oldLines;\n\t        } else {\n\t          oldLines = undefined;\n\t        }\n\t      }\n\n\t      if (newLines !== undefined) {\n\t        if (myCount.newLines === theirCount.newLines) {\n\t          newLines += myCount.newLines;\n\t        } else {\n\t          newLines = undefined;\n\t        }\n\t      }\n\t    } else {\n\t      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n\t        newLines++;\n\t      }\n\t      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n\t        oldLines++;\n\t      }\n\t    }\n\t  });\n\n\t  return { oldLines: oldLines, newLines: newLines };\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9tZXJnZS5qcyJdLCJuYW1lcyI6WyJjYWxjTGluZUNvdW50IiwibWVyZ2UiLCJodW5rIiwiY2FsY09sZE5ld0xpbmVDb3VudCIsImxpbmVzIiwib2xkTGluZXMiLCJuZXdMaW5lcyIsInVuZGVmaW5lZCIsIm1pbmUiLCJ0aGVpcnMiLCJiYXNlIiwibG9hZFBhdGNoIiwicmV0IiwiaW5kZXgiLCJuZXdGaWxlTmFtZSIsImZpbGVOYW1lQ2hhbmdlZCIsIm9sZEZpbGVOYW1lIiwib2xkSGVhZGVyIiwibmV3SGVhZGVyIiwic2VsZWN0RmllbGQiLCJodW5rcyIsIm1pbmVJbmRleCIsInRoZWlyc0luZGV4IiwibWluZU9mZnNldCIsInRoZWlyc09mZnNldCIsImxlbmd0aCIsIm1pbmVDdXJyZW50Iiwib2xkU3RhcnQiLCJJbmZpbml0eSIsInRoZWlyc0N1cnJlbnQiLCJodW5rQmVmb3JlIiwicHVzaCIsImNsb25lSHVuayIsIm1lcmdlZEh1bmsiLCJNYXRoIiwibWluIiwibmV3U3RhcnQiLCJtZXJnZUxpbmVzIiwicGFyYW0iLCJ0ZXN0IiwiRXJyb3IiLCJwYXRjaCIsImNvbmZsaWN0IiwiY2hlY2siLCJvZmZzZXQiLCJtaW5lTGluZXMiLCJ0aGVpck9mZnNldCIsInRoZWlyTGluZXMiLCJ0aGVpciIsImluc2VydExlYWRpbmciLCJ0aGVpckN1cnJlbnQiLCJtdXR1YWxDaGFuZ2UiLCJjb2xsZWN0Q2hhbmdlIiwicmVtb3ZhbCIsImluc2VydFRyYWlsaW5nIiwibXlDaGFuZ2VzIiwidGhlaXJDaGFuZ2VzIiwiYWxsUmVtb3ZlcyIsInNraXBSZW1vdmVTdXBlcnNldCIsInN3YXAiLCJjb2xsZWN0Q29udGV4dCIsIm1lcmdlZCIsImluc2VydCIsImxpbmUiLCJzdGF0ZSIsIm9wZXJhdGlvbiIsIm1hdGNoQ2hhbmdlcyIsImNoYW5nZXMiLCJtYXRjaEluZGV4IiwiY29udGV4dENoYW5nZXMiLCJjb25mbGljdGVkIiwiY2hhbmdlIiwibWF0Y2giLCJzdWJzdHIiLCJyZWR1Y2UiLCJwcmV2IiwicmVtb3ZlQ2hhbmdlcyIsImRlbHRhIiwiaSIsImNoYW5nZUNvbnRlbnQiLCJmb3JFYWNoIiwibXlDb3VudCIsInRoZWlyQ291bnQiXSwibWFwcGluZ3MiOiI7OztnQ0FLZ0JBLGEsR0FBQUEsYTt5REFnQkFDLEssR0FBQUEsSzs7QUFyQmhCOztBQUNBOztBQUVBOzs7O3VCQUVPLFNBQVNELGFBQVQsQ0FBdUJFLElBQXZCLEVBQTZCO0FBQUEsNkVBQ0xDLG9CQUFvQkQsS0FBS0UsS0FBekIsQ0FESztBQUFBLE1BQzNCQyxRQUQyQix3QkFDM0JBLFFBRDJCO0FBQUEsTUFDakJDLFFBRGlCLHdCQUNqQkEsUUFEaUI7O0FBR2xDLE1BQUlELGFBQWFFLFNBQWpCLEVBQTRCO0FBQzFCTCxTQUFLRyxRQUFMLEdBQWdCQSxRQUFoQjtBQUNELEdBRkQsTUFFTztBQUNMLFdBQU9ILEtBQUtHLFFBQVo7QUFDRDs7QUFFRCxNQUFJQyxhQUFhQyxTQUFqQixFQUE0QjtBQUMxQkwsU0FBS0ksUUFBTCxHQUFnQkEsUUFBaEI7QUFDRCxHQUZELE1BRU87QUFDTCxXQUFPSixLQUFLSSxRQUFaO0FBQ0Q7QUFDRjs7QUFFTSxTQUFTTCxLQUFULENBQWVPLElBQWYsRUFBcUJDLE1BQXJCLEVBQTZCQyxJQUE3QixFQUFtQztBQUN4Q0YsU0FBT0csVUFBVUgsSUFBVixFQUFnQkUsSUFBaEIsQ0FBUDtBQUNBRCxXQUFTRSxVQUFVRixNQUFWLEVBQWtCQyxJQUFsQixDQUFUOztBQUVBLE1BQUlFLE1BQU0sRUFBVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFJSixLQUFLSyxLQUFMLElBQWNKLE9BQU9JLEtBQXpCLEVBQWdDO0FBQzlCRCxRQUFJQyxLQUFKLEdBQVlMLEtBQUtLLEtBQUwsSUFBY0osT0FBT0ksS0FBakM7QUFDRDs7QUFFRCxNQUFJTCxLQUFLTSxXQUFMLElBQW9CTCxPQUFPSyxXQUEvQixFQUE0QztBQUMxQyxRQUFJLENBQUNDLGdCQUFnQlAsSUFBaEIsQ0FBTCxF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Q0Q7QUFDRjs7QUFFRCxVQUFJRCxhQUFhQyxTQUFqQixFQUE0QjtBQUMxQixZQUFJMEUsUUFBUTNFLFFBQVIsS0FBcUI0RSxXQUFXNUUsUUFBcEMsRUFBOEM7QUFDNUNBLHNCQUFZMkUsUUFBUTNFLFFBQXBCO0FBQ0QsU0FGRCxNQUVPO0FBQ0xBLHFCQUFXQyxTQUFYO0FBQ0Q7QUFDRjtBQUNGLEtBbkJELE1BbUJPO0FBQ0wsVUFBSUQsYUFBYUMsU0FBYixLQUEyQndELEtBQUssQ0FBTCxNQUFZLEdBQVosSUFBbUJBLEtBQUssQ0FBTCxNQUFZLEdBQTFELENBQUosRUFBb0U7QUFDbEV6RDtBQUNEO0FBQ0QsVUFBSUQsYUFBYUUsU0FBYixLQUEyQndELEtBQUssQ0FBTCxNQUFZLEdBQVosSUFBbUJBLEtBQUssQ0FBTCxNQUFZLEdBQTFELENBQUosRUFBb0U7QUFDbEUxRDtBQUNEO0FBQ0Y7QUFDRixHQTVCRDs7QUE4QkEsU0FBTyxFQUFDQSxrQkFBRCxFQUFXQyxrQkFBWCxFQUFQO0FBQ0QiLCJmaWxlIjoibWVyZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3N0cnVjdHVyZWRQYXRjaH0gZnJvbSAnLi9jcmVhdGUnO1xuaW1wb3J0IHtwYXJzZVBhdGNofSBmcm9tICcuL3BhcnNlJztcblxuaW1wb3J0IHthcnJheUVxdWFsLCBhcnJheVN0YXJ0c1dpdGh9IGZyb20gJy4uL3V0aWwvYXJyYXknO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0xpbmVDb3VudChodW5rKSB7XG4gIGNvbnN0IHtvbGRMaW5lcywgbmV3TGluZXN9ID0gY2FsY09sZE5ld0xpbmVDb3VudChodW5rLmxpbmVzKTtcblxuICBpZiAob2xkTGluZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGh1bmsub2xkTGluZXMgPSBvbGRMaW5lcztcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgaHVuay5vbGRMaW5lcztcbiAgfVxuXG4gIGlmIChuZXdMaW5lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaHVuay5uZXdMaW5lcyA9IG5ld0xpbmVzO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSBodW5rLm5ld0xpbmVzO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShtaW5lLCB0aGVpcnMsIGJhc2UpIHtcbiAgbWluZSA9IGxvYWRQYXRjaChtaW5lLCBiYXNlKTtcbiAgdGhlaXJzID0gbG9hZFBhdGNoKHRoZWlycywgYmFzZSk7XG5cbiAgbGV0IHJldCA9IHt9O1xuXG4gIC8vIEZvciBpbmRleCB3ZSBqdXN0IGxldCBpdCBwYXNzIHRocm91Z2ggYXMgaXQgZG9lc24ndCBoYXZlIGFueSBuZWNlc3NhcnkgbWVhbmluZy5cbiAgLy8gTGVhdmluZyBzYW5pdHkgY2hlY2tzIG9uIHRoaXMgdG8gdGhlIEFQSSBjb25zdW1lciB0aGF0IG1heSBrbm93IG1vcmUgYWJvdXQgdGhlXG4gIC8vIG1lYW5pbmcgaW4gdGhlaXIgb3duIGNvbnRleHQuXG4gIGlmIChtaW5lLmluZGV4IHx8IHRoZWlycy5pbmRleCkge1xuICAgIHJldC5pbmRleCA9IG1pbmUuaW5kZXggfHwgdGhlaXJzLmluZGV4O1xuICB9XG5cbiAgaWYgKG1pbmUubmV3RmlsZU5hbWUgfHwgdGhlaXJzLm5ld0ZpbGVOYW1lKSB7XG4gICAgaWYgKCFmaWxlTmFtZUNoYW5nZWQobWluZSkpIHtcbiAgICAgIC8vIE5vIGhlYWRlciBvciBubyBjaGFuZ2UgaW4gb3VycywgdXNlIHRoZWlycyAoYW5kIG91cnMgaWYgdGhlaXJzIGRvZXMgbm90IGV4aXN0KVxuICAgICAgcmV0Lm9sZEZpbGVOYW1lID0gdGhlaXJzLm9sZEZpbGVOYW1lIHx8IG1pbmUub2xkRmlsZU5hbWU7XG4gICAgICByZXQubmV3RmlsZU5hbWUgPSB0aGVpcnMubmV3RmlsZU5hbWUgfHwgbWluZS5uZXdGaWxlTmFtZTtcbiAgICAgIHJldC5vbGRIZWFkZXIgPSB0aGVpcnMub2xkSGVhZGVyIHx8IG1pbmUub2xkSGVhZGVyO1xuICAgICAgcmV0Lm5ld0hlYWRlciA9IHRoZWlycy5uZXdIZWFkZXIgfHwgbWluZS5uZXdIZWFkZXI7XG4gICAgfSBlbHNlIGlmICghZmlsZU5hbWVDaGFuZ2VkKHRoZWlycykpIHtcbiAgICAgIC8vIE5vIGhlYWRlciBvciBubyBjaGFuZ2UgaW4gdGhlaXJzLCB1c2Ugb3Vyc1xuICAgICAgcmV0Lm9sZEZpbGVOYW1lID0gbWluZS5vbGRGaWxlTmFtZTtcbiAgICAgIHJldC5uZXdGaWxlTmFtZSA9IG1pbmUubmV3RmlsZU5hbWU7XG4gICAgICByZXQub2xkSGVhZGVyID0gbWluZS5vbGRIZWFkZXI7XG4gICAgICByZXQubmV3SGVhZGVyID0gbWluZS5uZXdIZWFkZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJvdGggY2hhbmdlZC4uLiBmaWd1cmUgaXQgb3V0XG4gICAgICByZXQub2xkRmlsZU5hbWUgPSBzZWxlY3RGaWVsZChyZXQsIG1pbmUub2xkRmlsZU5hbWUsIHRoZWlycy5vbGRGaWxlTmFtZSk7XG4gICAgICByZXQubmV3RmlsZU5hbWUgPSBzZWxlY3RGaWVsZChyZXQsIG1pbmUubmV3RmlsZU5hbWUsIHRoZWlycy5uZXdGaWxlTmFtZSk7XG4gICAgICByZXQub2xkSGVhZGVyID0gc2VsZWN0RmllbGQocmV0LCBtaW5lLm9sZEhlYWRlciwgdGhlaXJzLm9sZEhlYWRlcik7XG4gICAgICByZXQubmV3SGVhZGVyID0gc2VsZWN0RmllbGQocmV0LCBtaW5lLm5ld0hlYWRlciwgdGhlaXJzLm5ld0hlYWRlcik7XG4gICAgfVxuICB9XG5cbiAgcmV0Lmh1bmtzID0gW107XG5cbiAgbGV0IG1pbmVJbmRleCA9IDAsXG4gICAgICB0aGVpcnNJbmRleCA9IDAsXG4gICAgICBtaW5lT2Zmc2V0ID0gMCxcbiAgICAgIHRoZWlyc09mZnNldCA9IDA7XG5cbiAgd2hpbGUgKG1pbmVJbmRleCA8IG1pbmUuaHVua3MubGVuZ3RoIHx8IHRoZWlyc0luZGV4IDwgdGhlaXJzLmh1bmtzLmxlbmd0aCkge1xuICAgIGxldCBtaW5lQ3VycmVudCA9IG1pbmUuaHVua3NbbWluZUluZGV4XSB8fCB7b2xkU3RhcnQ6IEluZmluaXR5fSxcbiAgICAgICAgdGhlaXJzQ3VycmVudCA9IHRoZWlycy5odW5rc1t0aGVpcnNJbmRleF0gfHwge29sZFN0YXJ0OiBJbmZpbml0eX07XG5cbiAgICBpZiAoaHVua0JlZm9yZShtaW5lQ3VycmVudCwgdGhlaXJzQ3VycmVudCkpIHtcbiAgICAgIC8vIFRoaXMgcGF0Y2ggZG9lcyBub3Qgb3ZlcmxhcCB3aXRoIGFueSBvZiB0aGUgb3RoZXJzLCB5YXkuXG4gICAgICByZXQuaHVua3MucHVzaChjbG9uZUh1bmsobWluZUN1cnJlbnQsIG1pbmVPZmZzZXQpKTtcbiAgICAgIG1pbmVJbmRleCsrO1xuICAgICAgdGhlaXJzT2Zmc2V0ICs9IG1pbmVDdXJyZW50Lm5ld0xpbmVzIC0gbWluZUN1cnJlbnQub2xkTGluZXM7XG4gICAgfSBlbHNlIGlmIChodW5rQmVmb3JlKHRoZWlyc0N1cnJlbnQsIG1pbmVDdXJyZW50KSkge1xuICAgICAgLy8gVGhpcyBwYXRjaCBkb2VzIG5vdCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBvdGhlcnMsIHlheS5cbiAgICAgIHJldC5odW5rcy5wdXNoKGNsb25lSHVuayh0aGVpcnNDdXJyZW50LCB0aGVpcnNPZmZzZXQpKTtcbiAgICAgIHRoZWlyc0luZGV4Kys7XG4gICAgICBtaW5lT2Zmc2V0ICs9IHRoZWlyc0N1cnJlbnQubmV3TGluZXMgLSB0aGVpcnNDdXJyZW50Lm9sZExpbmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdmVybGFwLCBtZXJnZSBhcyBiZXN0IHdlIGNhblxuICAgICAgbGV0IG1lcmdlZEh1bmsgPSB7XG4gICAgICAgIG9sZFN0YXJ0OiBNYXRoLm1pbihtaW5lQ3VycmVudC5vbGRTdGFydCwgdGhlaXJzQ3VycmVudC5vbGRTdGFydCksXG4gICAgICAgIG9sZExpbmVzOiAwLFxuICAgICAgICBuZXdTdGFydDogTWF0aC5taW4obWluZUN1cnJlbnQubmV3U3RhcnQgKyBtaW5lT2Zmc2V0LCB0aGVpcnNDdXJyZW50Lm9sZFN0YXJ0ICsgdGhlaXJzT2Zmc2V0KSxcbiAgICAgICAgbmV3TGluZXM6IDAsXG4gICAgICAgIGxpbmVzOiBbXVxuICAgICAgfTtcbiAgICAgIG1lcmdlTGluZXMobWVyZ2VkSHVuaywgbWluZUN1cnJlbnQub2xkU3RhcnQsIG1pbmVDdXJyZW50LmxpbmVzLCB0aGVpcnNDdXJyZW50Lm9sZFN0YXJ0LCB0aGVpcnNDdXJyZW50LmxpbmVzKTtcbiAgICAgIHRoZWlyc0luZGV4Kys7XG4gICAgICBtaW5lSW5kZXgrKztcblxuICAgICAgcmV0Lmh1bmtzLnB1c2gobWVyZ2VkSHVuayk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gbG9hZFBhdGNoKHBhcmFtLCBiYXNlKSB7XG4gIGlmICh0eXBlb2YgcGFyYW0gPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKC9eQEAvbS50ZXN0KHBhcmFtKSB8fCAoL15JbmRleDovbS50ZXN0KHBhcmFtKSkpIHtcbiAgICAgIHJldHVybiBwYXJzZVBhdGNoKHBhcmFtKVswXTtcbiAgICB9XG5cbiAgICBpZiAoIWJhc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBwcm92aWRlIGEgYmFzZSByZWZlcmVuY2Ugb3IgcGFzcyBpbiBhIHBhdGNoJyk7XG4gICAgfVxuICAgIHJldHVybiBzdHJ1Y3R1cmVkUGF0Y2godW5kZWZpbmVkLCB1bmRlZmluZWQsIGJhc2UsIHBhcmFtKTtcbiAgfVxuXG4gIHJldHVybiBwYXJhbTtcbn1cblxuZnVuY3Rpb24gZmlsZU5hbWVDaGFuZ2VkKHBhdGNoKSB7XG4gIHJldHVybiBwYXRjaC5uZXdGaWxlTmFtZSAmJiBwYXRjaC5uZXdGaWxlTmFtZSAhPT0gcGF0Y2gub2xkRmlsZU5hbWU7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdEZpZWxkKGluZGV4LCBtaW5lLCB0aGVpcnMpIHtcbiAgaWYgKG1pbmUgPT09IHRoZWlycykge1xuICAgIHJldHVybiBtaW5lO1xuICB9IGVsc2Uge1xuICAgIGluZGV4LmNvbmZsaWN0ID0gdHJ1ZTtcbiAgICByZXR1cm4ge21pbmUsIHRoZWlyc307XG4gIH1cbn1cblxuZnVuY3Rpb24gaHVua0JlZm9yZSh0ZXN0LCBjaGVjaykge1xuICByZXR1cm4gdGVzdC5vbGRTdGFydCA8IGNoZWNrLm9sZFN0YXJ0XG4gICAgJiYgKHRlc3Qub2xkU3RhcnQgKyB0ZXN0Lm9sZExpbmVzKSA8IGNoZWNrLm9sZFN0YXJ0O1xufVxuXG5mdW5jdGlvbiBjbG9uZUh1bmsoaHVuaywgb2Zmc2V0KSB7XG4gIHJldHVybiB7XG4gICAgb2xkU3RhcnQ6IGh1bmsub2xkU3RhcnQsIG9sZExpbmVzOiBodW5rLm9sZExpbmVzLFxuICAgIG5ld1N0YXJ0OiBodW5rLm5ld1N0YXJ0ICsgb2Zmc2V0LCBuZXdMaW5lczogaHVuay5uZXdMaW5lcyxcbiAgICBsaW5lczogaHVuay5saW5lc1xuICB9O1xufVxuXG5mdW5jdGlvbiBtZXJnZUxpbmVzKGh1bmssIG1pbmVPZmZzZXQsIG1pbmVMaW5lcywgdGhlaXJPZmZzZXQsIHRoZWlyTGluZXMpIHtcbiAgLy8gVGhpcyB3aWxsIGdlbmVyYWxseSByZXN1bHQgaW4gYSBjb25mbGljdGVkIGh1bmssIGJ1dCB0aGVyZSBhcmUgY2FzZXMgd2hlcmUgdGhlIGNvbnRleHRcbiAgLy8gaXMgdGhlIG9ubHkgb3ZlcmxhcCB3aGVyZSB3ZSBjYW4gc3VjY2Vzc2Z1bGx5IG1lcmdlIHRoZSBjb250ZW50IGhlcmUuXG4gIGxldCBtaW5lID0ge29mZnNldDogbWluZU9mZnNldCwgbGluZXM6IG1pbmVMaW5lcywgaW5kZXg6IDB9LFxuICAgICAgdGhlaXIgPSB7b2Zmc2V0OiB0aGVpck9mZnNldCwgbGluZXM6IHRoZWlyTGluZXMsIGluZGV4OiAwfTtcblxuICAvLyBIYW5kbGUgYW55IGxlYWRpbmcgY29udGVudFxuICBpbnNlcnRMZWFkaW5nKGh1bmssIG1pbmUsIHRoZWlyKTtcbiAgaW5zZXJ0TGVhZGluZyhodW5rLCB0aGVpciwgbWluZSk7XG5cbiAgLy8gTm93IGluIHRoZSBvdmVybGFwIGNvbnRlbnQuIFNjYW4gdGhyb3VnaCBhbmQgc2VsZWN0IHRoZSBiZXN0IGNoYW5nZXMgZnJvbSBlYWNoLlxuICB3aGlsZSAobWluZS5pbmRleCA8IG1pbmUubGluZXMubGVuZ3RoICYmIHRoZWlyLmluZGV4IDwgdGhlaXIubGluZXMubGVuZ3RoKSB7XG4gICAgbGV0IG1pbmVDdXJyZW50ID0gbWluZS5saW5lc1ttaW5lLmluZGV4XSxcbiAgICAgICAgdGhlaXJDdXJyZW50ID0gdGhlaXIubGluZXNbdGhlaXIuaW5kZXhdO1xuXG4gICAgaWYgKChtaW5lQ3VycmVudFswXSA9PT0gJy0nIHx8IG1pbmVDdXJyZW50WzBdID09PSAnKycpXG4gICAgICAgICYmICh0aGVpckN1cnJlbnRbMF0gPT09ICctJyB8fCB0aGVpckN1cnJlbnRbMF0gPT09ICcrJykpIHtcbiAgICAgIC8vIEJvdGggbW9kaWZpZWQgLi4uXG4gICAgICBtdXR1YWxDaGFuZ2UoaHVuaywgbWluZSwgdGhlaXIpO1xuICAgIH0gZWxzZSBpZiAobWluZUN1cnJlbnRbMF0gPT09ICcrJyAmJiB0aGVpckN1cnJlbnRbMF0gPT09ICcgJykge1xuICAgICAgLy8gTWluZSBpbnNlcnRlZFxuICAgICAgaHVuay5saW5lcy5wdXNoKC4uLiBjb2xsZWN0Q2hhbmdlKG1pbmUpKTtcbiAgICB9IGVsc2UgaWYgKHRoZWlyQ3VycmVudFswXSA9PT0gJysnICYmIG1pbmVDdXJyZW50WzBdID09PSAnICcpIHtcbiAgICAgIC8vIFRoZWlycyBpbnNlcnRlZFxuICAgICAgaHVuay5saW5lcy5wdXNoKC4uLiBjb2xsZWN0Q2hhbmdlKHRoZWlyKSk7XG4gICAgfSBlbHNlIGlmIChtaW5lQ3VycmVudFswXSA9PT0gJy0nICYmIHRoZWlyQ3VycmVudFswXSA9PT0gJyAnKSB7XG4gICAgICAvLyBNaW5lIHJlbW92ZWQgb3IgZWRpdGVkXG4gICAgICByZW1vdmFsKGh1bmssIG1pbmUsIHRoZWlyKTtcbiAgICB9IGVsc2UgaWYgKHRoZWlyQ3VycmVudFswXSA9PT0gJy0nICYmIG1pbmVDdXJyZW50WzBdID09PSAnICcpIHtcbiAgICAgIC8vIFRoZWlyIHJlbW92ZWQgb3IgZWRpdGVkXG4gICAgICByZW1vdmFsKGh1bmssIHRoZWlyLCBtaW5lLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKG1pbmVDdXJyZW50ID09PSB0aGVpckN1cnJlbnQpIHtcbiAgICAgIC8vIENvbnRleHQgaWRlbnRpdHlcbiAgICAgIGh1bmsubGluZXMucHVzaChtaW5lQ3VycmVudCk7XG4gICAgICBtaW5lLmluZGV4Kys7XG4gICAgICB0aGVpci5pbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDb250ZXh0IG1pc21hdGNoXG4gICAgICBjb25mbGljdChodW5rLCBjb2xsZWN0Q2hhbmdlKG1pbmUpLCBjb2xsZWN0Q2hhbmdlKHRoZWlyKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gTm93IHB1c2ggYW55dGhpbmcgdGhhdCBtYXkgYmUgcmVtYWluaW5nXG4gIGluc2VydFRyYWlsaW5nKGh1bmssIG1pbmUpO1xuICBpbnNlcnRUcmFpbGluZyhodW5rLCB0aGVpcik7XG5cbiAgY2FsY0xpbmVDb3VudChodW5rKTtcbn1cblxuZnVuY3Rpb24gbXV0dWFsQ2hhbmdlKGh1bmssIG1pbmUsIHRoZWlyKSB7XG4gIGxldCBteUNoYW5nZXMgPSBjb2xsZWN0Q2hhbmdlKG1pbmUpLFxuICAgICAgdGhlaXJDaGFuZ2VzID0gY29sbGVjdENoYW5nZSh0aGVpcik7XG5cbiAgaWYgKGFsbFJlbW92ZXMobXlDaGFuZ2VzKSAmJiBhbGxSZW1vdmVzKHRoZWlyQ2hhbmdlcykpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIHJlbW92ZSBjaGFuZ2VzIHRoYXQgYXJlIHN1cGVyc2V0cyBvZiBvbmUgYW5vdGhlclxuICAgIGlmIChhcnJheVN0YXJ0c1dpdGgobXlDaGFuZ2VzLCB0aGVpckNoYW5nZXMpXG4gICAgICAgICYmIHNraXBSZW1vdmVTdXBlcnNldCh0aGVpciwgbXlDaGFuZ2VzLCBteUNoYW5nZXMubGVuZ3RoIC0gdGhlaXJDaGFuZ2VzLmxlbmd0aCkpIHtcbiAgICAgIGh1bmsubGluZXMucHVzaCguLi4gbXlDaGFuZ2VzKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGFycmF5U3RhcnRzV2l0aCh0aGVpckNoYW5nZXMsIG15Q2hhbmdlcylcbiAgICAgICAgJiYgc2tpcFJlbW92ZVN1cGVyc2V0KG1pbmUsIHRoZWlyQ2hhbmdlcywgdGhlaXJDaGFuZ2VzLmxlbmd0aCAtIG15Q2hhbmdlcy5sZW5ndGgpKSB7XG4gICAgICBodW5rLmxpbmVzLnB1c2goLi4uIHRoZWlyQ2hhbmdlcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2UgaWYgKGFycmF5RXF1YWwobXlDaGFuZ2VzLCB0aGVpckNoYW5nZXMpKSB7XG4gICAgaHVuay5saW5lcy5wdXNoKC4uLiBteUNoYW5nZXMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbmZsaWN0KGh1bmssIG15Q2hhbmdlcywgdGhlaXJDaGFuZ2VzKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZhbChodW5rLCBtaW5lLCB0aGVpciwgc3dhcCkge1xuICBsZXQgbXlDaGFuZ2VzID0gY29sbGVjdENoYW5nZShtaW5lKSxcbiAgICAgIHRoZWlyQ2hhbmdlcyA9IGNvbGxlY3RDb250ZXh0KHRoZWlyLCBteUNoYW5nZXMpO1xuICBpZiAodGhlaXJDaGFuZ2VzLm1lcmdlZCkge1xuICAgIGh1bmsubGluZXMucHVzaCguLi4gdGhlaXJDaGFuZ2VzLm1lcmdlZCk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmxpY3QoaHVuaywgc3dhcCA/IHRoZWlyQ2hhbmdlcyA6IG15Q2hhbmdlcywgc3dhcCA/IG15Q2hhbmdlcyA6IHRoZWlyQ2hhbmdlcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29uZmxpY3QoaHVuaywgbWluZSwgdGhlaXIpIHtcbiAgaHVuay5jb25mbGljdCA9IHRydWU7XG4gIGh1bmsubGluZXMucHVzaCh7XG4gICAgY29uZmxpY3Q6IHRydWUsXG4gICAgbWluZTogbWluZSxcbiAgICB0aGVpcnM6IHRoZWlyXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRMZWFkaW5nKGh1bmssIGluc2VydCwgdGhlaXIpIHtcbiAgd2hpbGUgKGluc2VydC5vZmZzZXQgPCB0aGVpci5vZmZzZXQgJiYgaW5zZXJ0LmluZGV4IDwgaW5zZXJ0LmxpbmVzLmxlbmd0aCkge1xuICAgIGxldCBsaW5lID0gaW5zZXJ0LmxpbmVzW2luc2VydC5pbmRleCsrXTtcbiAgICBodW5rLmxpbmVzLnB1c2gobGluZSk7XG4gICAgaW5zZXJ0Lm9mZnNldCsrO1xuICB9XG59XG5mdW5jdGlvbiBpbnNlcnRUcmFpbGluZyhodW5rLCBpbnNlcnQpIHtcbiAgd2hpbGUgKGluc2VydC5pbmRleCA8IGluc2VydC5saW5lcy5sZW5ndGgpIHtcbiAgICBsZXQgbGluZSA9IGluc2VydC5saW5lc1tpbnNlcnQuaW5kZXgrK107XG4gICAgaHVuay5saW5lcy5wdXNoKGxpbmUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RDaGFuZ2Uoc3RhdGUpIHtcbiAgbGV0IHJldCA9IFtdLFxuICAgICAgb3BlcmF0aW9uID0gc3RhdGUubGluZXNbc3RhdGUuaW5kZXhdWzBdO1xuICB3aGlsZSAoc3RhdGUuaW5kZXggPCBzdGF0ZS5saW5lcy5sZW5ndGgpIHtcbiAgICBsZXQgbGluZSA9IHN0YXRlLmxpbmVzW3N0YXRlLmluZGV4XTtcblxuICAgIC8vIEdyb3VwIGFkZGl0aW9ucyB0aGF0IGFyZSBpbW1lZGlhdGVseSBhZnRlciBzdWJ0cmFjdGlvbnMgYW5kIHRyZWF0IHRoZW0gYXMgb25lIFwiYXRvbWljXCIgbW9kaWZ5IGNoYW5nZS5cbiAgICBpZiAob3BlcmF0aW9uID09PSAnLScgJiYgbGluZVswXSA9PT0gJysnKSB7XG4gICAgICBvcGVyYXRpb24gPSAnKyc7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gbGluZVswXSkge1xuICAgICAgcmV0LnB1c2gobGluZSk7XG4gICAgICBzdGF0ZS5pbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gY29sbGVjdENvbnRleHQoc3RhdGUsIG1hdGNoQ2hhbmdlcykge1xuICBsZXQgY2hhbmdlcyA9IFtdLFxuICAgICAgbWVyZ2VkID0gW10sXG4gICAgICBtYXRjaEluZGV4ID0gMCxcbiAgICAgIGNvbnRleHRDaGFuZ2VzID0gZmFsc2UsXG4gICAgICBjb25mbGljdGVkID0gZmFsc2U7XG4gIHdoaWxlIChtYXRjaEluZGV4IDwgbWF0Y2hDaGFuZ2VzLmxlbmd0aFxuICAgICAgICAmJiBzdGF0ZS5pbmRleCA8IHN0YXRlLmxpbmVzLmxlbmd0aCkge1xuICAgIGxldCBjaGFuZ2UgPSBzdGF0ZS5saW5lc1tzdGF0ZS5pbmRleF0sXG4gICAgICAgIG1hdGNoID0gbWF0Y2hDaGFuZ2VzW21hdGNoSW5kZXhdO1xuXG4gICAgLy8gT25jZSB3ZSd2ZSBoaXQgb3VyIGFkZCwgdGhlbiB3ZSBhcmUgZG9uZVxuICAgIGlmIChtYXRjaFswXSA9PT0gJysnKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb250ZXh0Q2hhbmdlcyA9IGNvbnRleHRDaGFuZ2VzIHx8IGNoYW5nZVswXSAhPT0gJyAnO1xuXG4gICAgbWVyZ2VkLnB1c2gobWF0Y2gpO1xuICAgIG1hdGNoSW5kZXgrKztcblxuICAgIC8vIENvbnN1bWUgYW55IGFkZGl0aW9ucyBpbiB0aGUgb3RoZXIgYmxvY2sgYXMgYSBjb25mbGljdCB0byBhdHRlbXB0XG4gICAgLy8gdG8gcHVsbCBpbiB0aGUgcmVtYWluaW5nIGNvbnRleHQgYWZ0ZXIgdGhpc1xuICAgIGlmIChjaGFuZ2VbMF0gPT09ICcrJykge1xuICAgICAgY29uZmxpY3RlZCA9IHRydWU7XG5cbiAgICAgIHdoaWxlIChjaGFuZ2VbMF0gPT09ICcrJykge1xuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgICAgY2hhbmdlID0gc3RhdGUubGluZXNbKytzdGF0ZS5pbmRleF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoLnN1YnN0cigxKSA9PT0gY2hhbmdlLnN1YnN0cigxKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZSk7XG4gICAgICBzdGF0ZS5pbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25mbGljdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoKG1hdGNoQ2hhbmdlc1ttYXRjaEluZGV4XSB8fCAnJylbMF0gPT09ICcrJ1xuICAgICAgJiYgY29udGV4dENoYW5nZXMpIHtcbiAgICBjb25mbGljdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChjb25mbGljdGVkKSB7XG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICB3aGlsZSAobWF0Y2hJbmRleCA8IG1hdGNoQ2hhbmdlcy5sZW5ndGgpIHtcbiAgICBtZXJnZWQucHVzaChtYXRjaENoYW5nZXNbbWF0Y2hJbmRleCsrXSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1lcmdlZCxcbiAgICBjaGFuZ2VzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFsbFJlbW92ZXMoY2hhbmdlcykge1xuICByZXR1cm4gY2hhbmdlcy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY2hhbmdlKSB7XG4gICAgcmV0dXJuIHByZXYgJiYgY2hhbmdlWzBdID09PSAnLSc7XG4gIH0sIHRydWUpO1xufVxuZnVuY3Rpb24gc2tpcFJlbW92ZVN1cGVyc2V0KHN0YXRlLCByZW1vdmVDaGFuZ2VzLCBkZWx0YSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbHRhOyBpKyspIHtcbiAgICBsZXQgY2hhbmdlQ29udGVudCA9IHJlbW92ZUNoYW5nZXNbcmVtb3ZlQ2hhbmdlcy5sZW5ndGggLSBkZWx0YSArIGldLnN1YnN0cigxKTtcbiAgICBpZiAoc3RhdGUubGluZXNbc3RhdGUuaW5kZXggKyBpXSAhPT0gJyAnICsgY2hhbmdlQ29udGVudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLmluZGV4ICs9IGRlbHRhO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY2FsY09sZE5ld0xpbmVDb3VudChsaW5lcykge1xuICBsZXQgb2xkTGluZXMgPSAwO1xuICBsZXQgbmV3TGluZXMgPSAwO1xuXG4gIGxpbmVzLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgIGlmICh0eXBlb2YgbGluZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBteUNvdW50ID0gY2FsY09sZE5ld0xpbmVDb3VudChsaW5lLm1pbmUpO1xuICAgICAgbGV0IHRoZWlyQ291bnQgPSBjYWxjT2xkTmV3TGluZUNvdW50KGxpbmUudGhlaXJzKTtcblxuICAgICAgaWYgKG9sZExpbmVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG15Q291bnQub2xkTGluZXMgPT09IHRoZWlyQ291bnQub2xkTGluZXMpIHtcbiAgICAgICAgICBvbGRMaW5lcyArPSBteUNvdW50Lm9sZExpbmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9sZExpbmVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdMaW5lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChteUNvdW50Lm5ld0xpbmVzID09PSB0aGVpckNvdW50Lm5ld0xpbmVzKSB7XG4gICAgICAgICAgbmV3TGluZXMgKz0gbXlDb3VudC5uZXdMaW5lcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdMaW5lcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobmV3TGluZXMgIT09IHVuZGVmaW5lZCAmJiAobGluZVswXSA9PT0gJysnIHx8IGxpbmVbMF0gPT09ICcgJykpIHtcbiAgICAgICAgbmV3TGluZXMrKztcbiAgICAgIH1cbiAgICAgIGlmIChvbGRMaW5lcyAhPT0gdW5kZWZpbmVkICYmIChsaW5lWzBdID09PSAnLScgfHwgbGluZVswXSA9PT0gJyAnKSkge1xuICAgICAgICBvbGRMaW5lcysrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtvbGRMaW5lcywgbmV3TGluZXN9O1xufVxuIl19\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/structuredPatch = structuredPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/createTwoFilesPatch = createTwoFilesPatch;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/createPatch = createPatch;\n\n\tvar /*istanbul ignore start*/_line = __webpack_require__(5) /*istanbul ignore end*/;\n\n\t/*istanbul ignore start*/function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\t/*istanbul ignore end*/function structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n\t  if (!options) {\n\t    options = {};\n\t  }\n\t  if (typeof options.context === 'undefined') {\n\t    options.context = 4;\n\t  }\n\n\t  var diff = /*istanbul ignore start*/(0, _line.diffLines) /*istanbul ignore end*/(oldStr, newStr, options);\n\t  diff.push({ value: '', lines: [] }); // Append an empty value to make cleanup easier\n\n\t  function contextLines(lines) {\n\t    return lines.map(function (entry) {\n\t      return ' ' + entry;\n\t    });\n\t  }\n\n\t  var hunks = [];\n\t  var oldRangeStart = 0,\n\t      newRangeStart = 0,\n\t      curRange = [],\n\t      oldLine = 1,\n\t      newLine = 1;\n\n\t  /*istanbul ignore start*/var _loop = function _loop( /*istanbul ignore end*/i) {\n\t    var current = diff[i],\n\t        lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n\t    current.lines = lines;\n\n\t    if (current.added || current.removed) {\n\t      /*istanbul ignore start*/var _curRange;\n\n\t      /*istanbul ignore end*/ // If we have previous context, start with that\n\t      if (!oldRangeStart) {\n\t        var prev = diff[i - 1];\n\t        oldRangeStart = oldLine;\n\t        newRangeStart = newLine;\n\n\t        if (prev) {\n\t          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n\t          oldRangeStart -= curRange.length;\n\t          newRangeStart -= curRange.length;\n\t        }\n\t      }\n\n\t      // Output our changes\n\t      /*istanbul ignore start*/(_curRange = /*istanbul ignore end*/curRange).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_curRange /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/lines.map(function (entry) {\n\t        return (current.added ? '+' : '-') + entry;\n\t      })));\n\n\t      // Track the updated file position\n\t      if (current.added) {\n\t        newLine += lines.length;\n\t      } else {\n\t        oldLine += lines.length;\n\t      }\n\t    } else {\n\t      // Identical context lines. Track line changes\n\t      if (oldRangeStart) {\n\t        // Close out any changes that have been output (or join overlapping)\n\t        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n\t          /*istanbul ignore start*/var _curRange2;\n\n\t          /*istanbul ignore end*/ // Overlapping\n\t          /*istanbul ignore start*/(_curRange2 = /*istanbul ignore end*/curRange).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_curRange2 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/contextLines(lines)));\n\t        } else {\n\t          /*istanbul ignore start*/var _curRange3;\n\n\t          /*istanbul ignore end*/ // end the range and output\n\t          var contextSize = Math.min(lines.length, options.context);\n\t          /*istanbul ignore start*/(_curRange3 = /*istanbul ignore end*/curRange).push. /*istanbul ignore start*/apply /*istanbul ignore end*/( /*istanbul ignore start*/_curRange3 /*istanbul ignore end*/, /*istanbul ignore start*/_toConsumableArray( /*istanbul ignore end*/contextLines(lines.slice(0, contextSize))));\n\n\t          var hunk = {\n\t            oldStart: oldRangeStart,\n\t            oldLines: oldLine - oldRangeStart + contextSize,\n\t            newStart: newRangeStart,\n\t            newLines: newLine - newRangeStart + contextSize,\n\t            lines: curRange\n\t          };\n\t          if (i >= diff.length - 2 && lines.length <= options.context) {\n\t            // EOF is inside this hunk\n\t            var oldEOFNewline = /\\n$/.test(oldStr);\n\t            var newEOFNewline = /\\n$/.test(newStr);\n\t            if (lines.length == 0 && !oldEOFNewline) {\n\t              // special case: old has no eol and no trailing context; no-nl can end up before adds\n\t              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n\t            } else if (!oldEOFNewline || !newEOFNewline) {\n\t              curRange.push('\\\\ No newline at end of file');\n\t            }\n\t          }\n\t          hunks.push(hunk);\n\n\t          oldRangeStart = 0;\n\t          newRangeStart = 0;\n\t          curRange = [];\n\t        }\n\t      }\n\t      oldLine += lines.length;\n\t      newLine += lines.length;\n\t    }\n\t  };\n\n\t  for (var i = 0; i < diff.length; i++) {\n\t    /*istanbul ignore start*/_loop( /*istanbul ignore end*/i);\n\t  }\n\n\t  return {\n\t    oldFileName: oldFileName, newFileName: newFileName,\n\t    oldHeader: oldHeader, newHeader: newHeader,\n\t    hunks: hunks\n\t  };\n\t}\n\n\tfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n\t  var diff = structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options);\n\n\t  var ret = [];\n\t  if (oldFileName == newFileName) {\n\t    ret.push('Index: ' + oldFileName);\n\t  }\n\t  ret.push('===================================================================');\n\t  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n\t  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n\t  for (var i = 0; i < diff.hunks.length; i++) {\n\t    var hunk = diff.hunks[i];\n\t    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n\t    ret.push.apply(ret, hunk.lines);\n\t  }\n\n\t  return ret.join('\\n') + '\\n';\n\t}\n\n\tfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n\t  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9jcmVhdGUuanMiXSwibmFtZXMiOlsic3RydWN0dXJlZFBhdGNoIiwiY3JlYXRlVHdvRmlsZXNQYXRjaCIsImNyZWF0ZVBhdGNoIiwib2xkRmlsZU5hbWUiLCJuZXdGaWxlTmFtZSIsIm9sZFN0ciIsIm5ld1N0ciIsIm9sZEhlYWRlciIsIm5ld0hlYWRlciIsIm9wdGlvbnMiLCJjb250ZXh0IiwiZGlmZiIsInB1c2giLCJ2YWx1ZSIsImxpbmVzIiwiY29udGV4dExpbmVzIiwibWFwIiwiZW50cnkiLCJodW5rcyIsIm9sZFJhbmdlU3RhcnQiLCJuZXdSYW5nZVN0YXJ0IiwiY3VyUmFuZ2UiLCJvbGRMaW5lIiwibmV3TGluZSIsImkiLCJjdXJyZW50IiwicmVwbGFjZSIsInNwbGl0IiwiYWRkZWQiLCJyZW1vdmVkIiwicHJldiIsInNsaWNlIiwibGVuZ3RoIiwiY29udGV4dFNpemUiLCJNYXRoIiwibWluIiwiaHVuayIsIm9sZFN0YXJ0Iiwib2xkTGluZXMiLCJuZXdTdGFydCIsIm5ld0xpbmVzIiwib2xkRU9GTmV3bGluZSIsInRlc3QiLCJuZXdFT0ZOZXdsaW5lIiwic3BsaWNlIiwicmV0IiwiYXBwbHkiLCJqb2luIiwiZmlsZU5hbWUiXSwibWFwcGluZ3MiOiI7OztnQ0FFZ0JBLGUsR0FBQUEsZTt5REFpR0FDLG1CLEdBQUFBLG1CO3lEQXdCQUMsVyxHQUFBQSxXOztBQTNIaEI7Ozs7dUJBRU8sU0FBU0YsZUFBVCxDQUF5QkcsV0FBekIsRUFBc0NDLFdBQXRDLEVBQW1EQyxNQUFuRCxFQUEyREMsTUFBM0QsRUFBbUVDLFNBQW5FLEVBQThFQyxTQUE5RSxFQUF5RkMsT0FBekYsRUFBa0c7QUFDdkcsTUFBSSxDQUFDQSxPQUFMLEVBQWM7QUFDWkEsY0FBVSxFQUFWO0FBQ0Q7QUFDRCxNQUFJLE9BQU9BLFFBQVFDLE9BQWYsS0FBMkIsV0FBL0IsRUFBNEM7QUFDMUNELFlBQVFDLE9BQVIsR0FBa0IsQ0FBbEI7QUFDRDs7QUFFRCxN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QUEvQyxFQUEwREMsU0FBMUQsRUFBcUVDLE9BQXJFLEVBQThFO0FBQ25GLFNBQU9SLG9CQUFvQitDLFFBQXBCLEVBQThCQSxRQUE5QixFQUF3QzNDLE1BQXhDLEVBQWdEQyxNQUFoRCxFQUF3REMsU0FBeEQsRUFBbUVDLFNBQW5FLEVBQThFQyxPQUE5RSxDQUFQO0FBQ0QiLCJmaWxlIjoiY3JlYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtkaWZmTGluZXN9IGZyb20gJy4uL2RpZmYvbGluZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJ1Y3R1cmVkUGF0Y2gob2xkRmlsZU5hbWUsIG5ld0ZpbGVOYW1lLCBvbGRTdHIsIG5ld1N0ciwgb2xkSGVhZGVyLCBuZXdIZWFkZXIsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgIG9wdGlvbnMuY29udGV4dCA9IDQ7XG4gIH1cblxuICBjb25zdCBkaWZmID0gZGlmZkxpbmVzKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTtcbiAgZGlmZi5wdXNoKHt2YWx1ZTogJycsIGxpbmVzOiBbXX0pOyAgIC8vIEFwcGVuZCBhbiBlbXB0eSB2YWx1ZSB0byBtYWtlIGNsZWFudXAgZWFzaWVyXG5cbiAgZnVuY3Rpb24gY29udGV4dExpbmVzKGxpbmVzKSB7XG4gICAgcmV0dXJuIGxpbmVzLm1hcChmdW5jdGlvbihlbnRyeSkgeyByZXR1cm4gJyAnICsgZW50cnk7IH0pO1xuICB9XG5cbiAgbGV0IGh1bmtzID0gW107XG4gIGxldCBvbGRSYW5nZVN0YXJ0ID0gMCwgbmV3UmFuZ2VTdGFydCA9IDAsIGN1clJhbmdlID0gW10sXG4gICAgICBvbGRMaW5lID0gMSwgbmV3TGluZSA9IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkaWZmW2ldLFxuICAgICAgICAgIGxpbmVzID0gY3VycmVudC5saW5lcyB8fCBjdXJyZW50LnZhbHVlLnJlcGxhY2UoL1xcbiQvLCAnJykuc3BsaXQoJ1xcbicpO1xuICAgIGN1cnJlbnQubGluZXMgPSBsaW5lcztcblxuICAgIGlmIChjdXJyZW50LmFkZGVkIHx8IGN1cnJlbnQucmVtb3ZlZCkge1xuICAgICAgLy8gSWYgd2UgaGF2ZSBwcmV2aW91cyBjb250ZXh0LCBzdGFydCB3aXRoIHRoYXRcbiAgICAgIGlmICghb2xkUmFuZ2VTdGFydCkge1xuICAgICAgICBjb25zdCBwcmV2ID0gZGlmZltpIC0gMV07XG4gICAgICAgIG9sZFJhbmdlU3RhcnQgPSBvbGRMaW5lO1xuICAgICAgICBuZXdSYW5nZVN0YXJ0ID0gbmV3TGluZTtcblxuICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgIGN1clJhbmdlID0gb3B0aW9ucy5jb250ZXh0ID4gMCA/IGNvbnRleHRMaW5lcyhwcmV2LmxpbmVzLnNsaWNlKC1vcHRpb25zLmNvbnRleHQpKSA6IFtdO1xuICAgICAgICAgIG9sZFJhbmdlU3RhcnQgLT0gY3VyUmFuZ2UubGVuZ3RoO1xuICAgICAgICAgIG5ld1JhbmdlU3RhcnQgLT0gY3VyUmFuZ2UubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE91dHB1dCBvdXIgY2hhbmdlc1xuICAgICAgY3VyUmFuZ2UucHVzaCguLi4gbGluZXMubWFwKGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgIHJldHVybiAoY3VycmVudC5hZGRlZCA/ICcrJyA6ICctJykgKyBlbnRyeTtcbiAgICAgIH0pKTtcblxuICAgICAgLy8gVHJhY2sgdGhlIHVwZGF0ZWQgZmlsZSBwb3NpdGlvblxuICAgICAgaWYgKGN1cnJlbnQuYWRkZWQpIHtcbiAgICAgICAgbmV3TGluZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbGRMaW5lICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWRlbnRpY2FsIGNvbnRleHQgbGluZXMuIFRyYWNrIGxpbmUgY2hhbmdlc1xuICAgICAgaWYgKG9sZFJhbmdlU3RhcnQpIHtcbiAgICAgICAgLy8gQ2xvc2Ugb3V0IGFueSBjaGFuZ2VzIHRoYXQgaGF2ZSBiZWVuIG91dHB1dCAob3Igam9pbiBvdmVybGFwcGluZylcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBvcHRpb25zLmNvbnRleHQgKiAyICYmIGkgPCBkaWZmLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAvLyBPdmVybGFwcGluZ1xuICAgICAgICAgIGN1clJhbmdlLnB1c2goLi4uIGNvbnRleHRMaW5lcyhsaW5lcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVuZCB0aGUgcmFuZ2UgYW5kIG91dHB1dFxuICAgICAgICAgIGxldCBjb250ZXh0U2l6ZSA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgb3B0aW9ucy5jb250ZXh0KTtcbiAgICAgICAgICBjdXJSYW5nZS5wdXNoKC4uLiBjb250ZXh0TGluZXMobGluZXMuc2xpY2UoMCwgY29udGV4dFNpemUpKSk7XG5cbiAgICAgICAgICBsZXQgaHVuayA9IHtcbiAgICAgICAgICAgIG9sZFN0YXJ0OiBvbGRSYW5nZVN0YXJ0LFxuICAgICAgICAgICAgb2xkTGluZXM6IChvbGRMaW5lIC0gb2xkUmFuZ2VTdGFydCArIGNvbnRleHRTaXplKSxcbiAgICAgICAgICAgIG5ld1N0YXJ0OiBuZXdSYW5nZVN0YXJ0LFxuICAgICAgICAgICAgbmV3TGluZXM6IChuZXdMaW5lIC0gbmV3UmFuZ2VTdGFydCArIGNvbnRleHRTaXplKSxcbiAgICAgICAgICAgIGxpbmVzOiBjdXJSYW5nZVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGkgPj0gZGlmZi5sZW5ndGggLSAyICYmIGxpbmVzLmxlbmd0aCA8PSBvcHRpb25zLmNvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIEVPRiBpcyBpbnNpZGUgdGhpcyBodW5rXG4gICAgICAgICAgICBsZXQgb2xkRU9GTmV3bGluZSA9ICgvXFxuJC8udGVzdChvbGRTdHIpKTtcbiAgICAgICAgICAgIGxldCBuZXdFT0ZOZXdsaW5lID0gKC9cXG4kLy50ZXN0KG5ld1N0cikpO1xuICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PSAwICYmICFvbGRFT0ZOZXdsaW5lKSB7XG4gICAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb2xkIGhhcyBubyBlb2wgYW5kIG5vIHRyYWlsaW5nIGNvbnRleHQ7IG5vLW5sIGNhbiBlbmQgdXAgYmVmb3JlIGFkZHNcbiAgICAgICAgICAgICAgY3VyUmFuZ2Uuc3BsaWNlKGh1bmsub2xkTGluZXMsIDAsICdcXFxcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9sZEVPRk5ld2xpbmUgfHwgIW5ld0VPRk5ld2xpbmUpIHtcbiAgICAgICAgICAgICAgY3VyUmFuZ2UucHVzaCgnXFxcXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGh1bmtzLnB1c2goaHVuayk7XG5cbiAgICAgICAgICBvbGRSYW5nZVN0YXJ0ID0gMDtcbiAgICAgICAgICBuZXdSYW5nZVN0YXJ0ID0gMDtcbiAgICAgICAgICBjdXJSYW5nZSA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbGRMaW5lICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgIG5ld0xpbmUgKz0gbGluZXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb2xkRmlsZU5hbWU6IG9sZEZpbGVOYW1lLCBuZXdGaWxlTmFtZTogbmV3RmlsZU5hbWUsXG4gICAgb2xkSGVhZGVyOiBvbGRIZWFkZXIsIG5ld0hlYWRlcjogbmV3SGVhZGVyLFxuICAgIGh1bmtzOiBodW5rc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHdvRmlsZXNQYXRjaChvbGRGaWxlTmFtZSwgbmV3RmlsZU5hbWUsIG9sZFN0ciwgbmV3U3RyLCBvbGRIZWFkZXIsIG5ld0hlYWRlciwgb3B0aW9ucykge1xuICBjb25zdCBkaWZmID0gc3RydWN0dXJlZFBhdGNoKG9sZEZpbGVOYW1lLCBuZXdGaWxlTmFtZSwgb2xkU3RyLCBuZXdTdHIsIG9sZEhlYWRlciwgbmV3SGVhZGVyLCBvcHRpb25zKTtcblxuICBjb25zdCByZXQgPSBbXTtcbiAgaWYgKG9sZEZpbGVOYW1lID09IG5ld0ZpbGVOYW1lKSB7XG4gICAgcmV0LnB1c2goJ0luZGV4OiAnICsgb2xkRmlsZU5hbWUpO1xuICB9XG4gIHJldC5wdXNoKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gIHJldC5wdXNoKCctLS0gJyArIGRpZmYub2xkRmlsZU5hbWUgKyAodHlwZW9mIGRpZmYub2xkSGVhZGVyID09PSAndW5kZWZpbmVkJyA/ICcnIDogJ1xcdCcgKyBkaWZmLm9sZEhlYWRlcikpO1xuICByZXQucHVzaCgnKysrICcgKyBkaWZmLm5ld0ZpbGVOYW1lICsgKHR5cGVvZiBkaWZmLm5ld0hlYWRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnJyA6ICdcXHQnICsgZGlmZi5uZXdIZWFkZXIpKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmYuaHVua3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBodW5rID0gZGlmZi5odW5rc1tpXTtcbiAgICByZXQucHVzaChcbiAgICAgICdAQCAtJyArIGh1bmsub2xkU3RhcnQgKyAnLCcgKyBodW5rLm9sZExpbmVzXG4gICAgICArICcgKycgKyBodW5rLm5ld1N0YXJ0ICsgJywnICsgaHVuay5uZXdMaW5lc1xuICAgICAgKyAnIEBAJ1xuICAgICk7XG4gICAgcmV0LnB1c2guYXBwbHkocmV0LCBodW5rLmxpbmVzKTtcbiAgfVxuXG4gIHJldHVybiByZXQuam9pbignXFxuJykgKyAnXFxuJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBhdGNoKGZpbGVOYW1lLCBvbGRTdHIsIG5ld1N0ciwgb2xkSGVhZGVyLCBuZXdIZWFkZXIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGNyZWF0ZVR3b0ZpbGVzUGF0Y2goZmlsZU5hbWUsIGZpbGVOYW1lLCBvbGRTdHIsIG5ld1N0ciwgb2xkSGVhZGVyLCBuZXdIZWFkZXIsIG9wdGlvbnMpO1xufVxuIl19\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/\"use strict\";\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/arrayEqual = arrayEqual;\n\t/*istanbul ignore start*/exports. /*istanbul ignore end*/arrayStartsWith = arrayStartsWith;\n\tfunction arrayEqual(a, b) {\n\t  if (a.length !== b.length) {\n\t    return false;\n\t  }\n\n\t  return arrayStartsWith(a, b);\n\t}\n\n\tfunction arrayStartsWith(array, start) {\n\t  if (start.length > array.length) {\n\t    return false;\n\t  }\n\n\t  for (var i = 0; i < start.length; i++) {\n\t    if (start[i] !== array[i]) {\n\t      return false;\n\t    }\n\t  }\n\n\t  return true;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2FycmF5LmpzIl0sIm5hbWVzIjpbImFycmF5RXF1YWwiLCJhcnJheVN0YXJ0c1dpdGgiLCJhIiwiYiIsImxlbmd0aCIsImFycmF5Iiwic3RhcnQiLCJpIl0sIm1hcHBpbmdzIjoiOzs7Z0NBQWdCQSxVLEdBQUFBLFU7eURBUUFDLGUsR0FBQUEsZTtBQVJULFNBQVNELFVBQVQsQ0FBb0JFLENBQXBCLEVBQXVCQyxDQUF2QixFQUEwQjtBQUMvQixNQUFJRCxFQUFFRSxNQUFGLEtBQWFELEVBQUVDLE1BQW5CLEVBQTJCO0FBQ3pCLFdBQU8sS0FBUDtBQUNEOztBQUVELFNBQU9ILGdCQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLENBQVA7QUFDRDs7QUFFTSxTQUFTRixlQUFULENBQXlCSSxLQUF6QixFQUFnQ0MsS0FBaEMsRUFBdUM7QUFDNUMsTUFBSUEsTUFBTUYsTUFBTixHQUFlQyxNQUFNRCxNQUF6QixFQUFpQztBQUMvQixXQUFPLEtBQVA7QUFDRDs7QUFFRCxPQUFLLElBQUlHLElBQUksQ0FBYixFQUFnQkEsSUFBSUQsTUFBTUYsTUFBMUIsRUFBa0NHLEdBQWxDLEVBQXVDO0FBQ3JDLFFBQUlELE1BQU1DLENBQU4sTUFBYUYsTUFBTUUsQ0FBTixDQUFqQixFQUEyQjtBQUN6QixhQUFPLEtBQVA7QUFDRDtBQUNGOztBQUVELFNBQU8sSUFBUDtBQUNEIiwiZmlsZSI6ImFycmF5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGFycmF5RXF1YWwoYSwgYikge1xuICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5U3RhcnRzV2l0aChhLCBiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5U3RhcnRzV2l0aChhcnJheSwgc3RhcnQpIHtcbiAgaWYgKHN0YXJ0Lmxlbmd0aCA+IGFycmF5Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3RhcnRbaV0gIT09IGFycmF5W2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iXX0=\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/\"use strict\";\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/convertChangesToDMP = convertChangesToDMP;\n\t// See: http://code.google.com/p/google-diff-match-patch/wiki/API\n\tfunction convertChangesToDMP(changes) {\n\t  var ret = [],\n\t      change = /*istanbul ignore start*/void 0 /*istanbul ignore end*/,\n\t      operation = /*istanbul ignore start*/void 0 /*istanbul ignore end*/;\n\t  for (var i = 0; i < changes.length; i++) {\n\t    change = changes[i];\n\t    if (change.added) {\n\t      operation = 1;\n\t    } else if (change.removed) {\n\t      operation = -1;\n\t    } else {\n\t      operation = 0;\n\t    }\n\n\t    ret.push([operation, change.value]);\n\t  }\n\t  return ret;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb252ZXJ0L2RtcC5qcyJdLCJuYW1lcyI6WyJjb252ZXJ0Q2hhbmdlc1RvRE1QIiwiY2hhbmdlcyIsInJldCIsImNoYW5nZSIsIm9wZXJhdGlvbiIsImkiLCJsZW5ndGgiLCJhZGRlZCIsInJlbW92ZWQiLCJwdXNoIiwidmFsdWUiXSwibWFwcGluZ3MiOiI7OztnQ0FDZ0JBLG1CLEdBQUFBLG1CO0FBRGhCO0FBQ08sU0FBU0EsbUJBQVQsQ0FBNkJDLE9BQTdCLEVBQXNDO0FBQzNDLE1BQUlDLE1BQU0sRUFBVjtBQUFBLE1BQ0lDLHdDQURKO0FBQUEsTUFFSUMsMkNBRko7QUFHQSxPQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSUosUUFBUUssTUFBNUIsRUFBb0NELEdBQXBDLEVBQXlDO0FBQ3ZDRixhQUFTRixRQUFRSSxDQUFSLENBQVQ7QUFDQSxRQUFJRixPQUFPSSxLQUFYLEVBQWtCO0FBQ2hCSCxrQkFBWSxDQUFaO0FBQ0QsS0FGRCxNQUVPLElBQUlELE9BQU9LLE9BQVgsRUFBb0I7QUFDekJKLGtCQUFZLENBQUMsQ0FBYjtBQUNELEtBRk0sTUFFQTtBQUNMQSxrQkFBWSxDQUFaO0FBQ0Q7O0FBRURGLFFBQUlPLElBQUosQ0FBUyxDQUFDTCxTQUFELEVBQVlELE9BQU9PLEtBQW5CLENBQVQ7QUFDRDtBQUNELFNBQU9SLEdBQVA7QUFDRCIsImZpbGUiOiJkbXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZWU6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9nb29nbGUtZGlmZi1tYXRjaC1wYXRjaC93aWtpL0FQSVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRDaGFuZ2VzVG9ETVAoY2hhbmdlcykge1xuICBsZXQgcmV0ID0gW10sXG4gICAgICBjaGFuZ2UsXG4gICAgICBvcGVyYXRpb247XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgIGNoYW5nZSA9IGNoYW5nZXNbaV07XG4gICAgaWYgKGNoYW5nZS5hZGRlZCkge1xuICAgICAgb3BlcmF0aW9uID0gMTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZS5yZW1vdmVkKSB7XG4gICAgICBvcGVyYXRpb24gPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3BlcmF0aW9uID0gMDtcbiAgICB9XG5cbiAgICByZXQucHVzaChbb3BlcmF0aW9uLCBjaGFuZ2UudmFsdWVdKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuIl19\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\t/*istanbul ignore start*/'use strict';\n\n\texports.__esModule = true;\n\texports. /*istanbul ignore end*/convertChangesToXML = convertChangesToXML;\n\tfunction convertChangesToXML(changes) {\n\t  var ret = [];\n\t  for (var i = 0; i < changes.length; i++) {\n\t    var change = changes[i];\n\t    if (change.added) {\n\t      ret.push('<ins>');\n\t    } else if (change.removed) {\n\t      ret.push('<del>');\n\t    }\n\n\t    ret.push(escapeHTML(change.value));\n\n\t    if (change.added) {\n\t      ret.push('</ins>');\n\t    } else if (change.removed) {\n\t      ret.push('</del>');\n\t    }\n\t  }\n\t  return ret.join('');\n\t}\n\n\tfunction escapeHTML(s) {\n\t  var n = s;\n\t  n = n.replace(/&/g, '&amp;');\n\t  n = n.replace(/</g, '&lt;');\n\t  n = n.replace(/>/g, '&gt;');\n\t  n = n.replace(/\"/g, '&quot;');\n\n\t  return n;\n\t}\n\t//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb252ZXJ0L3htbC5qcyJdLCJuYW1lcyI6WyJjb252ZXJ0Q2hhbmdlc1RvWE1MIiwiY2hhbmdlcyIsInJldCIsImkiLCJsZW5ndGgiLCJjaGFuZ2UiLCJhZGRlZCIsInB1c2giLCJyZW1vdmVkIiwiZXNjYXBlSFRNTCIsInZhbHVlIiwiam9pbiIsInMiLCJuIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6Ijs7O2dDQUFnQkEsbUIsR0FBQUEsbUI7QUFBVCxTQUFTQSxtQkFBVCxDQUE2QkMsT0FBN0IsRUFBc0M7QUFDM0MsTUFBSUMsTUFBTSxFQUFWO0FBQ0EsT0FBSyxJQUFJQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlGLFFBQVFHLE1BQTVCLEVBQW9DRCxHQUFwQyxFQUF5QztBQUN2QyxRQUFJRSxTQUFTSixRQUFRRSxDQUFSLENBQWI7QUFDQSxRQUFJRSxPQUFPQyxLQUFYLEVBQWtCO0FBQ2hCSixVQUFJSyxJQUFKLENBQVMsT0FBVDtBQUNELEtBRkQsTUFFTyxJQUFJRixPQUFPRyxPQUFYLEVBQW9CO0FBQ3pCTixVQUFJSyxJQUFKLENBQVMsT0FBVDtBQUNEOztBQUVETCxRQUFJSyxJQUFKLENBQVNFLFdBQVdKLE9BQU9LLEtBQWxCLENBQVQ7O0FBRUEsUUFBSUwsT0FBT0MsS0FBWCxFQUFrQjtBQUNoQkosVUFBSUssSUFBSixDQUFTLFFBQVQ7QUFDRCxLQUZELE1BRU8sSUFBSUYsT0FBT0csT0FBWCxFQUFvQjtBQUN6Qk4sVUFBSUssSUFBSixDQUFTLFFBQVQ7QUFDRDtBQUNGO0FBQ0QsU0FBT0wsSUFBSVMsSUFBSixDQUFTLEVBQVQsQ0FBUDtBQUNEOztBQUVELFNBQVNGLFVBQVQsQ0FBb0JHLENBQXBCLEVBQXVCO0FBQ3JCLE1BQUlDLElBQUlELENBQVI7QUFDQUMsTUFBSUEsRUFBRUMsT0FBRixDQUFVLElBQVYsRUFBZ0IsT0FBaEIsQ0FBSjtBQUNBRCxNQUFJQSxFQUFFQyxPQUFGLENBQVUsSUFBVixFQUFnQixNQUFoQixDQUFKO0FBQ0FELE1BQUlBLEVBQUVDLE9BQUYsQ0FBVSxJQUFWLEVBQWdCLE1BQWhCLENBQUo7QUFDQUQsTUFBSUEsRUFBRUMsT0FBRixDQUFVLElBQVYsRUFBZ0IsUUFBaEIsQ0FBSjs7QUFFQSxTQUFPRCxDQUFQO0FBQ0QiLCJmaWxlIjoieG1sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRDaGFuZ2VzVG9YTUwoY2hhbmdlcykge1xuICBsZXQgcmV0ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjaGFuZ2UgPSBjaGFuZ2VzW2ldO1xuICAgIGlmIChjaGFuZ2UuYWRkZWQpIHtcbiAgICAgIHJldC5wdXNoKCc8aW5zPicpO1xuICAgIH0gZWxzZSBpZiAoY2hhbmdlLnJlbW92ZWQpIHtcbiAgICAgIHJldC5wdXNoKCc8ZGVsPicpO1xuICAgIH1cblxuICAgIHJldC5wdXNoKGVzY2FwZUhUTUwoY2hhbmdlLnZhbHVlKSk7XG5cbiAgICBpZiAoY2hhbmdlLmFkZGVkKSB7XG4gICAgICByZXQucHVzaCgnPC9pbnM+Jyk7XG4gICAgfSBlbHNlIGlmIChjaGFuZ2UucmVtb3ZlZCkge1xuICAgICAgcmV0LnB1c2goJzwvZGVsPicpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0LmpvaW4oJycpO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVIVE1MKHMpIHtcbiAgbGV0IG4gPSBzO1xuICBuID0gbi5yZXBsYWNlKC8mL2csICcmYW1wOycpO1xuICBuID0gbi5yZXBsYWNlKC88L2csICcmbHQ7Jyk7XG4gIG4gPSBuLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbiAgbiA9IG4ucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xuXG4gIHJldHVybiBuO1xufVxuIl19\n\n\n/***/ })\n/******/ ])\n});\n;","import * as JsDiff from 'diff';\nimport { Measure } from './Measure';\nimport { Sheet } from './Sheet';\nimport { noteArray } from '../util/util';\n\nexport class Snippet {\n\n    static render(snippet, options?) {\n        const parsed = Snippet.parse(snippet);\n        return Sheet.render(parsed, options);\n    }\n\n    static wrapPipes(string) {\n        return `|${string}|`.replace(/\\|+/g, '|');\n    }\n\n    static formatForDiff(snippet) {\n        return Snippet.minify(snippet)\n            .replace(/\\|/g, ' | ').trim();\n    }\n\n    static format(snippet, linebreaks = true) {\n        // replaces url chars back\n        let compact = Snippet.minify(snippet, false);\n        compact = Snippet.wrapPipes(compact);\n\n        if (linebreaks) {\n            // insert spaces before first chord\n            let bars = compact.split('|').slice(1, -1);\n            bars = bars.map((bar, index) => {\n                if (!bar[0].match(/[1-9:]/)) {\n                    bar = '  ' + bar;\n                } else if (bar[0] === ':') {\n                    bar = ': ' + bar.slice(1);\n                }\n                return bar;\n            });\n            // find out indices of first houses\n            const houses = bars.reduce((offset, bar, index) => {\n                if (bar[0] === '1') {\n                    offset.push(index);\n                }\n                return offset;\n            }, []);\n            // insert empty bars before additional houses\n            bars = bars.reduce((bars, bar, index) => {\n                if (bar[0].match(/[2-9]/)) {\n                    const offset = houses.filter(h => h < index).reverse()[0];\n                    bars = bars.concat(new Array(offset % 4).fill(''));\n                }\n                bars.push(bar);\n                return bars;\n            }, []);\n            // find out the maximal number of chars per column\n            const chars = bars.reduce((max, bar, index) => {\n                max[index % 4] = Math.max(bar.length, max[index % 4] || 0);\n                return max;\n            }, []);\n            // fill up each bar with spaces\n            compact = bars.map((bar, index) => {\n                let diff = chars[index % 4] - bar.length + 2;\n                if (diff > 0) {\n                    bar += new Array(diff).fill(' ').join('');\n                }\n                // move double dots to end of bar\n                bar = bar.replace(/:(\\s+)$/, '$1:');\n                return bar;\n            }).join('|');\n\n            compact = Snippet.wrapPipes(compact);\n            // break string all 4 bars\n            let pipeIndex = -1;\n            compact = compact.split('').reduce((string, char, index) => {\n                if (char === '|') {\n                    pipeIndex++;\n                }\n                if (char === '|' && pipeIndex % 4 === 0 && index > 0 && index < compact.length - 1) {\n                    char = \"|\\n|\";\n                    pipeIndex = 0;\n                }\n                return string + char;\n            }, '');\n        } else {\n            compact = compact.replace(/\\n/g, '|');\n        }\n        return compact\n            .replace(/\\|+/g, '|')\n            .replace(/\\|( +)\\|( +)/g, ' $1 $2') // remove spacer bar pipes\n            .replace(/\\|( +)\\|([1-9])/g, ' $1|$2')\n            .replace(/^\\s+|\\s+$/g, '') // remove spaces/line breaks from start/end\n    }\n\n    static minify(snippet, urlsafe = false) {\n        let compact = (`|${snippet}|`)\n            .replace(/\\n+/g, '|') // replace line breaks with pipes\n            .replace(/\\s+/g, ' ') // no repeated pipes\n            .replace(/\\s?\\|\\s?/g, '|') // no pipes with spaces\n            .replace(/\\s?\\:\\s?/g, ':') // no repeat with spaces\n            .replace(/\\|+/g, '|') // no repeated pipes\n        if (urlsafe) {\n            // replaces url unfriendly chars\n            compact = compact\n                .replace(/\\|+/g, 'I')\n                .replace(/\\s+/g, '_')\n                .replace(/:/g, 'R')\n                .replace(/\\^/g, 'M')\n                .replace(/\\#/g, 'S')\n                .replace(/\\%/g, 'X')\n        } else {\n            // replaces url unfriendly chars\n            compact = compact\n                .replace(/\\I+/g, '|')\n                .replace(/\\_+/g, ' ')\n                .replace(/R/g, ':')\n                .replace(/M/g, '^')\n                .replace(/X/g, 'x')\n                .replace(/S/g, '#')\n        }\n        return compact.slice(1, -1);\n    }\n\n    static parse(snippet, simplify = true) {\n        const formatted = Snippet.format(snippet, false);\n        return formatted\n            .split('|') // split into measures\n            .map(measure => measure.split(' ')) // split measures by spaces\n            .map(measure => measure.filter(chord => !!chord)) // kill empty chords\n            .filter(measure => !measure || measure.length) // kill empty measures\n            .map(measure => ({ symbols: measure, signs: [] }))\n            // parse symbols to chords and signs\n            .map((measure: { symbols, signs, house, chords }) => {\n                // repeat start\n                if (measure.symbols[0][0] === ':') {\n                    if (measure.symbols[0].length === 1) {\n                        measure.symbols = measure.symbols.slice(1);\n                    }\n                    measure.signs.unshift('{');\n                }\n                const last = measure.symbols[measure.symbols.length - 1];\n                // repeat end\n                if (last[last.length - 1] === ':') {\n                    if (last.length === 1) {\n                        measure.symbols.pop();\n                    }\n                    measure.signs.push('}');\n                }\n                measure.symbols = measure.symbols.map(s => s.replace(/:/g, ''));\n                const house = measure.symbols.find(s => s.match(/^[1-9]$/));\n                if (house) {\n                    measure.house = parseInt(house);\n                }\n                measure.symbols = measure.symbols.filter(s => !s.match(/^[1-9]$/))\n                // houses\n                measure.chords = [].concat(measure.symbols);\n                delete measure.symbols;\n                return measure;\n            })\n            .map(measure => {\n                if (!simplify) {\n                    return measure;\n                }\n                if (measure.signs.length === 0) {\n                    delete measure.signs;\n                }\n                if (measure.chords.length === 0) {\n                    delete measure.chords;\n                }\n                return measure;\n            })\n            // kill empty measures\n            .filter(measure => Object.keys(measure).length > 0)\n            // simplify => measures with only chords will be arrays\n            .map(measure => {\n                if (!simplify) {\n                    return measure;\n                }\n                if (measure.chords && Object.keys(measure).length === 1) {\n                    return measure.chords.length === 1 ?\n                        measure.chords[0] : // simplify one chord measures\n                        measure.chords\n                }\n                return measure;\n            });\n    }\n\n    static nest(string) {\n        let nested = string.split('.')\n            .map(group => group.trim())\n            .map(group => group.split(' '))\n            .map(group => group.filter(chord => !!chord))  // kill empty chords\n            .filter(group => !group || group.length)\n            .map(group => group.length === 1 ? group[0] : group)\n        nested = nested.length === 1 ? nested[0] : nested;\n        return nested;\n    }\n\n    static parse2(snippet, simplify = true) {\n        const formatted = Snippet.format(snippet, false);\n        return formatted\n            .split('|') // split into measures\n            .filter(measure => measure && measure.length) // kill empty measures\n            .map(measure => ({ symbols: measure.trim(), signs: [] }))\n            // parse symbols to chords and signs\n            .map((measure: { symbols, signs, house, chords }) => {\n                // repeat start\n                if (measure.symbols[0] === ':') {\n                    measure.signs.unshift('{');\n                }\n                const last = measure.symbols[measure.symbols.length - 1];\n                // repeat end\n                if (last === ':') {\n                    measure.signs.push('}');\n                }\n                measure.symbols = measure.symbols.replace(/:/g, '');\n\n                /* const house = measure.symbols[0].match(/^[1-9]$/);\n                if (house) {\n                    measure.house = parseInt(house);\n                    measure.symbols = measure.symbols.slice(1);\n                } */\n                measure.chords = [].concat(Snippet.nest(measure.symbols));\n                delete measure.symbols;\n                return measure;\n            })\n            .map(measure => {\n                if (!simplify) {\n                    return measure;\n                }\n                if (measure.signs.length === 0) {\n                    delete measure.signs;\n                }\n                if (measure.chords.length === 0) {\n                    delete measure.chords;\n                }\n                return measure;\n            })\n            // kill empty measures\n            .filter(measure => Object.keys(measure).length > 0)\n            // simplify => measures with only chords will be arrays\n            .map(measure => {\n                if (!simplify) {\n                    return measure;\n                }\n                if (measure.chords && Object.keys(measure).length === 1) {\n                    return measure.chords.length === 1 ?\n                        measure.chords[0] : // simplify one chord measures\n                        measure.chords\n                }\n                return measure;\n            });\n    }\n\n    static testFormat(sheet) {\n        return sheet.map(m => Measure.from(m)).map(m => m.chords).join(' ');\n    }\n\n    static from(sheet, format = true) {\n        const snippet = sheet\n            .map(m => Measure.from(m))\n            .reduce((snippet, { signs, house, chords }) => {\n                const repeatStart = signs && signs.includes('{');\n                const repeatEnd = signs && signs.includes('}');\n                return snippet + `|${repeatStart ? ':' : ''}${house || ''} ${chords ? chords.join(' ') : ''}${repeatEnd ? ':' : ''}`;\n            }, '');\n        if (format) {\n            return Snippet.format(snippet);\n        }\n        return Snippet.minify(snippet);\n    }\n\n    static expand(snippet, options?) {\n        let rendered = Snippet.render(snippet, options);\n        rendered = rendered\n            .map(m => Measure.from(m))\n            .map(m => {\n                delete m.house;\n                delete m.signs;\n                return m;\n            });\n        const expanded = Snippet.from(rendered);\n        return expanded;\n        /* return from(Sheet.render(render(snippet))); */\n    }\n\n    static diff(snippetA, snippetB) {\n        const diffFormat = [Snippet.formatForDiff(snippetA), Snippet.formatForDiff(snippetB)];\n        return JsDiff.diffWords(\n            diffFormat[0], diffFormat[1]\n        );\n    }\n}\n","export class Permutation {\n\n\n    static permutateElements(array, validate?, path = []) {\n        const isValid = (next) => !validate || validate(path, next, array);\n        if (array.length === 1) {\n            return isValid(array[0]) ? array : []\n        }\n        return array.filter(isValid).reduce((combinations, el) => [\n            ...combinations,\n            ...Permutation.permutateElements(\n                array.filter(e => e !== el),\n                validate,\n                path.concat([el])\n            ).map(subcombinations => [\n                el,\n                ...subcombinations\n            ])\n        ], []);\n    }\n\n    static permutationComplexity(array, validate?, path = []) {\n        let validations = 0;\n        Permutation.permutateElements(array, (path, next, array) => {\n            ++validations;\n            return !validate || validate(path, next, array)\n        }, path);\n        return validations;\n    }\n\n    static permutateArray(array) {\n        if (array.length === 1) { return array; }\n        return array.reduce((combinations, el) => [\n            ...combinations,\n            ...Permutation.permutateArray(array.filter(e => e !== el))\n                .map(subcombinations => ([el, ...subcombinations]))\n        ], []);\n    }\n\n    // combine multiple validators\n    static combineValidators(...validators: ((path, next, array) => boolean)[]) {\n        return (path, next, array) => validators\n            .reduce((result, validator) => result && validator(path, next, array), true);\n    }\n\n    //https://stackoverflow.com/questions/9960908/permutations-in-javascript\n    static combinations(array) {\n        var length = array.length,\n            result = [array.slice()],\n            c = new Array(length).fill(0),\n            i = 1, k, p;\n\n        while (i < length) {\n            if (c[i] < i) {\n                k = i % 2 && c[i];\n                p = array[i];\n                array[i] = array[k];\n                array[k] = p;\n                ++c[i];\n                i = 1;\n                result.push(array.slice());\n            } else {\n                c[i] = 0;\n                ++i;\n            }\n        }\n        return result;\n    }\n\n    // https://gist.github.com/axelpale/3118596\n    static binomial(set, k) {\n        var i, j, combs, head, tailcombs;\n\n        // There is no way to take e.g. sets of 5 elements from\n        // a set of 4.\n        if (k > set.length || k <= 0) {\n            return [];\n        }\n\n        // K-sized set has only one K-sized subset.\n        if (k == set.length) {\n            return [set];\n        }\n\n        // There is N 1-sized subsets in a N-sized set.\n        if (k == 1) {\n            combs = [];\n            for (i = 0; i < set.length; i++) {\n                combs.push([set[i]]);\n            }\n            return combs;\n        }\n\n        // Assert {1 < k < set.length}\n\n        // Algorithm description:\n        // To get k-combinations of a set, we want to join each element\n        // with all (k-1)-combinations of the other elements. The set of\n        // these k-sized sets would be the desired result. However, as we\n        // represent sets with lists, we need to take duplicates into\n        // account. To avoid producing duplicates and also unnecessary\n        // computing, we use the following approach: each element i\n        // divides the list into three: the preceding elements, the\n        // current element i, and the subsequent elements. For the first\n        // element, the list of preceding elements is empty. For element i,\n        // we compute the (k-1)-computations of the subsequent elements,\n        // join each with the element i, and store the joined to the set of\n        // computed k-combinations. We do not need to take the preceding\n        // elements into account, because they have already been the i:th\n        // element so they are already computed and stored. When the length\n        // of the subsequent list drops below (k-1), we cannot find any\n        // (k-1)-combs, hence the upper limit for the iteration:\n        combs = [];\n        for (i = 0; i < set.length - k + 1; i++) {\n            // head is a list that includes only our current element.\n            head = set.slice(i, i + 1);\n            // We take smaller combinations from the subsequent elements\n            tailcombs = Permutation.binomial(set.slice(i + 1), k - 1);\n            // For each (k-1)-combination we join it with the current\n            // and store it to the set of k-combinations.\n            for (j = 0; j < tailcombs.length; j++) {\n                combs.push(head.concat(tailcombs[j]));\n            }\n        }\n        return combs;\n    }\n}","import { Permutation } from '../util/Permutation';\nimport { Logger } from '../util/Logger';\nimport { Chord } from 'tonal';\nimport { Note } from 'tonal';\nimport { Distance } from 'tonal';\nimport { Interval } from 'tonal';\nimport {\n    renderAbsoluteNotes,\n    isDominantChord,\n    getIntervalFromStep,\n    hasDegree,\n    getDegreeInChord,\n    semitoneDistance,\n    chordHasIntervals,\n    semitoneMovement,\n    semitoneDifference,\n    isPitchClass,\n    getDegreeFromInterval,\n    isInRange,\n    getDistancesToRangeEnds,\n} from '../util/util';\n\nimport { Harmony, intervalDirection } from './Harmony';\n\nexport declare type VoicingValidation = {\n    maxDistance?: number;\n    minBottomDistance?: number;\n    minDistance?: number;\n    minTopDistance?: number;\n    topNotes?: string[]; // accepted top notes\n    bottomNotes?: string[]; // accepted top notes\n    /* custom validator for permutation of notes */\n    validatePermutation?: (path: string[], next: string, array: string[]) => boolean;\n    /* Custom sort function for choices. Defaults to smaller difference. */\n    sortChoices?: (choiceA, choiceB) => number;\n    filterChoices?: (choice) => boolean;\n    noTopDrop?: boolean;\n    noTopAdd?: boolean;\n    noBottomDrop?: boolean;\n    noBottomAdd?: boolean;\n};\n\nexport declare interface VoiceLeadingOptions extends VoicingValidation {\n    range?: string[];\n    maxVoices?: number;\n    forceDirection?: intervalDirection;\n    // the lower and upper distance to the range end that is tolerated before forcing a direction\n    rangeBorders?: number[];\n    logging?: boolean; // if true, all voice leading infos will be logged to the console\n}\n\nexport class Voicing {\n\n    /** Returns the next voicing that should follow the previously played voicing. \n    */\n    static getNextVoicing(chord, previousVoicing, options: VoiceLeadingOptions = {}) {\n        let { maxVoices,\n            range,\n            forceDirection,\n            rangeBorders,\n            sortChoices,\n            filterChoices,\n            noTopDrop,\n            noTopAdd,\n            noBottomDrop,\n            noBottomAdd,\n            logging\n        }: VoiceLeadingOptions = {\n            range: ['C3', 'C5'],\n            rangeBorders: [3, 3],\n            maxVoices: 4,\n            forceDirection: null,\n            maxDistance: 7,\n            minBottomDistance: 3, // min semitones between the two bottom notes\n            minTopDistance: 2, // min semitones between the two top notes\n            noTopDrop: true,\n            noTopAdd: true,\n            noBottomDrop: false,\n            noBottomAdd: false,\n            logging: true,\n            ...options\n        };\n        // make sure tonal can read the chord\n        chord = Harmony.getTonalChord(chord);\n        if (chord === 'r') {\n            return null;\n        }\n\n        let combinations = Voicing.getAllVoicePermutations(chord, maxVoices, options);\n\n        const exit = () => {\n            const pick = [];\n            if (logging) {\n                Logger.logVoicing({ chord, previousVoicing, range, combinations, pick });\n            }\n            return pick;\n        }\n\n        if (!combinations.length) {\n            return exit();\n        }\n\n        if (!previousVoicing || !previousVoicing.length) { // no previous chord\n            // filter out combinations that are out of range\n            combinations = combinations.filter(combination => {\n                const firstNote = Harmony.getNearestNote(range[0], combination[0], 'up');\n                const pick = renderAbsoluteNotes(combination, Note.oct(firstNote));\n                return isInRange(pick[0], range) && isInRange(pick[pick.length - 1], range);\n            });\n            const firstPick = combinations[0];\n            const firstNoteInRange = Harmony.getNearestNote(range[0], firstPick[0], 'up');\n            const pick = renderAbsoluteNotes(firstPick, Note.oct(firstNoteInRange));\n            if (logging) {\n                Logger.logVoicing({ chord, previousVoicing, range, combinations, pick });\n            }\n            return pick;\n        }\n        let choices = Voicing.getAllChoices(combinations, previousVoicing, range)\n            .filter(choice => { // apply flag filters + filerChoices if any\n                return (!noTopDrop || !choice.dropped.includes(choice.topNotes[0])) &&\n                    (!noTopAdd || !choice.added.includes(choice.topNotes[1])) &&\n                    (!noBottomDrop || !choice.dropped.includes(choice.topNotes[0])) &&\n                    (!noBottomAdd || !choice.added.includes(choice.topNotes[1])) &&\n                    (!filterChoices || filterChoices(choice))\n            })\n            .sort(sortChoices ?\n                (a, b) => sortChoices(a, b) :\n                (a, b) => a.difference - b.difference\n            );\n\n        if (!choices.length) {\n            return exit();\n        }\n        let bestPick = choices[0].targets, choice;\n        const direction = Voicing.getDesiredDirection(previousVoicing, range, rangeBorders) || forceDirection;\n\n        if (!direction) {\n            const pick = bestPick;\n            choice = choices[0];\n            if (logging) {\n                Logger.logVoicing({ chord, previousVoicing, range, combinations, pick, direction, bestPick, choice, choices });\n            }\n            return pick;\n        }\n        // sort after movement instead of difference\n        choice = choices.sort((a, b) => {\n            return Math.abs(a.movement) - Math.abs(b.movement)\n        }).find(choice => {\n            if (direction === 'up') {\n                return choice.movement >= 0\n            }\n            return choice.movement <= 0;\n        });\n        if (!choice) { // keep hanging in the corner of the range..\n            choice = choices[0];\n        }\n        const pick = choice.targets;\n        if (logging) {\n            Logger.logVoicing({ chord, previousVoicing, range, combinations, pick, direction, bestPick, choice, choices });\n        }\n        return pick;\n    }\n\n    /** Computes all valid voice permutations for a given chord and voice number.\n     * Runs getVoicePermutations for each possible selection of notes.\n     */\n    static getAllVoicePermutations(chord, length, voicingOptions?: VoicingValidation) {\n        return Voicing.getAllNoteSelections(chord, length)\n            .reduce((combinations, combination) => {\n                return combinations.concat(\n                    Voicing.getVoicePermutations(combination, voicingOptions))\n            }, []);\n    }\n\n    /** Get all permutations of the given notes that would make a good voicing. */\n    static getVoicePermutations(notes, options: VoicingValidation = {}) {\n        if (notes.length === 1) {\n            return [notes];\n        }\n        const validator = options.validatePermutation || ((path, next, array) => true);\n        return Permutation.permutateElements(notes,\n            Permutation.combineValidators(\n                validator,\n                Voicing.voicingValidator(options)\n            )\n        );\n    }\n\n    /** Configurable Validator that sorts out note combinations with untasty intervals.  */\n    static voicingValidator(options?: VoicingValidation) {\n        options = {\n            maxDistance: 6, // max semitones between any two sequential notes\n            minDistance: 1, // min semitones between two notes\n            minBottomDistance: 3, // min semitones between the two bottom notes\n            minTopDistance: 2, // min semitones between the two top notes\n            ...options,\n        }\n        return (path, next, array) => {\n            return Permutation.combineValidators(\n                Voicing.notesAtPositionValidator(options.topNotes, path.length + array.length - 1),\n                Voicing.notesAtPositionValidator(options.bottomNotes, 0),\n                Voicing.validateInterval(interval => Interval.semitones(interval) <= options.maxDistance),\n                Voicing.validateInterval(interval => Interval.semitones(interval) >= options.minDistance),\n                Voicing.validateInterval((interval, { array }) => array.length !== 1 || Interval.semitones(interval) >= options.minTopDistance),\n                Voicing.validateInterval((interval, { path }) => path.length !== 1 || Interval.semitones(interval) >= options.minBottomDistance)\n            )(path, next, array);\n        }\n    }\n\n    /** Validates the interval to the next note. You can write your own logic inside the validate fn. */\n    static validateInterval(validate: (interval: string, { path, next, array }) => boolean) {\n        return (path, next, array) => {\n            if (!path.length) { return true }\n            const interval = Distance.interval(path[path.length - 1], next);\n            return validate(interval, { path, next, array });\n        }\n    }\n\n    /** Returns all possible combinations of required and optional notes for a given chord and desired length. \n     * If the voices number is higher than the required notes of the chord, the rest number will be permutated from the optional notes */\n    static getAllNoteSelections(chord, voices = 2) {\n        const required = Voicing.getRequiredNotes(chord);\n        if (voices === 1) {\n            return required.map(note => [note]);\n        }\n        const fill = voices - required.length;\n        if (fill === 0) {\n            return [required];\n        }\n        if (fill < 0) { // required notes are enough\n            return Permutation.binomial(required, voices);\n        }\n        let optional = Voicing.getOptionalNotes(chord, required);\n        if (fill >= optional.length) {\n            return [required.concat(optional)];\n        }\n        return Permutation.binomial(optional, fill)\n            .map(selection => required.concat(selection))\n    }\n\n    /** Get available tensions for a given chord. Omits tensions that kill the chord quality */\n    static getAvailableTensions(chord) {\n        chord = Harmony.getTonalChord(chord);\n        const notes = Chord.notes(chord);\n        if (isDominantChord(chord)) {\n            return Voicing.getAllTensions(notes[0])\n                // filter out tensions that are part of the chord\n                .filter(note => !notes.find(n => semitoneDistance(notes[0], note) === semitoneDistance(notes[0], n)))\n                // filter out tensions that are a semitone above the 3 (if exists)\n                .filter(note => chordHasIntervals(chord, ['3!']) || semitoneDistance(getDegreeInChord(3, chord), note) > 1)\n                // filter out tensions that are a semitone above the 4 (if exists => sus)\n                .filter(note => !chordHasIntervals(chord, ['4P']) || semitoneDistance(getDegreeInChord(4, chord), note) > 1)\n                // filter out tensions that are a semitone above the 7\n                .filter(note => semitoneDistance(getDegreeInChord(7, chord), note) > 1)\n        }\n        return notes.slice(0, 4)\n            // notes less than 3 semitones away from root are omitted (tensions 2M above would be in next octave)\n            .filter(note => note === notes[0] || semitoneDistance(note, notes[0]) > 2)\n            // all tensions are a major second above a chord note\n            .map(note => Distance.transpose(note, '2M'))\n            // tensions 2 semiontes below root are flat 7 => changes chord quality\n            .filter(note => semitoneDistance(note, notes[0]) !== 2)\n        // omit tensions that end up on a chord note again?\n    }\n\n    /** Returns all Tensions that could be in any chord */\n    static getAllTensions(root) {\n        return ['b9', '9', '#9', '3', '11', '#11', 'b13', '13', '7']\n            .map(step => getIntervalFromStep(step))\n            .map(interval => Distance.transpose(root, interval));\n    }\n\n\n    /** Returns all notes that are required to outline a chord */\n    static getRequiredNotes(chord) {\n        chord = Harmony.getTonalChord(chord);\n        const notes = Chord.notes(chord);\n        const intervals = Chord.intervals(chord);\n        let requiredSteps = [3, 7, 'b5', 6]; // order is important\n        if (!hasDegree(3, intervals)) {\n            requiredSteps.push(4); // fixes m6 chords\n        }\n        let required = requiredSteps.reduce((req, degree) => {\n            if (hasDegree(degree, intervals)) {\n                req.push(getDegreeInChord(degree, chord));\n            }\n            return req;\n        }, []);\n        // WHY 3??\n        if (notes.length > 3 && !required.includes(notes[notes.length - 1])) {\n            required.push(notes[notes.length - 1]); // could check if is 5 than dont push\n        }\n        return required;\n    }\n\n    /** Returns all notes that are not required */\n    static getOptionalNotes(chord, required?) {\n        chord = Harmony.getTonalChord(chord);\n        const notes = Chord.notes(chord);\n        required = required || Voicing.getRequiredNotes(chord);\n        return notes.filter(note => !required.includes(note));\n    }\n\n    /** Returns all possible note choices for the given combinations.\n     * Takes the bottom note of the previous voicing and computes the minimal intervals up and down to the next bottom note.\n     */\n    static getAllChoices(combinations, previousVoicing, range?) {\n        const lastPitches = previousVoicing.map(note => Note.pc(note));\n        return combinations\n            .map((combination) => {\n                const bottomInterval = Distance.interval(lastPitches[0], combination[0]);\n                let bottomNotes = [\n                    Distance.transpose(previousVoicing[0], Harmony.minInterval(bottomInterval, 'down')),\n                    Distance.transpose(previousVoicing[0], Harmony.minInterval(bottomInterval, 'up')),\n                ];\n                if (bottomNotes[0] === bottomNotes[1]) {\n                    bottomNotes = [bottomNotes[0]];\n                }\n                return { combination, bottomNotes }\n            })\n            .reduce((all, { combination, bottomNotes }) => all.concat(\n                bottomNotes.map(bottomNote => renderAbsoluteNotes(combination, Note.oct(bottomNote)))\n            ), [])\n            .filter((targets) => {\n                return !range ||\n                    isInRange(targets[0], range) &&\n                    isInRange(targets[targets.length - 1], range)\n            })\n            .reduce((all, targets) => {\n                const leads = Voicing.voiceLeading(previousVoicing, targets);\n                return all.concat(leads);\n            }, [])\n    }\n\n    /** Analyzes all possible voice movements for all possible transitions. Handles inequal lengths */\n    static voiceLeading(origin, targets) {\n        // if same length > dont permutate\n        if (origin.length === targets.length) {\n            return Voicing.analyzeVoiceLeading(origin, targets);\n        }\n        const [more, less] = [origin, targets].sort((a, b) => b.length - a.length);\n        return Permutation.binomial(more, less.length)\n            .map(selection => {\n                let from, to;\n                if (origin.length < targets.length) {\n                    [from, to] = [origin, selection];\n                } else {\n                    [from, to] = [selection, targets];\n                }\n                return Voicing.analyzeVoiceLeading(from, to, origin, targets);\n            });\n    }\n\n    /** Analyzed the voice leading for the movement from > to. \n     * Origin and targets needs to be passed if the voice transition over unequal lengths\n     */\n    static analyzeVoiceLeading(from, to, origin?, targets?) {\n        [origin, targets] = [origin || from, targets || to];\n        let intervals = Voicing.voicingIntervals(from, to, false)\n            .map(interval => Harmony.fixInterval(interval, false));\n        /** Interval qualities */\n        const degrees = intervals.map(i => getDegreeFromInterval(i));\n        /** Voices that did not move */\n        const oblique = from.filter((n, i) => to.find(note => Harmony.isSameNote(n, note)));\n        /** abs sum of semitones movements of voices */\n        const difference = semitoneDifference(intervals);\n        /** relative sum of semitone movements */\n        const movement = semitoneMovement(intervals);\n        /** voice differences did not cancel each other out > moved in same direction */\n        const similar = Math.abs(movement) === Math.abs(difference);\n        /** moves parallel if all interval qualities the same and in the same direction */\n        const parallel = difference > 0 && similar && degrees.reduce((match, degree, index) =>\n            match && (index === 0 || degrees[index - 1] === degree), true);\n        // find out which notes have been dropped / added\n        let dropped = [], added = [];\n        if (origin.length < targets.length) {\n            added = targets.filter(n => !to.includes(n));\n        } else {\n            dropped = origin.filter(n => !from.includes(n));\n        }\n        return {\n            from,\n            to,\n            origin,\n            targets,\n            intervals,\n            difference,\n            movement,\n            bottomInterval: intervals[0],\n            topInterval: intervals[intervals.length - 1],\n            topNotes: [origin[origin.length - 1], targets[targets.length - 1]],\n            bottomNotes: [origin[0], targets[0]],\n            similar,\n            contrary: !similar,\n            parallel,\n            oblique,\n            degrees,\n            added,\n            dropped,\n        }\n    }\n\n    /** Returns true if the given note is contained in the given voicing. */\n    static containsNote(note, voicing, enharmonic = true) {\n        if (!enharmonic) {\n            return voicing.includes(note);\n        }\n        return !!voicing.find(n => Harmony.isSameNote(note, n));\n    }\n\n    /** Returns the intervals between the given chord voicings. \n     * Can be passed pitch classes or absolute notes.\n     * The two voicings should have the same length. */\n    static voicingIntervals(chordA, chordB, min = true, direction?: intervalDirection) {\n        if (chordA.length !== chordB.length) {\n            // console.log('voicingIntervals: not the same length..');\n        }\n        const intervals = chordA.map((n, i) => {\n            const interval = Distance.interval(n, chordB[i]);\n            if (min === false) {\n                return interval;\n            }\n            if (isPitchClass(n) && isPitchClass(chordB[i])) {\n                return Harmony.minInterval(interval, direction);\n            }\n            return interval;\n        });\n        return intervals;\n    }\n\n    /** Validates the current permutation to have a note at a certain position (array index) */\n    static notesAtPositionValidator(notes = [], position) {\n        return (selected, note, remaining) => {\n            return !notes.length || selected.length !== position || notes.includes(note);\n        }\n    }\n\n    /** Returns true if the given voicing contains its root */\n    static hasTonic(voicing, chord) {\n        const tokens = Chord.tokenize(Harmony.getTonalChord(chord));\n        return voicing.map(n => Note.pc(n)).includes(tokens[0]);\n    }\n\n    /** Returns the best direction to move for a given voicing in a range.\n     * Outputs a direction as soon as the semitone distance of one of the outer notes is below the given threshold\n     */\n    static getDesiredDirection(voicing, range, thresholds = [3, 3]) {\n        let distances = getDistancesToRangeEnds([voicing[0], voicing[voicing.length - 1]], range);\n        if (distances[0] < thresholds[0] && distances[1] < thresholds[1]) {\n            console.error('range is too small to fit the comfy zone');\n            return;\n        }\n        if (distances[0] < thresholds[0]) {\n            return 'up';\n        }\n        if (distances[1] < thresholds[1]) {\n            return 'down';\n        }\n    }\n}\n\n/**\n *\n\n\n\n    static getPossibleVoicings(chord, voices = 4) {\n        const required = getRequiredNotes(chord);\n        const optional = getOptionalNotes(chord);\n        const tensions = getAvailableTensions(chord);\n        return { required, optional, tensions };\n    }\n    static voicingDifference(chordA, chordB, min = true) {\n        return semitoneDifference(Voicing.voicingIntervals(chordA, chordB, min));\n    }\n\n    static voicingMovement(chordA, chordB, min = true, direction?: intervalDirection) {\n        return semitoneMovement(Voicing.voicingIntervals(chordA, chordB, min, direction));\n    }\n\n    static bestVoiceLeading(chordA, chordB, sortFn?) {\n        sortFn = sortFn || ((a, b) => a.difference - b.difference);\n        const voices = Voicing.voiceLeading(chordA, chordB)\n            .sort((best, current) => {\n                return sortFn(best, current);\n            }, null);\n        return voices[0];\n    }\n\n    static minVoiceMovement(chordA, chordB) {\n        [chordA, chordB] = [chordA, chordB].sort((a, b) => b.length - a.length);\n        const picks = Permutation.binomial(chordA, chordB.length);\n        return picks.reduce((min, current) => {\n            const diff = Voicing.voicingMovement(current, chordB, false);\n            if (Math.abs(diff) < Math.abs(min)) {\n                return diff;\n            }\n            return min;\n        }, 100);\n    }\n\n    static getVoices(chord, voices = 4, rootless = false, tension = 1) {\n        // THE PROBLEM: TENSION MUST BE CHOSEN WHEN SELECTING THE OPTIMAL VOICING!\n        chord = Harmony.getTonalChord(chord);\n        const tokens = Chord.tokenize(chord);\n        const required = Voicing.getRequiredNotes(chord);\n        let optional = Voicing.getOptionalNotes(chord, required);\n        let choices = [].concat(required);\n        const remaining = () => voices - choices.length;\n        if (tension > 0) {\n            choices = choices.concat(Voicing.getAvailableTensions(chord).slice(0, tension));\n        }\n        if (remaining() > 0) {\n            choices = choices.concat(optional);\n        }\n        if (remaining() < 0 && rootless) {\n            choices = choices.filter(n => n !== tokens[0]);\n        }\n        if (remaining() > 0) {\n            // console.warn(`${remaining} notes must be doubled!!!`);\n            choices = choices.concat(required, optional).slice(0, voices);\n        }\n        return choices.slice(0, voices);\n    }\n */","import { noteArray, getRangePosition } from './util';\nimport { Distance } from 'tonal';\nimport { Interval } from 'tonal';\nimport { Harmony } from '../harmony/Harmony';\nimport { Snippet } from '../sheet/Snippet';\nimport { Voicing } from '../harmony/Voicing';\n\nexport class Logger {\n    static emoji = {\n        bestMatch: {\n            icon: '',\n            description: 'The selected voicing had the best possible voice leading from the previous voicing'\n        },\n        force: {\n            icon: '',\n            description: 'Voicing had to be forced in the desired direction. The best pick would have gone in the wrong direction.'\n        },\n        lucky: {\n            icon: '',\n            description: 'The best pick moved in the direction that would have been forced.'\n        },\n        wrong: {\n            icon: '',\n            description: 'Continued moving in the wrong direction'\n        },\n        similar: {\n            icon: '',\n            description: 'All voices are moving in the same direction'\n        },\n        parallel: {\n            icon: '',\n            description: 'All voices are moving by parallel intervals'\n        },\n        contrary: {\n            icon: '',\n            description: 'Some voices were moving in opposite directions'\n        },\n        noOblique: {\n            icon: '',\n            description: 'All voices changed position. (Not shown when parallel)'\n        },\n        noChange: {\n            icon: '',\n            description: 'All voices remained in position.'\n        },\n        topAdded: {\n            icon: '',\n            description: 'A top voice was added',\n        },\n        topRemoved: {\n            icon: '',\n            description: 'A top voice was dropped'\n        },\n        bottomRemoved: {\n            icon: '',\n            description: 'A bottom voice was dropped'\n        },\n        bottomAdded: {\n            icon: '',\n            description: 'A bottom note was added'\n        },\n        movedUp: {\n            icon: '',\n            description: 'The Voices generally moved up'\n        },\n        movedDown: {\n            icon: '',\n            description: 'The Voices generally moved down'\n        },\n        equilibrium: {\n            icon: '',\n            description: 'The Voices generally did not move anywhere'\n        },\n        fewCombinations: {\n            icon: '',\n            description: 'There were very few valid combinations to choose from'\n        },\n        error: {\n            icon: '',\n            description: 'No notes could be selected. Some error happened.'\n        },\n        rootless: {\n            icon: '',\n            description: 'The voicing does not contain its root note (tonic).'\n        }\n        // \n    }\n\n    static logCustom(args, logFn = console.log) {\n        /* console.clear(); */\n        logFn.apply(console, args);\n    }\n\n    static logLegend() {\n        if (console.groupCollapsed) {\n            console.groupCollapsed('Show Emoji Legend');\n            console.table(Logger.emoji);\n            console.groupEnd();\n        } else {\n            console.log('Emoji Legend:', Logger.emoji);\n        }\n    }\n\n    static logSheet(sheet) {\n        sheet = {\n            title: 'Untitled',\n            composer: 'Unkown',\n            chords: [],\n            forms: 3,\n            tempo: 130,\n            style: 'Swing',\n            ...sheet\n        }\n        const snippet = Snippet.from(sheet.chords);\n        console.log(`${sheet.composer} - ${sheet.title}`);\n        console.log(`${sheet.tempo}bpm, Style: ${sheet.style}`);\n        console.log(snippet);\n        if (console.groupCollapsed) {\n            console.log('Sheet', sheet);\n            /* console.log('Groove', sheet.groove); */\n            console.groupCollapsed(`show ${sheet.forms} rendered forms`);\n            console.log(\"expanded view\\n\\n\" + Snippet.expand(snippet, { forms: sheet.forms || 1 }));\n            console.groupEnd();\n        }\n    }\n\n    static logLabel(key) {\n        if (!Logger.emoji[key]) {\n            return key;\n        }\n        return Logger.emoji[key].icon + ' ' + key;\n    }\n\n    static logChoice(choice) {\n        if (!choice) {\n            return\n        }\n        let { difference,\n            origin,\n            targets,\n            from,\n            to,\n            movement,\n            similar,\n            added,\n            dropped,\n            contrary,\n            parallel,\n            topInterval,\n            bottomInterval,\n            topNotes,\n            bottomNotes,\n            intervals,\n            degrees,\n        } = choice;\n        console.table({\n            difference,\n            movement,\n            origin: origin.join(' '),\n            dropped: dropped.join(' '),\n            added: added.join(' '),\n            targets: targets.join(' '),\n            /* from: from.join(' '),\n            to: to.join(' '), */\n            intervals: intervals.join(' '),\n            degrees: degrees.join(' '),\n            [Logger.logLabel('similar')]: similar,\n            [Logger.logLabel('contrary')]: contrary,\n            [Logger.logLabel('parallel')]: parallel,\n            topNotes: topNotes.join(' '),\n            topInterval,\n            bottomNotes: bottomNotes.join(' '),\n            bottomInterval,\n        });\n    }\n\n    static logNotes(activeNotes, idleNotes, addedNotes, range) {\n        const span = [\n            Distance.transpose(range[0], Interval.fromSemitones(-7)),\n            Distance.transpose(range[1], Interval.fromSemitones(12))\n        ];\n        const allNotes = noteArray(span);\n        const keyboard = allNotes.map((note, index) => {\n            const active = !!activeNotes.find(n => Harmony.isSameNote(note, n));\n            const idle = !!idleNotes.find(n => Harmony.isSameNote(note, n));\n            const added = !!addedNotes.find(n => Harmony.isSameNote(note, n));\n            const black = Harmony.isBlack(note);\n            let css = '', sign = '_';\n            if (added && !black) {\n                css = 'color:green;';\n                sign = '';\n            } else if (added && black) {\n                css = 'color:darkgreen;';\n                sign = '';\n            } else if (active && black) {\n                css = 'color:#a50909;';\n                sign = '';\n            } else if (active && !black) {\n                css = 'color:#eda3a3;';\n                sign = '';\n            } else if (idle && !black) {\n                css = 'color:gray;';\n                sign = '';\n            } else if (idle && black) {\n                css = 'color:black;';\n                sign = '';\n            } else {\n                css = black ? 'color:black;' : 'color:#eee;';\n            }\n            const position = getRangePosition(note, range);\n            if (position < 0 || position > 1) {\n                if (active || idle || added) {\n                    css += 'color:red;';\n                } else {\n                    sign = ' ';\n                }\n            }\n\n            return {\n                sign,\n                css\n            }\n        });\n\n        const args = [\n            keyboard.map(key => `%c${key.sign}`).join(''),\n            ...(keyboard.map(key => `${key.css};`))\n        ];\n        /* Snippet.logCustom(args); */\n        return args;\n    }\n\n    static logVoicing({ chord, previousVoicing, combinations, bestPick, pick, range, choice, direction, choices }: any) {\n        /* pick = pick.map(n => Note.simplify(n)); */\n        pick = pick || [];\n        previousVoicing = previousVoicing || [];\n        const idle = previousVoicing.filter(n => pick.find(p => Harmony.isSameNote(n, p)));\n        const active = pick.filter(n => !previousVoicing.find(p => Harmony.isSameNote(n, p)))\n        const added = choice ? choice.added : [];\n        let konsole = Logger.logNotes(active, idle, added, range);\n        const movement = choice ? choice.movement : 0;\n        const difference = choice ? choice.difference : 0;\n        choices = choices || [];\n        if (movement > 0) {\n            konsole.push(Logger.emoji.movedUp.icon);\n        } else if (movement < 0) {\n            konsole.push(Logger.emoji.movedDown.icon);\n        } else {\n            konsole.push(Logger.emoji.equilibrium.icon);\n        }\n        if (!pick.length) {\n            konsole.push(Logger.emoji.error.icon);\n        }\n        // TODO replace force with filter of choices after isInRange\n        //      isInRange: checks if top and bottom note are inside the range\n        if (!direction) {\n            konsole.push(Logger.emoji.bestMatch.icon);\n        } else {\n            if (bestPick !== pick) {\n                konsole.push(Logger.emoji.force.icon);\n            } else {\n                konsole.push(Logger.emoji.lucky.icon);\n            }\n            // wrong direction?\n            if ((direction === 'up' && movement < 0) || (direction === 'down' && movement > 0)) {\n                konsole.push(Logger.emoji.wrong.icon);\n            }\n        }\n        if (choice) {\n            if (choice.similar) {\n                konsole.push(Logger.emoji.similar.icon);\n            }\n            if (choice.contrary) {\n                konsole.push(Logger.emoji.contrary.icon);\n            }\n            if (choice.parallel) {\n                konsole.push(Logger.emoji.parallel.icon);\n            }\n            if (choice.added.length && choice.added[choice.added.length - 1] === choice.topNotes[1]) {\n                konsole.push(Logger.emoji.topAdded.icon);\n            }\n            if (choice.dropped.length && choice.dropped[choice.dropped.length - 1] === choice.topNotes[0]) {\n                konsole.push(Logger.emoji.topRemoved.icon);\n            }\n            if (choice.dropped.length && choice.dropped[0] === choice.origin[0]) {\n                konsole.push(Logger.emoji.bottomRemoved.icon);\n            }\n            if (choice.added.length && choice.added[0] === choice.targets[0]) {\n                konsole.push(Logger.emoji.bottomAdded.icon);\n            }\n            if (!Voicing.hasTonic(pick, chord)) {\n                konsole.push(Logger.emoji.rootless.icon);\n            }\n            if (!choice.parallel && choice.oblique.length === 0) {\n                konsole.push(Logger.emoji.noOblique.icon);\n            }\n            if (choice.oblique.length === choice.targets.length) {\n                konsole.push(Logger.emoji.noChange.icon);\n            }\n        }\n        previousVoicing = previousVoicing || []\n        konsole.push(`${difference}/${movement}: ${chord} (${choices.indexOf(choice) + 1}/${choices.length})`);\n        if (combinations) {\n            if (combinations.length < 4) {\n                konsole.push(Logger.emoji.fewCombinations.icon);\n            }\n        }\n        if (console && console.table) {\n            Logger.logCustom(konsole, console.groupCollapsed);\n\n            console.table({\n                previousVoicing: previousVoicing.join(' '),\n                pick: pick.join(' '),\n            });\n            if (choice) {\n                console.group('Choice:');\n                Logger.logChoice(choice);\n                console.groupEnd();\n                console.groupCollapsed('All Choices:');\n                choices.forEach(c => Logger.logChoice(c));\n                console.groupEnd();\n                console.groupCollapsed('Combinations:');\n                console.log(combinations);\n                console.groupEnd();\n            }\n            console.groupEnd();\n        }\n        //console.log(`${ Snippet.voicing(voicing, ['G2', 'C5']) } ${ chord }: ${ voicing.join(' ') } `);\n        //console.log(`#${ event.path[1] + 1 }: ${ chord }: ${ latest } > ${ voicing }.moved ${ moves } (avg | ${ avgDiff } | total ${ totalMoves })`);\n        // console.log(chord, voicing);\n        // G#o7 2 (5.25) (4)[\"G3\", \"D4\", \"F4\", \"Bb4\"] > (4)[\"B2\", \"D3\", \"E#3\", \"G#3\"]\n        /* } */\n        return pick;\n    }\n}\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Tone=e():t.Tone=e()}(\"undefined\"!=typeof self?self:this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=155)}([function(t,e,i){(function(n){var o,s;\n/**\n *  Tone.js\n *  @author Yotam Mann\n *  @license http://opensource.org/licenses/MIT MIT License\n *  @copyright 2014-2019 Yotam Mann\n */o=[i(153)],void 0===(s=function(t){\"use strict\";var e=function(){if(!(this instanceof e))throw new Error(\"constructor needs to be called with the 'new' keyword\")};return e.prototype.toString=function(){for(var t in e){var i=t[0].match(/^[A-Z]$/),n=e[t]===this.constructor;if(e.isFunction(e[t])&&i&&n)return t}return\"Tone\"},e.prototype.dispose=function(){return this},e.prototype.set=function(t,i,n){if(e.isObject(t))n=i;else if(e.isString(t)){var o={};o[t]=i,t=o}t:for(var s in t){i=t[s];var r=this;if(-1!==s.indexOf(\".\")){for(var a=s.split(\".\"),l=0;l<a.length-1;l++)if((r=r[a[l]])instanceof e){a.splice(0,l+1);var h=a.join(\".\");r.set(h,i);continue t}s=a[a.length-1]}var u=r[s];e.isUndef(u)||(e.Signal&&u instanceof e.Signal||e.Param&&u instanceof e.Param?u.value!==i&&(e.isUndef(n)?u.value=i:u.rampTo(i,n)):u instanceof AudioParam?u.value!==i&&(u.value=i):e.TimeBase&&u instanceof e.TimeBase?r[s]=i:u instanceof e?u.set(i):u!==i&&(r[s]=i))}return this},e.prototype.get=function(t){e.isUndef(t)?t=this._collectDefaults(this.constructor):e.isString(t)&&(t=[t]);for(var i={},n=0;n<t.length;n++){var o=t[n],s=this,r=i;if(-1!==o.indexOf(\".\")){for(var a=o.split(\".\"),l=0;l<a.length-1;l++){var h=a[l];r[h]=r[h]||{},r=r[h],s=s[h]}o=a[a.length-1]}var u=s[o];e.isObject(t[o])?r[o]=u.get():e.Signal&&u instanceof e.Signal?r[o]=u.value:e.Param&&u instanceof e.Param?r[o]=u.value:u instanceof AudioParam?r[o]=u.value:u instanceof e?r[o]=u.get():!e.isFunction(u)&&e.isDefined(u)&&(r[o]=u)}return i},e.prototype._collectDefaults=function(t){var i=[];if(e.isDefined(t.defaults)&&(i=Object.keys(t.defaults)),e.isDefined(t._super))for(var n=this._collectDefaults(t._super),o=0;o<n.length;o++)-1===i.indexOf(n[o])&&i.push(n[o]);return i},e.defaults=function(t,i,n){var o={};if(1===t.length&&e.isObject(t[0]))o=t[0];else for(var s=0;s<i.length;s++)o[i[s]]=t[s];return e.isDefined(n.defaults)?e.defaultArg(o,n.defaults):e.isObject(n)?e.defaultArg(o,n):o},e.defaultArg=function(t,i){if(e.isObject(t)&&e.isObject(i)){var n={};for(var o in t)n[o]=e.defaultArg(i[o],t[o]);for(var s in i)n[s]=e.defaultArg(t[s],i[s]);return n}return e.isUndef(t)?i:t},e.prototype.log=function(){if(this.debug||this.toString()===e.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+\":\"),console.log.apply(void 0,t)}},e.prototype.assert=function(t,e){if(!t)throw new Error(e)},e.connectSeries=function(){for(var t=arguments[0],i=1;i<arguments.length;i++){var n=arguments[i];t.connect(n),t=n}return e},e.isUndef=function(t){return void 0===t},e.isDefined=function(t){return!e.isUndef(t)},e.isFunction=function(t){return\"function\"==typeof t},e.isNumber=function(t){return\"number\"==typeof t},e.isObject=function(t){return\"[object Object]\"===Object.prototype.toString.call(t)&&t.constructor===Object},e.isBoolean=function(t){return\"boolean\"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isString=function(t){return\"string\"==typeof t},e.isNote=function(t){return e.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},e.noOp=function(){},e.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},e.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},e.State={Started:\"started\",Stopped:\"stopped\",Paused:\"paused\"},e.global=e.isUndef(n)?window:n,e.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.dbToGain=function(t){return Math.pow(10,t/20)},e.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.prototype.immediate=function(){return e.context.currentTime},e.immediate=function(){return e.context.currentTime},e.extend=function(t,i){function n(){}e.isUndef(i)&&(i=e),n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=i},e._audioContext=null,e.start=function(){return e.context.resume()},Object.defineProperty(e,\"context\",{get:function(){return e._audioContext},set:function(t){t.isContext?e._audioContext=t:e._audioContext=new e.Context(t),e.Context.emit(\"init\",e._audioContext)}}),Object.defineProperty(e.prototype,\"context\",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,\"blockTime\",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,\"sampleTime\",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,\"supported\",{get:function(){var t=e.global.hasOwnProperty(\"AudioContext\")||e.global.hasOwnProperty(\"webkitAudioContext\"),i=e.global.hasOwnProperty(\"Promise\");return t&&i}}),Object.defineProperty(e,\"initialized\",{get:function(){return Boolean(e.context)}}),e.getContext=function(t){if(e.initialized)t(e.context);else{var i=function(){t(e.context),e.Context.off(\"init\",i)};e.Context.on(\"init\",i)}return e},e.version=t,e}.apply(e,o))||(t.exports=s)}).call(this,i(154))},function(t,e,i){var n,o;n=[i(0),i(7),i(4),i(14),i(97),i(3)],void 0===(o=function(t){\"use strict\";return t.Signal=function(){var e=t.defaults(arguments,[\"value\",\"units\"],t.Signal);t.Param.call(this,e),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=e.value,this.output=this._constantSource,this.input=this._param=this.output.offset},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.disconnect=t.SignalBase.prototype.disconnect,t.Signal.prototype.getValueAtTime=function(e){return this._param.getValueAtTime?this._param.getValueAtTime(e):t.Param.prototype.getValueAtTime.call(this,e)},t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._constantSource.disconnect(),this._constantSource=null,this},t.Signal}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(20)],void 0===(o=function(t){return t.AudioNode=function(){t.call(this);var e=t.defaults(arguments,[\"context\"],{context:t.context});this._context=e.context},t.extend(t.AudioNode),Object.defineProperty(t.AudioNode.prototype,\"context\",{get:function(){return this._context}}),t.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(t.AudioNode.prototype,\"channelCount\",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(t.AudioNode.prototype,\"channelCountMode\",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(t.AudioNode.prototype,\"channelInterpretation\",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(t.AudioNode.prototype,\"numberOfInputs\",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.AudioNode.prototype,\"numberOfOutputs\",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),t.AudioNode.prototype.connect=function(e,i,n){return t.isArray(this.output)?(i=t.defaultArg(i,0),this.output[i].connect(e,0,n)):this.output.connect(e,i,n),this},t.AudioNode.prototype.disconnect=function(e,i,n){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(i=t.defaultArg(i,0),this.output[i].disconnect(e,0,n)):this.output.disconnect.apply(this.output,arguments)},t.AudioNode.prototype.chain=function(){for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},t.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},t.global.AudioNode&&(AudioNode.prototype.chain=t.AudioNode.prototype.chain,AudioNode.prototype.fan=t.AudioNode.prototype.fan),t.AudioNode.prototype.dispose=function(){return t.isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this},t.AudioNode}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(14),i(4),i(2)],void 0===(o=function(t){\"use strict\";return t.Gain=function(){var e=t.defaults(arguments,[\"gain\",\"units\"],t.Gain);t.AudioNode.call(this,e),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly(\"gain\")},t.extend(t.Gain,t.AudioNode),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable(\"gain\"),this.gain.dispose(),this.gain=null},t.Gain}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(65),i(46),i(45),i(20)],void 0===(o=function(t){return t.Type={Default:\"number\",Time:\"time\",Frequency:\"frequency\",TransportTime:\"transportTime\",Ticks:\"ticks\",NormalRange:\"normalRange\",AudioRange:\"audioRange\",Decibels:\"db\",Interval:\"interval\",BPM:\"bpm\",Positive:\"positive\",Gain:\"gain\",Cents:\"cents\",Degrees:\"degrees\",MIDI:\"midi\",BarsBeatsSixteenths:\"barsBeatsSixteenths\",Samples:\"samples\",Hertz:\"hertz\",Note:\"note\",Milliseconds:\"milliseconds\",Seconds:\"seconds\",Notation:\"notation\"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)||t.isObject(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)||t.isObject(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)||t.isObject(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(14),i(3),i(36)],void 0===(o=function(t){\"use strict\";return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this.value=t.defaultArg(e,0),this.proxy=!1},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(16),i(27),i(40),i(4),i(33),i(1),i(2)],void 0===(o=function(t){\"use strict\";return t.Source=function(e){e=t.defaultArg(e,t.Source.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode=\"explicit\",this.mute=e.mute},t.extend(t.Source,t.AudioNode),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,\"state\",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype.restart=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,i,n){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started)this._state.cancel(e),this._state.setStateAtTime(t.State.Started,e),this.restart(e,i,n);else if(this._state.setStateAtTime(t.State.Started,e),this._synced){var o=this._state.get(e);o.offset=t.defaultArg(i,0),o.duration=n;var s=t.Transport.schedule(function(t){this._start(t,i,n)}.bind(this),e);this._scheduled.push(s),t.Transport.state===t.State.Started&&this._syncedStart(this.now(),t.Transport.seconds)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._synced){var i=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop.apply(this,arguments);return this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,i){if(i>0){var n=this._state.get(i);if(n&&n.state===t.State.Started&&n.time!==i){var o,s=i-this.toSeconds(n.time);n.duration&&(o=this.toSeconds(n.duration)-s),this._start(e,this.toSeconds(n.offset)+s,o)}}}.bind(this),this._syncedStop=function(e){var i=t.Transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(i)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on(\"start loopStart\",this._syncedStart),t.Transport.on(\"stop pause loopEnd\",this._syncedStop),this},t.Source.prototype.unsync=function(){this._synced&&(t.Transport.off(\"stop pause loopEnd\",this._syncedStop),t.Transport.off(\"start loopStart\",this._syncedStart)),this._synced=!1;for(var e=0;e<this._scheduled.length;e++){var i=this._scheduled[e];t.Transport.clear(i)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(36),i(98)],void 0===(o=function(t){\"use strict\";return t.WaveShaper=function(e,i){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(i,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=new Array(this._curve.length),i=0,n=this._curve.length;i<n;i++){var o=i/(n-1)*2-1;e[i]=t(o,i)}return this.curve=e,this},Object.defineProperty(t.WaveShaper.prototype,\"curve\",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){if(![\"none\",\"2x\",\"4x\"].includes(t))throw new RangeError(\"Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'\");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(23),i(2)],void 0===(o=function(t){\"use strict\";return t.Effect=function(){var e=t.defaults(arguments,[\"wet\"],t.Effect);t.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly([\"wet\"])},t.extend(t.Effect,t.AudioNode),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable([\"wet\"]),this.wet=null,this},t.Effect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(2)],void 0===(o=function(t){\"use strict\";return t.Filter=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"rolloff\"],t.Filter);t.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!0,type:t.Type.Decibels}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly([\"detune\",\"frequency\",\"gain\",\"Q\"])},t.extend(t.Filter,t.AudioNode),t.Filter.defaults={type:\"lowpass\",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,\"type\",{get:function(){return this._type},set:function(t){if(-1===[\"lowpass\",\"highpass\",\"bandpass\",\"lowshelf\",\"highshelf\",\"notch\",\"allpass\",\"peaking\"].indexOf(t))throw new TypeError(\"Tone.Filter: invalid type \"+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,\"rolloff\",{get:function(){return this._rolloff},set:function(e){e=parseInt(e,10);var i=[-12,-24,-48,-96].indexOf(e);if(-1===i)throw new RangeError(\"Tone.Filter: rolloff can only be -12, -24, -48 or -96\");i+=1,this._rolloff=e,this.input.disconnect();for(var n=0;n<this._filters.length;n++)this._filters[n].disconnect(),this._filters[n]=null;this._filters=new Array(i);for(var o=0;o<i;o++){var s=this.context.createBiquadFilter();s.type=this._type,this.frequency.connect(s.frequency),this.detune.connect(s.detune),this.Q.connect(s.Q),this.gain.connect(s.gain),this._filters[o]=s}var r=[this.input].concat(this._filters).concat([this.output]);t.connectSeries.apply(t,r)}}),t.Filter.prototype.getFrequencyResponse=function(e){e=t.defaultArg(e,128);for(var i=new Float32Array(e).map(function(){return 1}),n=new Float32Array(e),o=0;o<e;o++){var s=19980*Math.pow(o/e,2)+20;n[o]=s}var r=new Float32Array(e),a=new Float32Array(e);return this._filters.forEach(function(){var t=this.context.createBiquadFilter();t.type=this._type,t.Q.value=this.Q.value,t.frequency.value=this.frequency.value,t.gain.value=this.gain.value,t.getFrequencyResponse(n,r,a),r.forEach(function(t,e){i[e]*=t})}.bind(this)),i},t.Filter.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable([\"detune\",\"frequency\",\"gain\",\"Q\"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(2)],void 0===(o=function(t){\"use strict\";return t.Merge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode=\"explicit\",this.right.channelCountMode=\"explicit\"},t.extend(t.Merge,t.AudioNode),t.Merge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(35),i(4),i(81)],void 0===(o=function(t){\"use strict\";return t.Buffer=function(){var e=t.defaults(arguments,[\"url\",\"onload\",\"onerror\"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,this.onload=t.noOp,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),this.loaded||(this.onload=e.onload)):t.isString(e.url)&&this.load(e.url).then(e.onload).catch(e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1,onload:t.noOp,onerror:t.noOp},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?e.loaded?this._buffer=e.get():e.onload=function(){this.set(e),this.onload(this)}.bind(this):this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i,n){return new Promise(function(o,s){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),o(this),this.onload(this),i&&i(this)}.bind(this),function(t){this._xhr=null,s(t),n&&n(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,\"loaded\",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,\"duration\",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,\"length\",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,\"numberOfChannels\",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,o=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var s=0;s<i;s++)o.copyToChannel(t[s],s);return this._buffer=o,this},t.Buffer.prototype.toMono=function(e){if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(var i=new Float32Array(this.length),n=this.numberOfChannels,o=0;o<n;o++)for(var s=this.toArray(o),r=0;r<s.length;r++)i[r]+=s[r];i=i.map(function(t){return t/n}),this.fromArray(i)}return this},t.Buffer.prototype.toArray=function(e){if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var i=[],n=0;n<this.numberOfChannels;n++)i[n]=this.getChannelData(n);return i},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,i){i=t.defaultArg(i,this.duration);for(var n=Math.floor(this.context.sampleRate*this.toSeconds(e)),o=Math.floor(this.context.sampleRate*this.toSeconds(i)),s=[],r=0;r<this.numberOfChannels;r++)s[r]=this.toArray(r).slice(n,o);return(new t.Buffer).fromArray(s)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,\"reverse\",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl=\"\",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer.fromUrl=function(e){var i=new t.Buffer;return i.load(e).then(function(){return i})},t.Buffer._removeFromDownloadQueue=function(e){var i=t.Buffer._downloadQueue.indexOf(e);-1!==i&&t.Buffer._downloadQueue.splice(i,1)},t.Buffer.load=function(e,i,n){i=t.defaultArg(i,t.noOp);var o=e.match(/\\[(.+\\|?)+\\]$/);if(o){for(var s=o[1].split(\"|\"),r=s[0],a=0;a<s.length;a++)if(t.Buffer.supportsType(s[a])){r=s[a];break}e=e.replace(o[0],r)}function l(e){if(t.Buffer._removeFromDownloadQueue(u),t.Buffer.emit(\"error\",e),!n)throw e;n(e)}function h(){for(var e=0,i=0;i<t.Buffer._downloadQueue.length;i++)e+=t.Buffer._downloadQueue[i].progress;t.Buffer.emit(\"progress\",e/t.Buffer._downloadQueue.length)}var u=new XMLHttpRequest;return u.open(\"GET\",t.Buffer.baseUrl+e,!0),u.responseType=\"arraybuffer\",u.progress=0,t.Buffer._downloadQueue.push(u),u.addEventListener(\"load\",function(){200===u.status?t.context.decodeAudioData(u.response).then(function(e){u.progress=1,h(),i(e),t.Buffer._removeFromDownloadQueue(u),0===t.Buffer._downloadQueue.length&&t.Buffer.emit(\"load\")}).catch(function(){t.Buffer._removeFromDownloadQueue(u),l(\"Tone.Buffer: could not decode audio data: \"+e)}):l(\"Tone.Buffer: could not locate file: \"+e)}),u.addEventListener(\"error\",l),u.addEventListener(\"progress\",function(t){t.lengthComputable&&(u.progress=t.loaded/t.total*.95,h())}),u.send(),u},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(\".\");return e=e[e.length-1],\"\"!==document.createElement(\"audio\").canPlayType(\"audio/\"+e)},t.loaded=function(){var e,i;function n(){t.Buffer.off(\"load\",e),t.Buffer.off(\"error\",i)}return new Promise(function(n,o){e=function(){n()},i=function(){o()},t.Buffer.on(\"load\",e),t.Buffer.on(\"error\",i)}).then(n).catch(function(t){throw n(),new Error(t)})},t.Buffer}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(17),i(26),i(2),i(1),i(22),i(4),i(28)],void 0===(o=function(t){\"use strict\";return t.LFO=function(){var e=t.defaults(arguments,[\"frequency\",\"min\",\"max\"],t.LFO);t.AudioNode.call(this),this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly([\"amplitude\",\"frequency\"]),this.phase=e.phase},t.extend(t.LFO,t.AudioNode),t.LFO.defaults={type:\"sine\",min:0,max:1,phase:0,frequency:\"4n\",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,\"min\",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,\"max\",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,\"type\",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,\"phase\",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,\"units\",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,\"mute\",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,\"state\",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param||(this.convert=e.convert,this.units=e.units),t.SignalBase.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"amplitude\",\"frequency\"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(29),i(94),i(1),i(3)],void 0===(o=function(t){\"use strict\";return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum),this.proxy=!1},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(4),i(2),i(24)],void 0===(o=function(t){\"use strict\";return t.Param=function(){var e=t.defaults(arguments,[\"param\",\"units\",\"convert\"],t.Param);t.AudioNode.call(this,e),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._events=new t.Timeline(1e3),t.isDefined(e.value)&&this._param&&this.setValueAtTime(e.value,0)},t.extend(t.Param,t.AudioNode),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,\"value\",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(t.Param.prototype,\"minValue\",{get:function(){return this.units===t.Type.Time||this.units===t.Type.Frequency||this.units===t.Type.NormalRange||this.units===t.Type.Positive||this.units===t.Type.BPM?0:this.units===t.Type.AudioRange?-1:this.units===t.Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(t.Param.prototype,\"maxValue\",{get:function(){return this.units===t.Type.NormalRange||this.units===t.Type.AudioRange?1:this._param.maxValue}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert)||this.overridden)return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.AutomationType={Linear:\"linearRampToValueAtTime\",Exponential:\"exponentialRampToValueAtTime\",Target:\"setTargetAtTime\",SetValue:\"setValueAtTime\",Cancel:\"cancelScheduledValues\"},t.Param.prototype.setValueAtTime=function(e,i){return i=this.toSeconds(i),e=this._fromUnits(e),this._events.add({type:t.Param.AutomationType.SetValue,value:e,time:i}),this.log(t.Param.AutomationType.SetValue,e,i),this._param.setValueAtTime(e,i),this},t.Param.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var i=this._events.getAfter(e),n=this._events.get(e),o=t.defaultArg(this._initialValue,this._param.defaultValue),s=o;if(null===n)s=o;else if(n.type===t.Param.AutomationType.Target){var r,a=this._events.getBefore(n.time);r=null===a?o:a.value,s=this._exponentialApproach(n.time,r,n.value,n.constant,e)}else s=null===i?n.value:i.type===t.Param.AutomationType.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.Param.AutomationType.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return s},t.Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},t.Param.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Linear,value:e,time:i}),this.log(t.Param.AutomationType.Linear,e,i),this._param.linearRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Exponential,time:i,value:e}),this.log(t.Param.AutomationType.Exponential,e,i),this._param.exponentialRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},t.Param.prototype.exponentialApproachValueAtTime=function(t,e,i){var n=Math.log(this.toSeconds(i)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,n)},t.Param.prototype.setTargetAtTime=function(e,i,n){if(e=this._fromUnits(e),n<=0)throw new Error(\"timeConstant must be greater than 0\");return i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Target,value:e,time:i,constant:n}),this.log(t.Param.AutomationType.Target,e,i,n),this._param.setTargetAtTime(e,i,n),this},t.Param.prototype.setValueCurveAtTime=function(e,i,n,o){o=t.defaultArg(o,1),n=this.toSeconds(n),i=this.toSeconds(i),this.setValueAtTime(e[0]*o,i);for(var s=n/(e.length-1),r=1;r<e.length;r++)this.linearRampToValueAtTime(e[r]*o,i+r*s);return this},t.Param.prototype.cancelScheduledValues=function(e){return e=this.toSeconds(e),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(t.Param.AutomationType.Cancel,e),this},t.Param.prototype.cancelAndHoldAtTime=function(e){var i=this.getValueAtTime(e);this.log(\"cancelAndHoldAtTime\",e,\"value=\"+i),this._param.cancelScheduledValues(e);var n=this._events.get(e),o=this._events.getAfter(e);return n&&n.time===e?o?this._events.cancel(o.time):this._events.cancel(e+this.sampleTime):o&&(this._events.cancel(o.time),o.type===t.Param.AutomationType.Linear?this.linearRampToValueAtTime(i,e):o.type===t.Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(i,e)),this._events.add({type:t.Param.AutomationType.SetValue,value:i,time:e}),this._param.setValueAtTime(i,e),this},t.Param.prototype.rampTo=function(e,i,n){return i=t.defaultArg(i,.1),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampTo(e,i,n):this.linearRampTo(e,i,n),this},t.Param.prototype._exponentialApproach=function(t,e,i,n,o){return i+(e-i)*Math.exp(-(o-t)/n)},t.Param.prototype._linearInterpolate=function(t,e,i,n,o){return e+(o-t)/(i-t)*(n-e)},t.Param.prototype._exponentialInterpolate=function(t,e,i,n,o){return e*Math.pow(n/e,(o-t)/(i-t))},t.Param.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this},t.Param}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(19),i(10),i(23)],void 0===(o=function(t){\"use strict\";return t.StereoEffect=function(){t.AudioNode.call(this);var e=t.defaults(arguments,[\"wet\"],t.Effect);this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly([\"wet\"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable([\"wet\"]),this.wet=null,this},t.StereoEffect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(86),i(4),i(24),i(35),i(3),i(84),i(83),i(55)],void 0===(o=function(t){\"use strict\";t.Transport=function(){t.Emitter.call(this),t.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly(\"bpm\"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:\"8n\",timeSignature:4,loopStart:0,loopEnd:\"4m\",PPQ:192},t.Transport.prototype.isTransport=!0,t.Transport.prototype._processTick=function(e,i){if(this._swingAmount>0&&i%this._ppq!=0&&i%(2*this._swingTicks)!=0){var n=i%(2*this._swingTicks)/(2*this._swingTicks),o=Math.sin(n*Math.PI)*this._swingAmount;e+=t.Ticks(2*this._swingTicks/3).toSeconds()*o}this.loop&&i>=this._loopEnd&&(this.emit(\"loopEnd\",e),this._clock.setTicksAtTime(this._loopStart,e),i=this._loopStart,this.emit(\"loopStart\",e,this._clock.getSecondsAtTime(e)),this.emit(\"loop\",e)),this._timeline.forEachAtTime(i,function(t){t.invoke(e)})},t.Transport.prototype.schedule=function(e,i){var n=new t.TransportEvent(this,{time:t.TransportTime(i),callback:e});return this._addEvent(n,this._timeline)},t.Transport.prototype.scheduleRepeat=function(e,i,n,o){var s=new t.TransportRepeatEvent(this,{callback:e,interval:t.Time(i),time:t.TransportTime(n),duration:t.Time(t.defaultArg(o,1/0))});return this._addEvent(s,this._repeatedEvents)},t.Transport.prototype.scheduleOnce=function(e,i){var n=new t.TransportEvent(this,{time:t.TransportTime(i),callback:e,once:!0});return this._addEvent(n,this._timeline)},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.forEachFrom(e,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(e,function(t){this.clear(t.id)}.bind(this)),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on(\"start\",function(e,i){i=t.Ticks(i).toSeconds(),this.emit(\"start\",e,i)}.bind(this)),this._clock.on(\"stop\",function(t){this.emit(\"stop\",t)}.bind(this)),this._clock.on(\"pause\",function(t){this.emit(\"pause\",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,\"state\",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,i){return t.isDefined(i)&&(i=this.toTicks(i)),this._clock.start(e,i),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,\"timeSignature\",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,\"loopStart\",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,\"loopEnd\",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,\"swing\",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,\"swingSubdivision\",{get:function(){return t.Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,\"position\",{get:function(){var e=this.now(),i=this._clock.getTicksAtTime(e);return t.Ticks(i).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,\"seconds\",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this.bpm.timeToTicks(t,e);this.ticks=i}}),Object.defineProperty(t.Transport.prototype,\"progress\",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(t.Transport.prototype,\"ticks\",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var i=this.now();this.state===t.State.Started?(this.emit(\"stop\",i),this._clock.setTicksAtTime(e,i),this.emit(\"start\",i,this.seconds)):this._clock.setTicksAtTime(e,i)}}}),t.Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},t.Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(t.Transport.prototype,\"PPQ\",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){if(e=this.toTicks(e),this.state!==t.State.Started)return 0;var i=this.now(),n=e-this.getTicksAtTime(i)%e;return this._clock.nextTickTime(n,i)},t.Transport.prototype.syncSignal=function(e,i){if(!i){var n=this.now();i=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/this.bpm.getValueAtTime(n):0}var o=new t.Gain(i);return this.bpm.chain(o,e._param),this._syncedSignals.push({ratio:o,signal:e,initial:e.value}),e.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable(\"bpm\"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on(\"init\",function(i){i.transport&&i.transport.isTransport?t.Transport=i.transport:t.Transport=new e}),t.Context.on(\"close\",function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()}),t.Transport}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(6),i(16),i(82)],void 0===(o=function(t){\"use strict\";return t.Oscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\"],t.Oscillator);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=e.partials,this._partialCount=e.partialCount,this._phase=e.phase,this._type=e.type,e.partialCount&&e.type!==t.Oscillator.Type.Custom&&(this._type=this.baseType+e.partialCount.toString()),this.phase=this._phase,this._readOnly([\"frequency\",\"detune\"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:\"sine\",frequency:440,detune:0,phase:0,partials:[],partialCount:0},t.Oscillator.Type={Sine:\"sine\",Triangle:\"triangle\",Sawtooth:\"sawtooth\",Square:\"square\",Custom:\"custom\"},t.Oscillator.prototype._start=function(e){this.log(\"start\",e),this._oscillator=new t.OscillatorNode,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),e=this.toSeconds(e),this._oscillator.start(e)},t.Oscillator.prototype._stop=function(t){return this.log(\"stop\",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t)),this},t.Oscillator.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,\"type\",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),Object.defineProperty(t.Oscillator.prototype,\"baseType\",{get:function(){return this._type.replace(this.partialCount,\"\")},set:function(e){this.partialCount&&this._type!==t.Oscillator.Type.Custom&&e!==t.Oscillator.Type.Custom?this.type=e+this.partialCount:this.type=e}}),Object.defineProperty(t.Oscillator.prototype,\"partialCount\",{get:function(){return this._partialCount},set:function(e){var i=this._type,n=/^(sine|triangle|square|sawtooth)(\\d+)$/.exec(this._type);n&&(i=n[1]),this._type!==t.Oscillator.Type.Custom&&(this.type=0===e?i:i+e.toString())}}),t.Oscillator.prototype.get=function(){const e=t.prototype.get.apply(this,arguments);return e.type!==t.Oscillator.Type.Custom&&delete e.partials,e},t.Oscillator.prototype._getRealImaginary=function(e,i){var n=2048,o=new Float32Array(n),s=new Float32Array(n),r=1;if(e===t.Oscillator.Type.Custom)r=this._partials.length+1,this._partialCount=this._partials.length,n=r;else{var a=/^(sine|triangle|square|sawtooth)(\\d+)$/.exec(e);a?(r=parseInt(a[2])+1,this._partialCount=parseInt(a[2]),e=a[1],n=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(var l=1;l<n;++l){var h,u=2/(l*Math.PI);switch(e){case t.Oscillator.Type.Sine:h=l<=r?1:0,this._partials[l-1]=h;break;case t.Oscillator.Type.Square:h=1&l?2*u:0,this._partials[l-1]=h;break;case t.Oscillator.Type.Sawtooth:h=u*(1&l?1:-1),this._partials[l-1]=h;break;case t.Oscillator.Type.Triangle:h=1&l?u*u*2*(l-1>>1&1?-1:1):0,this._partials[l-1]=h;break;case t.Oscillator.Type.Custom:h=this._partials[l-1];break;default:throw new TypeError(\"Tone.Oscillator: invalid type: \"+e)}0!==h?(o[l]=-h*Math.sin(i*l),s[l]=h*Math.cos(i*l)):(o[l]=0,s[l]=0)}return[o,s]},t.Oscillator.prototype._inverseFFT=function(t,e,i){for(var n=0,o=t.length,s=0;s<o;s++)n+=t[s]*Math.cos(s*i)+e[s]*Math.sin(s*i);return n},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],n=0,o=2*Math.PI,s=0;s<8;s++)n=Math.max(this._inverseFFT(e,i,s/8*o),n);return-this._inverseFFT(e,i,this._phase)/n},Object.defineProperty(t.Oscillator.prototype,\"partials\",{get:function(){return this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,\"phase\",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.dispose(),this._oscillator=null),this._wave=null,this._writable([\"frequency\",\"detune\"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(14),i(2)],void 0===(o=function(t){\"use strict\";return t.Delay=function(){var e=t.defaults(arguments,[\"delayTime\",\"maxDelay\"],t.Delay);t.AudioNode.call(this,e),this._maxDelay=Math.max(this.toSeconds(e.maxDelay),this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(this._maxDelay),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly(\"delayTime\")},t.extend(t.Delay,t.AudioNode),t.Delay.defaults={maxDelay:1,delayTime:0},Object.defineProperty(t.Delay.prototype,\"maxDelay\",{get:function(){return this._maxDelay}}),t.Delay.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable(\"delayTime\"),this.delayTime=null,this},t.Delay}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.Split=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split,t.AudioNode),t.Split.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(35),i(24),i(34)],void 0===(o=function(t){t.Context=function(){t.Emitter.call(this);var i=t.defaults(arguments,[\"context\"],t.Context);if(!i.context&&(i.context=new t.global.AudioContext,!i.context))throw new Error(\"could not create AudioContext. Possibly too many AudioContexts running already.\");for(this._context=i.context;this._context.rawContext;)this._context=this._context.rawContext;for(var n in this._context)this._defineProperty(this._context,n);this._latencyHint=i.latencyHint,this._constants={},this.lookAhead=i.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,\"tick\"),i.clockSource,i.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on(\"tick\",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit(\"statechange\",t)}.bind(this)},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:\"worker\",latencyHint:\"interactive\",lookAhead:.1,updateInterval:.03},t.Context.prototype.isContext=!0,t.Context.prototype._defineProperty=function(e,i){t.isUndef(this[i])&&Object.defineProperty(this,i,{get:function(){return\"function\"==typeof e[i]?e[i].bind(e):e[i]},set:function(t){e[i]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(t.Context.prototype,\"destination\",{get:function(){return this.master?this.master:this._context.destination}}),t.Context.prototype.resume=function(){return\"suspended\"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},t.Context.prototype.close=function(){var e=Promise.resolve();return this!==t.global.TONE_AUDIO_CONTEXT&&(e=this.rawContext.close()),e.then(function(){t.Context.emit(\"close\",this)}.bind(this))},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode=\"explicit\",o.buffer=e,o.loop=!0,o.start(0),this._constants[t]=o,o},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,\"updateInterval\",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,\"rawContext\",{get:function(){return this._context}}),Object.defineProperty(t.Context.prototype,\"clockSource\",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,\"latencyHint\",{get:function(){return this._latencyHint},set:function(e){var i=e;if(this._latencyHint=e,t.isString(e))switch(e){case\"interactive\":i=.1,this._context.latencyHint=e;break;case\"playback\":i=.8,this._context.latencyHint=e;break;case\"balanced\":i=.25,this._context.latencyHint=e;break;case\"fastest\":this._context.latencyHint=\"interactive\",i=.01}this.lookAhead=i,this.updateInterval=i/3}}),t.Context.prototype.dispose=function(){return this.close().then(function(){for(var e in t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[e].disconnect();this._constants=null}.bind(this))};var e=function(e,i,n){this._type=i,this._updateInterval=n,this._callback=t.defaultArg(e,t.noOp),this._createClock()};if(e.Type={Worker:\"worker\",Timeout:\"timeout\",Offline:\"offline\"},e.prototype._createWorker=function(){t.global.URL=t.global.URL||t.global.webkitURL;var e=new Blob([\"var timeoutTime = \"+(1e3*this._updateInterval).toFixed(1)+\";self.onmessage = function(msg){\\ttimeoutTime = parseInt(msg.data);};function tick(){\\tsetTimeout(tick, timeoutTime);\\tself.postMessage('tick');}tick();\"]),i=URL.createObjectURL(e),n=new Worker(i);n.onmessage=this._callback.bind(this),this._worker=n},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,\"updateInterval\",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,\"type\",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.getContext(function(){var e=AudioNode.prototype.connect,i=AudioNode.prototype.disconnect;function n(i,n,o){if(i.input)return o=t.defaultArg(o,0),t.isArray(i.input)?this.connect(i.input[o]):this.connect(i.input,n,o);try{return i instanceof AudioNode?(e.call(this,i,n,o),i):(e.call(this,i,n),i)}catch(t){throw new Error(\"error connecting to node: \"+i+\"\\n\"+t)}}AudioNode.prototype.connect!==n&&(AudioNode.prototype.connect=n,AudioNode.prototype.disconnect=function(e,n,o){if(e&&e.input&&t.isArray(e.input))o=t.defaultArg(o,0),this.disconnect(e.input[o],n,0);else if(e&&e.input)this.disconnect(e.input,n,o);else try{e instanceof AudioParam?i.call(this,e,n):i.apply(this,arguments)}catch(t){throw new Error(\"error disconnecting node: \"+e+\"\\n\"+t)}})}),t.supported&&!t.initialized){if(t.global.TONE_AUDIO_CONTEXT||(t.global.TONE_AUDIO_CONTEXT=new t.Context),t.context=t.global.TONE_AUDIO_CONTEXT,!t.global.TONE_SILENCE_VERSION_LOGGING){var i=\"v\";\"dev\"===t.version&&(i=\"\");var n=\" * Tone.js \"+i+t.version+\" * \";console.log(\"%c\"+n,\"background: #000; color: #fff\")}}else t.supported||console.warn(\"This browser does not support Tone.js\");return t.Context}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(4),i(40)],void 0===(o=function(t){\"use strict\";return t.Instrument=function(e){e=t.defaultArg(e,t.Instrument.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this._scheduledEvents=[]},t.extend(t.Instrument,t.AudioNode),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.sync=function(){return this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",0),this},t.Instrument.prototype._syncMethod=function(e,i){var n=this[\"_original_\"+e]=this[e];this[e]=function(){var e=Array.prototype.slice.call(arguments),o=e[i],s=t.Transport.schedule(function(t){e[i]=t,n.apply(this,e)}.bind(this),o);this._scheduledEvents.push(s)}.bind(this)},t.Instrument.prototype.unsync=function(){return this._scheduledEvents.forEach(function(e){t.Transport.clear(e)}),this._scheduledEvents=[],this._original_triggerAttack&&(this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},t.Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable([\"volume\"]),this.volume=null,this.unsync(),this._scheduledEvents=null,this},t.Instrument}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7),i(1)],void 0===(o=function(t){\"use strict\";return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(13),i(93),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.CrossFade=function(e){t.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._one=this.context.getConstant(1),this._invert=new t.Subtract,this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this._one.connect(this._invert,0,0),this.fade.connect(this._invert,0,1),this._invert.chain(this._equalPowerA,this.a.gain),this._readOnly(\"fade\")},t.extend(t.CrossFade,t.AudioNode),t.CrossFade.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(\"fade\"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this._one=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){\"use strict\";return t.Timeline=function(){var e=t.defaults(arguments,[\"memory\"],t.Timeline);t.call(this),this._timeline=[],this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,\"length\",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){if(t.isUndef(e.time))throw new Error(\"Tone.Timeline: events must have a time attribute\");e.time=e.time.valueOf();var i=this._search(e.time);if(this._timeline.splice(i+1,0,e),this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},t.Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},t.Timeline.prototype.get=function(e,i){i=t.defaultArg(i,\"time\");var n=this._search(e,i);return-1!==n?this._timeline[n]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,i){i=t.defaultArg(i,\"time\");var n=this._search(e,i);return n+1<this._timeline.length?this._timeline[n+1]:null},t.Timeline.prototype.getBefore=function(e,i){i=t.defaultArg(i,\"time\");var n=this._timeline.length;if(n>0&&this._timeline[n-1][i]<e)return this._timeline[n-1];var o=this._search(e,i);return o-1>=0?this._timeline[o-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,i){if(0===this._timeline.length)return-1;i=t.defaultArg(i,\"time\");var n=0,o=this._timeline.length,s=o;if(o>0&&this._timeline[o-1][i]<=e)return o-1;for(;n<s;){var r=Math.floor(n+(s-n)/2),a=this._timeline[r],l=this._timeline[r+1];if(a[i]===e){for(var h=r;h<this._timeline.length;h++){this._timeline[h][i]===e&&(r=h)}return r}if(a[i]<e&&l[i]>e)return r;a[i]>e?s=r:n=r+1}return-1},t.Timeline.prototype._iterate=function(e,i,n){i=t.defaultArg(i,0),n=t.defaultArg(n,this._timeline.length-1),this._timeline.slice(i,n+1).forEach(function(t){e.call(this,t)}.bind(this))},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachBetween=function(t,e,i){var n=this._search(t),o=this._search(e);return-1!==n&&-1!==o?(this._timeline[n].time!==t&&(n+=1),this._timeline[o].time===e&&(o-=1),this._iterate(i,n,o)):-1===n&&this._iterate(i,0,o),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e.call(this,i)},0,i),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this},t.Timeline}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(21),i(1)],void 0===(o=function(t){\"use strict\";return t.Monophonic=function(e){e=t.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return this.log(\"triggerAttack\",t,e,i),e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return this.log(\"triggerRelease\",t),t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0&&this.getLevelAtTime(e)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(t,i,e)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(29),i(5),i(1)],void 0===(o=function(t){\"use strict\";return t.Scale=function(e,i){t.SignalBase.call(this),this._outputMin=t.defaultArg(e,0),this._outputMax=t.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,\"min\",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,\"max\",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.Volume=function(){var e=t.defaults(arguments,[\"volume\"],t.Volume);t.AudioNode.call(this,e),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly(\"volume\"),this.mute=e.mute},t.extend(t.Volume,t.AudioNode),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,\"mute\",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.AudioNode.prototype.dispose.call(this),this._writable(\"volume\"),this.volume.dispose(),this.volume=null,this},t.Volume}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(3),i(36)],void 0===(o=function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(3)],void 0===(o=function(t){\"use strict\";return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum),this.proxy=!1},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(47),i(3)],void 0===(o=function(t){\"use strict\";return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(11),i(6),i(3),i(2),i(63)],void 0===(o=function(t){return t.BufferSource=function(){var e=t.defaults(arguments,[\"buffer\",\"onload\"],t.BufferSource);t.AudioNode.call(this,e),this.onended=e.onended,this._startTime=-1,this._sourceStarted=!1,this._sourceStopped=!1,this._stopTime=-1,this._gainNode=this.output=new t.Gain(0),this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._source.onended=this._onended.bind(this),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param({param:this._source.playbackRate,units:t.Type.Positive,value:e.playbackRate}),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this.curve=e.curve,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd},t.extend(t.BufferSource,t.AudioNode),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:\"linear\",playbackRate:1},Object.defineProperty(t.BufferSource.prototype,\"state\",{get:function(){return this.getStateAtTime(this.now())}}),t.BufferSource.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),-1!==this._startTime&&this._startTime<=e&&(-1===this._stopTime||e<this._stopTime)&&!this._sourceStopped?t.State.Started:t.State.Stopped},t.BufferSource.prototype.start=function(e,i,n,o){this.log(\"start\",e,i,n,o),this.assert(-1===this._startTime,\"can only be started once\"),this.assert(this.buffer.loaded,\"buffer is either not set or not loaded\"),this.assert(!this._sourceStopped,\"source is already stopped\"),e=this.toSeconds(e),i=this.loop?t.defaultArg(i,this.loopStart):t.defaultArg(i,0),i=this.toSeconds(i),i=Math.max(i,0),o=t.defaultArg(o,1);var s=this.toSeconds(this.fadeIn);if(s>0?(this._gainNode.gain.setValueAtTime(0,e),\"linear\"===this.curve?this._gainNode.gain.linearRampToValueAtTime(o,e+s):this._gainNode.gain.exponentialApproachValueAtTime(o,e,s)):this._gainNode.gain.setValueAtTime(o,e),this._startTime=e,t.isDefined(n)){var r=this.toSeconds(n);r=Math.max(r,0),this.stop(e+r)}if(this.loop){var a=this.loopEnd||this.buffer.duration,l=this.loopStart;i>=a&&(i=(i-l)%(a-l)+l)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,i<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(e,i)),this},t.BufferSource.prototype.stop=function(e){this.log(\"stop\",e),this.assert(this.buffer.loaded,\"buffer is either not set or not loaded\"),this.assert(!this._sourceStopped,\"source is already stopped\"),e=this.toSeconds(e),-1!==this._stopTime&&this.cancelStop();var i=this.toSeconds(this.fadeOut);return this._stopTime=e+i,i>0?\"linear\"===this.curve?this._gainNode.gain.linearRampTo(0,i,e):this._gainNode.gain.targetRampTo(0,i,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now()),this},t.BufferSource.prototype.cancelStop=function(){if(-1!==this._startTime&&!this._sourceStopped){var t=this.toSeconds(this.fadeIn);this._gainNode.gain.cancelScheduledValues(this._startTime+t+this.sampleTime),this.context.clearTimeout(this._onendedTimeout),this._stopTime=-1}return this},t.BufferSource.prototype._onended=function(){if(!this._sourceStopped){this._sourceStopped=!0;var t=\"exponential\"===this.curve?2*this.fadeOut:0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+t),this.onended(this)}},Object.defineProperty(t.BufferSource.prototype,\"loopStart\",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,\"loopEnd\",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,\"buffer\",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,\"loop\",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this.cancelStop()}}),t.BufferSource.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(1),i(5),i(3)],void 0===(o=function(t){\"use strict\";return t.FeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly([\"feedback\"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable([\"feedback\"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(24),i(4)],void 0===(o=function(t){\"use strict\";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var i=this._search(e);i>=0;i--){var n=this._timeline[i];if(n.state===t)return n}},t.TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var i=this._search(e);if(-1!==i)for(var n=i;n<this._timeline.length;n++){var o=this._timeline[n];if(o.state===t)return o}},t.TimelineState}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(66)],void 0===(o=function(t){if(t.supported){!t.global.hasOwnProperty(\"AudioContext\")&&t.global.hasOwnProperty(\"webkitAudioContext\")&&(t.global.AudioContext=t.global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return t.isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var e=!1,i=new OfflineAudioContext(1,1,44100),n=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var o=i.decodeAudioData(n);o&&t.isFunction(o.then)&&(e=!0)}catch(t){e=!1}e||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,i){this._native_decodeAudioData(t,e,i)}.bind(this))})}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){\"use strict\";return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\\W+/),n=0;n<i.length;n++){var o=i[n];this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}return this},t.Emitter.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);return this.on(t,i),this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\\W+/),o=0;o<n.length;o++)if(e=n[o],this._events.hasOwnProperty(e))if(t.isUndef(i))this._events[e]=[];else for(var s=this._events[e],r=0;r<s.length;r++)s[r]===i&&s.splice(r,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),n=0,o=i.length;n<o;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=[\"on\",\"once\",\"off\",\"emit\"];e._events={};for(var n=0;n<i.length;n++){var o=i[n],s=t.Emitter.prototype[o];e[o]=s}return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(2)],void 0===(o=function(t){\"use strict\";return t.SignalBase=function(){t.AudioNode.call(this)},t.extend(t.SignalBase,t.AudioNode),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor?(e._param.cancelScheduledValues(0),e._param.setValueAtTime(0,0),e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0)),t.AudioNode.prototype.connect.call(this,e,i,n),this},t.SignalBase}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(17),i(49),i(71),i(48),i(70),i(69)],void 0===(o=function(t){\"use strict\";t.OmniOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\"],t.OmniOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly([\"frequency\",\"detune\"]),this.set(e)},t.extend(t.OmniOscillator,t.Source),t.OmniOscillator.defaults={frequency:440,detune:0,type:\"sine\",phase:0};var e=\"PulseOscillator\",i=\"PWMOscillator\",n=\"Oscillator\",o=\"FMOscillator\",s=\"AMOscillator\",r=\"FatOscillator\";t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},t.OmniOscillator.prototype.restart=function(t){this._oscillator.restart(t)},Object.defineProperty(t.OmniOscillator.prototype,\"type\",{get:function(){var t=\"\";return this._sourceType===o?t=\"fm\":this._sourceType===s?t=\"am\":this._sourceType===r&&(t=\"fat\"),t+this._oscillator.type},set:function(t){\"fm\"===t.substr(0,2)?(this._createNewOscillator(o),this._oscillator.type=t.substr(2)):\"am\"===t.substr(0,2)?(this._createNewOscillator(s),this._oscillator.type=t.substr(2)):\"fat\"===t.substr(0,3)?(this._createNewOscillator(r),this._oscillator.type=t.substr(3)):\"pwm\"===t?this._createNewOscillator(i):\"pulse\"===t?this._createNewOscillator(e):(this._createNewOscillator(n),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"partials\",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),Object.defineProperty(t.OmniOscillator.prototype,\"partialCount\",{get:function(){return this._oscillator.partialCount},set:function(t){this._oscillator.partialCount=t}}),t.OmniOscillator.prototype.set=function(e,i){return\"type\"===e?this.type=i:t.isObject(e)&&e.hasOwnProperty(\"type\")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype.get=function(t){var e=this._oscillator.get(t);return e.type=this.type,e},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var i=t[e],n=this.now();if(null!==this._oscillator){var o=this._oscillator;o.stop(n),this.context.setTimeout(function(){o.dispose(),o=null},this.blockTime)}this._oscillator=new i,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n)}},Object.defineProperty(t.OmniOscillator.prototype,\"phase\",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}});var a={PulseOscillator:\"pulse\",PWMOscillator:\"pwm\",Oscillator:\"oscillator\",FMOscillator:\"fm\",AMOscillator:\"am\",FatOscillator:\"fat\"};return Object.defineProperty(t.OmniOscillator.prototype,\"sourceType\",{get:function(){return a[this._sourceType]},set:function(t){var e=\"sine\";\"pwm\"!==this._oscillator.type&&\"pulse\"!==this._oscillator.type&&(e=this._oscillator.type),t===a.FMOscillator?this.type=\"fm\"+e:t===a.AMOscillator?this.type=\"am\"+e:t===a.FatOscillator?this.type=\"fat\"+e:t===a.Oscillator?this.type=e:t===a.PulseOscillator?this.type=\"pulse\":t===a.PWMOscillator&&(this.type=\"pwm\")}}),Object.defineProperty(t.OmniOscillator.prototype,\"baseType\",{get:function(){return this._oscillator.baseType},set:function(t){this.sourceType!==a.PulseOscillator&&this.sourceType!==a.PWMOscillator&&(this._oscillator.baseType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"width\",{get:function(){if(this._sourceType===e)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,\"count\",{get:function(){if(this._sourceType===r)return this._oscillator.count},set:function(t){this._sourceType===r&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"spread\",{get:function(){if(this._sourceType===r)return this._oscillator.spread},set:function(t){this._sourceType===r&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationType\",{get:function(){if(this._sourceType===o||this._sourceType===s)return this._oscillator.modulationType},set:function(t){this._sourceType!==o&&this._sourceType!==s||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationIndex\",{get:function(){if(this._sourceType===o)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,\"harmonicity\",{get:function(){if(this._sourceType===o||this._sourceType===s)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,\"modulationFrequency\",{get:function(){if(this._sourceType===i)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(30),i(37),i(1),i(25)],void 0===(o=function(t){\"use strict\";return t.Synth=function(e){e=t.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this._readOnly([\"oscillator\",\"frequency\",\"detune\",\"envelope\"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:\"triangle\"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.envelope.attack+this.envelope.decay),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"oscillator\",\"frequency\",\"detune\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(11),i(31)],void 0===(o=function(t){\"use strict\";t.Noise=function(){var e=t.defaults(arguments,[\"type\"],t.Noise);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:\"white\",playbackRate:1},Object.defineProperty(t.Noise.prototype,\"type\",{get:function(){return this._type},set:function(i){if(this._type!==i){if(!(i in e))throw new TypeError(\"Tone.Noise: invalid type: \"+i);if(this._type=i,this.state===t.State.Started){var n=this.now();this._stop(n),this._start(n)}}}}),Object.defineProperty(t.Noise.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(i){var n=e[this._type];this._source=new t.BufferSource(n).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(i),Math.random()*(n.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.restart=function(t){return this._stop(t),this._start(t),this},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e={},i={};return Object.defineProperty(e,\"pink\",{get:function(){if(!i.pink){for(var e=[],n=0;n<2;n++){var o,s,r,a,l,h,u,c=new Float32Array(220500);e[n]=c,o=s=r=a=l=h=u=0;for(var p=0;p<220500;p++){var f=2*Math.random()-1;o=.99886*o+.0555179*f,s=.99332*s+.0750759*f,r=.969*r+.153852*f,a=.8665*a+.3104856*f,l=.55*l+.5329522*f,h=-.7616*h-.016898*f,c[p]=o+s+r+a+l+h+u+.5362*f,c[p]*=.11,u=.115926*f}}i.pink=(new t.Buffer).fromArray(e)}return i.pink}}),Object.defineProperty(e,\"brown\",{get:function(){if(!i.brown){for(var e=[],n=0;n<2;n++){var o=new Float32Array(220500);e[n]=o;for(var s=0,r=0;r<220500;r++){var a=2*Math.random()-1;o[r]=(s+.02*a)/1.02,s=o[r],o[r]*=3.5}}i.brown=(new t.Buffer).fromArray(e)}return i.brown}}),Object.defineProperty(e,\"white\",{get:function(){if(!i.white){for(var e=[],n=0;n<2;n++){var o=new Float32Array(220500);e[n]=o;for(var s=0;s<220500;s++)o[s]=2*Math.random()-1}i.white=(new t.Buffer).fromArray(e)}return i.white}}),t.Noise}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(27),i(20),i(2)],void 0===(o=function(t){\"use strict\";t.Master=function(){t.AudioNode.call(this),t.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly(\"volume\"),this.input.chain(this.output,this.context.destination),this.context.master=this}.bind(this))},t.extend(t.Master,t.AudioNode),t.Master.defaults={volume:0,mute:!1},t.Master.prototype.isMaster=!0,Object.defineProperty(t.Master.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null},t.AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var e=t.Master;return t.Master=new e,t.Context.on(\"init\",function(i){i.master&&i.master.isMaster?t.Master=i.master:t.Master=new e}),t.Context.on(\"close\",function(t){t.master&&t.master.isMaster&&t.master.dispose()}),t.Master}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(89),i(47)],void 0===(o=function(t){\"use strict\";return t.FrequencyEnvelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);e=t.defaultArg(e,t.FrequencyEnvelope.defaults),t.ScaledEnvelope.call(this,e),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this.exponent=e.exponent},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:1},Object.defineProperty(t.FrequencyEnvelope.prototype,\"baseFrequency\",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(26),i(61)],void 0===(o=function(t){return t.ScaleExp=function(e,i,n){t.SignalBase.call(this),this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(t.defaultArg(n,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,\"min\",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,\"max\",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(14),i(2)],void 0===(o=function(t){\"use strict\";return t.Compressor=function(){var e=t.defaults(arguments,[\"threshold\",\"ratio\"],t.Compressor);t.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly([\"knee\",\"release\",\"attack\",\"ratio\",\"threshold\"]),this.set(e)},t.extend(t.Compressor,t.AudioNode),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"knee\",\"release\",\"attack\",\"ratio\",\"threshold\"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(2),i(96)],void 0===(o=function(t){\"use strict\";return t.Analyser=function(){var e=t.defaults(arguments,[\"type\",\"size\"],t.Analyser);t.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser,t.AudioNode),t.Analyser.defaults={size:1024,type:\"fft\",smoothing:.8},t.Analyser.Type={Waveform:\"waveform\",FFT:\"fft\"},t.Analyser.prototype.getValue=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,\"size\",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,\"type\",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError(\"Tone.Analyser: invalid type: \"+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,\"smoothing\",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(65)],void 0===(o=function(t){return t.TransportTime=function(e,i){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,i);t.Time.call(this,e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._now=function(){return t.Transport.seconds},t.TransportTime}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(64)],void 0===(o=function(t){t.Frequency=function(e,i){if(!(this instanceof t.Frequency))return new t.Frequency(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._expressions=Object.assign({},t.TimeBase.prototype._expressions,{midi:{regexp:/^(\\d+(?:\\.\\d+)?midi)/,method:function(e){return\"midi\"===this._defaultUnits?e:t.Frequency.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(i,n){var o=e[i.toLowerCase()]+12*(parseInt(n)+1);return\"midi\"===this._defaultUnits?o:t.Frequency.mtof(o)}},tr:{regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method:function(t,e,i){var n=1;return t&&\"0\"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&\"0\"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&\"0\"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}}}),t.Frequency.prototype.transpose=function(e){return new this.constructor(this.valueOf()*t.intervalToFrequencyRatio(e))},t.Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},t.Frequency.prototype.toMidi=function(){return t.Frequency.ftom(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.toFrequency(),n=Math.log2(e/t.Frequency.A4),o=Math.round(12*n)+57,s=Math.floor(o/12);return s<0&&(o+=-12*s),i[o%12]+s.toString()},t.Frequency.prototype.toSeconds=function(){return 1/t.TimeBase.prototype.toSeconds.call(this)},t.Frequency.prototype.toFrequency=function(){return t.TimeBase.prototype.toFrequency.call(this)},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._noArg=function(){return 0},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits=\"hz\";var e={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},i=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"];return t.Frequency.A4=440,t.Frequency.mtof=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.ftom=function(e){return 69+Math.round(12*Math.log2(e/t.Frequency.A4))},t.Frequency}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(61),i(4),i(2)],void 0===(o=function(t){\"use strict\";return t.Envelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);t.AudioNode.call(this),this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve=\"linear\",this._releaseCurve=\"exponential\",this._sig=this.output=new t.Signal(0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve},t.extend(t.Envelope,t.AudioNode),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:\"linear\",decayCurve:\"exponential\",releaseCurve:\"exponential\"},Object.defineProperty(t.Envelope.prototype,\"value\",{get:function(){return this.getValueAtTime(this.now())}}),t.Envelope.prototype._getCurve=function(e,i){if(t.isString(e))return e;if(t.isArray(e)){for(var n in t.Envelope.Type)if(t.Envelope.Type[n][i]===e)return n;return e}},t.Envelope.prototype._setCurve=function(e,i,n){if(t.Envelope.Type.hasOwnProperty(n)){var o=t.Envelope.Type[n];t.isObject(o)?this[e]=o[i]:this[e]=o}else{if(!t.isArray(n))throw new Error(\"Tone.Envelope: invalid curve: \"+n);this[e]=n}},Object.defineProperty(t.Envelope.prototype,\"attackCurve\",{get:function(){return this._getCurve(this._attackCurve,\"In\")},set:function(t){this._setCurve(\"_attackCurve\",\"In\",t)}}),Object.defineProperty(t.Envelope.prototype,\"releaseCurve\",{get:function(){return this._getCurve(this._releaseCurve,\"Out\")},set:function(t){this._setCurve(\"_releaseCurve\",\"Out\",t)}}),Object.defineProperty(t.Envelope.prototype,\"decayCurve\",{get:function(){return this._decayCurve},set:function(t){if(![\"linear\",\"exponential\"].includes(t))throw new Error(\"Tone.Envelope: invalid curve: \"+t);this._decayCurve=t}}),t.Envelope.prototype.triggerAttack=function(e,i){this.log(\"triggerAttack\",e,i),e=this.toSeconds(e);var n=this.toSeconds(this.attack),o=this.toSeconds(this.decay);i=t.defaultArg(i,1);var s=this.getValueAtTime(e);s>0&&(n=(1-s)/(1/n));if(\"linear\"===this._attackCurve)this._sig.linearRampTo(i,n,e);else if(\"exponential\"===this._attackCurve)this._sig.targetRampTo(i,n,e);else if(n>0){this._sig.cancelAndHoldAtTime(e);for(var r=this._attackCurve,a=1;a<r.length;a++)if(r[a-1]<=s&&s<=r[a]){(r=this._attackCurve.slice(a))[0]=s;break}this._sig.setValueCurveAtTime(r,e,n,i)}if(o){var l=i*this.sustain,h=e+n;this.log(\"decay\",h),\"linear\"===this._decayCurve?this._sig.linearRampTo(l,o,h+this.sampleTime):\"exponential\"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(l,h,o)}return this},t.Envelope.prototype.triggerRelease=function(e){this.log(\"triggerRelease\",e),e=this.toSeconds(e);var i=this.getValueAtTime(e);if(i>0){var n=this.toSeconds(this.release);if(\"linear\"===this._releaseCurve)this._sig.linearRampTo(0,n,e);else if(\"exponential\"===this._releaseCurve)this._sig.targetRampTo(0,n,e);else{var o=this._releaseCurve;t.isArray(o)&&(this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(o,e,n,i))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.SignalBase.prototype.connect,function(){var e,i,n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/127*(Math.PI/2));var o=[];for(e=0;e<127;e++){i=e/127;var s=Math.sin(i*(2*Math.PI)*6.4-Math.PI/2)+1;o[e]=s/10+.83*i}o[127]=1;var r=[];for(e=0;e<128;e++)r[e]=Math.ceil(e/127*5)/5;var a=[];for(e=0;e<128;e++)i=e/127,a[e]=.5*(1-Math.cos(Math.PI*i));var l,h=[];for(e=0;e<128;e++){i=e/127;var u=4*Math.pow(i,3)+.2,c=Math.cos(u*Math.PI*2*i);h[e]=Math.abs(c*(1-i))}function p(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}t.Envelope.Type={linear:\"linear\",exponential:\"exponential\",bounce:{In:p(h),Out:h},cosine:{In:n,Out:(l=n,l.slice(0).reverse())},step:{In:r,Out:p(r)},ripple:{In:o,Out:p(o)},sine:{In:a,Out:p(a)}}}(),t.Envelope.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(17),i(5),i(3)],void 0===(o=function(t){\"use strict\";return t.FMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"modulationType\"],t.FMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly([\"modulationIndex\",\"frequency\",\"detune\",\"harmonicity\"])},t.extend(t.FMOscillator,t.Source),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,type:\"sine\",modulationIndex:2,modulationType:\"square\",harmonicity:1},t.FMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},t.FMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(t.FMOscillator.prototype,\"type\",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,\"baseType\",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(t.FMOscillator.prototype,\"partialCount\",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(t.FMOscillator.prototype,\"modulationType\",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,\"phase\",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,\"partials\",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"modulationIndex\",\"frequency\",\"detune\",\"harmonicity\"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(17),i(1),i(7),i(3)],void 0===(o=function(t){\"use strict\";return t.PulseOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"width\"],t.Oscillator);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain(0),this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:\"sawtooth\",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly([\"width\",\"frequency\",\"detune\"])},t.extend(t.PulseOscillator,t.Source),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},t.PulseOscillator.prototype.restart=function(t){this._sawtooth.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)},Object.defineProperty(t.PulseOscillator.prototype,\"phase\",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,\"type\",{get:function(){return\"pulse\"}}),Object.defineProperty(t.PulseOscillator.prototype,\"baseType\",{get:function(){return\"pulse\"}}),Object.defineProperty(t.PulseOscillator.prototype,\"partials\",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable([\"width\",\"frequency\",\"detune\"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(16),i(4),i(33)],void 0===(o=function(t){\"use strict\";return t.Event=function(){var e=t.defaults(arguments,[\"callback\",\"value\"],t.Event);t.call(this),this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:\"1m\",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=t.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){t.isDefined(e.id)&&t.Transport.clear(e.id);var n=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,t.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration());var o=this._state.getAfter(n);null!==o&&(i=Math.min(i,o.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Ticks(i));var s=t.Ticks(this._getLoopDuration());e.id=t.Transport.scheduleRepeat(this._tick.bind(this),s,t.Ticks(n),i)}else e.id=t.Transport.schedule(this._tick.bind(this),t.Ticks(n))}}.bind(this)),this},Object.defineProperty(t.Event.prototype,\"state\",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,\"startOffset\",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(t.Event.prototype,\"probability\",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(t.Event.prototype,\"humanize\",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getBefore(e),n=e;null!==i&&(n=i.time),this._rescheduleEvents(n)}return this},t.Event.prototype.cancel=function(e){return e=t.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){var i=t.Transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(i)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;t.isBoolean(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"loopEnd\",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"loopStart\",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,\"progress\",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.get(e);if(null!==i&&i.state===t.State.Started){var n=this._getLoopDuration();return(e-i.time)%n/n}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(13),i(29),i(10),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.MidSideMerge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Add,this._timesTwoLeft=new t.Multiply(Math.SQRT1_2),this.side=this.input[1]=new t.Gain,this._right=new t.Subtract,this._timesTwoRight=new t.Multiply(Math.SQRT1_2),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._timesTwoLeft),this._right.connect(this._timesTwoRight),this._timesTwoLeft.connect(this._merge,0,0),this._timesTwoRight.connect(this._merge,0,1)},t.extend(t.MidSideMerge,t.AudioNode),t.MidSideMerge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._timesTwoLeft.dispose(),this._timesTwoLeft=null,this._right.dispose(),this._right=null,this._timesTwoRight.dispose(),this._timesTwoRight=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(29),i(13),i(1),i(19),i(2)],void 0===(o=function(t){\"use strict\";return t.MidSideSplit=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new t.Split,this._midAdd=new t.Add,this.mid=this.output[0]=new t.Multiply(Math.SQRT1_2),this._sideSubtract=new t.Subtract,this.side=this.output[1]=new t.Multiply(Math.SQRT1_2),this._split.connect(this._midAdd,0,0),this._split.connect(this._midAdd,1,1),this._split.connect(this._sideSubtract,0,0),this._split.connect(this._sideSubtract,1,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)},t.extend(t.MidSideSplit,t.AudioNode),t.MidSideSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midAdd.dispose(),this._midAdd=null,this._sideSubtract.dispose(),this._sideSubtract=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(9),i(2),i(58)],void 0===(o=function(t){\"use strict\";return t.LowpassCombFilter=function(){var e=t.defaults(arguments,[\"delayTime\",\"resonance\",\"dampening\"],t.LowpassCombFilter);t.AudioNode.call(this),this._combFilter=this.output=new t.FeedbackCombFilter(e.delayTime,e.resonance),this.delayTime=this._combFilter.delayTime,this._lowpass=this.input=new t.Filter({frequency:e.dampening,type:\"lowpass\",Q:0,rolloff:-12}),this.dampening=this._lowpass.frequency,this.resonance=this._combFilter.resonance,this._lowpass.connect(this._combFilter),this._readOnly([\"dampening\",\"resonance\",\"delayTime\"])},t.extend(t.LowpassCombFilter,t.AudioNode),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"dampening\",\"resonance\",\"delayTime\"]),this._combFilter.dispose(),this._combFilter=null,this.resonance=null,this.delayTime=null,this._lowpass.dispose(),this._lowpass=null,this.dampening=null,this},t.LowpassCombFilter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(45)],void 0===(o=function(t){return t.Ticks=function(e,i){if(!(this instanceof t.Ticks))return new t.Ticks(e,i);t.TransportTime.call(this,e,i)},t.extend(t.Ticks,t.TransportTime),t.Ticks.prototype._defaultUnits=\"i\",t.Ticks.prototype._now=function(){return t.Transport.ticks},t.Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},t.Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},t.Ticks.prototype._ticksToUnits=function(t){return t},t.Ticks.prototype.toTicks=function(){return this.valueOf()},t.Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},t.Ticks}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(54)],void 0===(o=function(t){return t.TransportEvent=function(e,i){i=t.defaultArg(i,t.TransportEvent.defaults),t.call(this),this.Transport=e,this.id=t.TransportEvent._eventId++,this.time=t.Ticks(i.time),this.callback=i.callback,this._once=i.once},t.extend(t.TransportEvent),t.TransportEvent.defaults={once:!1,callback:t.noOp},t.TransportEvent._eventId=0,t.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},t.TransportEvent.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this},t.TransportEvent}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(85),i(33),i(24),i(14)],void 0===(o=function(t){\"use strict\";return t.TickSource=function(){var e=t.defaults(arguments,[\"frequency\"],t.TickSource);this.frequency=new t.TickSignal(e.frequency),this._readOnly(\"frequency\"),this._state=new t.TimelineState(t.State.Stopped),this._state.setStateAtTime(t.State.Stopped,0),this._tickOffset=new t.Timeline,this.setTicksAtTime(0,0)},t.extend(t.TickSource),t.TickSource.defaults={frequency:1},Object.defineProperty(t.TickSource.prototype,\"state\",{get:function(){return this._state.getValueAtTime(this.now())}}),t.TickSource.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),t.isDefined(i)&&this.setTicksAtTime(i,e)),this},t.TickSource.prototype.stop=function(e){if(e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Stopped){var i=this._state.get(e);i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this.setTicksAtTime(0,e),this},t.TickSource.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},t.TickSource.prototype.getTicksAtTime=function(e){e=this.toSeconds(e);var i=this._state.getLastState(t.State.Stopped,e),n={state:t.State.Paused,time:e};this._state.add(n);var o=i,s=0;return this._state.forEachBetween(i.time,e+this.sampleTime,function(e){var i=o.time,n=this._tickOffset.get(e.time);n.time>=o.time&&(s=n.ticks,i=n.time),o.state===t.State.Started&&e.state!==t.State.Started&&(s+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(i)),o=e}.bind(this)),this._state.remove(n),s},Object.defineProperty(t.TickSource.prototype,\"ticks\",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(t.TickSource.prototype,\"seconds\",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}}),t.TickSource.prototype.getSecondsAtTime=function(e){e=this.toSeconds(e);var i=this._state.getLastState(t.State.Stopped,e),n={state:t.State.Paused,time:e};this._state.add(n);var o=i,s=0;return this._state.forEachBetween(i.time,e+this.sampleTime,function(e){var i=o.time,n=this._tickOffset.get(e.time);n.time>=o.time&&(s=n.seconds,i=n.time),o.state===t.State.Started&&e.state!==t.State.Started&&(s+=e.time-i),o=e}.bind(this)),this._state.remove(n),s},t.TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},t.TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.TickSource.prototype.getTimeOfTick=function(e,i){i=t.defaultArg(i,this.now());var n=this._tickOffset.get(i),o=this._state.get(i),s=Math.max(n.time,o.time),r=this.frequency.getTicksAtTime(s)+e-n.ticks;return this.frequency.getTimeOfTick(r)},t.TickSource.prototype.forEachTickBetween=function(e,i,n){var o=this._state.get(e);if(this._state.forEachBetween(e,i,function(i){o.state===t.State.Started&&i.state!==t.State.Started&&this.forEachTickBetween(Math.max(o.time,e),i.time-this.sampleTime,n),o=i}.bind(this)),e=Math.max(o.time,e),o.state===t.State.Started&&this._state){var s=this.frequency.getTicksAtTime(e),r=(s-this.frequency.getTicksAtTime(o.time))%1;0!==r&&(r=1-r);for(var a=this.frequency.getTimeOfTick(s+r),l=null;a<i&&this._state;){try{n(a,Math.round(this.getTicksAtTime(a)))}catch(t){l=t;break}this._state&&(a+=this.frequency.getDurationOfTicks(1,a))}}if(l)throw l;return this},t.TickSource.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable(\"frequency\"),this.frequency.dispose(),this.frequency=null,this},t.TickSource}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(90),i(13),i(1),i(4),i(18),i(2)],void 0===(o=function(t){\"use strict\";return t.Follower=function(){var e=t.defaults(arguments,[\"smoothing\"],t.Follower);t.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type=\"lowpass\",this._filter.frequency.value=0,this._filter.Q.value=0,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._smoothing=e.smoothing,this.input.connect(this._delay,this._sub),this.input.connect(this._sub,0,1),this._sub.chain(this._abs,this._filter,this.output),this.smoothing=e.smoothing},t.extend(t.Follower,t.AudioNode),t.Follower.defaults={smoothing:.05},Object.defineProperty(t.Follower.prototype,\"smoothing\",{get:function(){return this._smoothing},set:function(e){this._smoothing=e,this._filter.frequency.value=.5*t.Time(e).toFrequency()}}),t.Follower.prototype.connect=t.SignalBase.prototype.connect,t.Follower.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this},t.Follower}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(42),i(1),i(14),i(18),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.FeedbackCombFilter=function(){var e=t.defaults(arguments,[\"delayTime\",\"resonance\"],t.FeedbackCombFilter);t.AudioNode.call(this),this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly([\"resonance\",\"delayTime\"])},t.extend(t.FeedbackCombFilter,t.AudioNode),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"resonance\",\"delayTime\"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(9),i(1),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.MultibandSplit=function(){var e=t.defaults(arguments,[\"lowFrequency\",\"highFrequency\"],t.MultibandSplit);t.AudioNode.call(this),this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,\"lowpass\"),this._lowMidFilter=new t.Filter(0,\"highpass\"),this.mid=this.output[1]=new t.Filter(0,\"lowpass\"),this.high=this.output[2]=new t.Filter(0,\"highpass\"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])},t.extend(t.MultibandSplit,t.AudioNode),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(23),i(10),i(19),i(92),i(1),i(22),i(28),i(2)],void 0===(o=function(t){\"use strict\";return t.Panner=function(e){t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan,this.pan.value=t.defaultArg(e,0),this._readOnly(\"pan\")},t.extend(t.Panner,t.AudioNode),t.Panner.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(\"pan\"),this._panner.disconnect(),this._panner=null,this.pan=null,this},t.Panner}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7)],void 0===(o=function(t){\"use strict\";return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,\"value\",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(20),i(66)],void 0===(o=function(t){return t.OfflineContext=function(e,i,n){var o=new OfflineAudioContext(e,i*n,n);t.Context.call(this,{context:o,clockSource:\"offline\",lookAhead:0,updateInterval:128/n}),this._duration=i,this._currentTime=0},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype.resume=function(){return Promise.resolve()},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit(\"tick\"),this._currentTime+=this.blockTime;return this._context.startRendering()},t.OfflineContext.prototype.close=function(){return this._context=null,Promise.resolve()},t.OfflineContext}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(62)],void 0===(o=function(t){if(t.supported){var e=navigator.userAgent.toLowerCase();e.includes(\"safari\")&&!e.includes(\"chrome\")&&e.includes(\"mobile\")&&(t.OfflineContext.prototype.createBufferSource=function(){var t=this._context.createBufferSource(),e=t.start;return t.start=function(i){this.setTimeout(function(){e.call(t,i)}.bind(this),0)}.bind(this),t})}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._val=e,this._units=i,t.isUndef(this._units)&&t.isString(this._val)&&parseFloat(this._val)==this._val&&\"+\"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(e&&e.constructor===this.constructor)this._val=e._val,this._units=e._units;else if(e instanceof t.TimeBase)switch(this._defaultUnits){case\"s\":this._val=e.toSeconds();break;case\"i\":this._val=e.toTicks();break;case\"hz\":this._val=e.toFrequency();break;case\"midi\":this._val=e.toMidi();break;default:throw new Error(\"Unrecognized default units \"+this._defaultUnits)}},t.extend(t.TimeBase),t.TimeBase.prototype._expressions={n:{regexp:/^(\\d+)n(\\.?)$/i,method:function(t,e){t=parseInt(t);var i=\".\"===e?1.5:1;return 1===t?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/t)*i}},t:{regexp:/^(\\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\\d+(?:\\.\\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?$/,method:function(t,e,i){var n=0;return t&&\"0\"!==t&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&\"0\"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&\"0\"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\\d+(?:\\.\\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\\d+(?:\\.\\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._defaultUnits=\"s\",t.TimeBase.prototype._getBpm=function(){return t.Transport?t.Transport.bpm.value:120},t.TimeBase.prototype._getTimeSignature=function(){return t.Transport?t.Transport.timeSignature:4},t.TimeBase.prototype._getPPQ=function(){return t.Transport?t.Transport.PPQ:192},t.TimeBase.prototype._now=function(){return this.now()},t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},t.TimeBase.prototype._noArg=function(){return this._now()},t.TimeBase.prototype.valueOf=function(){if(t.isUndef(this._val))return this._noArg();if(t.isString(this._val)&&t.isUndef(this._units)){for(var e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(t.isObject(this._val)){var i=0;for(var n in this._val){var o=this._val[n];i+=new this.constructor(n).valueOf()*o}return i}if(t.isDefined(this._units)){var s=this._expressions[this._units],r=this._val.toString().trim().match(s.regexp);return r?s.method.apply(this,r.slice(1)):s.method.call(this,parseFloat(this._val))}return this._val},t.TimeBase.prototype.toSeconds=function(){return this.valueOf()},t.TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.TimeBase.prototype.dispose=function(){this._val=null,this._units=null},t.TimeBase}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(64),i(46)],void 0===(o=function(t){return t.Time=function(e,i){if(!(this instanceof t.Time))return new t.Time(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._expressions=Object.assign({},t.TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(e){if(t.Transport){var i=new this.constructor(e);return this._secondsToUnits(t.Transport.nextSubdivision(i))}return 0}},now:{regexp:/^\\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),t.Time.prototype.quantize=function(e,i){i=t.defaultArg(i,1);var n=new this.constructor(e),o=this.valueOf();return o+(Math.round(o/n)*n-o)*i},t.Time.prototype.toNotation=function(){for(var e=this.toSeconds(),i=[\"1m\"],n=1;n<8;n++){var o=Math.pow(2,n);i.push(o+\"n.\"),i.push(o+\"n\"),i.push(o+\"t\")}i.push(\"0\");var s=i[0],r=t.Time(i[0]).toSeconds();return i.forEach(function(i){var n=t.Time(i).toSeconds();Math.abs(n-e)<Math.abs(r-e)&&(s=i,r=n)}),s},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var i=Math.floor(e/this._getTimeSignature()),n=e%1*4;return e=Math.floor(e)%this._getTimeSignature(),(n=n.toString()).length>3&&(n=parseFloat(parseFloat(n).toFixed(3))),[i,e,n].join(\":\")},t.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMidi=function(){return t.Frequency.ftom(this.toFrequency())},t.Time}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){if(t.supported){!t.global.hasOwnProperty(\"OfflineAudioContext\")&&t.global.hasOwnProperty(\"webkitOfflineAudioContext\")&&(t.global.OfflineAudioContext=t.global.webkitOfflineAudioContext);var e=new OfflineAudioContext(1,1,44100).startRendering();e&&t.isFunction(e.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(11),i(6),i(56),i(31)],void 0===(o=function(t){\"use strict\";return t.Player=function(e){var i;e instanceof t.Buffer&&e.loaded?(e=e.get(),i=t.Player.defaults):i=t.defaults(arguments,[\"url\",\"onload\"],t.Player),t.Source.call(this,i),this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this._activeSources=[],this.fadeIn=i.fadeIn,this.fadeOut=i.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){(e=t.defaultArg(e,t.noOp))(this),this.autostart&&this.start()},t.Player.prototype._onSourceEnd=function(e){var i=this._activeSources.indexOf(e);this._activeSources.splice(i,1),0!==this._activeSources.length||this._synced||this._state.setStateAtTime(t.State.Stopped,t.now())},t.Player.prototype._start=function(e,i,n){i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toSeconds(i);var o=t.defaultArg(n,Math.max(this._buffer.duration-i,0));o=this.toSeconds(o),o/=this._playbackRate,e=this.toSeconds(e);var s=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output);return this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+o),this._activeSources.push(s),this._loop&&t.isUndef(n)?s.start(e,i):s.start(e,i,o-this.toSeconds(this.fadeOut)),this},t.Player.prototype._stop=function(t){return t=this.toSeconds(t),this._activeSources.forEach(function(e){e.stop(t)}),this},t.Player.prototype.restart=function(t,e,i){return this._stop(t),this._start(t,e,i),this},t.Player.prototype.seek=function(e,i){return i=this.toSeconds(i),this._state.getValueAtTime(i)===t.State.Started&&(e=this.toSeconds(e),this._stop(i),this._start(i,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,\"loopStart\",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})}}),Object.defineProperty(t.Player.prototype,\"loopEnd\",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})}}),Object.defineProperty(t.Player.prototype,\"buffer\",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,\"loop\",{get:function(){return this._loop},set:function(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(function(t){t.loop=e}),e)){var i=this._state.getNextState(t.State.Stopped,this.now());i&&this._state.cancel(i.time)}}}),Object.defineProperty(t.Player.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e;var i=this.now(),n=this._state.getNextState(t.State.Stopped,i);n&&this._state.cancel(n.time),this._activeSources.forEach(function(t){t.cancelStop(),t.playbackRate.setValueAtTime(e,i)})}}),Object.defineProperty(t.Player.prototype,\"reverse\",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,\"loaded\",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,t.Source.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this},t.Player}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(30),i(41),i(37),i(1),i(9),i(25)],void 0===(o=function(t){\"use strict\";return t.MonoSynth=function(e){e=t.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filter.frequency.value=5e3,this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly([\"oscillator\",\"frequency\",\"detune\",\"filter\",\"filterEnvelope\",\"envelope\"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:\"C4\",detune:0,oscillator:{type:\"square\"},filter:{Q:6,type:\"lowpass\",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.envelope.attack+this.envelope.decay),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"oscillator\",\"frequency\",\"detune\",\"filter\",\"filterEnvelope\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(17),i(5),i(3)],void 0===(o=function(t){\"use strict\";return t.FatOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"spread\"],t.FatOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,this._readOnly([\"frequency\",\"detune\"])},t.extend(t.FatOscillator,t.Source),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:\"sawtooth\",partials:[],partialCount:0},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype.restart=function(t){t=this.toSeconds(t),this._forEach(function(e){e.restart(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,\"type\",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,\"spread\",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach(function(t,n){t.detune.value=e+i*n})}}}),Object.defineProperty(t.FatOscillator.prototype,\"count\",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var i=0;i<e;i++){var n=new t.Oscillator;this.type===t.Oscillator.Type.Custom?n.partials=this._partials:n.type=this._type,n.partialCount=this._partialCount,n.phase=this._phase+i/e*360,n.volume.value=-6-1.1*e,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[i]=n}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,\"phase\",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,\"baseType\",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){e.baseType=t}),this._type=this._oscillators[0].type}}),Object.defineProperty(t.FatOscillator.prototype,\"partials\",{get:function(){return this._oscillators[0].partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),Object.defineProperty(t.FatOscillator.prototype,\"partialCount\",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){e.partialCount=t}),this._type=this._oscillators[0].type}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(17),i(5),i(3),i(22)],void 0===(o=function(t){\"use strict\";return t.AMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"type\",\"modulationType\"],t.AMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly([\"frequency\",\"detune\",\"harmonicity\"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,type:\"sine\",modulationType:\"square\",harmonicity:1},t.AMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},t.AMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(t.AMOscillator.prototype,\"type\",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,\"baseType\",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(t.AMOscillator.prototype,\"partialCount\",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(t.AMOscillator.prototype,\"modulationType\",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,\"phase\",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,\"partials\",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable([\"frequency\",\"detune\",\"harmonicity\"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(49),i(17),i(5)],void 0===(o=function(t){\"use strict\";return t.PWMOscillator=function(){var e=t.defaults(arguments,[\"frequency\",\"modulationFrequency\"],t.PWMOscillator);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type=\"sine\",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly([\"modulationFrequency\",\"frequency\",\"detune\"])},t.extend(t.PWMOscillator,t.Source),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},t.PWMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._pulse.restart(t)},Object.defineProperty(t.PWMOscillator.prototype,\"type\",{get:function(){return\"pwm\"}}),Object.defineProperty(t.PWMOscillator.prototype,\"baseType\",{get:function(){return\"pwm\"}}),Object.defineProperty(t.PWMOscillator.prototype,\"partials\",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,\"phase\",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable([\"modulationFrequency\",\"frequency\",\"detune\"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(50),i(4),i(16)],void 0===(o=function(t){\"use strict\";return t.Part=function(){var e=t.defaults(arguments,[\"callback\",\"events\"],t.Part);t.Event.call(this,e),this._events=[];for(var i=0;i<e.events.length;i++)Array.isArray(e.events[i])?this.add(e.events[i][0],e.events[i][1]):this.add(e.events[i])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:\"1m\",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getValueAtTime(n)!==t.State.Started&&(i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toTicks(i),this._state.add({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.Ticks(i))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.Ticks(i))):e.startOffset>=n&&e.start(t.Ticks(i))},Object.defineProperty(t.Part.prototype,\"startOffset\",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){e=t.TransportTime(e);for(var n=t.Ticks(1).toSeconds(),o=0;o<this._events.length;o++){var s=this._events[o];if(Math.abs(e.toTicks()-s.startOffset)<n)return t.isDefined(i)&&(s.value=i),s}return t.isDefined(i)?(this.add(e,i),this._events[this._events.length-1]):null},t.Part.prototype.add=function(e,i){var n;return e.hasOwnProperty(\"time\")&&(e=(i=e).time),e=this.toTicks(e),i instanceof t.Event?(n=i).callback=this._tick.bind(this):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(i){i.state===t.State.Started?this._startNote(e,i.time,i.offset):e.stop(t.Ticks(i.time))}.bind(this))},t.Part.prototype.remove=function(e,i){e.hasOwnProperty(\"time\")&&(e=(i=e).time),e=this.toTicks(e);for(var n=this._events.length-1;n>=0;n--){var o=this._events[n];o.startOffset===e&&(t.isUndef(i)||t.isDefined(i)&&o.value===i)&&(this._events.splice(n,1),o.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},t.Part.prototype._forEach=function(e,i){if(this._events){i=t.defaultArg(i,this);for(var n=this._events.length-1;n>=0;n--){var o=this._events[n];o instanceof t.Part?o._forEach(e,i):e.call(i,o)}}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,\"probability\",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll(\"probability\",t)}}),Object.defineProperty(t.Part.prototype,\"humanize\",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll(\"humanize\",t)}}),Object.defineProperty(t.Part.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,\"loopEnd\",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,\"loopStart\",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll(\"playbackRate\",t)}}),Object.defineProperty(t.Part.prototype,\"length\",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return t.Event.prototype.dispose.call(this),this.removeAll(),this.callback=null,this._events=null,this},t.Part}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(50)],void 0===(o=function(t){return t.Loop=function(){var e=t.defaults(arguments,[\"callback\",\"interval\"],t.Loop);t.call(this),this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:\"4n\",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,\"state\",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,\"progress\",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,\"interval\",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,\"playbackRate\",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,\"humanize\",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,\"probability\",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,\"mute\",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,\"iterations\",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(15),i(32)],void 0===(o=function(t){\"use strict\";return t.StereoXFeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly([\"feedback\"])},t.extend(t.StereoXFeedbackEffect,t.StereoEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"feedback\"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(52),i(51)],void 0===(o=function(t){\"use strict\";return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(11),i(8)],void 0===(o=function(t){\"use strict\";return t.Convolver=function(){var e=t.defaults(arguments,[\"url\",\"onload\"],t.Convolver);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer(e.url,function(t){this.buffer=t.get(),e.onload()}.bind(this)),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp,normalize:!0},Object.defineProperty(t.Convolver.prototype,\"buffer\",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){this._buffer.set(t),this._convolver.buffer&&(this.effectSend.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.connectEffect(this._convolver)),this._convolver.buffer=this._buffer.get()}}),Object.defineProperty(t.Convolver.prototype,\"normalize\",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this._convolver.disconnect(),this._convolver=null,this},t.Convolver}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7),i(5),i(13)],void 0===(o=function(t){\"use strict\";return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,\"value\",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(16),i(11),i(62),i(40)],void 0===(o=function(t){return t.Offline=function(e,i){var n=t.context.sampleRate,o=t.context,s=new t.OfflineContext(2,i,n);t.context=s;var r=e(t.Transport),a=null;return a=r&&t.isFunction(r.then)?r.then(function(){return s.render()}):s.render(),t.context=o,a.then(function(e){return new t.Buffer(e)})},t.Offline}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(11)],void 0===(o=function(t){return t.Buffers=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,[\"onload\",\"baseUrl\"],t.Buffers);for(var o in t.call(this),this._buffers={},this.baseUrl=n.baseUrl,this._loadingCount=0,e)this._loadingCount++,this.add(o,e[o],this._bufferLoaded.bind(this,n.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:\"\"},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error(\"Tone.Buffers: no buffer named \"+t)},t.Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,\"loaded\",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),t.Buffers.prototype.add=function(e,i,n){return n=t.defaultArg(n,t.noOp),i instanceof t.Buffer?(this._buffers[e]=i,n(this)):i instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(i),n(this)):t.isString(i)&&(this._buffers[e]=new t.Buffer(this.baseUrl+i,n)),this},t.Buffers.prototype.dispose=function(){for(var e in t.prototype.dispose.call(this),this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){\"use strict\";return t.CtrlPattern=function(){var e=t.defaults(arguments,[\"values\",\"type\"],t.CtrlPattern);t.call(this),this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:\"up\",Down:\"down\",UpDown:\"upDown\",DownUp:\"downUp\",AlternateUp:\"alternateUp\",AlternateDown:\"alternateDown\",Random:\"random\",RandomWalk:\"randomWalk\",RandomOnce:\"randomOnce\"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,\"value\",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,\"type\",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){t.supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var o=0;o<n.length;o++)n[o+i]=t[o]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var o=0;o<t.length;o++)t[o]=n[o+i]}))}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(11),i(6),i(3),i(2)],void 0===(o=function(t){return t.OscillatorNode=function(){var e=t.defaults(arguments,[\"frequency\",\"type\"],t.OscillatorNode);t.AudioNode.call(this,e),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain(0),this._oscillator=this.context.createOscillator(),this._oscillator.connect(this._gainNode),this.type=e.type,this.frequency=new t.Param({param:this._oscillator.frequency,units:t.Type.Frequency,value:e.frequency}),this.detune=new t.Param({param:this._oscillator.detune,units:t.Type.Cents,value:e.detune}),this._gain=1},t.extend(t.OscillatorNode,t.AudioNode),t.OscillatorNode.defaults={frequency:440,detune:0,type:\"sine\",onended:t.noOp},Object.defineProperty(t.OscillatorNode.prototype,\"state\",{get:function(){return this.getStateAtTime(this.now())}}),t.OscillatorNode.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?t.State.Started:t.State.Stopped},t.OscillatorNode.prototype.start=function(t){if(this.log(\"start\",t),-1!==this._startTime)throw new Error(\"cannot call OscillatorNode.start more than once\");return this._startTime=this.toSeconds(t),this._oscillator.start(this._startTime),this._gainNode.gain.setValueAtTime(1,this._startTime),this},t.OscillatorNode.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},t.OscillatorNode.prototype.stop=function(t){return this.log(\"stop\",t),this.assert(-1!==this._startTime,\"'start' must be called before 'stop'\"),this.cancelStop(),this._stopTime=this.toSeconds(t),this._stopTime>this._startTime?(this._gainNode.gain.setValueAtTime(0,this._stopTime),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){this._oscillator.stop(this.now()),this.onended()}.bind(this),this._stopTime-this.context.currentTime)):this._gainNode.gain.cancelScheduledValues(this._startTime),this},t.OscillatorNode.prototype.cancelStop=function(){return-1!==this._startTime&&(this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1),this},Object.defineProperty(t.OscillatorNode.prototype,\"type\",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}}),t.OscillatorNode.prototype.dispose=function(){return this.context.clearTimeout(this._timeout),t.AudioNode.prototype.dispose.call(this),this.onended=null,this._oscillator.disconnect(),this._oscillator=null,this._gainNode.dispose(),this._gainNode=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this},t.OscillatorNode}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(55),i(54)],void 0===(o=function(t){return t.TransportRepeatEvent=function(e,i){t.TransportEvent.call(this,e,i),i=t.defaultArg(i,t.TransportRepeatEvent.defaults),this.duration=t.Ticks(i.duration),this._interval=t.Ticks(i.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on(\"start loopStart\",this._boundRestart),this._restart()},t.extend(t.TransportRepeatEvent,t.TransportEvent),t.TransportRepeatEvent.defaults={duration:1/0,interval:1},t.TransportRepeatEvent.prototype.invoke=function(e){this._createEvents(e),t.TransportEvent.prototype.invoke.call(this,e)},t.TransportRepeatEvent.prototype._createEvents=function(e){var i=this.Transport.getTicksAtTime(e);i>=this.time&&i>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick)))},t.TransportRepeatEvent.prototype._restart=function(e){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var i=this.Transport.getTicksAtTime(e);i>this.time&&(this._nextTick=this.time+Math.ceil((i-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick))},t.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off(\"start loopStart\",this._boundRestart),this._boundCreateEvents=null,t.TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this},t.TransportRepeatEvent}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(4)],void 0===(o=function(t){\"use strict\";t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(i){if(t.isUndef(i.time)||t.isUndef(i.duration))throw new Error(\"Tone.IntervalTimeline: events must have time and duration parameters\");i.time=i.time.valueOf();var n=new e(i.time,i.time+i.duration,i);for(null===this._root?this._root=n:this._root.insert(n),this._length++;null!==n;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,\"length\",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var o=i[n].event;o&&e(o)}}return this},t.IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--){e(i[n].event)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,\"left\",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,\"right\",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1)],void 0===(o=function(t){function e(t){return function(e,i){i=this.toSeconds(i),t.apply(this,arguments);var n=this._events.get(i),o=this._events.previousEvent(n),s=this._getTicksUntilEvent(o,i);return n.ticks=Math.max(s,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.Signal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:t.Param.AutomationType.SetValue,time:0,value:e})},t.extend(t.TickSignal,t.Signal),t.TickSignal.prototype.setValueAtTime=e(t.Signal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.Signal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var n=this._events.get(e),o=Math.round(Math.max(1/i,1)),s=0;s<=o;s++){var r=i*s+e,a=this._exponentialApproach(n.time,n.value,t,i,r);this.linearRampToValueAtTime(this._toUnits(a),r)}return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);var i=this._events.get(e);null===i&&(i={value:this._initialValue,time:0});for(var n=Math.round(Math.max(10*(e-i.time),1)),o=(e-i.time)/n,s=0;s<=n;s++){var r=o*s+i.time,a=this._exponentialInterpolate(i.time,i.value,e,t,r);this.linearRampToValueAtTime(this._toUnits(a),r)}return this},t.TickSignal.prototype._getTicksUntilEvent=function(e,i){if(null===e)e={ticks:0,time:0};else if(t.isUndef(e.ticks)){var n=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(n,e.time)}var o=this.getValueAtTime(e.time),s=this.getValueAtTime(i);return this._events.get(i).time===i&&this._events.get(i).type===t.Param.AutomationType.SetValue&&(s=this.getValueAtTime(i-this.sampleTime)),.5*(i-e.time)*(o+s)+e.ticks},t.TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var i=this._events.get(e,\"ticks\"),n=this._events.getAfter(e,\"ticks\");if(i&&i.ticks===e)return i.time;if(i&&n&&n.type===t.Param.AutomationType.Linear&&i.value!==n.value){var o=this.getValueAtTime(i.time),s=(this.getValueAtTime(n.time)-o)/(n.time-i.time),r=Math.sqrt(Math.pow(o,2)-2*s*(i.ticks-e)),a=(-o+r)/s;return(a>0?a:(-o-r)/s)+i.time}return i?0===i.value?1/0:i.time+(e-i.ticks)/i.value:e/this._initialValue},t.TickSignal.prototype.ticksToTime=function(e,i){return i=this.toSeconds(i),new t.Time(this.getDurationOfTicks(e,i))},t.TickSignal.prototype.timeToTicks=function(e,i){i=this.toSeconds(i),e=this.toSeconds(e);var n=this.getTicksAtTime(i),o=this.getTicksAtTime(i+e);return new t.Ticks(o-n)},t.TickSignal}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(56),i(33),i(35),i(20)],void 0===(o=function(t){\"use strict\";return t.Clock=function(){var e=t.defaults(arguments,[\"callback\",\"frequency\"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._tickSource=new t.TickSource(e.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly(\"frequency\"),this._state=new t.TimelineState(t.State.Stopped),this._state.setStateAtTime(t.State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on(\"tick\",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,\"state\",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,i){return this.context.resume(),e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._tickSource.start(e,i),e<this._lastUpdate&&this.emit(\"start\",e,i)),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit(\"stop\",e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Paused,e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit(\"pause\",e)),this},Object.defineProperty(t.Clock.prototype,\"ticks\",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(t.Clock.prototype,\"seconds\",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),t.Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},t.Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},t.Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},t.Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(i+t,e)},t.Clock.prototype._loop=function(){var e=this._lastUpdate,i=this.now();this._lastUpdate=i,e!==i&&(this._state.forEachBetween(e,i,function(e){switch(e.state){case t.State.Started:var i=this._tickSource.getTicksAtTime(e.time);this.emit(\"start\",e.time,i);break;case t.State.Stopped:0!==e.time&&this.emit(\"stop\",e.time);break;case t.State.Paused:this.emit(\"pause\",e.time)}}.bind(this)),this._tickSource.forEachTickBetween(e,i,function(t,e){this.callback(t,e)}.bind(this)))},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off(\"tick\",this._boundLoop),this._writable(\"frequency\"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(1),i(5),i(7)],void 0===(o=function(t){\"use strict\";return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(87),i(13),i(1)],void 0===(o=function(t){\"use strict\";return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz),this.proxy=!1},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(47),i(26)],void 0===(o=function(t){\"use strict\";return t.ScaledEnvelope=function(){var e=t.defaults(arguments,[\"attack\",\"decay\",\"sustain\",\"release\"],t.Envelope);t.Envelope.call(this,e),e=t.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,\"min\",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,\"max\",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,\"exponent\",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7),i(36)],void 0===(o=function(t){\"use strict\";return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:Math.abs(t)},1024)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(3),i(2)],void 0===(o=function(t){return t.Solo=function(){var e=t.defaults(arguments,[\"solo\"],t.Solo);t.AudioNode.call(this),this.input=this.output=new t.Gain,this._soloBind=this._soloed.bind(this),this.context.on(\"solo\",this._soloBind),this.solo=e.solo},t.extend(t.Solo,t.AudioNode),t.Solo.defaults={solo:!1},Object.defineProperty(t.Solo.prototype,\"solo\",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit(\"solo\",this)}}),Object.defineProperty(t.Solo.prototype,\"muted\",{get:function(){return 0===this.input.gain.value}}),t.Solo.prototype._addSolo=function(){t.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},t.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},t.Solo.prototype._isSoloed=function(){return!!t.isArray(this.context._currentSolo)&&(0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this))},t.Solo.prototype._noSolos=function(){return!t.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},t.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},t.Solo.prototype.dispose=function(){return this.context.off(\"solo\",this._soloBind),this._removeSolo(),this._soloBind=null,t.AudioNode.prototype.dispose.call(this),this},t.Solo}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7),i(10),i(28),i(19),i(3),i(1),i(20)],void 0===(o=function(t){if(t.supported&&!t.global.AudioContext.prototype.createStereoPanner){var e=function(e){this.context=e,this.pan=new t.Signal(0,t.Type.AudioRange);var i=new t.WaveShaper(function(e){return t.equalPowerScale((e+1)/2)},4096),n=new t.WaveShaper(function(e){return t.equalPowerScale(1-(e+1)/2)},4096),o=new t.Gain,s=new t.Gain,r=this.input=new t.Split;r._splitter.channelCountMode=\"explicit\",(new t.Zero).fan(i,n);var a=this.output=new t.Merge;r.left.chain(o,a.left),r.right.chain(s,a.right),this.pan.chain(n,o.gain),this.pan.chain(i,s.gain)};e.prototype.disconnect=function(){this.output.disconnect.apply(this.output,arguments)},e.prototype.connect=function(){this.output.connect.apply(this.output,arguments)},AudioContext.prototype.createStereoPanner=function(){return new e(this)},t.Context.prototype.createStereoPanner=function(){return new e(this)}}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7)],void 0===(o=function(t){\"use strict\";return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(5),i(1)],void 0===(o=function(t){\"use strict\";return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(60),i(27),i(2)],void 0===(o=function(t){\"use strict\";return t.PanVol=function(){var e=t.defaults(arguments,[\"pan\",\"volume\"],t.PanVol);t.AudioNode.call(this),this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,this._readOnly([\"pan\",\"volume\"])},t.extend(t.PanVol,t.AudioNode),t.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(t.PanVol.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.PanVol.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"pan\",\"volume\"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(34)],void 0===(o=function(t){t.supported&&(AnalyserNode.prototype.getFloatTimeDomainData||(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var i=0;i<e.length;i++)t[i]=(e[i]-128)/128}))}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(34),i(63),i(20),i(3)],void 0===(o=function(t){if(t.supported&&!t.global.AudioContext.prototype.createConstantSource){var e=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode=\"explicit\",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var o=this._output=t.createGain();this.offset=o.gain,this._bufferSource.connect(o)};e.prototype.start=function(t){return this._bufferSource.start(t),this},e.prototype.stop=function(t){return this._bufferSource.stop(t),this},e.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},e.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new e(this)},t.Context.prototype.createConstantSource=function(){return new e(this)}}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(34)],void 0===(o=function(t){if(t.supported&&!t.global.AudioContext.prototype._native_createWaveShaper){var e=navigator.userAgent.toLowerCase();if(e.includes(\"safari\")&&!e.includes(\"chrome\")){var i=function(t){for(var e in this._internalNode=this.input=this.output=t._native_createWaveShaper(),this._curve=null,this._internalNode)this._defineProperty(this._internalNode,e)};Object.defineProperty(i.prototype,\"curve\",{get:function(){return this._curve},set:function(t){this._curve=t;var e=new Float32Array(t.length+1);e.set(t,1),e[0]=t[0],this._internalNode.curve=e}}),i.prototype._defineProperty=function(e,i){t.isUndef(this[i])&&Object.defineProperty(this,i,{get:function(){return\"function\"==typeof e[i]?e[i].bind(e):e[i]},set:function(t){e[i]=t}})},t.global.AudioContext.prototype._native_createWaveShaper=t.global.AudioContext.prototype.createWaveShaper,t.global.AudioContext.prototype.createWaveShaper=function(){return new i(this)}}}}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(46)],void 0===(o=function(t){return t.Midi=function(e,i){if(!(this instanceof t.Midi))return new t.Midi(e,i);t.Frequency.call(this,e,i)},t.extend(t.Midi,t.Frequency),t.Midi.prototype._defaultUnits=\"midi\",t.Midi.prototype._frequencyToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._frequencyToUnits.call(this,e))},t.Midi.prototype._ticksToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._ticksToUnits.call(this,e))},t.Midi.prototype._beatsToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._beatsToUnits.call(this,e))},t.Midi.prototype._secondsToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._secondsToUnits.call(this,e))},t.Midi.prototype.toMidi=function(){return this.valueOf()},t.Midi.prototype.toFrequency=function(){return t.Frequency.mtof(this.toMidi())},t.Midi.prototype.transpose=function(t){return new this.constructor(this.toMidi()+t)},t.Midi}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(27),i(2)],void 0===(o=function(t){\"use strict\";return t.UserMedia=function(){var e=t.defaults(arguments,[\"volume\"],t.UserMedia);t.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this.mute=e.mute},t.extend(t.UserMedia,t.AudioNode),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(e){return this.state===t.State.Started&&this.close(),t.UserMedia.enumerateDevices().then(function(i){var n;if(t.isNumber(e))n=i[e];else if(!(n=i.find(function(t){return t.label===e||t.deviceId===e}))&&i.length>0)n=i[0];else if(!n&&t.isDefined(e))throw new Error(\"Tone.UserMedia: no matching device: \"+e);this._device=n;var o={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};return n&&(o.audio.deviceId=n.deviceId),navigator.mediaDevices.getUserMedia(o).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return\"audioinput\"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,\"state\",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,\"deviceId\",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,\"groupId\",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,\"label\",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.close(),this._writable(\"volume\"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,\"supported\",{get:function(){return t.isDefined(navigator.mediaDevices)&&t.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(67),i(27),i(2)],void 0===(o=function(t){\"use strict\";return t.Players=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,[\"onload\"],t.Players);for(var o in t.AudioNode.call(this,n),this._volume=this.output=new t.Volume(n.volume),this.volume=this._volume.volume,this._readOnly(\"volume\"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode=\"explicit\",this.mute=n.mute,this._players={},this._loadingCount=0,this._fadeIn=n.fadeIn,this._fadeOut=n.fadeOut,e)this._loadingCount++,this.add(o,e[o],this._bufferLoaded.bind(this,n.onload))},t.extend(t.Players,t.AudioNode),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,\"mute\",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,\"fadeIn\",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,\"fadeOut\",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,\"state\",{get:function(){var e=!1;return this._forEach(function(i){e=e||i.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error(\"Tone.Players: no player named \"+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,\"loaded\",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,i,n){return this._players[e]=new t.Player(i,n).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(\"volume\"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(6),i(11),i(31)],void 0===(o=function(t){return t.GrainPlayer=function(){var e=t.defaults(arguments,[\"url\",\"onload\"],t.GrainPlayer);t.Source.call(this,e),this.buffer=new t.Buffer(e.url,e.onload),this._clock=new t.Clock(this._tick.bind(this),e.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on(\"stop\",this._onstop.bind(this))},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(e,i,n){i=t.defaultArg(i,0),i=this.toSeconds(i),e=this.toSeconds(e),this._offset=i,this._clock.start(e),n&&this.stop(e+this.toSeconds(n))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},t.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t)})},t.GrainPlayer.prototype._tick=function(e){if(!this.loop&&this._offset>this.buffer.duration)this.stop(e);else{var i=this._offset<this._overlap?0:this._overlap,n=new t.BufferSource({buffer:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:t.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);n.start(e,this._offset),this._offset+=this.grainSize,n.stop(e+this.grainSize/this.playbackRate),this._activeSources.push(n),n.onended=function(){var t=this._activeSources.indexOf(n);-1!==t&&this._activeSources.splice(t,1)}.bind(this)}},Object.defineProperty(t.GrainPlayer.prototype,\"playbackRate\",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,\"loopStart\",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,\"loopEnd\",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,\"reverse\",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,\"grainSize\",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,\"overlap\",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,\"loaded\",{get:function(){return this.buffer.loaded}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},t.GrainPlayer}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(16),i(1),i(45)],void 0===(o=function(t){return t.TransportTimelineSignal=function(){t.Signal.apply(this,arguments),this.output=this._outputSig=new t.Signal(this._initialValue),this._lastVal=this.value,this._synced=t.Transport.scheduleRepeat(this._onTick.bind(this),\"1i\"),this._bindAnchorValue=this._anchorValue.bind(this),t.Transport.on(\"start stop pause\",this._bindAnchorValue),this._events.memory=1/0},t.extend(t.TransportTimelineSignal,t.Signal),t.TransportTimelineSignal.prototype._onTick=function(e){var i=this.getValueAtTime(t.Transport.seconds);this._lastVal!==i&&(this._lastVal=i,this._outputSig.linearRampToValueAtTime(i,e))},t.TransportTimelineSignal.prototype._anchorValue=function(e){var i=this.getValueAtTime(t.Transport.seconds);return this._lastVal=i,this._outputSig.cancelScheduledValues(e),this._outputSig.setValueAtTime(i,e),this},t.TransportTimelineSignal.prototype.getValueAtTime=function(e){return e=t.TransportTime(e),t.Signal.prototype.getValueAtTime.call(this,e)},t.TransportTimelineSignal.prototype.setValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.setValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.linearRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.exponentialRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.setTargetAtTime=function(e,i,n){return i=t.TransportTime(i),t.Signal.prototype.setTargetAtTime.call(this,e,i,n),this},t.TransportTimelineSignal.prototype.cancelScheduledValues=function(e){return e=t.TransportTime(e),t.Signal.prototype.cancelScheduledValues.call(this,e),this},t.TransportTimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,o){return i=t.TransportTime(i),n=t.TransportTime(n),t.Signal.prototype.setValueCurveAtTime.call(this,e,i,n,o),this},t.TransportTimelineSignal.prototype.cancelAndHoldAtTime=function(e){return t.Signal.prototype.cancelAndHoldAtTime.call(this,t.TransportTime(e))},t.TransportTimelineSignal.prototype.dispose=function(){t.Transport.clear(this._synced),t.Transport.off(\"start stop pause\",this._syncedCallback),this._events.cancel(0),t.Signal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},t.TransportTimelineSignal}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(29),i(5)],void 0===(o=function(t){\"use strict\";return t.Normalize=function(e,i){t.SignalBase.call(this),this._inputMin=t.defaultArg(e,0),this._inputMax=t.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,\"min\",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,\"max\",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(7),i(1)],void 0===(o=function(t){\"use strict\";return t.GainToAudio=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){t.supported&&(OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable))}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(21),i(79),i(31)],void 0===(o=function(t){return t.Sampler=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,[\"onload\",\"baseUrl\"],t.Sampler);t.Instrument.call(this,n);var o={};for(var s in e)if(t.isNote(s)){o[t.Frequency(s).toMidi()]=e[s]}else{if(isNaN(parseFloat(s)))throw new Error(\"Tone.Sampler: url keys must be the note's pitch\");o[s]=e[s]}this._buffers=new t.Buffers(o,n.onload,n.baseUrl),this._activeSources={},this.attack=n.attack,this.release=n.release,this.curve=n.curve},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={attack:0,release:.1,onload:t.noOp,baseUrl:\"\",curve:\"exponential\"},t.Sampler.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}return null},t.Sampler.prototype.triggerAttack=function(e,i,n){this.log(\"triggerAttack\",e,i,n),Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var s=t.Frequency(e[o]).toMidi(),r=this._findClosest(s);if(null!==r){var a=s-r,l=this._buffers.get(a),h=t.intervalToFrequencyRatio(r),u=new t.BufferSource({buffer:l,playbackRate:h,fadeIn:this.attack,fadeOut:this.release,curve:this.curve}).connect(this.output);u.start(i,0,l.duration/h,n),t.isArray(this._activeSources[s])||(this._activeSources[s]=[]),this._activeSources[s].push(u),u.onended=function(){if(this._activeSources&&this._activeSources[s]){var t=this._activeSources[s].indexOf(u);-1!==t&&this._activeSources[s].splice(t,1)}}.bind(this)}}return this},t.Sampler.prototype.triggerRelease=function(e,i){this.log(\"triggerRelease\",e,i),Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var o=t.Frequency(e[n]).toMidi();if(this._activeSources[o]&&this._activeSources[o].length){var s=this._activeSources[o].shift();i=this.toSeconds(i),s.stop(i)}}return this},t.Sampler.prototype.releaseAll=function(t){for(var e in t=this.toSeconds(t),this._activeSources)for(var i=this._activeSources[e];i.length;){i.shift().stop(t)}return this},t.Sampler.prototype.sync=function(){return this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",1),this},t.Sampler.prototype.triggerAttackRelease=function(e,i,n,o){if(n=this.toSeconds(n),this.triggerAttack(e,n,o),t.isArray(i)&&t.isArray(e))for(var s=0;s<e.length;s++){var r=i[Math.min(s,i.length-1)];this.triggerRelease(e[s],n+this.toSeconds(r))}else this.triggerRelease(e,n+this.toSeconds(i));return this},t.Sampler.prototype.add=function(e,i,n){if(t.isNote(e)){var o=t.Frequency(e).toMidi();this._buffers.add(o,i,n)}else{if(isNaN(parseFloat(e)))throw new Error(\"Tone.Sampler: note must be the note's pitch. Instead got \"+e);this._buffers.add(e,i,n)}},Object.defineProperty(t.Sampler.prototype,\"loaded\",{get:function(){return this._buffers.loaded}}),t.Sampler.prototype.dispose=function(){for(var e in t.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null,this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this._activeSources=null,this},t.Sampler}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(38),i(6)],void 0===(o=function(t){\"use strict\";return t.PolySynth=function(){var e=t.defaults(arguments,[\"polyphony\",\"voice\"],t.PolySynth);t.Instrument.call(this,e),(e=t.defaultArg(e,t.Instrument.defaults)).polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this.assert(e.polyphony>0,\"polyphony must be greater than 0\"),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly(\"detune\");for(var i=0;i<e.polyphony;i++){var n=new e.voice(arguments[2],arguments[3]);if(!(n instanceof t.Monophonic))throw new Error(\"Synth constructor must be instance of Tone.Monophonic\");this.voices[i]=n,n.index=i,n.connect(this.output),n.hasOwnProperty(\"detune\")&&this.detune.connect(n.detune)}},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype._getClosestVoice=function(e,i){var n=this.voices.find(function(n){if(Math.abs(n.frequency.getValueAtTime(e)-t.Frequency(i))<1e-4&&n.getLevelAtTime(e)>1e-5)return n});return n||this.voices.slice().sort(function(t,i){var n=t.getLevelAtTime(e+this.blockTime),o=i.getLevelAtTime(e+this.blockTime);return n<1e-5&&(n=0),o<1e-5&&(o=0),n-o}.bind(this))[0]},t.PolySynth.prototype.triggerAttack=function(t,e,i){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var n=this._getClosestVoice(e,t);n.triggerAttack(t,e,i),this.log(\"triggerAttack\",n.index,t)}.bind(this)),this},t.PolySynth.prototype.triggerRelease=function(t,e){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var i=this._getClosestVoice(e,t);this.log(\"triggerRelease\",i.index,t),i.triggerRelease(e)}.bind(this)),this},t.PolySynth.prototype.triggerAttackRelease=function(e,i,n,o){if(n=this.toSeconds(n),this.triggerAttack(e,n,o),t.isArray(i)&&t.isArray(e))for(var s=0;s<e.length;s++){var r=i[Math.min(s,i.length-1)];this.triggerRelease(e[s],n+this.toSeconds(r))}else this.triggerRelease(e,n+this.toSeconds(i));return this},t.PolySynth.prototype.sync=function(){return this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",1),this},t.PolySynth.prototype.set=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){return t=this.toSeconds(t),this.voices.forEach(function(e){e.triggerRelease(t)}),this},t.PolySynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this.voices.forEach(function(t){t.dispose()}),this._writable(\"detune\"),this.detune.dispose(),this.detune=null,this.voices=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(21),i(39),i(53)],void 0===(o=function(t){\"use strict\";return t.PluckSynth=function(e){e=t.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise(\"pink\"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly([\"resonance\",\"dampening\"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.7},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable([\"resonance\",\"dampening\"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(30),i(41),i(39),i(1),i(9),i(21)],void 0===(o=function(t){\"use strict\";return t.NoiseSynth=function(e){e=t.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise(e.noise),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this._readOnly([\"noise\",\"envelope\"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:\"white\"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.envelope.attack+this.envelope.decay),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this.noise.stop(t+this.envelope.release),this},t.NoiseSynth.prototype.sync=function(){return this._syncMethod(\"triggerAttack\",0),this._syncMethod(\"triggerRelease\",0),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable([\"noise\",\"envelope\"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(21),i(48),i(9),i(41),i(30),i(3),i(26),i(5)],void 0===(o=function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(i){i=t.defaultArg(i,t.MetalSynth.defaults),t.Instrument.call(this,i),this.frequency=new t.Signal(i.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:\"highpass\",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=i.octaves,this._filterFreqScaler=new t.Scale(i.resonance,7e3),this.envelope=new t.Envelope({attack:i.envelope.attack,attackCurve:\"linear\",decay:i.envelope.decay,sustain:0,release:i.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var n=0;n<e.length;n++){var o=new t.FMOscillator({type:\"square\",modulationType:\"square\",harmonicity:i.harmonicity,modulationIndex:i.modulationIndex});o.connect(this._highpass),this._oscillators[n]=o;var s=new t.Multiply(e[n]);this._freqMultipliers[n]=s,this.frequency.chain(s,o.frequency)}this.octaves=i.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(e,i){return e=this.toSeconds(e),i=t.defaultArg(i,1),this.envelope.triggerAttack(e,i),this._oscillators.forEach(function(t){t.start(e)}),0===this.envelope.sustain&&this._oscillators.forEach(function(t){t.stop(e+this.envelope.attack+this.envelope.decay)}.bind(this)),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this._oscillators.forEach(function(e){e.stop(t+this.envelope.release)}.bind(this)),this},t.MetalSynth.prototype.sync=function(){return this._syncMethod(\"triggerAttack\",0),this._syncMethod(\"triggerRelease\",0),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,\"modulationIndex\",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,\"harmonicity\",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,\"resonance\",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(37),i(21),i(30)],void 0===(o=function(t){\"use strict\";return t.MembraneSynth=function(e){e=t.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly([\"oscillator\",\"envelope\"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:\"sine\"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:\"exponential\"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e);var n=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(n,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this.oscillator.start(e),0===this.envelope.sustain&&this.oscillator.stop(e+this.envelope.attack+this.envelope.decay),this},t.MembraneSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable([\"oscillator\",\"envelope\"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(38),i(1),i(5),i(25)],void 0===(o=function(t){\"use strict\";return t.FMSynth=function(e){e=t.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly([\"frequency\",\"harmonicity\",\"modulationIndex\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:\"sine\"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:\"square\"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"frequency\",\"harmonicity\",\"modulationIndex\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(68),i(12),i(1),i(5),i(25),i(14)],void 0===(o=function(t){\"use strict\";return t.DuoSynth=function(e){e=t.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly([\"voice0\",\"voice1\",\"frequency\",\"vibratoAmount\",\"vibratoRate\"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:\"sine\"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:\"sine\"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this},t.DuoSynth.prototype.getLevelAtTime=function(t){return(this.voice0.getLevelAtTime(t)+this.voice1.getLevelAtTime(t))/2},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"voice0\",\"voice1\",\"frequency\",\"vibratoAmount\",\"vibratoRate\"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(38),i(1),i(5),i(25),i(22),i(3)],void 0===(o=function(t){\"use strict\";return t.AMSynth=function(e){e=t.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator.set(e.oscillator),this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly([\"frequency\",\"harmonicity\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:\"sine\"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:\"square\"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable([\"frequency\",\"harmonicity\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(72),i(16)],void 0===(o=function(t){\"use strict\";return t.Sequence=function(){var e=t.defaults(arguments,[\"callback\",\"events\",\"subdivision\"],t.Sequence),i=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),t.isUndef(e.loopEnd)&&t.isDefined(i)&&(this._loopEnd=i.length*this._subdivision),this._loop=!0,t.isDefined(i))for(var n=0;n<i.length;n++)this.add(n,i[n])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:\"4n\"},Object.defineProperty(t.Sequence.prototype,\"subdivision\",{get:function(){return t.Ticks(this._subdivision).toSeconds()}}),t.Sequence.prototype.at=function(e,i){return t.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(t.isArray(i)){var n=Math.round(this._subdivision/i.length);i=new t.Sequence(this._tick.bind(this),i,t.Ticks(n))}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.Ticks(e*this._subdivision+this.startOffset).toSeconds()},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(73),i(80)],void 0===(o=function(t){return t.Pattern=function(){var e=t.defaults(arguments,[\"callback\",\"values\",\"pattern\"],t.Pattern);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,callback:t.noOp,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,\"index\",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,\"values\",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,\"value\",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,\"pattern\",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(18),i(12)],void 0===(o=function(t){\"use strict\";return t.Vibrato=function(){var e=t.defaults(arguments,[\"frequency\",\"depth\"],t.Vibrato);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly([\"frequency\",\"depth\"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:\"sine\"},Object.defineProperty(t.Vibrato.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable([\"frequency\",\"depth\"]),this.frequency=null,this.depth=null},t.Vibrato}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(12),i(15)],void 0===(o=function(t){\"use strict\";return t.Tremolo=function(){var e=t.defaults(arguments,[\"frequency\",\"depth\"],t.Tremolo);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly([\"frequency\",\"depth\"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:\"sine\",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(e){return this._lfoL.sync(e),this._lfoR.sync(e),t.Transport.syncSignal(this.frequency),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Tremolo.prototype,\"type\",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,\"spread\",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"frequency\",\"depth\"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(75),i(1),i(5),i(13)],void 0===(o=function(t){\"use strict\";return t.StereoWidener=function(){var e=t.defaults(arguments,[\"width\"],t.StereoWidener);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._readOnly([\"width\"]),this._twoTimesWidthMid=new t.Multiply(2),this._twoTimesWidthSide=new t.Multiply(2),this._midMult=new t.Multiply,this._twoTimesWidthMid.connect(this._midMult,0,1),this.midSend.chain(this._midMult,this.midReturn),this._oneMinusWidth=new t.Subtract,this._oneMinusWidth.connect(this._twoTimesWidthMid),this.context.getConstant(1).connect(this._oneMinusWidth,0,0),this.width.connect(this._oneMinusWidth,0,1),this._sideMult=new t.Multiply,this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult,0,1),this.sideSend.chain(this._sideMult,this.sideReturn)},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable([\"width\"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._twoTimesWidthMid.dispose(),this._twoTimesWidthMid=null,this._twoTimesWidthSide.dispose(),this._twoTimesWidthSide=null,this._oneMinusWidth.dispose(),this._oneMinusWidth=null,this},t.StereoWidener}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(15),i(32),i(3)],void 0===(o=function(t){\"use strict\";return t.StereoFeedbackEffect=function(){var e=t.defaults(arguments,[\"feedback\"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly([\"feedback\"])},t.extend(t.StereoFeedbackEffect,t.StereoEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable([\"feedback\"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(78),i(9),i(10),i(39),i(3),i(76)],void 0===(o=function(t){\"use strict\";return t.Reverb=function(){var e=t.defaults(arguments,[\"decay\"],t.Reverb);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this.decay=e.decay,this.preDelay=e.preDelay,this.connectEffect(this._convolver)},t.extend(t.Reverb,t.Effect),t.Reverb.defaults={decay:1.5,preDelay:.01},t.Reverb.prototype.generate=function(){return t.Offline(function(){var e=new t.Noise,i=new t.Noise,n=new t.Merge;e.connect(n.left),i.connect(n.right);var o=(new t.Gain).toMaster();n.connect(o),e.start(0),i.start(0),o.gain.setValueAtTime(0,0),o.gain.linearRampToValueAtTime(1,this.preDelay),o.gain.exponentialApproachValueAtTime(0,this.preDelay,this.decay-this.preDelay)}.bind(this),this.decay).then(function(t){return this._convolver.buffer=t.get(),this}.bind(this))},t.Reverb.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this},t.Reverb}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(12),i(23),i(1),i(32),i(18)],void 0===(o=function(t){\"use strict\";return t.PitchShift=function(){var e=t.defaults(arguments,[\"pitch\"],t.PitchShift);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:\"sawtooth\"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:\"sawtooth\",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:\"triangle\",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly(\"delayTime\"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,\"pitch\",{get:function(){return this._pitch},set:function(e){this._pitch=e;var i=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,i=t.intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,i=t.intervalToFrequencyRatio(e)-1),this._frequency.value=i*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,\"windowSize\",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable(\"delayTime\"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(74),i(1),i(18)],void 0===(o=function(t){\"use strict\";return t.PingPongDelay=function(){var e=t.defaults(arguments,[\"delayTime\",\"feedback\"],t.PingPongDelay);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly([\"delayTime\"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable([\"delayTime\"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(12),i(9),i(15)],void 0===(o=function(t){\"use strict\";return t.Phaser=function(){var e=t.defaults(arguments,[\"frequency\",\"octaves\",\"baseFrequency\"],t.Phaser);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly([\"frequency\",\"Q\"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(e,i,n){for(var o=new Array(e),s=0;s<e;s++){var r=this.context.createBiquadFilter();r.type=\"allpass\",n.connect(r.Q),i.connect(r.frequency),o[s]=r}return t.connectSeries.apply(t,o),o},Object.defineProperty(t.Phaser.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,\"baseFrequency\",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable([\"frequency\",\"Q\"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(58),i(15),i(26)],void 0===(o=function(t){\"use strict\";var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],n=[347,113,37];return t.JCReverb=function(){var o=t.defaults(arguments,[\"roomSize\"],t.JCReverb);t.StereoEffect.call(this,o),this.roomSize=new t.Signal(o.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var s=0;s<n.length;s++){var r=this.context.createBiquadFilter();r.type=\"allpass\",r.frequency.value=n[s],this._allpassFilters.push(r)}for(var a=0;a<e.length;a++){var l=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(l.resonance),l.resonance.value=i[a],this._allpassFilters[this._allpassFilters.length-1].connect(l),a<e.length/2?l.connect(this.effectReturnL):l.connect(this.effectReturnR),this._feedbackCombFilters.push(l)}this.roomSize.connect(this._scaleRoomSize),t.connectSeries.apply(t,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly([\"roomSize\"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable([\"roomSize\"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(53),i(15),i(1),i(19),i(10),i(42)],void 0===(o=function(t){\"use strict\";var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var n=t.defaults(arguments,[\"roomSize\",\"dampening\"],t.Freeverb);t.StereoEffect.call(this,n),this.roomSize=new t.Signal(n.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(n.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var o=0;o<i.length;o++){var s=this.context.createBiquadFilter();s.type=\"allpass\",s.frequency.value=i[o],this._allpassFiltersL.push(s)}for(var r=0;r<i.length;r++){var a=this.context.createBiquadFilter();a.type=\"allpass\",a.frequency.value=i[r],this._allpassFiltersR.push(a)}for(var l=0;l<e.length;l++){var h=new t.LowpassCombFilter(e[l]);l<e.length/2?this.effectSendL.chain(h,this._allpassFiltersL[0]):this.effectSendR.chain(h,this._allpassFiltersR[0]),this.roomSize.connect(h.resonance),this.dampening.connect(h.dampening),this._combFilters.push(h)}t.connectSeries.apply(t,this._allpassFiltersL),t.connectSeries.apply(t,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly([\"roomSize\",\"dampening\"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;this._allpassFiltersR=null;for(var n=0;n<this._combFilters.length;n++)this._combFilters[n].dispose(),this._combFilters[n]=null;return this._combFilters=null,this._writable([\"roomSize\",\"dampening\"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(32),i(1),i(18)],void 0===(o=function(t){\"use strict\";return t.FeedbackDelay=function(){var e=t.defaults(arguments,[\"delayTime\",\"feedback\"],t.FeedbackDelay);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime,e.maxDelay),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly([\"delayTime\"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25,maxDelay:1},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable([\"delayTime\"]),this.delayTime=null,this},t.FeedbackDelay}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(7)],void 0===(o=function(t){\"use strict\";return t.Distortion=function(){var e=t.defaults(arguments,[\"distortion\"],t.Distortion);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:\"none\"},Object.defineProperty(t.Distortion.prototype,\"distortion\",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(12),i(15),i(18)],void 0===(o=function(t){\"use strict\";return t.Chorus=function(){var e=t.defaults(arguments,[\"frequency\",\"delayTime\",\"depth\"],t.Chorus);t.StereoEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly([\"frequency\"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,type:\"sine\",spread:180},Object.defineProperty(t.Chorus.prototype,\"depth\",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,\"delayTime\",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,\"type\",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,\"spread\",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable(\"frequency\"),this.frequency=null,this},t.Chorus}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(7)],void 0===(o=function(t){\"use strict\";return t.Chebyshev=function(){var e=t.defaults(arguments,[\"order\"],t.Chebyshev);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:\"none\"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,\"order\",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),i=e.length,n=0;n<i;++n){var o=2*n/i-1;e[n]=0===o?0:this._getCoefficient(o,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(13),i(77)],void 0===(o=function(t){\"use strict\";return t.BitCrusher=function(){var e=t.defaults(arguments,[\"bits\"],t.BitCrusher);t.Effect.call(this,e);var i=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(i),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,\"bits\",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(57),i(42),i(8),i(9)],void 0===(o=function(t){\"use strict\";return t.AutoWah=function(){var e=t.defaults(arguments,[\"baseFrequency\",\"octaves\",\"sensitivity\"],t.AutoWah);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,\"peaking\"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly([\"gain\",\"Q\"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,\"baseFrequency\",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,\"sensitivity\",{get:function(){return t.gainToDb(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/t.dbToGain(e)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable([\"gain\",\"Q\"]),this.gain=null,this.Q=null,this},t.AutoWah}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(12),i(60)],void 0===(o=function(t){\"use strict\";return t.AutoPanner=function(){var e=t.defaults(arguments,[\"frequency\"],t.AutoPanner);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly([\"depth\",\"frequency\"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:\"sine\",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable([\"depth\",\"frequency\"]),this.frequency=null,this.depth=null,this},t.AutoPanner}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(8),i(12),i(9)],void 0===(o=function(t){\"use strict\";return t.AutoFilter=function(){var e=t.defaults(arguments,[\"frequency\",\"baseFrequency\",\"octaves\"],t.AutoFilter);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly([\"frequency\",\"depth\"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:\"sine\",depth:1,baseFrequency:200,octaves:2.6,filter:{type:\"lowpass\",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,\"type\",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,\"baseFrequency\",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,\"octaves\",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable([\"frequency\",\"depth\"]),this.frequency=null,this.depth=null,this},t.AutoFilter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(23),i(10),i(19),i(1),i(22),i(28)],void 0===(o=function(t){\"use strict\";t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],t.getContext(function(){this.set(e.defaults),this.context.listener=this}.bind(this))},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype.isListener=!0,t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,i){if(this.context.rawContext.listener.positionX){var n=this.now();this.context.rawContext.listener.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this.context.rawContext.listener.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this.context.rawContext.listener.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this.context.rawContext.listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,i,n,o,s){if(this.context.rawContext.listener.forwardX){var r=this.now();this.context.rawContext.listener.forwardX.setTargetAtTime(t,r,this._rampTimeConstant),this.context.rawContext.listener.forwardY.setTargetAtTime(e,r,this._rampTimeConstant),this.context.rawContext.listener.forwardZ.setTargetAtTime(i,r,this._rampTimeConstant),this.context.rawContext.listener.upX.setTargetAtTime(n,r,this._rampTimeConstant),this.context.rawContext.listener.upY.setTargetAtTime(o,r,this._rampTimeConstant),this.context.rawContext.listener.upZ.setTargetAtTime(s,r,this._rampTimeConstant)}else this.context.rawContext.listener.setOrientation(t,e,i,n,o,s);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,\"positionX\",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,\"positionY\",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,\"positionZ\",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,\"forwardX\",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,\"forwardY\",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,\"forwardZ\",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,\"upX\",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,\"upY\",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,\"upZ\",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on(\"init\",function(i){i.listener&&i.listener.isListener?t.Listener=i.listener:t.Listener=new e}),t.Listener}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(24)],void 0===(o=function(t){\"use strict\";return t.Draw=function(){t.call(this),this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e=t.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=e;){var i=this._events.shift();e-i.time<=this.expiration&&i.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(3)],void 0===(o=function(t){\"use strict\";var e={};return t.prototype.send=function(i,n){e.hasOwnProperty(i)||(e[i]=this.context.createGain()),n=t.defaultArg(n,0);var o=new t.Gain(n,t.Type.Decibels);return this.connect(o),o.connect(e[i]),o},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this,0,i),this},t.Context.on(\"init\",function(t){t.buses?e=t.buses:(e={},t.buses=e)}),t}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(4)],void 0===(o=function(t){\"use strict\";return t.CtrlRandom=function(){var e=t.defaults(arguments,[\"min\",\"max\"],t.CtrlRandom);t.call(this),this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,\"value\",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),n=i*t+(1-i)*e;return this.integer&&(n=Math.floor(n)),n}}),t.CtrlRandom}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0)],void 0===(o=function(t){\"use strict\";return t.CtrlMarkov=function(e,i){t.call(this),this.values=t.defaultArg(e,{}),this.value=t.defaultArg(i,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var e=this.values[this.value];if(t.isArray(e))for(var i=this._getProbDistribution(e),n=Math.random(),o=0,s=0;s<i.length;s++){var r=i[s];if(n>o&&n<o+r){var a=e[s];t.isObject(a)?this.value=a.value:this.value=a}o+=r}else this.value=e}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(e){for(var i=[],n=0,o=!1,s=0;s<e.length;s++){var r=e[s];t.isObject(r)?(o=!0,i[s]=r.probability):i[s]=1/e.length,n+=i[s]}if(o)for(var a=0;a<i.length;a++)i[a]=i[a]/n;return i},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(4)],void 0===(o=function(t){\"use strict\";return t.CtrlInterpolate=function(){var e=t.defaults(arguments,[\"values\",\"index\"],t.CtrlInterpolate);t.call(this),this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,\"value\",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],n=this.values[Math.ceil(t)];return this._interpolate(t-e,i,n)}}),t.CtrlInterpolate.prototype._interpolate=function(e,i,n){if(t.isArray(i)){for(var o=[],s=0;s<i.length;s++)o[s]=this._interpolate(e,i[s],n[s]);return o}if(t.isObject(i)){var r={};for(var a in i)r[a]=this._interpolate(e,i[a],n[a]);return r}return(1-e)*(i=this._toNumber(i))+e*(n=this._toNumber(n))},t.CtrlInterpolate.prototype._toNumber=function(e){return t.isNumber(e)?e:this.toSeconds(e)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(44),i(2)],void 0===(o=function(t){return t.Waveform=function(){var e=t.defaults(arguments,[\"size\"],t.Waveform);e.type=t.Analyser.Type.Waveform,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.Waveform,t.AudioNode),t.Waveform.defaults={size:1024},t.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.Waveform.prototype,\"size\",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.Waveform.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.Waveform}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(23),i(10),i(19),i(1),i(22),i(28),i(2)],void 0===(o=function(t){\"use strict\";return t.Panner3D=function(){var e=t.defaults(arguments,[\"positionX\",\"positionY\",\"positionZ\"],t.Panner3D);t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D,t.AudioNode),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:\"equalpower\",maxDistance:1e4,distanceModel:\"inverse\",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var n=this.now();this._panner.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var n=this.now();this._panner.orientationX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,\"positionX\",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,\"positionY\",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,\"positionZ\",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationX\",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationY\",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,\"orientationZ\",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty(\"panningModel\"),t.Panner3D._aliasProperty(\"refDistance\"),t.Panner3D._aliasProperty(\"rolloffFactor\"),t.Panner3D._aliasProperty(\"distanceModel\"),t.Panner3D._aliasProperty(\"coneInnerAngle\"),t.Panner3D._aliasProperty(\"coneOuterAngle\"),t.Panner3D._aliasProperty(\"coneOuterGain\"),t.Panner3D._aliasProperty(\"maxDistance\"),t.Panner3D.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(59),i(43),i(2)],void 0===(o=function(t){\"use strict\";return t.MultibandCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])},t.extend(t.MultibandCompressor,t.AudioNode),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable([\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(10),i(2)],void 0===(o=function(t){\"use strict\";return t.Mono=function(){t.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)},t.extend(t.Mono,t.AudioNode),t.Mono.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(52),i(51),i(43),i(2)],void 0===(o=function(t){\"use strict\";return t.MidSideCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly([\"mid\",\"side\"])},t.extend(t.MidSideCompressor,t.AudioNode),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"mid\",\"side\"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(44),i(2)],void 0===(o=function(t){\"use strict\";return t.Meter=function(){var e=t.defaults(arguments,[\"smoothing\"],t.Meter);t.AudioNode.call(this),this.smoothing=e.smoothing,this._rms=0,this.input=this.output=this._analyser=new t.Analyser(\"waveform\",256)},t.extend(t.Meter,t.AudioNode),t.Meter.defaults={smoothing:.8},t.Meter.prototype.getLevel=function(){for(var e=this._analyser.getValue(),i=0,n=0;n<e.length;n++){var o=e[n];i+=o*o}var s=Math.sqrt(i/e.length);return this._rms=Math.max(s,this._rms*this.smoothing),t.gainToDb(this._rms)},t.Meter.prototype.getValue=function(){return this._analyser.getValue()[0]},t.Meter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(43),i(2)],void 0===(o=function(t){\"use strict\";return t.Limiter=function(){var e=t.defaults(arguments,[\"threshold\"],t.Limiter);t.AudioNode.call(this),this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly(\"threshold\")},t.extend(t.Limiter,t.AudioNode),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable(\"threshold\"),this.threshold=null,this},t.Limiter}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(57),i(88),i(2)],void 0===(o=function(t){\"use strict\";return t.Gate=function(){var e=t.defaults(arguments,[\"threshold\",\"smoothing\"],t.Gate);t.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new t.Follower(e.smoothing),this._gt=new t.GreaterThan(t.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._follower,this._gt,this.output.gain)},t.extend(t.Gate,t.AudioNode),t.Gate.defaults={smoothing:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,\"threshold\",{get:function(){return t.gainToDb(this._gt.value)},set:function(e){this._gt.value=t.dbToGain(e)}}),Object.defineProperty(t.Gate.prototype,\"smoothing\",{get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t}}),t.Gate.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(44),i(2)],void 0===(o=function(t){return t.FFT=function(){var e=t.defaults(arguments,[\"size\"],t.FFT);e.type=t.Analyser.Type.FFT,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.FFT,t.AudioNode),t.FFT.defaults={size:1024},t.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.FFT.prototype,\"size\",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.FFT.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.FFT}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(59),i(3),i(2)],void 0===(o=function(t){\"use strict\";return t.EQ3=function(){var e=t.defaults(arguments,[\"low\",\"mid\",\"high\"],t.EQ3);t.AudioNode.call(this),this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly([\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"])},t.extend(t.EQ3,t.AudioNode),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}.apply(e,n))||(t.exports=o)},function(t,e,i){var n,o;n=[i(0),i(95),i(91),i(2)],void 0===(o=function(t){return t.Channel=function(){var e=t.defaults(arguments,[\"volume\",\"pan\"],t.PanVol);t.AudioNode.call(this,e),this._solo=this.input=new t.Solo(e.solo),this._panVol=this.output=new t.PanVol({pan:e.pan,volume:e.volume,mute:e.mute}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),this._readOnly([\"pan\",\"volume\"])},t.extend(t.Channel,t.AudioNode),t.Channel.defaults={pan:0,volume:0,mute:!1,solo:!1},Object.defineProperty(t.Channel.prototype,\"solo\",{get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}}),Object.defineProperty(t.Channel.prototype,\"muted\",{get:function(){return this._solo.muted||this.mute}}),Object.defineProperty(t.Channel.prototype,\"mute\",{get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}}),t.Channel.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable([\"pan\",\"volume\"]),this._panVol.dispose(),this._panVol=null,this.pan=null,this.volume=null,this._solo.dispose(),this._solo=null,this},t.Channel}.apply(e,n))||(t.exports=o)},function(t,e){t.exports=\"13.4.9\"},function(t,e){var i;i=function(){return this}();try{i=i||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"==typeof window&&(i=window)}t.exports=i},function(t,e,i){i(30),i(44),i(152),i(43),i(23),i(47),i(151),i(58),i(150),i(9),i(57),i(41),i(149),i(12),i(148),i(53),i(10),i(147),i(146),i(51),i(52),i(145),i(144),i(59),i(60),i(143),i(95),i(89),i(91),i(19),i(27),i(142),i(141),i(140),i(80),i(139),i(2),i(11),i(79),i(138),i(86),i(20),i(18),i(137),i(35),i(3),i(84),i(136),i(40),i(78),i(62),i(14),i(24),i(33),i(16),i(55),i(83),i(135),i(134),i(133),i(132),i(131),i(130),i(76),i(129),i(8),i(128),i(32),i(127),i(126),i(75),i(125),i(124),i(123),i(122),i(15),i(121),i(120),i(74),i(119),i(118),i(50),i(73),i(72),i(117),i(116),i(115),i(114),i(113),i(21),i(112),i(111),i(25),i(68),i(110),i(109),i(108),i(107),i(38),i(96),i(81),i(34),i(63),i(97),i(66),i(106),i(92),i(98),i(90),i(29),i(22),i(93),i(105),i(88),i(87),i(77),i(5),i(94),i(104),i(61),i(26),i(42),i(1),i(36),i(13),i(85),i(103),i(7),i(28),i(70),i(31),i(69),i(48),i(102),i(39),i(37),i(17),i(82),i(67),i(101),i(49),i(71),i(6),i(56),i(100),i(46),i(99),i(54),i(65),i(64),i(45),i(4),t.exports=i(0)}])});\n//# sourceMappingURL=Tone.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var isBrowser = (typeof window !== 'undefined')\n\nvar CLOCK_DEFAULTS = {\n  toleranceLate: 0.10,\n  toleranceEarly: 0.001\n}\n\n// ==================== Event ==================== //\nvar Event = function(clock, deadline, func) {\n  this.clock = clock\n  this.func = func\n  this._cleared = false // Flag used to clear an event inside callback\n\n  this.toleranceLate = clock.toleranceLate\n  this.toleranceEarly = clock.toleranceEarly\n  this._latestTime = null\n  this._earliestTime = null\n  this.deadline = null\n  this.repeatTime = null\n\n  this.schedule(deadline)\n}\n\n// Unschedules the event\nEvent.prototype.clear = function() {\n  this.clock._removeEvent(this)\n  this._cleared = true\n  return this\n}\n\n// Sets the event to repeat every `time` seconds.\nEvent.prototype.repeat = function(time) {\n  if (time === 0)\n    throw new Error('delay cannot be 0')\n  this.repeatTime = time\n  if (!this.clock._hasEvent(this))\n    this.schedule(this.deadline + this.repeatTime)\n  return this\n}\n\n// Sets the time tolerance of the event.\n// The event will be executed in the interval `[deadline - early, deadline + late]`\n// If the clock fails to execute the event in time, the event will be dropped.\nEvent.prototype.tolerance = function(values) {\n  if (typeof values.late === 'number')\n    this.toleranceLate = values.late\n  if (typeof values.early === 'number')\n    this.toleranceEarly = values.early\n  this._refreshEarlyLateDates()\n  if (this.clock._hasEvent(this)) {\n    this.clock._removeEvent(this)\n    this.clock._insertEvent(this)\n  }\n  return this\n}\n\n// Returns true if the event is repeated, false otherwise\nEvent.prototype.isRepeated = function() { return this.repeatTime !== null }\n\n// Schedules the event to be ran before `deadline`.\n// If the time is within the event tolerance, we handle the event immediately.\n// If the event was already scheduled at a different time, it is rescheduled.\nEvent.prototype.schedule = function(deadline) {\n  this._cleared = false\n  this.deadline = deadline\n  this._refreshEarlyLateDates()\n\n  if (this.clock.context.currentTime >= this._earliestTime) {\n    this._execute()\n  \n  } else if (this.clock._hasEvent(this)) {\n    this.clock._removeEvent(this)\n    this.clock._insertEvent(this)\n  \n  } else this.clock._insertEvent(this)\n}\n\nEvent.prototype.timeStretch = function(tRef, ratio) {\n  if (this.isRepeated())\n    this.repeatTime = this.repeatTime * ratio\n\n  var deadline = tRef + ratio * (this.deadline - tRef)\n  // If the deadline is too close or past, and the event has a repeat,\n  // we calculate the next repeat possible in the stretched space.\n  if (this.isRepeated()) {\n    while (this.clock.context.currentTime >= deadline - this.toleranceEarly)\n      deadline += this.repeatTime\n  }\n  this.schedule(deadline)\n}\n\n// Executes the event\nEvent.prototype._execute = function() {\n  if (this.clock._started === false) return\n  this.clock._removeEvent(this)\n\n  if (this.clock.context.currentTime < this._latestTime)\n    this.func(this)\n  else {\n    if (this.onexpired) this.onexpired(this)\n    console.warn('event expired')\n  }\n  // In the case `schedule` is called inside `func`, we need to avoid\n  // overrwriting with yet another `schedule`.\n  if (!this.clock._hasEvent(this) && this.isRepeated() && !this._cleared)\n    this.schedule(this.deadline + this.repeatTime) \n}\n\n// Updates cached times\nEvent.prototype._refreshEarlyLateDates = function() {\n  this._latestTime = this.deadline + this.toleranceLate\n  this._earliestTime = this.deadline - this.toleranceEarly\n}\n\n// ==================== WAAClock ==================== //\nvar WAAClock = module.exports = function(context, opts) {\n  var self = this\n  opts = opts || {}\n  this.tickMethod = opts.tickMethod || 'ScriptProcessorNode'\n  this.toleranceEarly = opts.toleranceEarly || CLOCK_DEFAULTS.toleranceEarly\n  this.toleranceLate = opts.toleranceLate || CLOCK_DEFAULTS.toleranceLate\n  this.context = context\n  this._events = []\n  this._started = false\n}\n\n// ---------- Public API ---------- //\n// Schedules `func` to run after `delay` seconds.\nWAAClock.prototype.setTimeout = function(func, delay) {\n  return this._createEvent(func, this._absTime(delay))\n}\n\n// Schedules `func` to run before `deadline`.\nWAAClock.prototype.callbackAtTime = function(func, deadline) {\n  return this._createEvent(func, deadline)\n}\n\n// Stretches `deadline` and `repeat` of all scheduled `events` by `ratio`, keeping\n// their relative distance to `tRef`. In fact this is equivalent to changing the tempo.\nWAAClock.prototype.timeStretch = function(tRef, events, ratio) {\n  events.forEach(function(event) { event.timeStretch(tRef, ratio) })\n  return events\n}\n\n// Removes all scheduled events and starts the clock \nWAAClock.prototype.start = function() {\n  if (this._started === false) {\n    var self = this\n    this._started = true\n    this._events = []\n\n    if (this.tickMethod === 'ScriptProcessorNode') {\n      var bufferSize = 256\n      // We have to keep a reference to the node to avoid garbage collection\n      this._clockNode = this.context.createScriptProcessor(bufferSize, 1, 1)\n      this._clockNode.connect(this.context.destination)\n      this._clockNode.onaudioprocess = function () {\n        process.nextTick(function() { self._tick() })\n      }\n    } else if (this.tickMethod === 'manual') null // _tick is called manually\n\n    else throw new Error('invalid tickMethod ' + this.tickMethod)\n  }\n}\n\n// Stops the clock\nWAAClock.prototype.stop = function() {\n  if (this._started === true) {\n    this._started = false\n    this._clockNode.disconnect()\n  }  \n}\n\n// ---------- Private ---------- //\n\n// This function is ran periodically, and at each tick it executes\n// events for which `currentTime` is included in their tolerance interval.\nWAAClock.prototype._tick = function() {\n  var event = this._events.shift()\n\n  while(event && event._earliestTime <= this.context.currentTime) {\n    event._execute()\n    event = this._events.shift()\n  }\n\n  // Put back the last event\n  if(event) this._events.unshift(event)\n}\n\n// Creates an event and insert it to the list\nWAAClock.prototype._createEvent = function(func, deadline) {\n  return new Event(this, deadline, func)\n}\n\n// Inserts an event to the list\nWAAClock.prototype._insertEvent = function(event) {\n  this._events.splice(this._indexByTime(event._earliestTime), 0, event)\n}\n\n// Removes an event from the list\nWAAClock.prototype._removeEvent = function(event) {\n  var ind = this._events.indexOf(event)\n  if (ind !== -1) this._events.splice(ind, 1)\n}\n\n// Returns true if `event` is in queue, false otherwise\nWAAClock.prototype._hasEvent = function(event) {\n return this._events.indexOf(event) !== -1\n}\n\n// Returns the index of the first event whose deadline is >= to `deadline`\nWAAClock.prototype._indexByTime = function(deadline) {\n  // performs a binary search\n  var low = 0\n    , high = this._events.length\n    , mid\n  while (low < high) {\n    mid = Math.floor((low + high) / 2)\n    if (this._events[mid]._earliestTime < deadline)\n      low = mid + 1\n    else high = mid\n  }\n  return low\n}\n\n// Converts from relative time to absolute time\nWAAClock.prototype._absTime = function(relTime) {\n  return relTime + this.context.currentTime\n}\n\n// Converts from absolute time to relative time \nWAAClock.prototype._relTime = function(absTime) {\n  return absTime - this.context.currentTime\n}","var WAAClock = require('./lib/WAAClock')\n\nmodule.exports = WAAClock\nif (typeof window !== 'undefined') window.WAAClock = WAAClock\n","import WAAClock from 'waaclock';\n\nexport class Pulse {\n    defaults = {\n        bpm: 120,\n        cycle: 4,\n        delay: 0\n    }\n    props: any;\n    context: any;\n    clock: any;\n    events = [];\n    callbackAtTime = false;\n    constructor(\n        props = {}\n    ) {\n        this.props = Object.assign({}, this.defaults, props);\n        this.context = this.props.context || new AudioContext();\n        this.clock = this.props.clock || new WAAClock(this.context, { toleranceEarly: 0.1, toleranceLate: 0.1 });\n    }\n\n    getMeasureLength(bpm = this.props.bpm, beatsPerMeasure = this.props.cycle) {\n        return 60 / bpm * beatsPerMeasure;\n    }\n\n    arrayPulse(children, length = 1, path = [], start = 0, callback, deadline?) {\n        //TODO: return promise on next one (for chaining)\n        if (!Array.isArray(children)) {\n            if (children === 0) {\n                return 0;\n            }\n            const item = {\n                value: children,\n                length,\n                path,\n                start,\n                pulse: this,\n                cycle: this.props.cycle,\n                timeout: null\n            };\n\n            start += this.props.delay; // TODO: be able to add delay from arrayPulse fn directly\n            if (this.callbackAtTime) {\n                start += deadline ? deadline : this.context.currentTime;\n                item.timeout = this.clock.callbackAtTime((event) =>\n                    callback(Object.assign(item, { event, deadline: event.deadline })), start);\n            } else {\n                start += (deadline || this.context.currentTime) - this.context.currentTime;\n                item.timeout = this.clock.setTimeout((event) =>\n                    callback(Object.assign(item, { event, deadline: event.deadline })), start);\n            }\n            this.events.push(item.timeout);\n            return item;\n        }\n        const childLength = length / children.length;\n        return {\n            length,\n            children: children.map((el, i) =>\n                this.arrayPulse(\n                    el,\n                    childLength,\n                    path.concat([i]),\n                    start + i * childLength,\n                    callback,\n                    deadline\n                )\n            )\n        };\n    }\n\n    tickArray(array, callback, deadline?, length?) {\n        array.push(1);\n        const l = length || this.getMeasureLength() * array.length;\n        this.start();\n        return new Promise((resolve, reject) => {\n            this.arrayPulse(array, l, [], 0, (tick, start) => {\n                if (tick.path[0] === array.length - 1) {\n                    resolve(tick);\n                } else {\n                    callback(tick, start);\n                }\n            }, deadline);\n        });\n    }\n\n\n    start() {\n        // console.log('start with', this.events.length, 'events');\n        const criticalEvents = 6000;\n        if (this.events.length > criticalEvents) {\n            console.warn('more than ', criticalEvents, 'events received. Consider using less \"times\" to keep the timing precies');\n        }\n        this.clock.start();\n    }\n\n    stop() {\n        this.clock.stop();\n    }\n\n    changeTempo(newTempo, timeout = 0.2) {\n        const factor = this.props.bpm / newTempo;\n        this.props.bpm = newTempo;\n        const events = this.events.filter(e => {\n            return e.deadline - this.context.currentTime > timeout;\n        });\n        // TODO: stretch durations?!\n        this.clock.timeStretch(this.context.currentTime, events, factor)\n    }\n}","import { Synthesizer } from './instruments/Synthesizer';\n\nexport class Metronome {\n    sampler: any;\n    ready: Promise<any[]>;\n    synth: Synthesizer;\n\n    constructor(mix) {\n        this.synth = new Synthesizer({ type: 'sine', gain: 1, mix });\n        this.ready = this.synth.ready;\n    }\n    count(pulse, bars = 1) {\n        const count = new Array(bars).fill(\n            [new Array(pulse.props.cycle).fill(1)]\n        );\n        return pulse.tickArray(count, ({ path, deadline }) => {\n            this.synth.playKeys([path[2] === 0 ? 90 : 78], { deadline, duration: 0.01, attack: .01, release: .01, decay: .01, sustain: 1 });\n        });\n    }\n}","import { Pulse } from './Pulse';\nimport { Musician } from './musicians/Musician';\nimport { Sheet } from './sheet/Sheet';\nimport { Metronome } from './Metronome';\nimport { Logger } from './util/Logger';\n\n/** Band */\nexport default class Band {\n    props: any;\n    pulse: Pulse;\n    mix: any;\n    musicians: Musician[];\n    defaults = {\n        cycle: 4,\n        division: 3, // rhythm division (3=ternary,2=binary)\n        transpose: 0,\n        style: 'Medium Swing',\n    }\n    context: AudioContext;\n    onMeasure: (measure, tick?) => {};\n    metronome: Metronome;\n\n    constructor({ context, musicians, onMeasure }: any = {}) {\n        this.context = context || new AudioContext();\n        this.onMeasure = onMeasure;\n        this.musicians = musicians || [];\n        this.mix = this.setupMix(this.context);\n        this.metronome = new Metronome(this.mix);\n    }\n\n    setupMix(context) {\n        const mix = context.createGain();\n        mix.gain.value = 0.9;\n        mix.connect(context.destination);\n        return mix;\n    }\n\n    addMember(musician) {\n        this.musicians = this.musicians.concat(musician);\n    }\n\n    ready(): Promise<any[]> {\n        return Promise.all([this.resume()].concat(this.musicians.map(m => m.ready)));\n    }\n\n    resume() { // https://goo.gl/7K7WLu\n        return this.context.resume().then(() => this.context);\n    }\n\n    comp(sheet, settings) {\n        if (this.pulse) {\n            this.pulse.stop();\n        }\n        Logger.logLegend();\n        Logger.logSheet(sheet);\n        let measures = Sheet.render(sheet, settings.render);\n        measures = measures.concat(measures);\n        settings = Object.assign(this.defaults, settings, { context: this.context });\n        this.play(measures, settings);\n    }\n\n    play(measures, settings) {\n        this.ready().then(() => {\n            this.pulse = settings.pulse || new Pulse(settings);\n            return this.count(this.pulse, settings.metronome ? null : 0)\n        }).then((tick) => {\n            /* settings.deadline = tick.deadline; */\n            if (this.onMeasure) {\n                // TODO: add onChord for setting tonics + circle chroma etc\n                this.pulse.tickArray(measures.map(measure => ({ measure })),\n                    (tick) => this.onMeasure(tick.value.measure, tick));\n            }\n            measures = measures.map(m => m.chords ? m.chords : m);\n            console.log('Band#play', settings);\n            const musicians = (settings.musicians || this.musicians);\n            musicians.forEach(musician => musician.play({ pulse: this.pulse, measures, settings }));\n            this.pulse.start();\n        });\n    }\n\n    count(pulse, bars = 1) {\n        if (pulse.getMeasureLength() < 1.5) {\n            bars *= 2; //double countin bars when countin would be shorter than 1.5s\n        }\n        return this.metronome.count(pulse, bars);\n    }\n}\n","import { Instrument } from \"../instruments/Instrument\";\n\nexport class Musician {\n    name = 'Musician';\n    ready: Promise<any>;\n    gain = 1;\n    instrument: Instrument;\n    constructor(instrument) {\n        if (!instrument) {\n            console.warn('musician has no instrument', this);\n        }\n        this.instrument = instrument;\n        this.ready = this.instrument ? this.instrument.ready : Promise.resolve();\n    }\n    play({ pulse, measures, settings }) {\n        console.log('play..', pulse, measures, settings);\n    }\n\n    getGain(value = 1) {\n        return value * this.gain * this.instrument.gain;\n    }\n}","import { offbeatReducer, resolveChords, randomDelay, getDuration } from '../util/util';\nimport { Musician } from './Musician';\nimport { Instrument } from '../instruments/Instrument';\nimport { swing } from '../grooves/swing';\nimport { Voicing, VoiceLeadingOptions } from '../harmony/Voicing';\nimport { Note } from 'tonal';\n\nexport default class Pianist extends Musician {\n    name = 'Pianist';\n    playedNotes = [];\n    playedChords = [];\n    defaults = { groove: swing };\n    min = Math.min;\n    rollFactor = 1; // how much keyroll effect? controls interval between notes\n    props: any;\n\n    voicingOptions: VoiceLeadingOptions = {}\n    instrument: Instrument;\n\n    constructor(instrument, props = {}) {\n        super(instrument);\n        this.props = Object.assign({}, this.defaults, props || {});\n    }\n\n    play({ pulse, measures, settings }) {\n        const groove = settings.groove || this.defaults.groove;\n        const grooveKey = 'chords';\n        this.voicingOptions = {\n            ...this.voicingOptions,\n            ...settings.voicings || {}\n        }\n        // if no groove or groove without chords, or exact, play whats there\n        // TODO: exact timing is false with metronome\n        if (settings.exact || !groove || !groove[grooveKey]) {\n            if (!groove[grooveKey]) {\n                console.warn('Groove has no chords, Pianist will play exact.', groove);\n            }\n            measures = measures\n                .map((pattern, i) => resolveChords(pattern, measures, [i]));\n            return pulse.tickArray(measures, ({ value, deadline }) => {\n                const fraction = getDuration(value.divisions, 1);\n                // TODO: find out why value fraction is NaN\n                const duration = fraction * pulse.getMeasureLength();\n                this.playChord(value.chord || value, { deadline: deadline, duration, pulse });\n            });\n        }\n        // else, play groovy\n        const pattern = groove[grooveKey];\n        measures = measures\n            // generate random patterns\n            .map(measure => pattern({ measures, pulse, measure, settings })\n                .slice(0, Math.floor(settings.cycle)))\n            // fill in chords\n            .map((pattern, i) => resolveChords(pattern, measures, [i]))\n            // fix chords at last offbeat\n            .reduce(offbeatReducer(settings), []);\n        pulse.tickArray(measures, ({ path, value, deadline }) => {\n            const measureLength = pulse.getMeasureLength();\n            const concurrency = settings.bpm / (this.rollFactor || 1);\n            let interval = settings.arpeggio ? measureLength / settings.cycle : Math.random() / (concurrency * 20);\n            if (path[0] % 2 === 0 && !path[1] && !path[2]) {\n                interval = Math.random() / concurrency;\n            }\n            const duration = settings.arpeggio ? interval : value.fraction * measureLength;\n            const slice = settings.arpeggio ? Math.ceil(value.fraction / 1000 * 4) : null;\n            const gain = this.getGain(value.gain);\n            this.playChord(value.chord, { deadline, gain, duration, interval, slice, pulse });\n        }, settings.deadline);\n    }\n\n    getLastVoicing() {\n        return this.playedNotes.length ? this.playedNotes[this.playedNotes.length - 1] : null;\n    }\n\n    // plays the given notes at the given interval\n    playNotes(scorenotes, { deadline, interval, gain, duration, pulse }) {\n        this.playedNotes.push([].concat(scorenotes));\n        this.instrument.playNotes(scorenotes, { deadline, interval, gain, duration, pulse });\n    }\n\n    playChord(chord, settings) {\n        if (chord === 'x') { // repeat\n            chord = this.playedChords[this.playedChords.length - 1];\n        }\n        if (!chord || chord === '0') {\n            this.playedChords.push('')\n            return;\n        }\n        this.playedChords.push(chord);\n\n        let notes = Voicing.getNextVoicing(chord, this.getLastVoicing(), this.voicingOptions);\n        notes = notes.map(note => Note.simplify(note));\n\n        settings.deadline += 0.02 + randomDelay(5);\n        this.playNotes(notes, settings);\n    }\n}\n","import { Musician } from './Musician';\nimport { swing } from '../grooves/swing';\nimport { randomDelay } from '../util/util';\n\nexport default class Drummer extends Musician {\n    name = 'Drummer';\n    set = {\n        kick: 0,\n        snare: 1,\n        hihat: 2,\n        ride: 3,\n        crash: 4,\n        rimshot: 5\n    }\n    defaults = { groove: swing }\n\n    constructor(instrument) {\n        super(instrument);\n    }\n\n    play({ measures, pulse, settings }) {\n        const groove = settings.groove || this.defaults.groove;\n        Object.keys(groove)\n            .filter(t => Object.keys(this.set).includes(t)) // only use drum set patterns\n            .forEach(key => {\n                const patterns = measures\n                    .map((measure, index) => groove[key]({ measures, index, measure, settings, pulse })\n                        .slice(0, Math.floor(settings.cycle)));\n                pulse.tickArray(patterns, ({ deadline, value }) => {\n                    deadline += randomDelay(5);\n                    this.instrument.playKeys([this.set[key]], { deadline, gain: this.getGain(value) });\n                }, settings.deadline);\n            });\n    }\n}","import { resolveChords, randomElement, randomDelay } from '../util/util';\nimport { Musician } from './Musician';\nimport { Chord, Distance } from 'tonal';\nimport { swing } from '../grooves/swing';\nimport { Harmony } from '../harmony/Harmony';\n\nexport default class Bassist extends Musician {\n    name = 'Bassist';\n    styles: { [key: string]: any };\n    defaults = { groove: swing }\n    playedChords: string[] = [];\n\n    constructor(instrument) {\n        super(instrument);\n    }\n\n    play({ measures, pulse, settings }) {\n        const groove = settings.groove || this.defaults.groove;\n        const pattern = groove['bass'];\n        if (!pattern) {\n            console.warn('no bass pattern found in groove', groove);\n            return;\n        }\n        measures = measures\n            .map(measure => pattern({ measures, measure, settings, pulse }).slice(0, Math.floor(settings.cycle)))\n            .map((pattern, i) => resolveChords(pattern, measures, [i]));\n        pulse.tickArray(measures, (tick) => {\n            this.playBass(tick, measures, pulse);\n        }, settings.deadline);\n    }\n\n    getStep(step, chord, octave = 2) {\n        const tokens = Chord.tokenize(Harmony.getTonalChord(chord));\n        const interval = Chord.intervals(tokens[1]).find(i => parseInt(i[0]) === step);\n        return Distance.transpose(tokens[0] + octave, interval);\n    }\n\n    playBass({ value, cycle, path, deadline, interval }, measures, pulse) {\n        let chord = value.chord;\n        if (chord === 'N.C.') {\n            return;\n        }\n        if (chord === 'x') {\n            chord = this.playedChords[this.playedChords.length - 1];\n        }\n        if (!chord || chord === '0') {\n            this.playedChords.push('');\n            return;\n        }\n        this.playedChords.push(chord);\n        let note;\n        const steps = [1, randomElement([3, 5]), 1, randomElement([3, 5])];\n        const octave = 2;\n        if (value.value === 1 && chord.split('/').length > 1) {\n            note = chord.split('/')[1] + octave;\n        } else {\n            note = this.getStep(steps[path[1]], Harmony.getTonalChord(chord), octave);\n        }\n        const duration = value.fraction * pulse.getMeasureLength();\n\n        deadline += randomDelay(10);\n        this.instrument.playNotes([note], { deadline, interval, gain: this.getGain() * .7, duration, pulse });\n    }\n}","import { Instrument } from './Instrument';\nimport { adsr } from '../util/util';\n\nexport class Sampler extends Instrument {\n    buffers = {};\n    context: AudioContext;\n    overlap: any;\n    samples: Promise<any[]>;\n    sources: any;\n    gainNode: GainNode;\n    duration = 10000;\n    type = 'sine';\n    gain = 1;\n    attack = 0;\n    decay = 0;\n    sustain = 1;\n    release = .2;\n\n    constructor(options: any = {}) {\n        super(options);\n        this.gain = options.gain || this.gain;\n        this.gainNode = this.context.createGain();\n        this.gainNode.connect(this.context.destination);\n        this.duration = options.duration || this.duration;\n        // this.overlap = options.overlap;\n        if (options.samples) {\n            this.sources = options.samples;\n            this.ready = this.loadSources(options.samples)\n        }\n    }\n\n    // returns buffer from buffer cache or loads buffer data from source\n    getBuffer(src, context = this.context) {\n        if (this.buffers[src] && this.buffers[src].context === context) {\n            // console.log('buffer already present');\n            return Promise.resolve(this.buffers[src].buffer);\n        }\n        return fetch(src)\n            .then(res => res.arrayBuffer())\n            .then(buffer => {\n                return new Promise((resolve, reject) => {\n                    context.decodeAudioData(buffer, (decodedData) => {\n                        this.buffers[src] = { buffer: decodedData, context };\n                        resolve(decodedData);\n                    });\n                })\n            });\n    }\n\n    getSource(buffer, connect?) {\n        const source = this.context.createBufferSource();\n        connect = connect || this.gainNode;\n        source.buffer = buffer;\n        source.connect(connect);\n        return source;\n    }\n\n    getSources(sources, context = this.context) {\n        if (!this.hasLoaded(sources)) {\n            console.error('not all sources loaded!!!');\n            return [];\n        }\n        return sources.map(source => this.getSource(this.buffers[source].buffer));\n    }\n\n    // loads a sound file into the context\n    loadSource(src, context = this.context) {\n        return this.getBuffer(src, context)\n            .then(decodedData => this.getSource(decodedData));\n    }\n\n    // loads multiple sources into the context\n    loadSources(sources, context = this.context) {\n        sources.forEach((source, i) => {\n            if (!source) {\n                console.warn(`note at index ${i} cannot be played!`);\n            }\n        })\n        return Promise.all(sources.filter(source => !!source).map(source => this.loadSource(source, context)));\n    }\n\n    hasLoaded(sources, context = this.context) {\n        return sources.reduce((allLoaded, src) => {\n            return allLoaded && this.buffers[src] && this.buffers[src].context === context\n        }, true);\n    }\n\n    playSounds(sounds, deadline = this.context.currentTime, interval = 0) {\n        sounds.forEach((sound, i) => sound.start(deadline + interval * i))\n    }\n\n    playSource(source, settings) {\n        const gainNode = this.context.createGain();\n        if (!this.buffers[source]) {\n            console.warn('no buffer found for source', source);\n            return;\n        }\n        const sound = this.getSource(this.buffers[source].buffer, gainNode);\n        const [attack, decay, sustain, release, duration, gain] =\n            [\n                settings.attack || this.attack,\n                settings.decay || this.decay,\n                settings.sustain || this.sustain,\n                settings.release || this.release,\n                (settings.duration || this.duration) / 1000,\n                (settings.gain || 1) * this.gain\n            ]\n        const time = settings.deadline || this.context.currentTime;\n        //gainNode.gain.value = typeof settings.gain === 'number' ? settings.gain : this.gain;\n        gainNode.connect(this.mix);\n        adsr({ attack, decay, sustain, release, gain, duration }, time, gainNode.gain);\n        this.playSounds([sound], time) //, settings.interval\n    }\n\n    /* playSources(sources, deadline = 0, interval = 0) {\n        if (this.hasLoaded(sources, this.context)) {\n            this.playSounds(this.getSources(sources, this.context), deadline, interval)\n        } else {\n            console.warn('need to load');\n            this.loadSources(sources, this.context)\n                .then(sounds => this.playSounds(sounds, deadline, interval));\n        }\n    } */\n\n    playKeys(keys: number[], settings) {\n        super.playKeys(keys, settings);\n        keys.forEach((key, index) => {\n            if (settings.delay) {\n                settings.deadline += settings.delay;\n            }\n            this.playSource(this.sources[key], settings);\n        });\n    }\n}","export class Kick {\n    osc: any;\n    context: any;\n    gain: any;\n    constructor(context) {\n        this.context = context;\n    }\n    setup() {\n        this.osc = this.context.createOscillator();\n        this.gain = this.context.createGain();\n        this.osc.connect(this.gain);\n        this.gain.connect(this.context.destination)\n    }\n    trigger(time) {\n        this.setup();\n\n        this.osc.frequency.setValueAtTime(150, time);\n        this.gain.gain.setValueAtTime(1, time);\n\n        this.osc.frequency.exponentialRampToValueAtTime(0.01, time + 0.5);\n        this.gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);\n\n        this.osc.start(time);\n\n        this.osc.stop(time + 0.5);\n    }\n}","export class Snare {\n    context: any;\n    noise: any;\n    noiseEnvelope: any;\n    osc: any;\n    oscEnvelope: any;\n    constructor(context) {\n        this.context = context;\n    }\n    noiseBuffer() {\n        var bufferSize = this.context.sampleRate;\n        var buffer = this.context.createBuffer(1, bufferSize, this.context.sampleRate);\n        var output = buffer.getChannelData(0);\n\n        for (var i = 0; i < bufferSize; i++) {\n            output[i] = Math.random() * 2 - 1;\n        }\n\n        return buffer;\n    }\n    setup() {\n        this.noise = this.context.createBufferSource();\n        this.noise.buffer = this.noiseBuffer();\n        var noiseFilter = this.context.createBiquadFilter();\n        noiseFilter.type = 'highpass';\n        noiseFilter.frequency.value = 1000;\n        this.noise.connect(noiseFilter);\n\n        this.noiseEnvelope = this.context.createGain();\n        noiseFilter.connect(this.noiseEnvelope);\n\n        this.noiseEnvelope.connect(this.context.destination);\n        this.osc = this.context.createOscillator();\n        this.osc.type = 'triangle';\n\n        this.oscEnvelope = this.context.createGain();\n        this.osc.connect(this.oscEnvelope);\n        this.oscEnvelope.connect(this.context.destination);\n    };\n    trigger(time) {\n        this.setup();\n\n        this.noiseEnvelope.gain.setValueAtTime(1, time);\n        this.noiseEnvelope.gain.exponentialRampToValueAtTime(0.01, time + 0.2);\n        this.noise.start(time)\n\n        this.osc.frequency.setValueAtTime(100, time);\n        this.oscEnvelope.gain.setValueAtTime(0.7, time);\n        this.oscEnvelope.gain.exponentialRampToValueAtTime(0.01, time + 0.1);\n        this.osc.start(time)\n\n        this.osc.stop(time + 0.2);\n        this.noise.stop(time + 0.2);\n    };\n}","import { Instrument } from \"./Instrument\";\nimport { Kick } from \"./Kick\";\nimport { Snare } from \"./Snare\";\n\nexport class PlasticDrums extends Instrument {\n    kick: Kick;\n    snare: Snare;\n    keys: any[];\n\n    constructor(options) {\n        super(options);\n        this.keys = [\n            new Kick(this.context),\n            new Snare(this.context)\n        ];\n    }\n\n    playKeys(keys, { deadline, gain, value }) {\n        const sounds = keys.filter(key => !!this.keys[key]).map(key => this.keys[key]);\n        if (sounds.length < keys.length) {\n            const missing = keys.filter(key => !this.keys[key]);\n            console.warn('PlasticDrums missing keys:', missing);\n        }\n        sounds.forEach(sound => sound.trigger(deadline));\n    }\n}","\ndeclare type ImprovisationRuleFactory<T> = () => ImprovisationRule<T>;\n\ndeclare type ImprovisationRuleFactories = { [key: string]: ImprovisationRuleFactory<any> };\n\ndeclare type DynamicImprovisationRule<T> = (factories: { [key: string]: ImprovisationRuleFactory<any> }) => T;\n\ndeclare type ImprovisationRule<T> = T | DynamicImprovisationRule<T>;\nexport declare type ImprovisationRules = { [key: string]: ImprovisationRule<any> };\n\ndeclare type ImprovisationReducer = (rules: ImprovisationRules) => ImprovisationRules;\n\nexport class Improvisation {\n    cache = {};\n    constructor(public rules: ImprovisationRules) { }\n\n    get(key: string, fromCache = false) {\n        if (fromCache) {\n            return this.cache[key];\n        }\n        let rule = this.rules[key];\n        if (rule === undefined) {\n            console.error('could not resolve key', key, '!');\n        }\n        if (typeof rule === 'function') {\n            rule = rule(this.getRuleFactories(key));\n        }\n        this.cache[key] = rule;\n        return rule;\n    }\n\n    enhance(rules: ImprovisationRules) {\n        return new Improvisation(Object.assign({},\n            this.rules,\n            rules\n        ));\n    }\n\n    mutate(reducer: ImprovisationReducer) {\n        this.rules = Object.assign({},\n            this.rules,\n            reducer(this.getRuleFactories())\n        );\n        return this;\n    }\n\n    getRuleFactories(originKey?: string): ImprovisationRuleFactories {\n        return Object.keys(this.rules)\n            .map(key => ({ key, factory: () => this.get(key) }))\n            .reduce((factories, { key, factory }) => (\n                Object.assign({},\n                    factories,\n                    { [key]: factory },\n                    (originKey ? { [originKey]: () => this.cache[originKey] } : {})\n                )\n            ), {})\n    }\n}\n\n/**\n * \n * methods: { [method: string]: ImprovisationRules } = {\n        guideTones: {\n            pattern: [3, 7]\n        },\n        flippedGuideTones: {\n            pattern: [3, 7],\n            flip: true,\n        },\n        chordTones: {\n            pattern: [1, 3, 7],\n            variance: .5,\n            variety: .5,\n            drill: .5,\n            flip: ({ drill }) => Math.random() * Math.abs(drill()) > .5,\n        }\n    }\n */","import { swing } from \"../grooves/swing\";\nimport { Note } from 'tonal';\nimport { getPatternInChord, randomElement, transposeToRange, getDigitalPattern, getRangePosition, otherDirection, getStepInChord } from \"../util/util\";\nimport { Improvisation } from \"./Improvisation\";\nimport { Harmony } from '../harmony/Harmony';\n\nexport const permutator = new Improvisation({\n    groove: swing,\n    groovePattern: ({ groove }) => groove()['solo'] || ((m) => {\n        return m.measure.map(() => [1]);\n    }),\n    octave: 4,\n    reach: 1,\n    lineBreaks: false,\n    direction: null,\n    force: false,\n    flip: false, // if true, the voice leading will be stretched out\n    playedNotes: [],\n    fixRange: true,\n    startRandom: false,\n    range: ['Bb3', 'Bb5'],\n    /* chanceCurve: () => (distance, length) => (length - distance) * 10, */\n    firstNoteInPattern: ({ pattern, chord }) => getPatternInChord([pattern()[0]], chord()),\n    firstNote: ({ randomNote, firstNoteInPattern, startRandom, octave }) => {\n        return startRandom() ? randomNote() : firstNoteInPattern() + octave();\n    },\n    lastNote: ({ playedNotes }) => playedNotes().length ? playedNotes()[0] : null,\n    material: ({ pattern, chord }) => getPatternInChord(pattern(), chord()),\n    randomNote: ({ material, octave }) => randomElement(material()) + octave(),\n    nextNotes: ({ fixRange, firstNote, chord, reach, lineBreaks, lastNote, range, material, direction, force, flip }) => {\n        let note;\n        if (!lastNote() || lineBreaks()) {\n            note = firstNote();\n        } else {\n            const choices = material();\n            if (!choices.length) {\n                console.warn('no choice..')\n                return;\n            }\n            let targets = Harmony.getNearestTargets(lastNote(), material(), direction(), flip());\n            targets = targets.slice(0, reach());\n            note = randomElement(targets);\n            note = Note.simplify(note, true);\n        }\n        if (fixRange()) {\n            note = transposeToRange([note], range())[0];\n        }\n        const step = getStepInChord(note, chord());\n        /* console.log(`${step} in ${chord()} = ${note}`); */\n        return [note];\n    }\n});\n\n/** MODIFIERS */\n\nconst getStraightBar = (notes, cycle = 4) => {\n    return new Array(cycle).fill(\n        new Array(Math.ceil(notes / cycle)).fill(1)\n    )\n}\n\nconst straightNotes = (n, cycle = 4) => ({\n    groove: null,\n    groovePattern: () => ((m) =>\n        getStraightBar(n, cycle)\n    ),\n});\n\nconst fixedNotesPerChord = (n, cycle = 4) => ({\n    groove: null,\n    groovePattern: () => ((m) => m.measure.map(() =>\n        getStraightBar(n, cycle)\n    )),\n});\n\nconst pendulum = (defaultDirection = 'up', softForce = false, comfort = .4) => ({\n    exclude: 1, // only last note cannot be picked again\n    force: !softForce ? true : ({ lastNote, range }) => {\n        const position = getRangePosition(lastNote(), range());\n        return position < 0 || position > 1; // only force if out of range..    \n    }, // force the current direction\n    fixRange: false, // do not transpose automatically to range (direction will do that)\n    direction: ({ lastNote, range, direction, barNumber, isBarStart }) => {\n        const position = getRangePosition(lastNote(), range());\n        const comfortSwitchBars = 1; // switch direction each x bars when in comfort zone\n        const isComfortZone = (position > comfort && position < 1 - comfort);\n        if (\n            (position <= 0 && direction() === 'down') ||\n            (position >= 1 && direction() === 'up') ||\n            (isComfortZone && isBarStart() && barNumber() % comfortSwitchBars === 0)\n        ) {\n            /* console.log('change direction', otherDirection(direction(), defaultDirection)); */\n            return otherDirection(direction(), defaultDirection);\n        }\n        return direction() || defaultDirection;\n    }\n});\n\nconst beatPattern = ({ pattern, on, off, barStart }:\n    { pattern?, on?, off?, barStart?}) => ({\n        beatPattern: ({ isBarStart, isOffbeat }) => {\n            if (isBarStart()) {\n                return barStart || on || pattern;\n            } else if (!isOffbeat()) {\n                return on || pattern;\n            }\n            return off || pattern;\n        },\n        pattern: ({ beatPattern }) => beatPattern(),\n    });\n\nconst notesPerChord = (n) => ({\n    ...fixedNotesPerChord(1, n)\n});\n\nconst patternPractise = (direction = 'up', notes = 4, lineBreaks = false) => ({\n    ...straightNotes(notes),\n    firstNoteInPattern: ({ pattern, chord }) =>\n        getPatternInChord(\n            direction === 'up' ? [pattern()[0]] : pattern().slice(-1)\n            , chord()\n        ),\n    direction,\n    force: true,\n    fixRange: false,\n    lineBreaks: ({ isBarStart }) => lineBreaks ? isBarStart() : false,\n    exclude: 1,\n    reach: 1,\n});\n\n/** FORMULAS */\n\n\nexport const advancedPermutator = permutator.enhance({\n    drill: .5, // how persistent should the current direction be followed?\n    direction: ({ drill }) => drill() > 0 ? 'up' : 'down',\n    force: ({ drill }) => Math.random() * Math.abs(drill()) > .5,\n    exclude: 1,\n    reach: 1,\n    material: ({ pattern, chord, playedNotes, exclude }) => {\n        const all = getPatternInChord(pattern(), chord());\n        if (!playedNotes().length) {\n            return all;\n        }\n        const excludeNotes = playedNotes()\n            .slice(0, exclude())\n            .map(n => Note.pc(n));\n        return all.filter(n => !excludeNotes.includes(n));\n    }\n});\n\nexport const guideTones = advancedPermutator.enhance({\n    name: 'Guide Lines',\n    ...notesPerChord(1),\n    /* direction: 'down', */\n    ...pendulum('down', true),\n    pattern: [3, 7],\n    exclude: 0, // 0 > can repeat notes\n    // pattern: ({ isBarStart, barNumber }) => isBarStart() ? [1] : barNumber() % 2 === 0 ? [3] : [7]\n});\n\nexport const guideTonesFlipped = guideTones.enhance({\n    name: 'Distant Guide Tones',\n    flip: true\n});\n\n\nexport const chordTones = advancedPermutator.enhance({\n    name: 'Only Chord Tones',\n    pattern: [1, 3, 5, 7],\n    drill: .75, // how persistent should the current direction be followed?\n    direction: ({ drill }) => drill() > 0 ? 'up' : 'down',\n});\n\n/* export const digitalPattern = advancedPermutator.enhance({\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    ...pendulum(),\n    ...straightNotes(4)\n}); */\n\n\nexport const fullScale = advancedPermutator.enhance({\n    name: 'Heptatonic',\n    /* ...beatPattern({ off: [2, 3, 4, 5, 6, 7], on: [1, 3, 5, 7] }), */\n    ...beatPattern({ on: [1, 3, 5, 7], off: [1, 2, 3, 4, 5, 6, 7] }),\n    /* ...beatPattern({ on: [3, 7], off: [9, 11, 13] }), */\n    /* ...beatPattern({ on: [9], off: [9, 11, 13] }), */\n    /* ...beatPattern({ on: [1, 3, 7], off: [9, 11, 13] }), */\n    ...pendulum(),\n    /* exclude: Math.floor(Math.random() + .5), */\n    /* exclude: 1,\n    reach: 2, */\n    /* reach: Math.round(Math.random() * 1 + 1) */\n});\n\nexport const scalePendulum = advancedPermutator.enhance({\n    name: 'Heptatonic Pendulum',\n    /* ...straightNotes(8), */\n    ...beatPattern({ pattern: [1, 2, 3, 4, 5, 6, 7] }),\n    ...pendulum(),\n    ...straightNotes(8),\n});\n\n\nexport const digitalPattern = advancedPermutator.enhance({\n    name: 'Digital Patterns',\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    ...pendulum('up', true, .2),\n    exclude: 2,\n    reach: 3,\n});\n\nexport const digitalPendulum = advancedPermutator.enhance({\n    name: 'Digital Pendulum',\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    ...pendulum('up', false, 1),\n    ...straightNotes(8),\n    /* lineBreaks: ({ isBarStart }) => isBarStart(), */\n    exclude: 1,\n    reach: 1,\n});\nexport const digitalWalker = advancedPermutator.enhance({\n    name: 'Digital Fourths',\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    ...pendulum('up', true, .4),\n    ...straightNotes(4),\n    lineBreaks: false,\n    /* lineBreaks: ({ isBarStart }) => isBarStart(), */\n    exclude: 2,\n    reach: 2,\n});\n\nexport const digitalPractiseUp = advancedPermutator.enhance({\n    name: 'Digital Practise Up',\n    ...patternPractise('up', 4, true),\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    /* ...beatPattern({ pattern: ({ chord }) => getDigitalPattern(chord()), barStart: [1] }), */\n});\n\nexport const digitalPractiseDown = advancedPermutator.enhance({\n    name: 'Digital Practise Down',\n    ...patternPractise('down', 4, true),\n    pattern: ({ chord }) => getDigitalPattern(chord()),\n    /* ...beatPattern({ pattern: ({ chord }) => getDigitalPattern(chord()), barStart: [1] }), */\n});\n\nexport const heptatonicPractise = advancedPermutator.enhance({\n    name: 'Heptatonic Practise',\n    ...patternPractise('up', 8, false),\n    ...beatPattern({ barStart: [1], on: [3, 5, 7], off: [1, 2, 3, 4, 5, 6, 7] }),\n});\n\nexport const defaultMethod = guideTones;\n\nexport const improvisationMethods = {\n    guideTones,\n    guideTonesFlipped,\n    chordTones,\n    digitalPattern,\n    digitalPendulum,\n    digitalWalker,\n    fullScale,\n    scalePendulum,\n    digitalPractiseUp,\n    digitalPractiseDown,\n    /* heptatonicPractise, */\n}","import { swing } from '../grooves/swing';\nimport { Improvisation } from '../improvisation/Improvisation';\nimport { defaultMethod } from '../improvisation/methods';\nimport { isBarStart, isFormStart, isOffbeat, resolveChords } from '../util/util';\nimport { Musician } from './Musician';\n\nexport default class Improvisor extends Musician {\n    name = 'Improvisor';\n    defaultMethod = defaultMethod;\n    method: Improvisation;\n\n    constructor(instrument, method?) {\n        super(instrument);\n        method = method || this.defaultMethod;\n        this.method = method/* .enhance({\n            range: ['F3', 'F5']\n        }) */;\n    }\n\n    useMethod(method) {\n        this.method = method;\n    }\n\n    play({ measures, pulse, settings }) {\n        if (settings.method) {\n            this.useMethod(settings.method);\n        }\n        const groove = settings.groove || swing;\n        this.method.mutate(() => ({ groove, playedNotes: [] }));\n        const pattern = this.method.get('groovePattern');\n        measures = measures\n            .map(measure => pattern({ measures, measure, settings, pulse })\n                /*     .slice(0, Math.floor(settings.cycle)) */\n            )\n            .map((pattern, i) => resolveChords(pattern, measures, [i]));\n        pulse.tickArray(measures, (tick) => {\n            this.improvise(tick, measures, pulse);\n        }, settings.deadline);\n    }\n\n    improvise({ value, deadline, interval }, measures, pulse) {\n        let chord = value.chord;\n        if (chord === 'N.C.') {\n            return;\n        }\n        this.method.mutate(() => ({\n            chord,\n            isFormStart: isFormStart(value.path),\n            isBarStart: isBarStart(value.path),\n            isOffbeat: isOffbeat(value.path),\n            // TODO: is ChordStart\n            barNumber: value.path[0]\n        }))\n            .mutate(({ nextNotes, playedNotes }) => {\n                const pick = nextNotes();\n                const duration = value.fraction * pulse.getMeasureLength();\n                this.instrument.playNotes(pick, { deadline, interval, gain: this.getGain(), duration, pulse });\n                return {\n                    playedNotes: [].concat(pick, playedNotes())\n                }\n            });\n\n\n    }\n}","import { randomSynth } from './util/util';\nimport Band from './Band';\nimport Pianist from './musicians/Pianist';\nimport Bassist from './musicians/Bassist';\nimport Drummer from './musicians/Drummer';\nimport { PlasticDrums } from './instruments/PlasticDrums';\nimport Improvisor from './musicians/Improvisor';\n\nexport class Trio extends Band {\n    pianist: Pianist;\n    bassist: Bassist;\n    drummer: Drummer;\n    soloist: Improvisor;\n    instruments: { piano: any; bass: any; drums: any; };\n\n    constructor({ context, piano, bass, drums, onMeasure, solo }: { context, [key: string]: any }) {\n        super({ context, onMeasure });\n        const instruments = this.setupInstruments({ piano, bass, drums })\n        this.pianist = new Pianist(instruments.piano);\n        this.bassist = new Bassist(instruments.bass);\n        this.drummer = new Drummer(instruments.drums);\n        this.musicians = [this.pianist, this.bassist, this.drummer];\n        if (solo) {\n            // this.soloist = new Permutator(instruments.piano);\n            this.soloist = new Improvisor(instruments.piano);\n            this.musicians.push(this.soloist);\n        }\n    }\n\n    setupInstruments({ piano, bass, drums }) {\n        bass = bass || randomSynth(this.mix);\n        piano = piano || randomSynth(this.mix);\n        drums = drums || new PlasticDrums({ mix: this.mix });\n        return { piano, bass, drums };\n    }\n}\n","import { Instrument } from './Instrument';\nimport { Note } from 'tonal';\n\nexport class MidiOut extends Instrument {\n    gain = 0.9;\n    midi;\n    output = 'Scarlett 6i6 USB';\n\n    constructor(props: any) {\n        super(props);\n        this.gain = props.gain || this.gain;\n        if (!navigator['requestMIDIAccess']) {\n            console.warn('This browser does not support WebMIDI!');\n            return;\n        }\n        navigator['requestMIDIAccess']().then((midi) => this.midiInit(midi), this.midiFail);\n    }\n\n    midiInit(midi) {\n        console.log('midi init', midi);\n        console.log(midi.outputs.size, 'outputs');\n        console.log(midi.inputs.size, 'inputs');\n        this.midi = midi;\n        midi.outputs.forEach(output => {\n            console.log('ouput', output);\n        });\n        midi.inputs.forEach(input => {\n            console.log('input', input);\n            input.onmidimessage = this.getMidiMessage;\n        });\n        this.onTrigger = ({ on, off }) => {\n            on.forEach(({ midi, gain, deadline }) => {\n                this.noteOn(midi, Math.round(gain * 127), deadline);\n            });\n            off.forEach(event => {\n                this.noteOff(event.midi, Math.round(event.gain * 127));\n            });\n        }\n    }\n\n    midiFail() {\n        console.warn('could not get midi access!');\n    }\n\n    getMidiMessage(message) {\n        console.log('midi data', message.data, 'message', message);\n    }\n\n    send(message, deadline) {\n        if (!this.midi) {\n            console.warn('tried to play keys but midi was not ready');\n            return;\n        }\n        console.log('send', message, deadline);\n\n        this.midi.outputs.forEach(output => {\n            if (true || output.name === this.output) {\n                output.send(message);\n            }\n        });\n    }\n\n    noteOn(key, velocity = 127, deadline = 0) {\n        this.send([144, key, 0x7f], deadline); //velocity\n    }\n    noteOff(key, velocity = 127, deadline = 0) {\n        this.send([144, key, 0], deadline);//velocity\n    }\n\n    playKeys(keys: number[], settings: any = {}) {\n        /* if (!this.midi) {\n            console.warn('tried to play keys but midi was not ready');\n            return;\n        }\n        this.midi.outputs.forEach(output => {\n            console.log(keys, 'send to', output);\n            keys.forEach(key => {\n                output.send([144, key, 9]);\n            })\n        });\n    } */\n    }\n}","import { resolveChords, getDigitalPattern, randomDelay, randomElement, getGuideTones, getPatternInChord, renderDigitalPattern } from '../util/util';\nimport { Musician } from './Musician';\nimport { Chord, Distance } from 'tonal';\nimport { swing } from '../grooves/swing';\n\nexport default class Permutator extends Musician {\n    styles: { [key: string]: any };\n    defaults = { groove: swing }\n    playedChords: string[] = [];\n\n    constructor(instrument) {\n        super(instrument);\n    }\n\n    play({ measures, pulse, settings }) {\n        const groove = settings.groove || this.defaults.groove;\n\n        const pattern = groove['solo'] || ((m) => {\n            return m.measure.map(c => [1, 1, 1, 1]);\n        }); // dont changes anything\n\n        measures = measures\n            .map(measure => pattern({ measures, measure, settings, pulse }).slice(0, Math.floor(settings.cycle)))\n            .map((pattern, i) => resolveChords(pattern, measures, [i]));\n        pulse.tickArray(measures, (tick) => {\n            this.playPermutations(tick, measures, pulse);\n        }, settings.deadline);\n    }\n\n    playPermutations({ value, cycle, path, deadline, interval }, measures, pulse) {\n        let chord = value.chord;\n        if (chord === 'N.C.') {\n            return;\n        }\n        if (chord === 'x') {\n            chord = this.playedChords[this.playedChords.length - 1];\n        }\n        if (!chord || chord === '0') {\n            this.playedChords.push('');\n            return;\n        }\n        this.playedChords.push(chord);\n\n        // digital patterns\n        const notes = renderDigitalPattern(chord);\n        const note = randomElement(notes) + '5';\n\n        // all scale notes with different chances\n        /* const notes = getPatternInChord([1, 2, 3, 4, 5, 6, 7], chord);\n        const note = randomElement(notes, [4, 3, 6, 1, 3, 4, 6]) + '5'; */\n\n        /* console.log('beat (starting from zero)', path[1]); */\n        const duration = value.fraction * pulse.getMeasureLength();\n\n        /* deadline += randomDelay(10); */\n        this.instrument.playNotes([note], { deadline, interval, gain: 1, duration, pulse });\n    }\n}","import Band from './Band';\nimport Pianist from './musicians/Pianist';\nimport Drummer from './musicians/Drummer';\nimport Bassist from './musicians/Bassist';\nimport { Instrument } from './instruments/Instrument';\nimport { Musician } from './musicians/Musician';\nimport { Synthesizer } from './instruments/Synthesizer';\nimport { Sampler } from './instruments/Sampler';\nimport { PlasticDrums } from './instruments/PlasticDrums';\nimport { Trio } from './Trio';\nimport * as util from './util/util';\nimport { Pulse } from './Pulse';\nimport { RealParser } from './sheet/RealParser';\nimport { MidiOut } from './instruments/MidiOut';\nimport Permutator from './musicians/Permutator';\nimport { Voicing } from './harmony/Voicing';\nimport { Permutation } from './util/Permutation';\n/* import { WebAudioFont } from './instruments/WebAudioFont'; */\n\nexport {\n    Trio,\n    Band,\n    Pianist,\n    Bassist,\n    Drummer,\n    Instrument,\n    Musician,\n    Synthesizer,\n    Sampler,\n    /* WebAudioFont, */\n    Permutator,\n    MidiOut,\n    PlasticDrums,\n    Pulse,\n    util,\n    RealParser,\n    Voicing,\n    Permutation,\n};","import C1 from \"./C1.mp3\";\nimport Db1 from \"./Db1.mp3\";\nimport D1 from \"./D1.mp3\";\nimport Eb1 from \"./Eb1.mp3\";\nimport E1 from \"./E1.mp3\";\nimport F1 from \"./F1.mp3\";\nimport Gb1 from \"./Gb1.mp3\";\nimport G1 from \"./G1.mp3\";\nimport Ab1 from \"./Ab1.mp3\";\nimport A1 from \"./A1.mp3\";\nimport Bb1 from \"./Bb1.mp3\";\nimport B1 from \"./B1.mp3\";\nimport C2 from \"./C2.mp3\";\nimport Db2 from \"./Db2.mp3\";\nimport D2 from \"./D2.mp3\";\nimport Eb2 from \"./Eb2.mp3\";\nimport E2 from \"./E2.mp3\";\nimport F2 from \"./F2.mp3\";\nimport Gb2 from \"./Gb2.mp3\";\nimport G2 from \"./G2.mp3\";\nimport Ab2 from \"./Ab2.mp3\";\nimport A2 from \"./A2.mp3\";\nimport Bb2 from \"./Bb2.mp3\";\nimport B2 from \"./B2.mp3\";\nimport C3 from \"./C3.mp3\";\nimport Db3 from \"./Db3.mp3\";\nimport D3 from \"./D3.mp3\";\nimport Eb3 from \"./Eb3.mp3\";\nimport E3 from \"./E3.mp3\";\nimport F3 from \"./F3.mp3\";\nimport Gb3 from \"./Gb3.mp3\";\nimport G3 from \"./G3.mp3\";\nimport Ab3 from \"./Ab3.mp3\";\nimport A3 from \"./A3.mp3\";\nimport Bb3 from \"./Bb3.mp3\";\nimport B3 from \"./B3.mp3\";\nimport C4 from \"./C4.mp3\";\nimport Db4 from \"./Db4.mp3\";\nimport D4 from \"./D4.mp3\";\nimport Eb4 from \"./Eb4.mp3\";\nimport E4 from \"./E4.mp3\";\nimport F4 from \"./F4.mp3\";\nimport Gb4 from \"./Gb4.mp3\";\nimport G4 from \"./G4.mp3\";\nimport Ab4 from \"./Ab4.mp3\";\nimport A4 from \"./A4.mp3\";\nimport Bb4 from \"./Bb4.mp3\";\nimport B4 from \"./B4.mp3\";\nimport C5 from \"./C5.mp3\";\nimport Db5 from \"./Db5.mp3\";\nimport D5 from \"./D5.mp3\";\nimport Eb5 from \"./Eb5.mp3\";\nimport E5 from \"./E5.mp3\";\nimport F5 from \"./F5.mp3\";\nimport Gb5 from \"./Gb5.mp3\";\nimport G5 from \"./G5.mp3\";\nimport Ab5 from \"./Ab5.mp3\";\nimport A5 from \"./A5.mp3\";\nimport Bb5 from \"./Bb5.mp3\";\nimport B5 from \"./B5.mp3\";\nimport C6 from \"./C6.mp3\";\nimport Db6 from \"./Db6.mp3\";\nimport D6 from \"./D6.mp3\";\nimport Eb6 from \"./Eb6.mp3\";\nimport E6 from \"./E6.mp3\";\nimport F6 from \"./F6.mp3\";\nimport Gb6 from \"./Gb6.mp3\";\nimport G6 from \"./G6.mp3\";\nimport Ab6 from \"./Ab6.mp3\";\nimport A6 from \"./A6.mp3\";\nimport Bb6 from \"./Bb6.mp3\";\nimport B6 from \"./B6.mp3\";\nimport C7 from \"./C7.mp3\";\nimport Db7 from \"./Db7.mp3\";\nimport D7 from \"./D7.mp3\";\nimport Eb7 from \"./Eb7.mp3\";\nimport E7 from \"./E7.mp3\";\nimport F7 from \"./F7.mp3\";\nimport Gb7 from \"./Gb7.mp3\";\nimport G7 from \"./G7.mp3\";\nimport Ab7 from \"./Ab7.mp3\";\nimport A7 from \"./A7.mp3\";\nimport Bb7 from \"./Bb7.mp3\";\nimport B7 from \"./B7.mp3\";\n\nexport const piano = {\n    C1,\n    Db1,\n    D1,\n    Eb1,\n    E1,\n    F1,\n    Gb1,\n    G1,\n    Ab1,\n    A1,\n    Bb1,\n    B1,\n    C2,\n    Db2,\n    D2,\n    Eb2,\n    E2,\n    F2,\n    Gb2,\n    G2,\n    Ab2,\n    A2,\n    Bb2,\n    B2,\n    C3,\n    Db3,\n    D3,\n    Eb3,\n    E3,\n    F3,\n    Gb3,\n    G3,\n    Ab3,\n    A3,\n    Bb3,\n    B3,\n    C4,\n    Db4,\n    D4,\n    Eb4,\n    E4,\n    F4,\n    Gb4,\n    G4,\n    Ab4,\n    A4,\n    Bb4,\n    B4,\n    C5,\n    Db5,\n    D5,\n    Eb5,\n    E5,\n    F5,\n    Gb5,\n    G5,\n    Ab5,\n    A5,\n    Bb5,\n    B5,\n    C6,\n    Db6,\n    D6,\n    Eb6,\n    E6,\n    F6,\n    Gb6,\n    G6,\n    Ab6,\n    A6,\n    Bb6,\n    B6,\n    C7,\n    Db7,\n    D7,\n    Eb7,\n    E7,\n    F7,\n    Gb7,\n    G7,\n    Ab7,\n    A7,\n    Bb7,\n    B7,\n};","\nimport k from './drummer/kick.wav';\nimport s from './drummer/snare.wav';\nimport h from './drummer/hihat.wav';\nimport r from './drummer/ride.wav';\nimport c from './drummer/crash.wav';\nimport rs from './drummer/rimshot.wav';\n\nexport const kick = k;\nexport const snare = s;\nexport const hihat = h;\nexport const ride = r;\nexport const crash = c;\nexport const rimshot = rs;\nexport const drumset = [kick, snare, hihat, ride, crash, rimshot];\nexport const drumSamples = { 'C1': kick, 'C2': snare, 'C3': hihat, 'C4': ride, 'C5': crash, 'C6': rimshot };","import { Logger } from '../util/Logger';\nimport { Sheet } from './Sheet';\nimport { Measure } from './Measure';\nimport * as Tone from 'tone';\nimport { Voicing } from '..';\nimport { Note } from 'tonal';\nimport { VoiceLeadingOptions } from '../harmony/Voicing';\nimport { Harmony } from '../harmony/Harmony';\nimport { piano as pianoSamples } from '../../samples/piano/index.js';\nimport { drumSamples } from '../../samples/drumset';\nimport { Snippet } from './Snippet';\n\nexport declare type noteTrigger = (time, duration?) => any;\n\ndeclare interface Tone {\n    [key: string]: any\n};\n\nexport declare interface SheetPlayerOptions extends VoiceLeadingOptions {\n    /** If true, a new voicing will not attack notes that stayed since the last voicing */\n    pedal?: boolean;\n    /** If true, \"real\" instruments will be used */\n    real?: boolean;\n    start?: number; // when to start\n    swing?: number; // amount of swing\n    swingSubdivision?: string;\n}\n\nexport class SheetPlayer {\n    static parts = [];\n    static instruments = [];\n    static realPiano;\n    static realDrums;\n\n    static getSequence(sheet) {\n        return Sheet.render(sheet)\n            .map((measure, measureIndex) => Measure.from(measure).chords\n                .map((chord, chordIndex) => ({ chord, path: [measureIndex, chordIndex], measure })));\n    }\n\n    static async play(sheet, options?: SheetPlayerOptions) {\n        SheetPlayer.stop();\n        sheet = {\n            chords: [],\n            melody: [],\n            forms: 2,\n            cycle: 4,\n            bpm: 130,\n            swing: 0.5,\n            swingSubdivision: '8n',\n            ...sheet,\n        }\n        let {\n            chords,\n            melody,\n            swing,\n            swingSubdivision,\n            bpm,\n        } = sheet;\n        Logger.logLegend();\n        Logger.logSheet(sheet);\n\n        Tone.Transport.bpm.value = bpm;\n        Tone.Transport.swing = swing;\n        Tone.Transport.swingSubdivision = swingSubdivision;\n\n        SheetPlayer.playParts([\n            await SheetPlayer.playChords(chords, options),\n            await SheetPlayer.playBass(chords, options),\n            await SheetPlayer.playMelody(melody, options),\n            /* ...(await SheetPlayer.playDrums(sheet, options)) */\n        ]);\n\n        Tone.Transport.start('+1');\n    }\n\n    static playParts(parts) {\n        SheetPlayer.parts = parts.filter(p => !!p);\n        SheetPlayer.parts.forEach(part => part.start(0));\n    }\n\n    static stop(): void {\n        SheetPlayer.parts.forEach(part => {\n            part.stop();\n        });\n        SheetPlayer.instruments.forEach(instrument => {\n            if (instrument.releaseAll) {\n                instrument.releaseAll();\n            } else {\n                instrument.triggerRelease();\n            }\n        });\n        SheetPlayer.parts = [];\n        SheetPlayer.instruments = [];\n    }\n\n    static async playMelody(sequence, options?: SheetPlayerOptions): Promise<Tone.Sequence> {\n        let { real } = options;\n        const lead = await SheetPlayer.getLead(real);\n        return new Tone.Sequence((time, note) => {\n            if (note.match(/[a-g][b|#]?[0-6]/)) {\n                if (note) {\n                    lead.triggerAttackRelease(note, '2n', time);\n                }\n            }\n        }, sequence, \"1m\");\n    }\n\n    static async playDrums(sheet, options?: SheetPlayerOptions): Promise<Tone.Sequence[]> {\n        let { real } = {\n            ...options\n        };\n        return SheetPlayer.getDrums(true).then(drums => {\n\n            SheetPlayer.instruments.push(drums);\n\n            const short = {\n                'bd': 'kick',\n                'sn': 'snare',\n                'hh': 'hihat',\n                'rc': 'ride',\n                'rs': 'rimshot',\n                'cr': 'crash',\n            }\n\n            const swing = [\n                'rc . rc ~ rc . rc . rc ~ rc',\n                '~ . hh . ~ . hh ',\n                /* '~ . ~ rs ', */\n                /* 'bd | ~ | bd | ~', */\n                /* '~ | ~ | ~ | ~ . ~ ~ ~ ~ ~ sn' */,\n            ];\n            const triggerSound = (time, sound) => {\n                if (drums[sound]) {\n                    drums[sound](time);\n                }\n            }\n            return swing.map(p => Snippet.parse2(p))\n                .map(seq => new Tone.Sequence((time, sound) =>\n                    triggerSound(time, short[sound]),\n                    seq, \"1m\"));\n        });\n    }\n\n    static async playChords(sheet, options: SheetPlayerOptions = {}): Promise<Tone.Sequence> {\n        if (!sheet) {\n            return;\n        }\n        options = {\n            range: ['C3', 'C5'],\n            maxVoices: 4,\n            maxDistance: 7,\n            minBottomDistance: 3, // min semitones between the two bottom notes\n            minTopDistance: 2, // min semitones between the two top notes\n            ...options\n        }\n        let { maxVoices, pedal, real }: SheetPlayerOptions =\n        {\n            pedal: false,\n            real: true,\n            ...options\n        };\n        const piano = await SheetPlayer.getPiano(maxVoices, real);\n        SheetPlayer.instruments.push(piano);\n\n        const sequence = SheetPlayer.getSequence(sheet);\n        let currentVoicing, previousVoicing;\n        return new Tone.Sequence(function (time, event) {\n            const { chord } = event;\n            if (event.path[1] === 0) {\n                if (event.path[0] === 0) {\n                    console.log(`-- new chorus --`);\n                }\n            }\n            currentVoicing = Voicing.getNextVoicing(chord, previousVoicing, options);\n            currentVoicing = currentVoicing.map(note => Note.simplify(note));\n            if (currentVoicing) {\n                let pianoNotes = SheetPlayer.getAttackRelease(currentVoicing, previousVoicing, pedal);\n\n                if (pedal) {\n                    SheetPlayer.releaseAll(pianoNotes.release, piano, time);\n                } else {\n                    piano.releaseAll(time);\n                }\n                SheetPlayer.attackAll(pianoNotes.attack, piano, time);\n\n                previousVoicing = currentVoicing;\n            } else if (previousVoicing) {\n                // TODO\n                piano.triggerRelease(previousVoicing, time);\n                previousVoicing = null;\n            }\n        }, sequence, \"1m\");\n    }\n\n    static async playBass(sheet, options: SheetPlayerOptions = {}): Promise<Tone.Sequence> {\n        if (!sheet) {\n            return;\n        }\n        let { real, pedal } = {\n            ...options\n        };\n        const sequence = SheetPlayer.getSequence(sheet);\n\n        const bass = await SheetPlayer.getBass(real);\n        SheetPlayer.instruments.push(bass);\n        let currentBassnote, previousBassNote;\n        return new Tone.Sequence(function (time, event) {\n            const { chord } = event;\n            currentBassnote = Harmony.getBassNote(chord) + '2';\n            if (currentBassnote) {\n                if (!pedal || currentBassnote !== previousBassNote) {\n                    bass.triggerAttack(currentBassnote, time);\n                }\n                previousBassNote = currentBassnote;\n            } else if (previousBassNote) {\n                bass.triggerRelease(previousBassNote, time);\n                previousBassNote = null;\n            }\n        }, sequence, \"1m\");\n    }\n\n    static attackAll(notes, instrument, time = 0): void {\n        notes.forEach(note => instrument.triggerAttack(note, time));\n    }\n\n    static releaseAll(notes, instrument, time = 0): void {\n        notes.forEach(note => instrument.triggerRelease(note, time));\n    }\n\n    static getAttackRelease(newNotes = [], oldNotes = [], pedal = false): { attack: string[], release: string[] } {\n        if (!newNotes) {\n            return;\n        }\n        let attack = [], release = [];\n        if (!pedal) {\n            release = oldNotes;\n            attack = newNotes;\n        } else {\n            release = oldNotes.filter(note => !newNotes.find(n => Harmony.isSameNote(note, n)));\n            attack = newNotes.filter(note => !oldNotes.find(n => Harmony.isSameNote(note, n)));\n        }\n        return { attack, release };\n    }\n\n    static getBass(real = false): Promise<Tone.Instrument> {\n        if (real) {\n            return SheetPlayer.getRealPiano();\n        }\n        return Promise.resolve(\n            new Tone.MonoSynth({\n                \"volume\": -22,\n                \"envelope\": {\n                    \"attack\": 0.02,\n                    \"decay\": 0.3,\n                    \"release\": 2,\n                },\n                \"filterEnvelope\": {\n                    \"attack\": 0.001,\n                    \"decay\": 0.001,\n                    \"sustain\": 0.4,\n                    \"baseFrequency\": 130,\n                    \"octaves\": 2.6\n                }\n            }).toMaster()\n        );\n    }\n\n    static async getDrums(real = true): Promise<{ [sound: string]: noteTrigger }> {\n        if (real) {\n            return SheetPlayer.getRealDrums();\n        }\n        const hihat = await SheetPlayer.hihat();\n        const ride = await SheetPlayer.ride();\n        return {\n            // hihat: (time, duration) => hihat.triggerAttackRelease(time, duration),\n            ride: (time, duration) => {\n                console.log('ride', time, duration);\n                ride.triggerAttackRelease(time, duration)\n            },\n        }\n    }\n\n    static ride() {\n        return Promise.resolve(\n            new Tone.MetalSynth({\n                volume: -30,\n                frequency: 200,\n                envelope: {\n                    attack: 0.001,\n                    decay: 1,\n                    release: 1\n                },\n                harmonicity: 6,\n                modulationIndex: 8,\n                resonance: 3000,\n                octaves: 1\n            }).toMaster()\n        );\n    }\n    static hihat() {\n        return Promise.resolve(\n            new Tone.MetalSynth({\n                volume: -22,\n                frequency: 200,\n                envelope: {\n                    attack: 0.001,\n                    decay: .1,\n                    release: .1\n                },\n                harmonicity: 5.1,\n                modulationIndex: 100,\n                resonance: 100,\n                octaves: 2\n            }).toMaster()\n        );\n    }\n\n    static getPiano(voices = 4, real = true): Promise<Tone.Instrument> {\n        if (real) {\n            return SheetPlayer.getRealPiano();\n        }\n        return Promise.resolve(\n            new Tone.PolySynth(voices, Tone.Synth, {\n                \"volume\": -18,\n                \"oscillator\": {\n                    \"partials\": [1, 2, 3],\n                }\n            }).toMaster()\n        );\n    }\n\n    static getRealPiano(): Promise<Tone.Instrument> {\n        if (SheetPlayer.realPiano) {\n            return SheetPlayer.realPiano;\n        }\n        SheetPlayer.realPiano = SheetPlayer.getSampler(pianoSamples, { volume: -4 });\n        return SheetPlayer.realPiano;\n    }\n\n    static async getRealDrums(): Promise<Tone.Instrument> {\n        if (SheetPlayer.realDrums) {\n            return SheetPlayer.realDrums;\n        }\n        const sampler = await SheetPlayer.getSampler(drumSamples, { volume: -8 });\n        SheetPlayer.realDrums = {\n            kick: (time, duration) => sampler.triggerAttackRelease('C1', time),\n            snare: (time, duration) => sampler.triggerAttackRelease('C2', time),\n            hihat: (time, duration) => sampler.triggerAttackRelease('C3', time),\n            ride: (time, duration) => sampler.triggerAttackRelease('C4', time),\n            crash: (time, duration) => sampler.triggerAttackRelease('C5', time),\n            rimshot: (time, duration) => sampler.triggerAttackRelease('C6', time),\n        }\n        return SheetPlayer.realDrums;\n    }\n\n    static getSampler(samples, options): Promise<Tone.Instrument> {\n        return new Promise((resolve, reject) => {\n            const sampler = new Tone.Sampler(samples, {\n                ...options, onload: () => resolve(sampler)\n            }).toMaster();\n        });\n    }\n\n    static getLead(real?): Tone.Instrument {\n        if (real) {\n            return SheetPlayer.getRealPiano();\n        }\n        return new Tone.FMSynth({\n            volume: -12,\n            envelope: {\n                attack: 0.001,\n                decay: 0.1,\n                sustain: 0.6,\n                release: 0.1\n            },\n            portamento: 0.05\n        }).toMaster();\n    }\n}","import iRealReader from 'ireal-reader';\nimport * as util from '../src/util/util';\nimport { swing } from '../src/grooves/swing';\nimport { RealParser } from '../src/sheet/RealParser';\nimport { Snippet } from '../src/sheet/Snippet';\nimport { SheetPlayer } from '../src/sheet/SheetPlayer';\nimport link from '../songs/1350.json';\n\nconst playlist = new iRealReader(decodeURI(link));\n\nfunction getStandard(playlist) {\n    let standard;\n    // standard = util.randomElement(playlist.songs.filter(s => s.title.includes('Black Narcissus')));\n    standard = util.randomElement(playlist.songs);\n    standard.music.measures = RealParser.parseSheet(standard.music.raw);\n    // console.log('standard', standard);\n    return standard;\n}\n\nconst options = {\n    // forceDirection: 'down',\n    range: ['C3', 'G5'], // allowed voice range\n    maxVoices: 4, // maximum number of voices per chord\n    maxDistance: 7,  // general max distance between single voices\n    minDistance: 1,  // general max distance between single voices\n    minBottomDistance: 3, // min semitones between the two bottom notes\n    minTopDistance: 2, // min semitones between the two top notes\n    real: false,\n    swing: 0,\n    pedal: true,\n    noTopDrop: true,\n    noTopAdd: true,\n    noBottomDrop: false,\n    noBottomAdd: false,\n    filterChoices: (choice) => {\n        return true;\n    },\n    sortChoices: (a, b) => {\n        return a.difference - b.difference;\n        /* return Math.abs(a.movement) - Math.abs(b.movement) */\n        /* return Math.abs(Interval.semitones(a.topInterval)) - Math.abs(Interval.semitones(b.topInterval)) */\n    }\n};\n\nwindow.onload = function () {\n    // buttons\n    const stop = document.getElementById('stop');\n    const steps = document.getElementById('steps');\n    const alice = document.getElementById('alice');\n    const next = document.getElementById('next');\n    let standard;\n\n    next.addEventListener('click', () => {\n        standard = getStandard(playlist);\n        setTimeout(() => play(), 500);\n    });\n\n    function play(groove = swing) {\n        //SheetPlayer.play({ chords: ['C', 'C', 'C/B', 'C/Bb', 'F', 'F/E', 'G6', 'G/F'] }, { pedal: true });\n        /* SheetPlayer.play({ chords: ['C^7', 'E-', 'C^7', 'E-'] }, options);\n        return; */\n        return SheetPlayer.play(\n            {\n                composer: standard.composer,\n                title: standard.title,\n                forms: 1,\n                time: 4,\n                groove,\n                chords: standard.music.measures,\n            }, options);\n    }\n    stop.addEventListener('click', () => {\n        SheetPlayer.stop();\n    });\n    steps.addEventListener('click', () => {\n        giantSteps();\n    });\n    alice.addEventListener('click', () => {\n        bluesForAlice();\n    });\n}\n\nfunction bluesForAlice() {\n    let melody = Snippet.parse2(`\n    f4 . c4 a3 . e4 . c4 a3 |\n    d4 e4 b3 d4 db4 bb3 g3 ab3 |\n    a3 . f3 d3 . g3 a3 . f3 e3 |\n    eb3 g3 bb3 . d4 db4 . / f3 . f3 g3 f3 |\n    c4 . bb3 f3 . ab3 bb2 . / ab3 |\n    eb4 db4 . bb3 b3 . c4  f3 . g3  a3 |\n    / . e3 c3 . d3 . / c#4 |\n    / . b3 f#3 . a#3 . / g#3 |\n    g3 f4 f4 . f4 d4 bb3 g3 |\n    a3 g3 . c4 bb3 . eb4 . / c4 |\n    / . a3 f3 . g3 .  / d4 |\n    / . bb3 d3 . a3 . / |\n    `);\n    let chords = Snippet.parse2(`\n    |  F^7  |  Eh7 A7    |  D-7 G7  |  C-7 F7    |\n    |  Bb7  |  Bb-7 Eb7  |  A-7 D7  |  Ab-7 Db7  |\n    |  G-7  |  C7        |  F7 D7   |  G-7 C7    |\n    `);\n    SheetPlayer.play({\n        title: 'Blues For Alice',\n        chords,\n        melody\n    }, options);\n}\n\nfunction giantSteps() {\n    let melody = Snippet.parse2(`\n    f#4 d4 | b3  g3 |\n    bb3  / | b3  a3 |\n    d4 bb3 | g3  eb3 |\n    f#3  / | g3  f3 |\n    bb3  / | b3  a3 |\n    d4  / | eb4  db4 |\n    f#4 / | g4  f4 |\n    bb4  / | f#4  f#4 |\n     `);\n    let chords = Snippet.parse2(`\n    |  B^7 D7   |  G^7 Bb7   |  Eb^7  |  A-7 D7    |\n    |  G^7 Bb7  |  Eb^7 F#7  |  B^7   |  F-7 Bb7   |\n    |  Eb^7     |  A-7 D7    |  G^7   |  C#-7 F#7  |\n    |  B^7      |  F-7 Bb7   |  Eb^7  |  C#-7 F#7  |\n    `);\n    SheetPlayer.play({\n        title: 'Giant Steps',\n        composer: 'John Coltrane',\n        chords, melody\n    }, options);\n}\n\nfunction knife() {\n    let chords = Snippet.parse2(`\n    |  B^7 D7   |  G^7 Bb7   |  Eb^7  |  A-7 D7    |\n    |  G^7 Bb7  |  Eb^7 F#7  |  B^7   |  F-7 Bb7   |\n    |  Eb^7     |  A-7 D7    |  G^7   |  C#-7 F#7  |\n    |  B^7      |  F-7 Bb7   |  Eb^7  |  C#-7 F#7  |\n    `);\n    SheetPlayer.play({ chords, /* melody */ }, options)\n}\n"]}