# Instruments

This documents is about ways to implement different types of instruments.

## Using SPC files (Super Nintendo)

SPC files are the soundtrack files from SNES games.

### Ripping OSTs

 Soundtracks for most games have already been ripped and can be dowonload at [zophar](https://www.zophar.net/music/nintendo-snes-spc) or [snesmusic.org](http://snesmusic.org). See MEGA/chipmusic/sheets/*/spc folders. Otherwise, emulators like Snes9x support dumping SPC files (Option>Save SPC File at Next Note-On).

 ### Playing OSTs

 - Audio Overload is a good piece of software to play SPC files directly. It even supports channel splitting to listen to parts > good for transcribing.
 - SPC700 PLAYER (open with wine) displays which samples are used (press right arrow twice)

 ### Converting to MIDI

 Tools like nintspc (see MEGA/chipmusic/software/spc2midi) can be used to convert spc files to midi:

```
nintspc file.scp file.mid
```

Or for multiple:

```
for f in *.spc; do nintspc "$f" "$f.mid";done
```

The above command converts all spc files in the working folder to midi (expects nintspc in your bin folder).

Alternative: [vgmtrans](https://github.com/vgmtrans/vgmtrans), currently not working with wine + build fails due to qt5 not found bla.


### Converting to Sheet

The midi files can then be opened by Musescore which will try to convert the midi to a sheet. This looks crappy most of the time but is a good starting point. Alternatively, use your goold old ears + Audio Overload.

#### Other Sheet Music Resources

[ninsheetmusic](https://www.ninsheetmusic.org) has many sheets, arranged by users. By using Finale Notepad (free), the *.mus* files can be converted to music xml format, which can be opened by e.g. musescore to further edit.

### Ripping Instruments

#### c700

The vst [c700](http://picopicose.com/how_to_use_the_c700_eng.html) (MEGA/chipmusic/software/c700) can be used to open SPC files. It is able to read all instruments and play back midi using multichannels, emulating the original SNES soundchip. In Ableton, it is kind of buggy though (when closing it, the channels are wrong etc). The thing was developed in Logic, also coming with demos for Logic.

#### split700

Alternatively, you can use [split700](https://github.com/gocha/split700) to generate brr or wav files for spcs. 
The binary is only available for windows, but i [built it from source](https://preshing.com/20170511/how-to-build-a-cmake-based-project/) (MEGA/chipmusic/software/split700-2.0/build). The bins are also in the bin folder.

```sh
split700 -L --wav *.spc 
```

#### [snesbrr](https://github.com/boldowa/snesbrr)

#### Converting wav to playable Instrument

Some Observations

- The Channel numbers (SPC Channel 1-8) from Audio Overload match with the generated Midi Channels.
- Sometimes Channels will switch Instruments (e.g. Channel 5 of SMW "02 Title.spc")
- The Channels that are not taken (no midi file present) will sound like shit in Audio Overload (bug)
- SPC700 Player can be used to view which tracks are active when
- The same can be achieved with the html file generated by nintspc

- https://www.smwcentral.net/?p=viewthread&t=65193 !!!!
- https://www.smwcentral.net/?p=viewthread&t=92575

## Snes Links

- https://github.com/optixx/snes-sdk/tree/master/wla_dx
- http://emureview.ztnet.com/developerscorner/SoundCPU/spc.htm
- https://wiki.superfamicom.org/jay's-asm-tutorial
- https://wiki.superfamicom.org/setting-up-a-programming-environment
- https://wiki.superfamicom.org/

- http://www.slack.net/~ant/libs/audio.html
- https://github.com/yupferris/snes_spc
- https://lib.rs/crates/snes-apu (rust)
- https://github.com/emu-rs/snes-apu
- https://github.com/yupferris/snes-apu-dbg
- https://github.com/MrRio/js-snes-player !
- https://github.com/cosinusoidally/snes_spc_js !!!!! (new)
- http://cosinusoidally.github.io/#rewriting-js-snes-player blogpost