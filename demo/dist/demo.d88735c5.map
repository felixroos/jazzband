{"version":3,"sources":["../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/node_modules/process/browser.js","../dist/index.js","../src/RealParser.ts","samples/piano.js","samples/drumset.js","../node_modules/ireal-reader/unscramble.js","../node_modules/ireal-reader/Music.js","../node_modules/ireal-reader/Song.js","../node_modules/ireal-reader/Playlist.js","../node_modules/ireal-reader/index.js","../node_modules/tonal-note/build/es6.js","../node_modules/tonal-array/build/es6.js","../node_modules/tonal-interval/build/es6.js","../node_modules/tonal-distance/build/es6.js","../node_modules/tonal-pcset/build/es6.js","../node_modules/tonal-dictionary/build/es6.js","../node_modules/tonal-scale/build/es6.js","../node_modules/tonal-chord/build/es6.js","../node_modules/tonal/index.js","../src/instruments/Instrument.ts","../src/instruments/Synthesizer.ts","../src/util.ts","../src/grooves/swing.ts","../src/grooves/funk.ts","demo.ts"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","parcelRequire","modules","cache","entry","globalName","previousRequire","nodeRequire","require","newRequire","jumped","currentRequire","err","code","localRequire","resolve","Module","x","moduleName","id","bundle","isParcelRequire","parent","register","mainExports","define","amd","isBrowser","window","CLOCK_DEFAULTS","toleranceLate","toleranceEarly","Event","clock","deadline","func","_cleared","_latestTime","_earliestTime","repeatTime","schedule","clear","_removeEvent","repeat","time","_hasEvent","tolerance","values","late","early","_refreshEarlyLateDates","_insertEvent","isRepeated","context","currentTime","_execute","timeStretch","tRef","ratio","_started","onexpired","console","warn","WAAClock","opts","self","tickMethod","_events","delay","_createEvent","_absTime","callbackAtTime","events","forEach","event","start","bufferSize","_clockNode","createScriptProcessor","connect","destination","onaudioprocess","_tick","stop","disconnect","shift","unshift","splice","_indexByTime","ind","indexOf","low","high","mid","Math","floor","relTime","_relTime","absTime","__importDefault","mod","__esModule","waaclock_1","Pulse","props","defaults","bpm","cycle","Object","assign","AudioContext","getMeasureLength","beatsPerMeasure","arrayPulse","children","path","callback","_this","isArray","item_1","value","pulse","childLength","map","el","tickArray","l","Promise","reject","tick","criticalEvents","changeTempo","newTempo","factor","filter","Pulse_1","Band","_a","_b","musicians","division","transpose","style","ready","all","resume","m","then","comp","measures","settings","play","musician","defineProperty","tokenize","fromMidi","NAMES","split","names","accTypes","slice","n","acc","SHARPS","FLATS","REGEX","str","exec","toUpperCase","replace","NO_NOTE","freeze","pc","step","alt","oct","octStr","chroma","midi","freq","SEMI","properties","tokens","letter","p","charCodeAt","midiToFreq","memo","fn","note","tuning","pow","L2","log","L440","freqToMidi","v","round","LETTERS","stepToLetter","fillStr","s","join","numToStr","num","op","altToAcc","from","fromProps","baseNote","ref","build","sharps","pcs","o","simplify","sameAcc","useSharps","enharmonic","permutations","shuffle","compact","undefined","range","rotate","sort","unique","_tonalNote","ascR","b","a","descR","times","arr","height","src","rnd","random","t","reduce","perm","pos","newPerm","IVL_TNL","IVL_STR","RegExp","SIZES","TYPES","CLASSES","types","NO_IVL","q","type","simple","semitones","abs","qToAlt","test","altToQ","numToStep","ic","ivl","d","invert","IN","IQ","fromSemitones","c","trFifths","fifths","transposeBy","addIntervals","add","subtract","interval","_tonalInterval","FIFTHS","fOcts","f","FIFTH_OCTS","encode","STEPS","unaltered","decode","encoder","encodeNote","encodeIvl","tr","to","isDescending","decodeIvl","ivl1","ivl2","i1","i2","chromas","modes","isChroma","intervals","isEqual","isSubsetOf","isSupersetOf","includes","_tonalArray","chr","pcsetNum","set","parseInt","clen","toString","normalize","binary","_","r","IVLS","s1","s2","notes","pcset","chord","scale","combine","dictionary","_scales","_scales2","_interopRequireDefault","_chords","_chords2","_tonalPcset","obj","default","raw","keys","data","index","ivls","key","alias","allKeys","dict","subsets","supersets","toScale","chords","modeNames","exists","_tonalDistance","_tonalDictionary","NO_SCALE","setnum","memoize","nameOrTonic","tonic","substring","tonics","inScale","isSuperset","isSubset","NO_CHORD","NUM_TYPES","Dictionary","PcSet","Chord","Scale","Distance","Interval","Note","_interopRequireWildcard","_tonalScale","_tonalChord","newObj","hasOwnProperty","util_1","Instrument","gain","mix","onPlay","onStop","midiOffset","init","playNotes","playKeys","getMidi","__extends","_extendStatics","extendStatics","setPrototypeOf","__proto__","__","constructor","create","Instrument_1","tonal_1","Synthesizer","_super","duration","attack","decay","sustain","release","getVoice","frequency","oscNode","createOscillator","gainNode","createGain","lowestGain","voice","adsr","Synthesizer_1","randomNumber","arraySum","randomElement","weighted","total","w","find","getTonalChord","offset","getPath","traveled","min","resolveChords","pattern","divisions","fraction","hasOff","offbeatReducer","bar","last","invertInterval","smallestInterval","inversion","minInterval","preferRightMovement","intervalMatrix","randomSynth","allowed","gains","sine","triangle","square","sawtooth","wave","param","linearRampToValueAtTime","setTargetAtTime","max","Musician","instrument","swing","measure","bass","crash","fill","ride","hihat","tonal_2","Musician_1","swing_1","Pianist","playedNotes","playedPatterns","playedChords","intelligentVoicings","groove","noTonic","rollFactor","measureLength","exact","playChord","humanFactor","arpeggio","ceil","getLastVoicing","getVoicing","scorenotes","before","near","smallest","root","Drummer","kick","snare","patterns","Bassist","playBass","getStep","octave","steps","Sampler","options","buffers","samples","sources","loadSources","getBuffer","buffer","fetch","res","arrayBuffer","decodeAudioData","decodedData","getSource","source","createBufferSource","getSources","hasLoaded","error","loadSource","allLoaded","playSounds","sounds","sound","playSource","Kick","setup","osc","trigger","setValueAtTime","exponentialRampToValueAtTime","Snare","noiseBuffer","sampleRate","createBuffer","output","getChannelData","noise","noiseFilter","createBiquadFilter","noiseEnvelope","oscEnvelope","Kick_1","Snare_1","PlasticDrums","missing","Metronome","synth","count","bars","Band_1","Pianist_1","Bassist_1","Drummer_1","PlasticDrums_1","Metronome_1","Trio","piano","drums","setupMix","instruments","setupInstruments","pianist","bassist","drummer","metronome","__importStar","result","k","Sampler_1","Trio_1","util","global","OVERLAY_ID","OldModule","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","assets","asset","hmrApply","isNew","hmrAccept","close","onclose","reload","removeErrorOverlay","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","parents","dep","Function","generated","js","deps","cached","cb","some","C1","Db1","D1","Eb1","E1","F1","Gb1","G1","Ab1","A1","Bb1","B1","C2","Db2","D2","Eb2","E2","F2","Gb2","G2","Ab2","A2","Bb2","B2","C3","Db3","D3","Eb3","E3","F3","Gb3","G3","Ab3","A3","Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","G4","Ab4","A4","Bb4","B4","C5","Db5","D5","Eb5","E5","F5","Gb5","G5","Ab5","A5","Bb5","B5","C6","Db6","D6","Eb6","E6","F6","Gb6","G6","Ab6","A6","Bb6","B6","C7","Db7","D7","Eb7","E7","F7","Gb7","G7","Ab7","A7","Bb7","B7","h","drumset","noteProps","iprops","sdata","cdata"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ArBzCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AE7UA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEO,IAAMpN,sBAAO4E,cAAb;AACA,IAAM3E,wBAAQ1R,eAAd;AACA,IAAM+P,wBAAQ+O,eAAd;AACA,IAAMhP,sBAAO9I,cAAb;AACA,IAAM4I,wBAAQ1L,eAAd;AACA,IAAM6a,4BAAU,CAACtN,IAAD,EAAOC,KAAP,EAAc3B,KAAd,EAAqBD,IAArB,EAA2BF,KAA3B,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCmEgB3S,WAAAA;QA2QAC,WAAAA;AApVhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,IAAIC,QAAQ,8CAA8CC,KAA9C,CAAoD,GAApD,CAAZ;;AAEA;;;;;;;;;;;AAWO,IAAIC,wBAAQ,UAAUC,QAAV,EAAoB;AAAE,SAAO,OAAOA,QAAP,KAAoB,QAApB,GAC1CH,MAAMI,KAAN,EAD0C,GAE1CJ,MAAMtB,MAAN,CAAa,UAAU2B,CAAV,EAAa;AACxB,QAAIC,MAAMD,EAAE,CAAF,KAAQ,GAAlB;AACA,WAAOF,SAASrE,OAAT,CAAiBwE,GAAjB,MAA0B,CAAC,CAAlC;AACD,GAHD,CAFmC;AAK9B,CALJ;;AAOP,IAAIC,SAASL,MAAM,IAAN,CAAb;AACA,IAAIM,QAAQN,MAAM,IAAN,CAAZ;AACA,IAAIO,QAAQ,iDAAZ;;AAEA;;;;;;;;;;;;;;;AAeO,SAASX,QAAT,CAAkBY,GAAlB,EAAuB;AAC5B,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAAEA,UAAM,EAAN;AAAW;AAC1C,MAAIpB,IAAImB,MAAME,IAAN,CAAWD,GAAX,CAAR;AACA,MAAI,CAACpB,CAAL,EAAQ;AAAE,WAAO,IAAP;AAAc;AACxB,SAAO,CAACA,EAAE,CAAF,EAAKsB,WAAL,EAAD,EAAqBtB,EAAE,CAAF,EAAKuB,OAAL,CAAa,IAAb,EAAmB,IAAnB,CAArB,EAA+CvB,EAAE,CAAF,CAA/C,EAAqDA,EAAE,CAAF,CAArD,CAAP;AACD;;AAED,IAAIwB,UAAU9D,OAAO+D,MAAP,CAAc;AAC1BC,MAAI,IADsB;AAE1BjL,QAAM,IAFoB;AAG1BkL,QAAM,IAHoB;AAI1BC,OAAK,IAJqB;AAK1BC,OAAK,IALqB;AAM1BC,UAAQ,IANkB;AAO1BC,UAAQ,IAPkB;AAQ1BC,QAAM,IARoB;AAS1BC,QAAM;AAToB,CAAd,CAAd;;AAYA,IAAIC,OAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,EAAnB,CAAX;AACA,IAAIC,aAAa,UAAUf,GAAV,EAAe;AAC9B,MAAIgB,SAAS5B,SAASY,GAAT,CAAb;AACA,MAAIgB,OAAO,CAAP,MAAc,EAAd,IAAoBA,OAAO,CAAP,MAAc,EAAtC,EAA0C;AAAE,WAAOZ,OAAP;AAAiB;AAC7D,MAAIa,SAASD,OAAO,CAAP,CAAb;AACA,MAAIpB,MAAMoB,OAAO,CAAP,CAAV;AACA,MAAIN,SAASM,OAAO,CAAP,CAAb;AACA,MAAIE,IAAI,EAAED,QAAQA,MAAV,EAAkBrB,KAAKA,GAAvB,EAA4Bc,QAAQA,MAApC,EAAR;AACAQ,IAAEZ,EAAF,GAAOY,EAAED,MAAF,GAAWC,EAAEtB,GAApB;AACAsB,IAAE7L,IAAF,GAAS6L,EAAEZ,EAAF,GAAOI,MAAhB;AACAQ,IAAEX,IAAF,GAAS,CAACW,EAAED,MAAF,CAASE,UAAT,CAAoB,CAApB,IAAyB,CAA1B,IAA+B,CAAxC;AACAD,IAAEV,GAAF,GAAQU,EAAEtB,GAAF,CAAM,CAAN,MAAa,GAAb,GAAmB,CAACsB,EAAEtB,GAAF,CAAMxM,MAA1B,GAAmC8N,EAAEtB,GAAF,CAAMxM,MAAjD;AACA8N,IAAET,GAAF,GAAQC,OAAOtN,MAAP,GAAgB,CAACsN,MAAjB,GAA0B,IAAlC;AACAQ,IAAEP,MAAF,GAAW,CAACG,KAAKI,EAAEX,IAAP,IAAeW,EAAEV,GAAjB,GAAuB,GAAxB,IAA+B,EAA1C;AACAU,IAAEN,IAAF,GAASM,EAAET,GAAF,KAAU,IAAV,GAAiBK,KAAKI,EAAEX,IAAP,IAAeW,EAAEV,GAAjB,GAAuB,MAAMU,EAAET,GAAF,GAAQ,CAAd,CAAxC,GAA2D,IAApE;AACAS,IAAEL,IAAF,GAASO,WAAWF,EAAEN,IAAb,CAAT;AACA,SAAOtE,OAAO+D,MAAP,CAAca,CAAd,CAAP;AACD,CAhBD;;AAkBA,IAAIG,OAAO,UAAUC,EAAV,EAAczL,KAAd,EAAqB;AAC9B,MAAKA,UAAU,KAAK,CAApB,EAAwBA,QAAQ,EAAR;;AAExB,SAAO,UAAUmK,GAAV,EAAe;AAAE,WAAOnK,MAAMmK,GAAN,MAAenK,MAAMmK,GAAN,IAAasB,GAAGtB,GAAH,CAA5B,CAAP;AAA8C,GAAtE;AACD,CAJD;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BO,IAAI9D,wBAAQmF,KAAKN,UAAL,CAAZ;;AAEP;;;;;;;;;;;;;;;AAeO,IAAI1L,sBAAO,UAAU2K,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAW3K,IAAlB;AAAyB,CAArD;;AAEP;;;;;;;;;;AAUO,IAAIiL,kBAAK,UAAUN,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWM,EAAlB;AAAuB,CAAjD;;AAEP;;;;;;;;;;;;AAYO,IAAIM,sBAAO,UAAUW,IAAV,EAAgB;AAAE,SAAOrF,MAAMqF,IAAN,EAAYX,IAAZ,IAAoB,CAACW,IAArB,IAA6B,IAApC;AAA2C,CAAxE;;AAEP;;;;;;;AAOO,IAAIH,kCAAa,UAAUR,IAAV,EAAgBY,MAAhB,EAAwB;AAC5C,MAAKA,WAAW,KAAK,CAArB,EAAyBA,SAAS,GAAT;;AAEzB,SAAO,OAAOZ,IAAP,KAAgB,QAAhB,GAA2BpF,KAAKiG,GAAL,CAAS,CAAT,EAAY,CAACb,OAAO,EAAR,IAAc,EAA1B,IAAgCY,MAA3D,GAAoE,IAA3E;AACH,CAJM;;AAMP;;;;;;;;;;AAUO,IAAIX,sBAAO,UAAUU,IAAV,EAAgB;AAAE,SAAOrF,MAAMqF,IAAN,EAAYV,IAAZ,IAAoBO,WAAWG,IAAX,CAA3B;AAA8C,CAA3E;;AAEP,IAAIG,KAAKlG,KAAKmG,GAAL,CAAS,CAAT,CAAT;AACA,IAAIC,OAAOpG,KAAKmG,GAAL,CAAS,GAAT,CAAX;AACA;;;;;;;;;;;AAWO,IAAIE,kCAAa,UAAUhB,IAAV,EAAgB;AACtC,MAAIiB,IAAI,MAAMtG,KAAKmG,GAAL,CAASd,IAAT,IAAiBe,IAAvB,IAA+BF,EAA/B,GAAoC,EAA5C;AACA,SAAOlG,KAAKuG,KAAL,CAAWD,IAAI,GAAf,IAAsB,GAA7B;AACD,CAHM;;AAKP;;;;;;;;;;AAUO,IAAInB,0BAAS,UAAUX,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWW,MAAlB;AAA2B,CAAzD;;AAEP;;;;;;;;;;;AAWO,IAAIF,oBAAM,UAAUT,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWS,GAAlB;AAAwB,CAAnD;;AAEP,IAAIuB,UAAU,SAAd;AACA;;;;;;;AAOO,IAAIC,sCAAe,UAAU1B,IAAV,EAAgB;AAAE,SAAOyB,QAAQzB,IAAR,CAAP;AAAuB,CAA5D;;AAEP,IAAI2B,UAAU,UAAUC,CAAV,EAAaxC,CAAb,EAAgB;AAAE,SAAO/L,MAAM+L,IAAI,CAAV,EAAayC,IAAb,CAAkBD,CAAlB,CAAP;AAA8B,CAA9D;AACA,IAAIE,WAAW,UAAUC,GAAV,EAAeC,EAAf,EAAmB;AAAE,SAAQ,OAAOD,GAAP,KAAe,QAAf,GAA0B,EAA1B,GAA+BC,GAAGD,GAAH,CAAvC;AAAkD,CAAtF;;AAEA;;;;;;;AAOO,IAAIE,8BAAW,UAAUhC,GAAV,EAAe;AAAE,SAAO6B,SAAS7B,GAAT,EAAc,UAAUA,GAAV,EAAe;AAAE,WAAQA,MAAM,CAAN,GAAU0B,QAAQ,GAAR,EAAa,CAAC1B,GAAd,CAAV,GAA+B0B,QAAQ,GAAR,EAAa1B,GAAb,CAAvC;AAA4D,GAA3F,CAAP;AAAsG,CAAtI;;AAEP;;;;;;;;;;;;;;;;;;;;;;;;AAwBO,IAAIiC,sBAAO,UAAUC,SAAV,EAAqBC,QAArB,EAA+B;AAC/C,MAAKD,cAAc,KAAK,CAAxB,EAA4BA,YAAY,EAAZ;AAC5B,MAAKC,aAAa,KAAK,CAAvB,EAA2BA,WAAW,IAAX;;AAE3B,MAAIC,MAAMD,WACNrG,OAAOC,MAAP,CAAc,EAAd,EAAkBL,MAAMyG,QAAN,CAAlB,EAAmCD,SAAnC,CADM,GAENA,SAFJ;AAGA,MAAInC,OAAOqC,IAAIrC,IAAf;AACA,MAAIC,MAAMoC,IAAIpC,GAAd;AACA,MAAIC,MAAMmC,IAAInC,GAAd;AACA,MAAIQ,SAASgB,aAAa1B,IAAb,CAAb;AACA,MAAI,CAACU,MAAL,EAAa;AAAE,WAAO,IAAP;AAAc;AAC7B,MAAIX,KAAKW,SAASuB,SAAShC,GAAT,CAAlB;AACA,SAAOC,OAAOA,QAAQ,CAAf,GAAmBH,KAAKG,GAAxB,GAA8BH,EAArC;AACD,CAdM;;AAgBP;;;;AAIO,IAAIuC,wBAAQJ,IAAZ;;AAEP;;;;;;;;;;;;;;AAcO,SAASpD,QAAT,CAAkBiD,GAAlB,EAAuBQ,MAAvB,EAA+B;AACpCR,QAAM9G,KAAKuG,KAAL,CAAWO,GAAX,CAAN;AACA,MAAIS,MAAMD,WAAW,IAAX,GAAkBjD,MAAlB,GAA2BC,KAArC;AACA,MAAIQ,KAAKyC,IAAIT,MAAM,EAAV,CAAT;AACA,MAAIU,IAAIxH,KAAKC,KAAL,CAAW6G,MAAM,EAAjB,IAAuB,CAA/B;AACA,SAAOhC,KAAK0C,CAAZ;AACD;;AAED;;;;;;;;;;;;;AAaO,IAAIC,8BAAW,UAAU1B,IAAV,EAAgB2B,OAAhB,EAAyB;AAC7C,MAAIN,MAAM1G,MAAMqF,IAAN,CAAV;AACA,MAAIf,MAAMoC,IAAIpC,GAAd;AACA,MAAIG,SAASiC,IAAIjC,MAAjB;AACA,MAAIC,OAAOgC,IAAIhC,IAAf;AACA,MAAID,WAAW,IAAf,EAAqB;AAAE,WAAO,IAAP;AAAc;AACrC,MAAIwC,YAAYD,YAAY,KAAZ,GAAoB1C,MAAM,CAA1B,GAA8BA,MAAM,CAApD;AACA,SAAOI,SAAS,IAAT,GACHN,GAAGjB,SAASsB,MAAT,EAAiBwC,SAAjB,CAAH,CADG,GAEH9D,SAASuB,IAAT,EAAeuC,SAAf,CAFJ;AAGD,CAVM;;AAYP;;;;;;;;;AASO,IAAIC,kCAAa,UAAU7B,IAAV,EAAgB;AAAE,SAAO0B,SAAS1B,IAAT,EAAe,KAAf,CAAP;AAA+B,CAAlE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCvVSkC,QAAAA;QAgBAC,SAAAA;QA6BAC,OAAAA;QAUAC,SAAAA;;AA/EhB;;AAEA;AACA,SAASE,IAAT,CAAcC,CAAd,EAAiBpE,CAAjB,EAAoB;AAClB,OAAK,IAAIqE,IAAI,EAAb,EAAiBrE,GAAjB,EAAsBqE,EAAErE,CAAF,IAAOA,IAAIoE,CAAjC,EAAmC;AAAE;AAAG;AACxC,SAAOC,CAAP;AACD;AACD;AAtBA;;;;;;;;;;;;;;;AAuBA,SAASC,KAAT,CAAeF,CAAf,EAAkBpE,CAAlB,EAAqB;AACnB,OAAK,IAAIqE,IAAI,EAAb,EAAiBrE,GAAjB,EAAsBqE,EAAErE,CAAF,IAAOoE,IAAIpE,CAAjC,EAAmC;AAAE;AAAG;AACxC,SAAOqE,CAAP;AACD;;AAED;;;;;;;;;;;AAWO,SAASP,KAAT,CAAeO,CAAf,EAAkBD,CAAlB,EAAqB;AAC1B,SAAOC,MAAM,IAAN,IAAcD,MAAM,IAApB,GACH,EADG,GAEHC,IAAID,CAAJ,GAAQD,KAAKE,CAAL,EAAQD,IAAIC,CAAJ,GAAQ,CAAhB,CAAR,GAA6BC,MAAMD,CAAN,EAASA,IAAID,CAAJ,GAAQ,CAAjB,CAFjC;AAGD;AACD;;;;;;;;;;;AAWO,SAASL,MAAT,CAAgBQ,KAAhB,EAAuBC,GAAvB,EAA4B;AACjC,MAAI3Q,MAAM2Q,IAAI/Q,MAAd;AACA,MAAIuM,IAAI,CAACuE,QAAQ1Q,GAAR,GAAcA,GAAf,IAAsBA,GAA9B;AACA,SAAO2Q,IAAIzE,KAAJ,CAAUC,CAAV,EAAanM,GAAb,EAAkBH,MAAlB,CAAyB8Q,IAAIzE,KAAJ,CAAU,CAAV,EAAaC,CAAb,CAAzB,CAAP;AACD;;AAED;;;;;;;;;AASO,IAAI4D,4BAAU,UAAUY,GAAV,EAAe;AAAE,SAAOA,IAAInG,MAAJ,CAAW,UAAU2B,CAAV,EAAa;AAAE,WAAOA,MAAM,CAAN,IAAWA,CAAlB;AAAsB,GAAhD,CAAP;AAA2D,CAA1F;;AAEP;AACA,IAAIyE,SAAS,UAAUzE,CAAV,EAAa;AACxB,MAAIf,IAAI,qBAAKe,CAAL,CAAR;AACA,SAAOf,MAAM,IAAN,GAAaA,CAAb,GAAiB,qBAAKe,IAAI,MAAT,CAAxB;AACD,CAHD;;AAKA;;;;;;AAMO,SAASgE,IAAT,CAAcU,GAAd,EAAmB;AACxB,SAAOd,QAAQc,IAAIhH,GAAJ,CAAQhI,eAAR,CAAR,EAAuBsO,IAAvB,CAA4B,UAAUK,CAAV,EAAaD,CAAb,EAAgB;AAAE,WAAOK,OAAOJ,CAAP,IAAYI,OAAOL,CAAP,CAAnB;AAA+B,GAA7E,CAAP;AACD;;AAED;;;;;;AAMO,SAASH,MAAT,CAAgBO,GAAhB,EAAqB;AAC1B,SAAOR,KAAKQ,GAAL,EAAUnG,MAAV,CAAiB,UAAU2B,CAAV,EAAa7L,CAAb,EAAgBkQ,CAAhB,EAAmB;AAAE,WAAOlQ,MAAM,CAAN,IAAW6L,MAAMqE,EAAElQ,IAAI,CAAN,CAAxB;AAAmC,GAAzE,CAAP;AACD;;AAED;;;;;;;;;;;AAWO,IAAIwP,4BAAU,UAAUa,GAAV,EAAeG,GAAf,EAAoB;AACvC,MAAKA,QAAQ,KAAK,CAAlB,EAAsBA,MAAM9I,KAAK+I,MAAX;;AAEtB,MAAIzQ,CAAJ,EAAO0Q,CAAP;AACA,MAAI5F,IAAIuF,IAAI/Q,MAAZ;AACA,SAAOwL,CAAP,EAAU;AACR9K,QAAKwQ,QAAQ1F,GAAT,GAAgB,CAApB;AACA4F,QAAIL,IAAIvF,CAAJ,CAAJ;AACAuF,QAAIvF,CAAJ,IAASuF,IAAIrQ,CAAJ,CAAT;AACAqQ,QAAIrQ,CAAJ,IAAS0Q,CAAT;AACD;AACD,SAAOL,GAAP;AACD,CAZM;;AAcP;;;;;;;AAOO,IAAId,sCAAe,UAAUc,GAAV,EAAe;AACvC,MAAIA,IAAI/Q,MAAJ,KAAe,CAAnB,EAAsB;AAAE,WAAO,CAAC,EAAD,CAAP;AAAc;AACtC,SAAOiQ,aAAac,IAAIzE,KAAJ,CAAU,CAAV,CAAb,EAA2B+E,MAA3B,CAAkC,UAAS7E,GAAT,EAAc8E,IAAd,EAAoB;AAC3D,WAAO9E,IAAIvM,MAAJ,CACL8Q,IAAI9G,GAAJ,CAAQ,UAAS7K,CAAT,EAAYmS,GAAZ,EAAiB;AACvB,UAAIC,UAAUF,KAAKhF,KAAL,EAAd;AACAkF,cAAQ3J,MAAR,CAAe0J,GAAf,EAAoB,CAApB,EAAuBR,IAAI,CAAJ,CAAvB;AACA,aAAOS,OAAP;AACD,KAJD,CADK,CAAP;AAOD,GARM,EAQJ,EARI,CAAP;AASD,CAXM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCaS1I,QAAAA;AA/IhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA,IAAI2I,UAAU,kCAAd;AACA;AACA,IAAIC,UAAU,8BAAd;AACA,IAAI/E,QAAQ,IAAIgF,MAAJ,CAAW,MAAMF,OAAN,GAAgB,GAAhB,GAAsBC,OAAtB,GAAgC,GAA3C,CAAZ;AACA,IAAIE,QAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,EAAnB,CAAZ;AACA,IAAIC,QAAQ,SAAZ;AACA,IAAIC,UAAU,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,CAAd;AACA,IAAI5F,QAAQ,sCAAsCC,KAAtC,CAA4C,GAA5C,CAAZ;;AAEA;;;;;;;;;;;AAWO,IAAIC,wBAAQ,UAAU2F,KAAV,EAAiB;AAAE,SAAO,OAAOA,KAAP,KAAiB,QAAjB,GACvC7F,MAAMI,KAAN,EADuC,GAEvCJ,MAAMtB,MAAN,CAAa,UAAU2B,CAAV,EAAa;AAAE,WAAOwF,MAAM/J,OAAN,CAAcuE,EAAE,CAAF,CAAd,MAAwB,CAAC,CAAhC;AAAoC,GAAhE,CAFgC;AAEoC,CAFnE;;AAIA,IAAIP,8BAAW,UAAUY,GAAV,EAAe;AACnC,MAAIpB,IAAImB,MAAME,IAAN,CAAWD,GAAX,CAAR;AACA,SAAOpB,MAAM,IAAN,GAAa,IAAb,GAAoBA,EAAE,CAAF,IAAO,CAACA,EAAE,CAAF,CAAD,EAAOA,EAAE,CAAF,CAAP,CAAP,GAAsB,CAACA,EAAE,CAAF,CAAD,EAAOA,EAAE,CAAF,CAAP,CAAjD;AACD,CAHM;;AAKP,IAAIwG,SAAS9I,OAAO+D,MAAP,CAAc;AACzBhL,QAAM,IADmB;AAEzBiN,OAAK,IAFoB;AAGzB+C,KAAG,IAHsB;AAIzB9E,QAAM,IAJmB;AAKzBC,OAAK,IALoB;AAMzB/K,OAAK,IANoB;AAOzB6P,QAAM,IAPmB;AAQzBC,UAAQ,IARiB;AASzBC,aAAW,IATc;AAUzB7E,UAAQ;AAViB,CAAd,CAAb;;AAaA,IAAIuB,UAAU,UAAUC,CAAV,EAAaxC,CAAb,EAAgB;AAAE,SAAO/L,MAAM4H,KAAKiK,GAAL,CAAS9F,CAAT,IAAc,CAApB,EAAuByC,IAAvB,CAA4BD,CAA5B,CAAP;AAAwC,CAAxE;;AAEA,IAAIuD,SAAS,UAAUJ,IAAV,EAAgBD,CAAhB,EAAmB;AAC9B,MAAIA,MAAM,GAAN,IAAaC,SAAS,GAA1B,EAA+B;AAAE,WAAO,CAAP;AAAW;AAC5C,MAAID,MAAM,GAAN,IAAaC,SAAS,GAA1B,EAA+B;AAAE,WAAO,CAAP;AAAW;AAC5C,MAAID,MAAM,GAAN,IAAaC,SAAS,GAA1B,EAA+B;AAAE,WAAO,CAAC,CAAR;AAAY;AAC7C,MAAI,OAAOK,IAAP,CAAYN,CAAZ,CAAJ,EAAoB;AAAE,WAAOA,EAAEjS,MAAT;AAAkB;AACxC,MAAI,OAAOuS,IAAP,CAAYN,CAAZ,CAAJ,EAAoB;AAAE,WAAOC,SAAS,GAAT,GAAe,CAACD,EAAEjS,MAAlB,GAA2B,CAACiS,EAAEjS,MAAH,GAAY,CAA9C;AAAkD;AACxE,SAAO,IAAP;AACD,CAPD;;AASA,IAAIwS,SAAS,UAAUN,IAAV,EAAgB9E,GAAhB,EAAqB;AAChC,MAAIA,QAAQ,CAAZ,EAAe;AAAE,WAAO8E,SAAS,GAAT,GAAe,GAAf,GAAqB,GAA5B;AAAkC,GAAnD,MACK,IAAI9E,QAAQ,CAAC,CAAT,IAAc8E,SAAS,GAA3B,EAAgC;AAAE,WAAO,GAAP;AAAa,GAA/C,MACA,IAAI9E,MAAM,CAAV,EAAa;AAAE,WAAO0B,QAAQ,GAAR,EAAa1B,GAAb,CAAP;AAA2B,GAA1C,MACA,IAAIA,MAAM,CAAV,EAAa;AAAE,WAAO0B,QAAQ,GAAR,EAAaoD,SAAS,GAAT,GAAe9E,GAAf,GAAqBA,MAAM,CAAxC,CAAP;AAAoD,GAAnE,MACA;AAAE,WAAO,IAAP;AAAc;AACtB,CAND;;AAQA,IAAIqF,YAAY,UAAUvD,GAAV,EAAe;AAAE,SAAO,CAAC9G,KAAKiK,GAAL,CAASnD,GAAT,IAAgB,CAAjB,IAAsB,CAA7B;AAAiC,CAAlE;;AAEA,IAAIvB,aAAa,UAAUf,GAAV,EAAe;AAC9B,MAAIwE,IAAIpF,SAASY,GAAT,CAAR;AACA,MAAIwE,MAAM,IAAV,EAAgB;AAAE,WAAOY,MAAP;AAAgB;AAClC,MAAIlE,IAAI,EAAEoB,KAAK,CAACkC,EAAE,CAAF,CAAR,EAAca,GAAGb,EAAE,CAAF,CAAjB,EAAR;AACAtD,IAAEX,IAAF,GAASsF,UAAU3E,EAAEoB,GAAZ,CAAT;AACApB,IAAEoE,IAAF,GAASL,MAAM/D,EAAEX,IAAR,CAAT;AACA,MAAIW,EAAEoE,IAAF,KAAW,GAAX,IAAkBpE,EAAEmE,CAAF,KAAQ,GAA9B,EAAmC;AAAE,WAAOD,MAAP;AAAgB;;AAErDlE,IAAE7L,IAAF,GAAS,KAAK6L,EAAEoB,GAAP,GAAapB,EAAEmE,CAAxB;AACAnE,IAAEzL,GAAF,GAAQyL,EAAEoB,GAAF,GAAQ,CAAR,GAAY,CAAC,CAAb,GAAiB,CAAzB;AACApB,IAAEqE,MAAF,GAAWrE,EAAEoB,GAAF,KAAU,CAAV,IAAepB,EAAEoB,GAAF,KAAU,CAAC,CAA1B,GAA8BpB,EAAEoB,GAAhC,GAAsCpB,EAAEzL,GAAF,IAASyL,EAAEX,IAAF,GAAS,CAAlB,CAAjD;AACAW,IAAEV,GAAF,GAAQkF,OAAOxE,EAAEoE,IAAT,EAAepE,EAAEmE,CAAjB,CAAR;AACAnE,IAAET,GAAF,GAAQjF,KAAKC,KAAL,CAAW,CAACD,KAAKiK,GAAL,CAASvE,EAAEoB,GAAX,IAAkB,CAAnB,IAAwB,CAAnC,CAAR;AACApB,IAAEsE,SAAF,GAActE,EAAEzL,GAAF,IAASuP,MAAM9D,EAAEX,IAAR,IAAgBW,EAAEV,GAAlB,GAAwB,KAAKU,EAAET,GAAxC,CAAd;AACAS,IAAEP,MAAF,GAAW,CAAEO,EAAEzL,GAAF,IAASuP,MAAM9D,EAAEX,IAAR,IAAgBW,EAAEV,GAA3B,CAAD,GAAoC,EAApC,GAAyC,EAA1C,IAAgD,EAA3D;AACA,SAAOlE,OAAO+D,MAAP,CAAca,CAAd,CAAP;AACD,CAhBD;;AAkBA,IAAIrL,QAAQ,EAAZ;AACA;;;;;;;;;;;;;;;;;;;AAmBO,SAASqG,KAAT,CAAe8D,GAAf,EAAoB;AACzB,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAAE,WAAOoF,MAAP;AAAgB;AAC/C,SAAOvP,MAAMmK,GAAN,MAAenK,MAAMmK,GAAN,IAAae,WAAWf,GAAX,CAA5B,CAAP;AACD;;AAED;;;;;;;;;;;AAWO,IAAIsC,oBAAM,UAAUtC,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWsC,GAAlB;AAAwB,CAAnD;;AAEP;;;;;;;;;;;;AAYO,IAAIjN,sBAAO,UAAU2K,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAW3K,IAAlB;AAAyB,CAArD;;AAEP;;;;;;;;;;;;AAYO,IAAImQ,gCAAY,UAAUxF,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWwF,SAAlB;AAA8B,CAA/D;;AAEP;;;;;;;;AAQO,IAAI7E,0BAAS,UAAUX,GAAV,EAAe;AAAE,SAAO9D,MAAM8D,GAAN,EAAWW,MAAlB;AAA2B,CAAzD;;AAEP;;;;;;;;;;;;;;;;;AAiBO,IAAImF,kBAAK,UAAUC,GAAV,EAAe;AAC7B,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAAEA,UAAM7J,MAAM6J,GAAN,EAAWpF,MAAjB;AAA0B;AACzD,SAAO,OAAOoF,GAAP,KAAe,QAAf,GAA0Bb,QAAQa,MAAM,EAAd,CAA1B,GAA8C,IAArD;AACD,CAHM;;AAKP;;;;;;;;;;;;;;;;;;;AAmBO,IAAIlD,wBAAQ,UAAUD,GAAV,EAAe;AAChC,MAAKA,QAAQ,KAAK,CAAlB,EAAsBA,MAAM,EAAN;AACtB,MAAIN,MAAMM,IAAIN,GAAd;AACA,MAAI/B,OAAOqC,IAAIrC,IAAf;AACA,MAAIC,MAAMoC,IAAIpC,GAAd;AACA,MAAIC,MAAMmC,IAAInC,GAAd,CAAmB,IAAKA,QAAQ,KAAK,CAAlB,EAAsBA,MAAM,CAAN;AACzC,MAAIhL,MAAMmN,IAAInN,GAAd;;AAEA,MAAI8K,SAASiD,SAAb,EAAwB;AAAElB,UAAM/B,OAAO,CAAP,GAAW,IAAIE,GAArB;AAA2B;AACrD,MAAI6B,QAAQkB,SAAZ,EAAuB;AAAE,WAAO,IAAP;AAAc;;AAEvC,MAAIwC,IAAIvQ,MAAM,CAAN,GAAU,GAAV,GAAgB,EAAxB;AACA,MAAI6P,OAAOL,MAAMY,UAAUvD,GAAV,CAAN,CAAX;AACA,SAAO0D,IAAI1D,GAAJ,GAAUsD,OAAON,IAAP,EAAa9E,GAAb,CAAjB;AACD,CAdM;;AAgBP;;;;;;;;;;;;;;AAcO,IAAIyC,8BAAW,UAAUjD,GAAV,EAAe;AACnC,MAAIkB,IAAIhF,MAAM8D,GAAN,CAAR;AACA,MAAIkB,MAAMkE,MAAV,EAAkB;AAAE,WAAO,IAAP;AAAc;AAClC,SAAOlE,EAAEqE,MAAF,GAAWrE,EAAEmE,CAApB;AACD,CAJM;;AAMP;;;;;;;;;;;;;AAaO,IAAIY,0BAAS,UAAUjG,GAAV,EAAe;AACjC,MAAIkB,IAAIhF,MAAM8D,GAAN,CAAR;AACA,MAAIkB,MAAMkE,MAAV,EAAkB;AAAE,WAAO,IAAP;AAAc;AAClC,MAAI7E,OAAO,CAAC,IAAIW,EAAEX,IAAP,IAAe,CAA1B;AACA,MAAIC,MAAMU,EAAEoE,IAAF,KAAW,GAAX,GAAiB,CAACpE,EAAEV,GAApB,GAA0B,EAAEU,EAAEV,GAAF,GAAQ,CAAV,CAApC;AACA,SAAOqC,MAAM,EAAEtC,MAAMA,IAAR,EAAcC,KAAKA,GAAnB,EAAwBC,KAAKS,EAAET,GAA/B,EAAoChL,KAAKyL,EAAEzL,GAA3C,EAAN,CAAP;AACD,CANM;;AAQP;AACA,IAAIyQ,KAAK,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,CAAT;AACA;AACA,IAAIC,KAAK,0BAA0B5G,KAA1B,CAAgC,GAAhC,CAAT;;AAEA;;;;;;;;;;;;;AAaO,IAAI6G,wCAAgB,UAAU9D,GAAV,EAAe;AACxC,MAAI0D,IAAI1D,MAAM,CAAN,GAAU,CAAC,CAAX,GAAe,CAAvB;AACA,MAAI3C,IAAInE,KAAKiK,GAAL,CAASnD,GAAT,CAAR;AACA,MAAI+D,IAAI1G,IAAI,EAAZ;AACA,MAAIqD,IAAIxH,KAAKC,KAAL,CAAWkE,IAAI,EAAf,CAAR;AACA,SAAOqG,KAAKE,GAAGG,CAAH,IAAQ,IAAIrD,CAAjB,IAAsBmD,GAAGE,CAAH,CAA7B;AACD,CANM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCrNS9H,YAAAA;QA0BA+H,WAAAA;QAeAC,SAAAA;QAoBAC,cAAAA;QAQAC,eAAAA;QAoBAC,MAAAA;QAcAC,WAAAA;QAwBAC,WAAAA;QAwBApB,YAAAA;;AAlOhB;;AACA;;AAEA;AACA;AA/BA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,IAAIsB,SAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAC,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,CAAb;;AAEA;AACA,IAAIC,QAAQ,UAAUC,CAAV,EAAa;AAAE,SAAOxL,KAAKC,KAAL,CAAWuL,IAAI,CAAJ,GAAQ,EAAnB,CAAP;AAAgC,CAA3D;;AAEA;AACA,IAAIC,aAAaH,OAAOzJ,GAAP,CAAW0J,KAAX,CAAjB;;AAEA,IAAIG,SAAS,UAAUtE,GAAV,EAAe;AAC1B,MAAIrC,OAAOqC,IAAIrC,IAAf;AACA,MAAIC,MAAMoC,IAAIpC,GAAd;AACA,MAAIC,MAAMmC,IAAInC,GAAd;AACA,MAAIhL,MAAMmN,IAAInN,GAAd,CAAmB,IAAKA,QAAQ,KAAK,CAAlB,EAAsBA,MAAM,CAAN;;AAEzC,MAAIuR,IAAIF,OAAOvG,IAAP,IAAe,IAAIC,GAA3B;AACA,MAAIC,QAAQ,IAAZ,EAAkB;AAAE,WAAO,CAAChL,MAAMuR,CAAP,CAAP;AAAmB;AACvC,MAAIhE,IAAIvC,MAAMwG,WAAW1G,IAAX,CAAN,GAAyB,IAAIC,GAArC;AACA,SAAO,CAAC/K,MAAMuR,CAAP,EAAUvR,MAAMuN,CAAhB,CAAP;AACD,CAVD;;AAYA;AACA;AACA;AACA;AACA,IAAImE,QAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAZ;;AAEA;AACA,SAASC,SAAT,CAAmBJ,CAAnB,EAAsB;AACpB,MAAIlT,IAAI,CAACkT,IAAI,CAAL,IAAU,CAAlB;AACA,SAAOlT,IAAI,CAAJ,GAAQ,IAAIA,CAAZ,GAAgBA,CAAvB;AACD;;AAED,IAAIuT,SAAS,UAAUL,CAAV,EAAahE,CAAb,EAAgBvN,GAAhB,EAAqB;AAChC,MAAI8K,OAAO4G,MAAMC,UAAUJ,CAAV,CAAN,CAAX;AACA,MAAIxG,MAAMhF,KAAKC,KAAL,CAAW,CAACuL,IAAI,CAAL,IAAU,CAArB,CAAV;AACA,MAAIhE,MAAMQ,SAAV,EAAqB;AAAE,WAAO,EAAEjD,MAAMA,IAAR,EAAcC,KAAKA,GAAnB,EAAwB/K,KAAKA,GAA7B,EAAP;AAA4C;AACnE,MAAIgL,MAAMuC,IAAI,IAAIxC,GAAR,GAAcyG,WAAW1G,IAAX,CAAxB;AACA,SAAO,EAAEA,MAAMA,IAAR,EAAcC,KAAKA,GAAnB,EAAwBC,KAAKA,GAA7B,EAAkChL,KAAKA,GAAvC,EAAP;AACD,CAND;;AAQA,IAAI4L,OAAO,UAAUC,EAAV,EAAczL,KAAd,EAAqB;AAC9B,MAAKA,UAAU,KAAK,CAApB,EAAwBA,QAAQ,EAAR;;AAExB,SAAO,UAAUmK,GAAV,EAAe;AAAE,WAAOnK,MAAMmK,GAAN,MAAenK,MAAMmK,GAAN,IAAasB,GAAGtB,GAAH,CAA5B,CAAP;AAA8C,GAAtE;AACD,CAJD;;AAMA,IAAIsH,UAAU,UAAUpL,KAAV,EAAiB;AAAE,SAAOmF,KAAK,UAAUrB,GAAV,EAAe;AACxD,QAAIkB,IAAIhF,MAAM8D,GAAN,CAAR;AACA,WAAOkB,EAAE7L,IAAF,KAAW,IAAX,GAAkB,IAAlB,GAAyB6R,OAAOhG,CAAP,CAAhC;AACD,GAHqC,CAAP;AAG1B,CAHP;;AAKA,IAAIqG,aAAaD,QAAQ6Z,gBAAR,CAAjB;AACA,IAAI3Z,YAAYF,QAAQ8Z,oBAAR,CAAhB;;AAEA;;;;;;;;;;;;;;;;AAgBO,SAAS7iB,SAAT,CAAmBgD,IAAnB,EAAyBqF,QAAzB,EAAmC;AACxC,MAAI/S,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUU,CAAV,EAAa;AAAE,aAAOyK,UAAUgD,IAAV,EAAgBzN,CAAhB,CAAP;AAA4B,KAAlD;AAAqD;AACnF,MAAI6L,IAAI4H,WAAWhG,IAAX,CAAR;AACA,MAAIzN,IAAI0T,UAAUZ,QAAV,CAAR;AACA,MAAIjH,MAAM,IAAN,IAAc7L,MAAM,IAAxB,EAA8B;AAAE,WAAO,IAAP;AAAc;AAC9C,MAAI2T,KAAK9H,EAAEvM,MAAF,KAAa,CAAb,GAAiB,CAACuM,EAAE,CAAF,IAAO7L,EAAE,CAAF,CAAR,CAAjB,GAAiC,CAAC6L,EAAE,CAAF,IAAO7L,EAAE,CAAF,CAAR,EAAc6L,EAAE,CAAF,IAAO7L,EAAE,CAAF,CAArB,CAA1C;AACA,SAAO,sBAASuT,OAAOI,GAAG,CAAH,CAAP,EAAcA,GAAG,CAAH,CAAd,CAAT,CAAP;AACD;;AAED;;;;;;;;;;;;;;;;;AAiBO,SAASnB,QAAT,CAAkB/E,IAAlB,EAAwBgF,MAAxB,EAAgC;AACrC,MAAI1S,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAU4T,CAAV,EAAa;AAAE,aAAOV,SAAS/E,IAAT,EAAeyF,CAAf,CAAP;AAA2B,KAAjD;AAAoD;AAClF,MAAIrH,IAAI4H,WAAWhG,IAAX,CAAR;AACA,MAAI5B,MAAM,IAAV,EAAgB;AAAE,WAAO,IAAP;AAAc;AAChC,SAAO,sBAAS0H,OAAO1H,EAAE,CAAF,IAAO4G,MAAd,CAAT,CAAP;AACD;;AAED;;;;;;;;AAQO,SAASA,MAAT,CAAgB9D,IAAhB,EAAsBiF,EAAtB,EAA0B;AAC/B,MAAI7T,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUsU,EAAV,EAAc;AAAE,aAAOnB,OAAO9D,IAAP,EAAaiF,EAAb,CAAP;AAA0B,KAAjD;AAAoD;AAClF,MAAIV,IAAIO,WAAW9E,IAAX,CAAR;AACA,MAAI+B,IAAI+C,WAAWG,EAAX,CAAR;AACA,MAAIlD,MAAM,IAAN,IAAcwC,MAAM,IAAxB,EAA8B;AAAE,WAAO,IAAP;AAAc;AAC9C,SAAOxC,EAAE,CAAF,IAAOwC,EAAE,CAAF,CAAd;AACD;;AAED;;;;;;;;;;;;AAYO,SAASR,WAAT,CAAqBI,QAArB,EAA+BrF,IAA/B,EAAqC;AAC1C,MAAI1N,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUuM,CAAV,EAAa;AAAE,aAAOpB,UAAUoB,CAAV,EAAaiH,QAAb,CAAP;AAAgC,KAAtD;AAAyD;AACvF,SAAOrI,UAAUgD,IAAV,EAAgBqF,QAAhB,CAAP;AACD;;AAED,IAAIe,eAAe,UAAUnV,CAAV,EAAa;AAAE,SAAOA,EAAE,CAAF,IAAO,CAAP,GAAWA,EAAE,CAAF,IAAO,EAAlB,GAAuB,CAA9B;AAAkC,CAApE;AACA,IAAIoV,YAAY,UAAU9T,CAAV,EAAa;AAAE,SAAO6T,aAAa7T,CAAb,IAAkBuT,OAAO,CAACvT,EAAE,CAAF,CAAR,EAAc,CAACA,EAAE,CAAF,CAAf,EAAqB,CAAC,CAAtB,CAAlB,GAA6CuT,OAAOvT,EAAE,CAAF,CAAP,EAAaA,EAAE,CAAF,CAAb,EAAmB,CAAnB,CAApD;AAA4E,CAA3G;;AAEO,SAAS2S,YAAT,CAAsBoB,IAAtB,EAA4BC,IAA5B,EAAkCrS,GAAlC,EAAuC;AAC5C,MAAIsS,KAAKP,UAAUK,IAAV,CAAT;AACA,MAAIG,KAAKR,UAAUM,IAAV,CAAT;AACA,MAAIC,OAAO,IAAP,IAAeC,OAAO,IAA1B,EAAgC;AAAE,WAAO,IAAP;AAAc;AAChD,MAAIlU,IAAI,CAACiU,GAAG,CAAH,IAAQtS,MAAMuS,GAAG,CAAH,CAAf,EAAsBD,GAAG,CAAH,IAAQtS,MAAMuS,GAAG,CAAH,CAApC,CAAR;AACA,SAAO,0BAAOJ,UAAU9T,CAAV,CAAP,CAAP;AACD;;AAED;;;;;;;;;;;;AAYO,SAAS4S,GAAT,CAAamB,IAAb,EAAmBC,IAAnB,EAAyB;AAC9B,MAAIjU,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAU4U,EAAV,EAAc;AAAE,aAAOtB,IAAImB,IAAJ,EAAUG,EAAV,CAAP;AAAuB,KAA9C;AAAiD;AAC/E,SAAOvB,aAAaoB,IAAb,EAAmBC,IAAnB,EAAyB,CAAzB,CAAP;AACD;;AAED;;;;;;;;;AASO,SAASnB,QAAT,CAAkBkB,IAAlB,EAAwBC,IAAxB,EAA8B;AACnC,MAAIjU,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAU4U,EAAV,EAAc;AAAE,aAAOtB,IAAImB,IAAJ,EAAUG,EAAV,CAAP;AAAuB,KAA9C;AAAiD;AAC/E,SAAOvB,aAAaoB,IAAb,EAAmBC,IAAnB,EAAyB,CAAC,CAA1B,CAAP;AACD;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,SAASlB,QAAT,CAAkBnE,IAAlB,EAAwBiF,EAAxB,EAA4B;AACjC,MAAI7T,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUoR,CAAV,EAAa;AAAE,aAAOoC,SAASnE,IAAT,EAAe+B,CAAf,CAAP;AAA2B,KAAjD;AAAoD;AAClF,MAAIwC,IAAIO,WAAW9E,IAAX,CAAR;AACA,MAAI+B,IAAI+C,WAAWG,EAAX,CAAR;AACA,MAAIV,MAAM,IAAN,IAAcxC,MAAM,IAApB,IAA4BwC,EAAE5T,MAAF,KAAaoR,EAAEpR,MAA/C,EAAuD;AAAE,WAAO,IAAP;AAAc;AACvE,MAAI4S,IACFgB,EAAE5T,MAAF,KAAa,CAAb,GACI,CAACoR,EAAE,CAAF,IAAOwC,EAAE,CAAF,CAAR,EAAc,CAACxL,KAAKC,KAAL,CAAW,CAAC+I,EAAE,CAAF,IAAOwC,EAAE,CAAF,CAAR,IAAgB,CAAhB,GAAoB,EAA/B,CAAf,CADJ,GAEI,CAACxC,EAAE,CAAF,IAAOwC,EAAE,CAAF,CAAR,EAAcxC,EAAE,CAAF,IAAOwC,EAAE,CAAF,CAArB,CAHN;AAIA,SAAO,0BAAOY,UAAU5B,CAAV,CAAP,CAAP;AACD;;AAED;;;;;;;;;;;;AAYO,SAASR,SAAT,CAAmB/C,IAAnB,EAAyBiF,EAAzB,EAA6B;AAClC,MAAI7T,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUoR,CAAV,EAAa;AAAE,aAAOgB,UAAU/C,IAAV,EAAgB+B,CAAhB,CAAP;AAA4B,KAAlD;AAAqD;AACnF,MAAIwC,IAAI,sBAAUvE,IAAV,CAAR;AACA,MAAI+B,IAAI,sBAAUkD,EAAV,CAAR;AACA,SAAOV,EAAEpG,IAAF,KAAW,IAAX,IAAmB4D,EAAE5D,IAAF,KAAW,IAA9B,GACH4D,EAAE5D,IAAF,GAASoG,EAAEpG,IADR,GAEHoG,EAAErG,MAAF,KAAa,IAAb,IAAqB6D,EAAE7D,MAAF,KAAa,IAAlC,GACE,CAAC6D,EAAE7D,MAAF,GAAWqG,EAAErG,MAAb,GAAsB,EAAvB,IAA6B,EAD/B,GAEE,IAJN;AAKD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC3NeA,SAAAA;QAiBAsH,UAAAA;QAqBAC,QAAAA;QAoBAC,WAAAA;QAYAC,YAAAA;QAkBAC,UAAAA;QAmBAC,aAAAA;QAqBAC,eAAAA;QAkBAC,WAAAA;QAmBAxK,SAAAA;;AAzLhB;;AACA;;AACA;;AAEA,IAAI0K,MAAM,UAAU1I,GAAV,EAAe;AAAE,SAAO,uBAAQA,GAAR,KAAgB,2BAAOA,GAAP,CAAhB,IAA+B,CAAtC;AAA0C,CAArE,EA3BA;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,IAAI2I,WAAW,UAAUC,GAAV,EAAe;AAAE,SAAOC,SAASlI,OAAOiI,GAAP,CAAT,EAAsB,CAAtB,CAAP;AAAkC,CAAlE;AACA,IAAIE,OAAO,UAAUnI,MAAV,EAAkB;AAAE,SAAOA,OAAOR,OAAP,CAAe,IAAf,EAAqB,EAArB,EAAyB/M,MAAhC;AAAyC,CAAxE;;AAEA;;;;;;;;;;;;AAYO,SAASuN,MAAT,CAAgBiI,GAAhB,EAAqB;AAC1B,MAAIT,SAASS,GAAT,CAAJ,EAAmB;AAAE,WAAOA,GAAP;AAAa;AAClC,MAAI,CAAChV,MAAMoJ,OAAN,CAAc4L,GAAd,CAAL,EAAyB;AAAE,WAAO,EAAP;AAAY;AACvC,MAAI7E,IAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,CAAR;AACA6E,MAAIvL,GAAJ,CAAQqL,GAAR,EAAavO,OAAb,CAAqB,UAAUrG,CAAV,EAAa;AAChCiQ,MAAEjQ,CAAF,IAAO,CAAP;AACD,GAFD;AAGA,SAAOiQ,EAAE3B,IAAF,CAAO,EAAP,CAAP;AACD;;AAED,IAAI1D,MAAM,IAAV;AACA;;;;;;AAMO,SAASuJ,OAAT,CAAiBtI,CAAjB,EAAoB;AACzBjB,QAAMA,OAAO,uBAAM,IAAN,EAAY,IAAZ,EAAkBrB,GAAlB,CAAsB,UAAUsC,CAAV,EAAa;AAAE,WAAOA,EAAEoJ,QAAF,CAAW,CAAX,CAAP;AAAuB,GAA5D,CAAb;AACA,SAAO,OAAOpJ,CAAP,KAAa,QAAb,GACHjB,IAAIV,MAAJ,CAAW,UAAU2C,MAAV,EAAkB;AAAE,WAAOmI,KAAKnI,MAAL,MAAiBhB,CAAxB;AAA4B,GAA3D,CADG,GAEHjB,IAAIgB,KAAJ,EAFJ;AAGD;;AAED;;;;;;;;;;;;;;AAcO,SAASwI,KAAT,CAAeU,GAAf,EAAoBI,SAApB,EAA+B;AACpCA,cAAYA,cAAc,KAA1B;AACA,MAAIC,SAAStI,OAAOiI,GAAP,EAAYrJ,KAAZ,CAAkB,EAAlB,CAAb;AACA,SAAO,yBACL0J,OAAO5L,GAAP,CAAW,UAAS6L,CAAT,EAAYpV,CAAZ,EAAe;AACxB,QAAIqV,IAAI,wBAAOrV,CAAP,EAAUmV,MAAV,CAAR;AACA,WAAOD,aAAaG,EAAE,CAAF,MAAS,GAAtB,GAA4B,IAA5B,GAAmCA,EAAE/G,IAAF,CAAO,EAAP,CAA1C;AACD,GAHD,CADK,CAAP;AAMD;;AAED,IAAIrC,QAAQ,YAAZ;AACA;;;;;;;;AAQO,SAASoI,QAAT,CAAkBS,GAAlB,EAAuB;AAC5B,SAAO7I,MAAM4F,IAAN,CAAWiD,GAAX,CAAP;AACD;;AAED,IAAIQ,OAAO,sCAAsC7J,KAAtC,CAA4C,GAA5C,CAAX;AACA;;;;;;;AAOO,SAAS6I,SAAT,CAAmBQ,GAAnB,EAAwB;AAC7B,MAAI,CAACT,SAASS,GAAT,CAAL,EAAoB;AAAE,WAAO,EAAP;AAAY;AAClC,SAAO,yBACLA,IAAIrJ,KAAJ,CAAU,EAAV,EAAclC,GAAd,CAAkB,UAAS2I,CAAT,EAAYlS,CAAZ,EAAe;AAC/B,WAAOkS,MAAM,GAAN,GAAYoD,KAAKtV,CAAL,CAAZ,GAAsB,IAA7B;AACD,GAFD,CADK,CAAP;AAKD;;AAED;;;;;;;;;AASO,SAASuU,OAAT,CAAiBgB,EAAjB,EAAqBC,EAArB,EAAyB;AAC9B,MAAIzV,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAU+O,CAAV,EAAa;AAAE,aAAOkG,QAAQgB,EAAR,EAAYlH,CAAZ,CAAP;AAAwB,KAA9C;AAAiD;AAC/E,SAAOxB,OAAO0I,EAAP,MAAe1I,OAAO2I,EAAP,CAAtB;AACD;;AAED;;;;;;;;;;;;;;AAcO,SAAShB,UAAT,CAAoBM,GAApB,EAAyBW,KAAzB,EAAgC;AACrC,MAAI1V,UAAUT,MAAV,GAAmB,CAAvB,EAA0B;AAAE,WAAOkV,WAAWM,GAAX,EAAgBW,KAAhB,CAAP;AAAgC;AAC5DX,QAAMD,SAASC,GAAT,CAAN;AACA,SAAO,UAASW,KAAT,EAAgB;AACrBA,YAAQZ,SAASY,KAAT,CAAR;AACA,WAAOA,UAAUX,GAAV,IAAiB,CAACW,QAAQX,GAAT,MAAkBW,KAA1C;AACD,GAHD;AAID;;AAED;;;;;;;;;;;;AAYO,SAAShB,YAAT,CAAsBK,GAAtB,EAA2BW,KAA3B,EAAkC;AACvC,MAAI1V,UAAUT,MAAV,GAAmB,CAAvB,EAA0B;AAAE,WAAOmV,aAAaK,GAAb,EAAkBW,KAAlB,CAAP;AAAkC;AAC9DX,QAAMD,SAASC,GAAT,CAAN;AACA,SAAO,UAASW,KAAT,EAAgB;AACrBA,YAAQZ,SAASY,KAAT,CAAR;AACA,WAAOA,UAAUX,GAAV,IAAiB,CAACW,QAAQX,GAAT,MAAkBW,KAA1C;AACD,GAHD;AAID;;AAED;;;;;;;;;AASO,SAASf,QAAT,CAAkBI,GAAlB,EAAuBrH,IAAvB,EAA6B;AAClC,MAAI1N,UAAUT,MAAV,GAAmB,CAAvB,EAA0B;AAAE,WAAOoV,SAASI,GAAT,EAAcrH,IAAd,CAAP;AAA6B;AACzDqH,QAAMjI,OAAOiI,GAAP,CAAN;AACA,SAAO,UAASrH,IAAT,EAAe;AACpB,WAAOqH,IAAIF,IAAInH,IAAJ,CAAJ,MAAmB,GAA1B;AACD,GAFD;AAGD;;AAED;;;;;;;;;;;AAWO,SAASvD,MAAT,CAAgB4K,GAAhB,EAAqBW,KAArB,EAA4B;AACjC,MAAI1V,UAAUT,MAAV,KAAqB,CAAzB,EAA4B;AAAE,WAAO,UAAUuM,CAAV,EAAa;AAAE,aAAO3B,OAAO4K,GAAP,EAAYjJ,CAAZ,CAAP;AAAwB,KAA9C;AAAiD;AAC/E,SAAO4J,MAAMvL,MAAN,CAAawK,SAASI,GAAT,CAAb,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjMD;;;;AACA;;;;AACA;;;;AAEO,IAAIgB,kCAAa,UAAUS,GAAV,EAAe;AACrC,MAAIC,OAAOhO,OAAOgO,IAAP,CAAYD,GAAZ,EAAiB1G,IAAjB,EAAX;AACA,MAAI4G,OAAO,EAAX;AACA,MAAIC,QAAQ,EAAZ;;AAEA,MAAI9D,MAAM,UAAUrR,IAAV,EAAgBoV,IAAhB,EAAsB9J,MAAtB,EAA8B;AACtC4J,SAAKlV,IAAL,IAAaoV,IAAb;AACAD,UAAM7J,MAAN,IAAgB6J,MAAM7J,MAAN,KAAiB,EAAjC;AACA6J,UAAM7J,MAAN,EAAc5M,IAAd,CAAmBsB,IAAnB;AACD,GAJD;;AAMAiV,OAAKnQ,OAAL,CAAa,UAAUuQ,GAAV,EAAe;AAC1B,QAAID,OAAOJ,IAAIK,GAAJ,EAAS,CAAT,EAAYnL,KAAZ,CAAkB,GAAlB,CAAX;AACA,QAAIoL,QAAQN,IAAIK,GAAJ,EAAS,CAAT,CAAZ;AACA,QAAIhC,MAAM,wBAAO+B,IAAP,CAAV;;AAEA/D,QAAIgE,GAAJ,EAASD,IAAT,EAAe/B,GAAf;AACA,QAAIiC,KAAJ,EAAW;AAAEA,YAAMxQ,OAAN,CAAc,UAAU6J,CAAV,EAAa;AAAE,eAAO0C,IAAI1C,CAAJ,EAAOyG,IAAP,EAAa/B,GAAb,CAAP;AAA2B,OAAxD;AAA4D;AAC1E,GAPD;AAQA,MAAIkC,UAAUtO,OAAOgO,IAAP,CAAYC,IAAZ,EAAkB5G,IAAlB,EAAd;;AAEA,MAAIkH,OAAO,UAAUxV,IAAV,EAAgB;AAAE,WAAOkV,KAAKlV,IAAL,CAAP;AAAoB,GAAjD;AACAwV,OAAKrL,KAAL,GAAa,UAAU0B,CAAV,EAAa;AACxB,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;AAAE,aAAO,CAACsJ,MAAMtJ,CAAN,KAAY,EAAb,EAAiBxB,KAAjB,EAAP;AAAkC,KAA/D,MACK;AAAE,aAAO,CAACwB,MAAM,IAAN,GAAa0J,OAAb,GAAuBN,IAAxB,EAA8B5K,KAA9B,EAAP;AAA+C;AACvD,GAHD;AAIA,SAAOmL,IAAP;AACD,CA3BM,EAtBP;;;;;;;;;;;;;;;;;;AAmDO,IAAIlB,4BAAU,UAAU3F,CAAV,EAAaD,CAAb,EAAgB;AACnC,MAAI8G,OAAO,UAAUxV,IAAV,EAAgB;AAAE,WAAO2O,EAAE3O,IAAF,KAAW0O,EAAE1O,IAAF,CAAlB;AAA4B,GAAzD;AACAwV,OAAKrL,KAAL,GAAa,UAAU0B,CAAV,EAAa;AAAE,WAAO8C,EAAExE,KAAF,CAAQ0B,CAAR,EAAW7N,MAAX,CAAkB0Q,EAAEvE,KAAF,CAAQ0B,CAAR,CAAlB,CAAP;AAAuC,GAAnE;AACA,SAAO2J,IAAP;AACD,CAJM;;AAMP;;;;;;;;;;;;AAYO,IAAInB,wBAAQE,WAAWyX,gBAAX,CAAZ;;AAEP;;;;;;;;;;;;AAYO,IAAI5X,wBAAQG,WAAW0X,gBAAX,CAAZ;AACA,IAAI9X,wBAAQG,QAAQD,KAAR,EAAeD,KAAf,CAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC2BSF,QAAAA;QAaA4B,SAAAA;QAqBA/L,WAAAA;;AA/HhB;;AACA;;AAMA;;AACA;;AACA;;AAEA,IAAIkM,WAAWhP,OAAO+D,MAAP,CAAc;AAC3BhL,QAAM,IADqB;AAE3B+S,aAAW,EAFgB;AAG3B5I,SAAO,EAHoB;AAI3BmB,UAAQ,IAJmB;AAK3B4K,UAAQ;AALmB,CAAd,CAAf,EA7BA;;;;;;;;;;;;;;;;;;;;AAqCA,IAAIxK,aAAa,UAAU1L,IAAV,EAAgB;AAC/B,MAAI+S,YAAY,4BAAM/S,IAAN,CAAhB;AACA,MAAI,CAAC+S,SAAL,EAAgB;AAAE,WAAOkD,QAAP;AAAkB;AACpC,MAAInJ,IAAI,EAAEiG,WAAWA,SAAb,EAAwB/S,MAAMA,IAA9B,EAAR;AACA8M,IAAExB,MAAF,GAAW,wBAAOyH,SAAP,CAAX;AACAjG,IAAEoJ,MAAF,GAAW1C,SAAS1G,EAAExB,MAAX,EAAmB,CAAnB,CAAX;AACAwB,IAAE3C,KAAF,GAAUkK,uBAAMlK,KAAN,CAAY2C,EAAExB,MAAd,CAAV;AACA,SAAOrE,OAAO+D,MAAP,CAAc8B,CAAd,CAAP;AACD,CARD;;AAUA,IAAIqJ,UAAU,UAAUlK,EAAV,EAAczL,KAAd,EAAqB;AAAE,SAAO,UAAUmK,GAAV,EAAe;AAAE,WAAOnK,MAAMmK,GAAN,MAAenK,MAAMmK,GAAN,IAAasB,GAAGtB,GAAH,CAA5B,CAAP;AAA8C,GAAtE;AAAyE,CAA9G;;AAEA;;;;;;;;;;;;AAYO,IAAI9D,wBAAQsP,QAAQzK,UAAR,EAAoB,EAApB,CAAZ;;AAEP;;;;;;;;;;AAUO,IAAIvB,wBAAQkK,uBAAMlK,KAAlB;;AAEP;;;;;;;;;;;;;AAaO,IAAI4I,gCAAY,UAAU/S,IAAV,EAAgB;AACrC,MAAI6L,IAAI9B,SAAS/J,IAAT,CAAR;AACA,SAAO6G,MAAMgF,EAAE,CAAF,CAAN,EAAYkH,SAAnB;AACD,CAHM;;AAKP;;;;;;;;;;;;;;;;;;AAkBO,SAASmB,KAAT,CAAekC,WAAf,EAA4BpW,IAA5B,EAAkC;AACvC,MAAI6L,IAAI9B,SAASqM,WAAT,CAAR;AACApW,SAAOA,QAAQ6L,EAAE,CAAF,CAAf;AACA,SAAOkH,UAAU/S,IAAV,EAAgBgI,GAAhB,CAAoB,8BAAU6D,EAAE,CAAF,CAAV,CAApB,CAAP;AACD;;AAED;;;;;;;AAOO,SAASiK,MAAT,CAAgB9V,IAAhB,EAAsB;AAC3B,MAAI6L,IAAI9B,SAAS/J,IAAT,CAAR;AACA,SAAO,4BAAM6L,EAAE,CAAF,CAAN,MAAgBsC,SAAvB;AACD;;AAED;;;;;;;;;;;;;;;;AAgBO,SAASpE,QAAT,CAAkBY,GAAlB,EAAuB;AAC5B,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAAE,WAAO,CAAC,EAAD,EAAK,EAAL,CAAP;AAAkB;AACjD,MAAIlM,IAAIkM,IAAI5E,OAAJ,CAAY,GAAZ,CAAR;AACA,MAAIsQ,QAAQ,qBAAS1L,IAAI2L,SAAJ,CAAc,CAAd,EAAiB7X,CAAjB,CAAT,KAAiC,qBAASkM,GAAT,CAAjC,IAAkD,EAA9D;AACA,MAAI3K,OAAOqW,UAAU,EAAV,GAAe1L,IAAI2L,SAAJ,CAAcD,MAAMtY,MAAN,GAAe,CAA7B,CAAf,GAAiD4M,GAA5D;AACA,SAAO,CAAC0L,KAAD,EAAQrW,KAAKjC,MAAL,GAAciC,IAAd,GAAqB,EAA7B,CAAP;AACD;;AAED;;;;;;AAMO,IAAI6V,gCAAY,UAAU7V,IAAV,EAAgB;AACrC,MAAIoV,OAAOrC,UAAU/S,IAAV,CAAX;AACA,MAAIuW,SAASrC,MAAMlU,IAAN,CAAb;;AAEA,SAAO,uBAAWoV,IAAX,EACJpN,GADI,CACA,UAAUsD,MAAV,EAAkB7M,CAAlB,EAAqB;AACxB,QAAIuB,OAAOqU,uBAAMlK,KAAN,CAAYmB,MAAZ,EAAoB,CAApB,CAAX;AACA,QAAItL,IAAJ,EAAU;AAAE,aAAO,CAACuW,OAAO9X,CAAP,KAAa2W,KAAK3W,CAAL,CAAd,EAAuBuB,IAAvB,CAAP;AAAsC;AACnD,GAJI,EAKJ2I,MALI,CAKG,UAAUrH,CAAV,EAAa;AAAE,WAAOA,CAAP;AAAW,GAL7B,CAAP;AAMD,CAVM;;AAYP;;;;;;AAMO,IAAIsU,0BAAS,UAAU5V,IAAV,EAAgB;AAClC,MAAIwW,UAAU,4BAAWzD,UAAU/S,IAAV,CAAX,CAAd;AACA,SAAOoU,uBAAMjK,KAAN,GAAcxB,MAAd,CAAqB,UAAU3I,IAAV,EAAgB;AAAE,WAAOwW,QAAQ,4BAAMxW,IAAN,CAAR,CAAP;AAA8B,GAArE,CAAP;AACD,CAHM;;AAKP;;;;;;;;AAQO,IAAI2V,4BAAU,UAAUzB,KAAV,EAAiB;AACpC,MAAIC,QAAQ,yBAAQD,MAAMlM,GAAN,CAAUiD,aAAV,CAAR,CAAZ;AACA,MAAI,CAACkJ,MAAMpW,MAAX,EAAmB;AAAE,WAAOoW,KAAP;AAAe;AACpC,MAAIkC,QAAQlC,MAAM,CAAN,CAAZ;AACA,MAAIE,QAAQ,wBAAOF,KAAP,CAAZ;AACA,SAAO,wBAAOE,MAAMtO,OAAN,CAAcsQ,KAAd,CAAP,EAA6BhC,KAA7B,CAAP;AACD,CANM;;AAQP;;;;;;;;AAQO,IAAIqB,gCAAY,UAAU1V,IAAV,EAAgB;AACrC,MAAI,CAAC+S,UAAU/S,IAAV,EAAgBjC,MAArB,EAA6B;AAAE,WAAO,EAAP;AAAY;AAC3C,MAAI0Y,aAAa,8BAAa1D,UAAU/S,IAAV,CAAb,CAAjB;AACA,SAAOqU,uBAAMlK,KAAN,GAAcxB,MAAd,CAAqB,UAAU3I,IAAV,EAAgB;AAAE,WAAOyW,WAAW,4BAAMzW,IAAN,CAAX,CAAP;AAAiC,GAAxE,CAAP;AACD,CAJM;;AAMP;;;;;;;;AAQO,IAAIyV,4BAAU,UAAUzV,IAAV,EAAgB;AACnC,MAAI0W,WAAW,4BAAW3D,UAAU/S,IAAV,CAAX,CAAf;AACA,SAAOqU,uBAAMlK,KAAN,GAAcxB,MAAd,CAAqB,UAAU3I,IAAV,EAAgB;AAAE,WAAO0W,SAAS,4BAAM1W,IAAN,CAAT,CAAP;AAA+B,GAAtE,CAAP;AACD,CAHM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCxHSkU,QAAAA;QAiEAnK,WAAAA;;AAlJhB;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;AAxBA;;;;;;;;;;;;;;;;;;;AAkCO,IAAII,wBAAQiK,uBAAMjK,KAAlB;;AAEP,IAAIwM,WAAW1P,OAAO+D,MAAP,CAAc;AAC3BhL,QAAM,IADqB;AAE3BmK,SAAO,EAFoB;AAG3B4I,aAAW,EAHgB;AAI3BzH,UAAQ,IAJmB;AAK3B4K,UAAQ;AALmB,CAAd,CAAf;;AAQA,IAAIxK,aAAa,UAAU1L,IAAV,EAAgB;AAC/B,MAAI+S,YAAY,4BAAM/S,IAAN,CAAhB;AACA,MAAI,CAAC+S,SAAL,EAAgB;AAAE,WAAO4D,QAAP;AAAkB;AACpC,MAAI7J,IAAI,EAAEiG,WAAWA,SAAb,EAAwB/S,MAAMA,IAA9B,EAAR;AACA8M,IAAExB,MAAF,GAAW,wBAAOyH,SAAP,CAAX;AACAjG,IAAEoJ,MAAF,GAAW1C,SAAS1G,EAAExB,MAAX,EAAmB,CAAnB,CAAX;AACAwB,IAAE3C,KAAF,GAAUiK,uBAAMjK,KAAN,CAAY2C,EAAExB,MAAd,CAAV;AACA,SAAOwB,CAAP;AACD,CARD;;AAUA,IAAId,OAAO,UAAUC,EAAV,EAAczL,KAAd,EAAqB;AAC9B,MAAKA,UAAU,KAAK,CAApB,EAAwBA,QAAQ,EAAR;;AAExB,SAAO,UAAUmK,GAAV,EAAe;AAAE,WAAOnK,MAAMmK,GAAN,MAAenK,MAAMmK,GAAN,IAAasB,GAAGtB,GAAH,CAA5B,CAAP;AAA8C,GAAtE;AACD,CAJD;;AAMA;;;;;;;;;;;;;;AAcO,IAAI9D,wBAAQmF,KAAKN,UAAL,CAAZ;;AAEP;;;;;;;AAOO,IAAIqH,gCAAY,UAAU/S,IAAV,EAAgB;AAAE,SAAO6G,MAAMkD,SAAS/J,IAAT,EAAe,CAAf,CAAN,EAAyB+S,SAAhC;AAA4C,CAA9E;;AAEP;;;;;;;;;;;;;;;AAeO,SAASmB,KAAT,CAAekC,WAAf,EAA4BpW,IAA5B,EAAkC;AACvC,MAAI6L,IAAI9B,SAASqM,WAAT,CAAR;AACApW,SAAOA,QAAQ6L,EAAE,CAAF,CAAf;AACA,SAAOhF,MAAM7G,IAAN,EAAY+S,SAAZ,CAAsB/K,GAAtB,CAA0B,8BAAU6D,EAAE,CAAF,CAAV,CAA1B,CAAP;AACD;;AAED;;;;;;;;;;;AAWO,IAAIiK,0BAAS,UAAU9V,IAAV,EAAgB;AAAE,SAAO,4BAAM+J,SAAS/J,IAAT,EAAe,CAAf,CAAN,MAA6BmO,SAApC;AAAgD,CAA/E;;AAEP;;;;;;;;AAQO,IAAIuH,gCAAY,UAAU1V,IAAV,EAAgB;AACrC,MAAI,CAAC+S,UAAU/S,IAAV,EAAgBjC,MAArB,EAA6B;AAAE,WAAO,EAAP;AAAY;AAC3C,MAAI0Y,aAAa,8BAAa1D,UAAU/S,IAAV,CAAb,CAAjB;AACA,SAAOoU,uBAAMjK,KAAN,GAAcxB,MAAd,CAAqB,UAAU3I,IAAV,EAAgB;AAAE,WAAOyW,WAAW,4BAAMzW,IAAN,CAAX,CAAP;AAAiC,GAAxE,CAAP;AACD,CAJM;;AAMP;;;;;;;;AAQO,IAAIyV,4BAAU,UAAUzV,IAAV,EAAgB;AACnC,MAAI0W,WAAW,4BAAW3D,UAAU/S,IAAV,CAAX,CAAf;AACA,SAAOoU,uBAAMjK,KAAN,GAAcxB,MAAd,CAAqB,UAAU3I,IAAV,EAAgB;AAAE,WAAO0W,SAAS,4BAAM1W,IAAN,CAAT,CAAP;AAA+B,GAAtE,CAAP;AACD,CAHM;;AAKP;AACA;AACA,IAAI4W,YAAY,oBAAhB;AACA;;;;;;;;;;;;;;;;AAgBO,SAAS7M,QAAT,CAAkB/J,IAAlB,EAAwB;AAC7B,MAAI6L,IAAI,yBAAM7L,IAAN,CAAR;AACA,MAAI6L,EAAE,CAAF,MAAS,EAAb,EAAiB;AAAE,WAAO,CAAC,EAAD,EAAK7L,IAAL,CAAP;AAAoB;AACvC;AACA,MAAI6L,EAAE,CAAF,MAAS,GAAT,IAAgBA,EAAE,CAAF,MAAS,IAA7B,EAAmC;AAAE,WAAO,CAAC,EAAD,EAAK,KAAL,CAAP;AAAqB;;AAE1D,MAAI+K,UAAUtG,IAAV,CAAezE,EAAE,CAAF,CAAf,CAAJ,EAA0B;AACxB,WAAO,CAACA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAR,EAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAArB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,CAACA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,CAAf,EAAqBA,EAAE,CAAF,CAArB,CAAP;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9ID;;IAAYtN;;AACZ;;IAAY4Y;;AACZ;;IAAYD;;AACZ;;IAAYD;;AACZ;;IAAYJ;;AACZ;;IAAYG;;AACZ;;IAAYD;;AACZ;;IAAYD;;;;AAzCZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA2CSvY,QAAAA;QAAO4Y,OAAAA;QAAMD,WAAAA;QAAUD,WAAAA;QAAUD,QAAAA;QAAOD,QAAAA;QAAOD,QAAAA;QAAOD,aAAAA;;AAE/D;;;;;;;;;AAQO,MAAM3N,gCAAY+N,SAAS/N,SAA3B;;AAEP;;;;;;;;AAQO,MAAMqI,8BAAW0F,SAAS1F,QAA1B;;AAEP;;;;;;;;;AASO,MAAMrF,sBAAOiL,KAAKtQ,KAAlB;;AAEP;;;;;;;;;AASO,MAAM0E,sBAAO4L,KAAK5L,IAAlB;;AAEP;;;;;;;;;AASO,MAAMC,sBAAO2L,KAAK3L,IAAlB;;AAEP;;;;;;;;;AASO,MAAM4I,wBAAQyC,WAAWzC,KAAzB;;AAEP;;;;;;;;AAQO,MAAMC,wBAAQwC,WAAWxC,KAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHP,IAAA,SAAA,QAAA,SAAA,CAAA;AAEA,IAAA,aAAA,aAAA,YAAA;AASI,aAAA,UAAA,CAAY,EAAZ,EAAwE;YAA5D,KAAA,OAAA,KAAA,CAAA,GAAA,EAAA,GAAA;YAAE,UAAA,GAAA;YAAS,OAAA,GAAA;YAAM,MAAA,GAAA;YAAK,SAAA,GAAA;YAAQ,SAAA,GAAA;YAAQ,aAAA,GAAA;AARlD,aAAA,UAAA,GAAa,CAAb;AAIA,aAAA,IAAA,GAAO,CAAP;AAKI,aAAK,MAAL,GAAc,MAAd;AACA,aAAK,UAAL,GAAkB,cAAc,KAAK,UAArC;AACA,aAAK,MAAL,GAAc,MAAd;AACA,aAAK,IAAL,GAAY,QAAQ,KAAK,IAAzB;AACA,aAAK,IAAL,CAAU,EAAE,SAAO,OAAT,EAAW,KAAG,GAAd,EAAV;AACH;AAED,eAAA,SAAA,CAAA,IAAA,GAAA,UAAK,EAAL,EAAqB;YAAd,UAAA,GAAA;YAAS,MAAA,GAAA;AACZ,YAAI,CAAC,OAAD,KAAa,CAAC,GAAD,IAAQ,CAAC,IAAI,OAA1B,CAAJ,EAAwC;AACpC,oBAAQ,IAAR,CAAa,0JAAb;AAEA;AACH;AACD,aAAK,OAAL,GAAe,WAAW,IAAI,OAA9B;AACA,aAAK,GAAL,GAAW,OAAO,KAAK,OAAL,CAAa,WAA/B;AACH,KARD;AAUA,eAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAA2B,QAA3B,EAAmC;AAAnC,YAAA,QAAA,IAAA;AACI,aAAK,QAAL,CAAc,MAAM,GAAN,CAAU,UAAA,IAAA,EAAI;AAAI,mBAAA,OAAA,OAAA,CAAQ,IAAR,EAAc,MAAK,UAAnB,CAAA;AAA8B,SAAhD,CAAd,EAAiE,QAAjE;AACH,KAFD;AAIA,eAAA,SAAA,CAAA,QAAA,GAAA,UAAS,IAAT,EAAyB,QAAzB,EAAkC;AAC9B,YAAI,KAAK,MAAT,EAAiB;AACb,mBAAO,KAAK,MAAL,CAAY,IAAZ,CAAP;AACH;AACD;AACH,KALD;AAMJ,WAAA,UAAA;AArCA,CAAA,EAAA;AAAa,QAAA,UAAA,GAAA,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFb,IAAA,eAAA,QAAA,cAAA,CAAA;AACA,IAAA,UAAA,QAAA,OAAA,CAAA;AACA,IAAA,SAAA,QAAA,SAAA,CAAA;AAEA,IAAA,cAAA,aAAA,UAAA,MAAA,EAAA;AAAiC,cAAA,WAAA,EAAA,MAAA;AAS7B,aAAA,WAAA,CAAY,KAAZ,EAAsB;AAAtB,YAAA,QACI,OAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADhB;AARA,cAAA,QAAA,GAAW,GAAX;AACA,cAAA,IAAA,GAAO,MAAP;AACA,cAAA,IAAA,GAAO,GAAP;AACA,cAAA,MAAA,GAAS,GAAT;AACA,cAAA,KAAA,GAAQ,GAAR;AACA,cAAA,OAAA,GAAU,EAAV;AACA,cAAA,OAAA,GAAU,EAAV;AAII,cAAK,QAAL,GAAgB,MAAM,QAAN,IAAkB,MAAK,QAAvC;AACA,cAAK,IAAL,GAAY,MAAM,IAAN,IAAc,MAAK,IAA/B;AACA,cAAK,IAAL,GAAY,MAAM,IAAN,IAAc,MAAK,IAA/B;;AACH;AAED,gBAAA,SAAA,CAAA,IAAA,GAAA,UAAK,OAAL,EAAY;AACR,eAAA,SAAA,CAAM,IAAN,CAAU,IAAV,CAAU,IAAV,EAAW,OAAX;AACH,KAFD;AAIA,gBAAA,SAAA,CAAA,QAAA,GAAA,UAAS,IAAT,EAAwB,IAAxB,EAAkC,SAAlC,EAAiD;AAAxC,YAAA,SAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,MAAA;AAAa;AAAE,YAAA,SAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,CAAA;AAAQ;AAAE,YAAA,cAAA,KAAA,CAAA,EAAA;AAAA,wBAAA,GAAA;AAAe;AAC7C,YAAM,UAAU,KAAK,OAAL,CAAa,gBAAb,EAAhB;AACA,gBAAQ,IAAR,GAAe,IAAf;AACA,YAAM,WAAW,KAAK,OAAL,CAAa,UAAb,EAAjB;AACA,gBAAQ,OAAR,CAAgB,QAAhB;AACA,iBAAS,IAAT,CAAc,KAAd,GAAsB,OAAO,IAAP,KAAgB,QAAhB,GAA2B,IAA3B,GAAkC,GAAxD;AACA,iBAAS,OAAT,CAAiB,KAAK,GAAtB;AACA,gBAAQ,SAAR,CAAkB,KAAlB,GAA0B,SAA1B;AACA,eAAO,EAAE,SAAO,OAAT,EAAW,UAAQ,QAAnB,EAAP;AACH,KATD;AAWA,gBAAA,SAAA,CAAA,UAAA,GAAA,UAAW,CAAX,EAAc,CAAd,EAAe;AACX,eAAO,EAAE,IAAF,CAAO,IAAP,CAAY,KAAZ,GAAoB,EAAE,IAAF,CAAO,IAAP,CAAY,KAAhC,GAAwC,CAAC,CAAzC,GAA6C,CAApD;AACH,KAFD;AAIA,gBAAA,SAAA,CAAA,QAAA,GAAA,UAAS,IAAT,EAAyB,QAAzB,EAA2C;AAA3C,YAAA,QAAA,IAAA;AAAyB,YAAA,aAAA,KAAA,CAAA,EAAA;AAAA,uBAAA,EAAA;AAAkB;AACvC,eAAA,SAAA,CAAM,QAAN,CAAc,IAAd,CAAc,IAAd,EAAe,IAAf,EAAqB,QAArB,EADuC,CACP;AAChC;AACA,YAAM,OAAO,SAAS,QAAT,IAAqB,KAAK,OAAL,CAAa,WAA/C;AACA,YAAM,WAAW,SAAS,QAAT,IAAqB,CAAtC;AACA,aAAK,GAAL,CAAS,UAAC,GAAD,EAAM,CAAN,EAAO;AACZ,gBAAM,QAAQ,IAAI,QAAlB;AACM,gBAAA,KAAA,gCAAA,+BAAA,mCAAA,mCAAA,8CAAA,mCAAA,CAAA;AAAA,gBAAC,SAAA,GAAA,CAAA,CAAD;AAAA,gBAAS,QAAA,GAAA,CAAA,CAAT;AAAA,gBAAgB,UAAA,GAAA,CAAA,CAAhB;AAAA,gBAAyB,UAAA,GAAA,CAAA,CAAzB;AAAA,gBAAkC,WAAA,GAAA,CAAA,CAAlC;AAAA,gBAA4C,OAAA,GAAA,CAAA,CAA5C;AASN,gBAAM,QAAQ,MAAK,QAAL,CAAc,MAAK,IAAnB,EAAyB,CAAzB,EAA4B,QAAA,IAAA,CAAK,IAAL,CAAU,GAAV,CAA5B,CAAd;AACA,mBAAA,IAAA,CAAK,EAAE,QAAM,MAAR,EAAU,OAAK,KAAf,EAAiB,SAAO,OAAxB,EAA0B,SAAO,OAAjC,EAAmC,MAAI,IAAvC,EAAyC,UAAQ,QAAjD,EAAL,EAA2D,OAAO,KAAlE,EAAyE,MAAM,QAAN,CAAe,IAAxF;AACA,kBAAM,OAAN,CAAc,KAAd,CAAoB,SAAS,QAAT,GAAoB,KAAxC;AACH,SAdD;AAeH,KApBD;AAqBJ,WAAA,WAAA;AAxDA,CAAA,CAAiC,aAAA,UAAjC,CAAA;AAAa,QAAA,WAAA,GAAA,WAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJb,IAAA,UAAA,QAAA,OAAA,CAAA;AACA,IAAA,gBAAA,QAAA,2BAAA,CAAA;AAEA,SAAgB,YAAhB,CAA6B,CAA7B,EAA8B;AAC1B,WAAO,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,CAA3B,CAAP;AACH;AAFD,QAAA,YAAA,GAAA,YAAA;AAIA,SAAgB,QAAhB,CAAyB,KAAzB,EAA8B;AAC1B,WAAO,MAAM,MAAN,CAAa,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,eAAA,IAAI,CAAJ;AAAK,KAA5B,EAA8B,CAA9B,CAAP;AACH;AAFD,QAAA,QAAA,GAAA,QAAA;AAIA,SAAgB,aAAhB,CAA8B,KAA9B,EAAqC,QAArC,EAA8C;AAC1C,QAAI,CAAC,QAAL,EAAe;AACX,eAAO,MAAM,aAAa,MAAM,MAAnB,CAAN,CAAP;AACH;AACD,QAAM,IAAI,aAAa,SAAS,QAAT,CAAb,IAAmC,CAA7C;AACA,QAAM,QAAQ,SACT,MADS,CACF,UAAC,GAAD,EAAM,CAAN,EAAS,CAAT,EAAU;AAAK,eAAA,IAAI,MAAJ,CAAW,KAAK,IAAI,MAAJ,GAAa,IAAI,IAAI,CAAR,CAAb,GAA0B,CAA/B,CAAX,CAAA;AAA6C,KAD1D,EAC4D,EAD5D,CAAd;AAEA,WAAO,MAAM,MAAM,OAAN,CAAc,MAAM,IAAN,CAAW,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,eAAA,KAAK,CAAL;AAAM,KAA3B,CAAd,CAAN,CAAP;AACH;AARD,QAAA,aAAA,GAAA,aAAA;AAUA,SAAgB,aAAhB,CAA8B,KAA9B,EAAmC;AAC/B,YAAQ,MACH,OADG,CACK,GADL,EACU,GADV,EAEH,OAFG,CAEK,GAFL,EAEU,GAFV,EAGH,OAHG,CAGK,IAHL,EAGW,MAHX,EAIH,OAJG,CAIK,GAJL,EAIU,KAJV,CAAR;AAKA;;;;;;AAMA,QAAM,SAAS,QAAA,KAAA,CAAM,QAAN,CAAe,KAAf,CAAf;AACA,QAAM,IAAI,OAAO,CAAP,EAAU,KAAV,CAAgB,GAAhB,CAAV;AACA,WAAO,OAAO,CAAP,KAAa,EAAE,CAAF,KAAQ,GAArB,CAAP;AACH;AAfD,QAAA,aAAA,GAAA,aAAA;AAiBA,SAAgB,OAAhB,CAAwB,IAAxB,EAA8B,MAA9B,EAAoC;AAChC,WAAO,QAAA,IAAA,CAAK,KAAL,CAAW,IAAX,EAAiB,IAAjB,GAAwB,MAA/B;AACH;AAFD,QAAA,OAAA,GAAA,OAAA;AAIA;AACA,SAAgB,OAAhB,CAAwB,IAAxB,EAA8B,QAA9B,EAAwC,QAAxC,EAAqD;AAAb,QAAA,aAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,EAAA;AAAa;AACjD,QAAI,CAAC,MAAM,OAAN,CAAc,SAAS,KAAK,CAAL,CAAT,CAAd,CAAD,IAAqC,KAAK,MAAL,KAAgB,CAAzD,EAA4D;AACxD,eAAO,SAAS,KAAK,GAAL,CAAS,KAAK,CAAL,CAAT,EAAkB,SAAS,MAAT,GAAkB,CAApC,CAAT,CAAP;AACH;AACD,WAAO,KAAK,OAAL,CAAa,KAAK,KAAL,CAAW,CAAX,CAAb,EAA4B,SAAS,KAAK,CAAL,CAAT,CAA5B,EAA+C,SAAS,MAAT,CAAgB,KAAK,CAAL,CAAhB,CAA/C,CAAP;AACH;AALD,QAAA,OAAA,GAAA,OAAA;AAOA,SAAgB,aAAhB,CAA8B,OAA9B,EAAuC,QAAvC,EAAiD,IAAjD,EAAuD,SAAvD,EAAqE;AAArE,QAAA,QAAA,IAAA;AAAuD,QAAA,cAAA,KAAA,CAAA,EAAA;AAAA,oBAAA,EAAA;AAAc;AACjE,QAAI,MAAM,OAAN,CAAc,OAAd,CAAJ,EAA4B;AACxB;AACA,oBAAY,GAAG,MAAH,CAAU,SAAV,EAAqB,CAAC,QAAQ,MAAT,CAArB,CAAZ;AACA,eAAO,QAAQ,GAAR,CAAY,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,mBAAA,MAAK,aAAL,CAAmB,CAAnB,EAAsB,QAAtB,EAAgC,KAAK,MAAL,CAAY,CAAC,CAAD,CAAZ,CAAhC,EAAkD,SAAlD,CAAA;AAA4D,SAAlF,CAAP;AACH;AACD,QAAI,YAAY,CAAhB,EAAmB;AACf,eAAO,CAAP;AACH;AACD;AACA;AACA;AACA,QAAM,WAAW,UAAU,UAAU,MAAV,CAAiB,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,eAAA,IAAI,CAAJ;AAAK,KAAhC,EAAkC,IAAlC,CAA3B,CAZiE,CAYG;AACpE,QAAI,aAAa,CAAjB,EAAoB;AAChB,gBAAQ,IAAR,CAAa,eAAb,EAA8B,OAA9B;AACH;AACD,WAAO,EAAE,OAAO,KAAK,OAAL,CAAa,IAAb,EAAmB,QAAnB,CAAT,EAAuC,SAAO,OAA9C,EAAgD,WAAY,MAAI,IAAhE,EAAkE,WAAS,SAA3E,EAA6E,UAAQ,QAArF,EAAP;AACH;AAjBD,QAAA,aAAA,GAAA,aAAA;AAmBA,SAAgB,MAAhB,CAAuB,OAAvB,EAAgC,QAAhC,EAA4C;AAAZ,QAAA,aAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,CAAA;AAAY;AACxC,WAAO,MAAM,OAAN,CAAc,OAAd,KAA0B,QAAQ,MAAR,KAAmB,QAA7C,IAAyD,QAAQ,WAAW,CAAnB,MAA0B,CAA1F;AACH;AAFD,QAAA,MAAA,GAAA,MAAA;AAIA;AACA,SAAgB,cAAhB,CAA+B,QAA/B,EAAuC;AAAvC,QAAA,QAAA,IAAA;AACI;AACA,WAAO,UAAC,QAAD,EAAW,GAAX,EAAgB,KAAhB,EAAqB;AACxB,YAAM,OAAO,QAAQ,CAAR,GAAY,SAAS,QAAQ,CAAjB,CAAZ,GAAkC,IAA/C;AACA,YAAI,QAAQ,MAAK,MAAL,CAAY,KAAK,SAAS,KAAT,GAAiB,CAAtB,CAAZ,EAAsC,SAAS,QAA/C,CAAZ,EAAsE;AAClE,iBAAK,SAAS,KAAT,GAAiB,CAAtB,EAAyB,SAAS,QAAT,GAAoB,CAA7C,IAAkD,IAAI,CAAJ,CAAlD;AACA,gBAAI,CAAJ,IAAS,CAAT;AACH;AACD,eAAO,SAAS,MAAT,CAAgB,CAAC,GAAD,CAAhB,CAAP;AACH,KAPD;AAQH;AAVD,QAAA,cAAA,GAAA,cAAA;AAYA,SAAgB,cAAhB,CAA+B,QAA/B,EAAuC;AACnC,QAAI,QAAA,QAAA,CAAS,SAAT,CAAmB,QAAnB,IAA+B,CAAnC,EAAsC;AAClC,eAAO,QAAA,QAAA,CAAS,MAAT,CAAgB,SAAS,KAAT,CAAe,CAAf,CAAhB,CAAP;AACH;AACD,WAAO,MAAM,QAAA,QAAA,CAAS,MAAT,CAAgB,QAAhB,CAAb;AACH;AALD,QAAA,cAAA,GAAA,cAAA;AAOA;AACA,SAAgB,gBAAhB,CAAiC,QAAjC,EAAyC;AACrC,eAAW,QAAA,QAAA,CAAS,QAAT,CAAkB,QAAlB,CAAX;AACA,QAAI,aAAa,IAAjB,EAAuB;AACnB,mBAAW,IAAX,CADmB,CACF;AACpB;AACD,QAAI,YAAY,KAAK,cAAL,CAAoB,QAApB,CAAhB;AACA,QAAI,KAAK,GAAL,CAAS,QAAA,QAAA,CAAS,SAAT,CAAmB,SAAnB,CAAT,IAA0C,KAAK,GAAL,CAAS,QAAA,QAAA,CAAS,SAAT,CAAmB,QAAnB,CAAT,CAA9C,EAAsF;AAClF,eAAO,SAAP;AACH;AACD,WAAO,YAAY,EAAnB;AACH;AAVD,QAAA,gBAAA,GAAA,gBAAA;AAYA,SAAgB,WAAhB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,mBAAlC,EAAqD;AACjD,QAAM,YAAY,CAAC,KAAK,GAAL,CAAS,QAAA,QAAA,CAAS,SAAT,CAAmB,CAAnB,CAAT,CAAD,EAAkC,KAAK,GAAL,CAAS,QAAA,QAAA,CAAS,SAAT,CAAmB,CAAnB,CAAT,CAAlC,CAAlB;AACA,QAAI,UAAU,CAAV,MAAiB,UAAU,CAAV,CAArB,EAAmC;AAC/B,YAAI,mBAAJ,EAAyB;AACrB,mBAAO,UAAU,CAAV,IAAe,CAAf,GAAmB,CAAC,CAApB,GAAwB,CAA/B;AACH;AACD,eAAO,UAAU,CAAV,IAAe,CAAf,GAAmB,CAAC,CAApB,GAAwB,CAA/B;AACH;AACD,WAAO,UAAU,CAAV,IAAe,UAAU,CAAV,CAAf,GAA8B,CAAC,CAA/B,GAAmC,CAA1C;AACH;AATD,QAAA,WAAA,GAAA,WAAA;AAWA,SAAgB,cAAhB,CAA+B,IAA/B,EAAqC,EAArC,EAAuC;AAAvC,QAAA,QAAA,IAAA;AACI,WAAO,GAAG,GAAH,CAAO,UAAA,IAAA,EAAI;AAAI,eAAA,KACjB,GADiB,CACb,UAAA,CAAA,EAAC;AACF,mBAAO,QAAA,QAAA,CAAS,QAAT,CAAkB,CAAlB,EAAqB,IAArB,CAAP;AACH,SAHiB,EAIjB,GAJiB,CAIb,UAAA,CAAA,EAAC;AAAI,mBAAA,MAAK,gBAAL,CAAsB,CAAtB,CAAA;AAAwB,SAJhB,EAKjB,GALiB,CAKb,UAAA,CAAA,EAAC;AAAI,mBAAA,EAAE,KAAF,CAAQ,CAAR,EAAW,CAAX,MAAkB,IAAlB,GAAyB,EAAE,KAAF,CAAQ,CAAR,CAAzB,GAAsC,CAAtC;AAAuC,SAL/B,CAAA;AAKgC,KAL/C,CAAP;AAOH;AARD,QAAA,cAAA,GAAA,cAAA;AAUA,SAAgB,WAAhB,CAA4B,GAA5B,EAAiC,OAAjC,EAAqF;AAApD,QAAA,YAAA,KAAA,CAAA,EAAA;AAAA,kBAAA,CAAW,MAAX,EAAmB,UAAnB,EAA+B,QAA/B,EAAyC,UAAzC,CAAA;AAAoD;AACjF,QAAM,QAAQ;AACV,cAAM,GADI;AAEV,kBAAU,GAFA;AAGV,gBAAQ,GAHE;AAIV,kBAAU;AAJA,KAAd;AAMA,QAAM,OAAO,cAAc,OAAd,CAAb;AACA,WAAO,IAAI,cAAA,WAAJ,CAAgB,EAAE,MAAM,MAAM,IAAN,CAAR,EAAqB,MAAM,IAA3B,EAAiC,KAAG,GAApC,EAAhB,CAAP;AACH;AATD,QAAA,WAAA,GAAA,WAAA;AAWA,SAAgB,IAAhB,CAAqB,EAArB,EAA0E,IAA1E,EAAgF,KAAhF,EAAqF;QAA9D,SAAA,GAAA;QAAQ,QAAA,GAAA;QAAO,UAAA,GAAA;QAAS,UAAA,GAAA;QAAS,OAAA,GAAA;QAAM,WAAA,GAAA;AAC1D;AACA,UAAM,uBAAN,CAA8B,IAA9B,EAAoC,OAAO,MAA3C;AACA,UAAM,eAAN,CAAsB,UAAU,IAAhC,EAAsC,OAAO,KAAK,GAAL,CAAS,SAAS,KAAlB,EAAyB,QAAzB,CAA7C,EAAiF,KAAjF;AACA,UAAM,eAAN,CAAsB,CAAtB,EAAyB,OAAO,KAAK,GAAL,CAAS,WAAW,MAAX,GAAoB,KAA7B,EAAoC,SAAS,KAA7C,EAAoD,QAApD,CAAhC,EAA+F,OAA/F;AACH;AALD,QAAA,IAAA,GAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1IA,IAAA,SAAA,QAAA,SAAA,CAAA;AAEa,QAAA,KAAA,GAAQ;AACjB,YAAQ,gBAAC,EAAD,EAAsB;YAAnB,UAAA,GAAA;YAAS,WAAA,GAAA;AAChB,YAAM,MAAM,SAAN,GAAM,GAAA;AAAM,mBAAA,OAAA,aAAA,CAAc,CAAC,CAAD,EAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAJ,CAAd,EAA8B,CAAC,CAAD,EAAI,CAAJ,CAA9B,CAAA;AAAqC,SAAvD;AACA,YAAM,IAAI,KAAK,MAAL,KAAgB,GAAhB,GAAsB,EAAtB,GAA2B,CAArC;AACA,YAAM,IAAO,SAAS,KAAT,GAAc,GAAd,GAAkB,QAAQ,MAAvC;AACA,YAAI,MAAM,KAAV,EAAiB;AACb,mBAAO,OAAA,aAAA,CAAc,CACjB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,EAAoB,CAApB,EAAuB,CAAvB,CADiB,EAEjB,CAAC,CAAD,EAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAJ,EAAe,CAAf,EAAkB,KAAlB,CAFiB,EAGjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAHiB,EAIjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAJiB,EAKjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CALiB,EAMjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CANiB,EAOjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,KAAV,CAPiB,EAQjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CARiB,EASjB,CAAC,GAAD,EAAM,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAN,EAAiB,CAAjB,EAAoB,KAApB,CATiB,CAAd,CAAP,CADa,CAWV;AACN;AACD,YAAI,MAAM,KAAV,EAAiB;AACb,mBAAO,OAAA,aAAA,CAAc,CACjB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,EAAoB,CAApB,EAAuB,CAAvB,CADiB,EAEjB,CAAC,CAAD,EAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAJ,EAAe,CAAf,EAAkB,CAAlB,CAFiB,EAGjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAHiB,EAIjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAJiB,EAKjB,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,KAAX,CALiB,EAMjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAZ,EAAe,EAAf,EAAmB,KAAnB,CANiB,EAOjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,GAAP,CAAZ,EAAyB,CAAzB,EAA4B,KAA5B,CAPiB,CAAd,CAAP;AASH;AAED,YAAI,MAAM,KAAV,EAAiB;AACb,mBAAO,CAAC,CAAD,EAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAJ,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAf,EAA0B,CAA1B,CAAP;AACH;AACD,YAAI,KAAJ,EAAW;AACP,mBAAO,OAAA,aAAA,CAAc,CACjB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CADiB,EAEjB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAvB,EAA0B,CAA1B,CAFiB,CAAd,CAAP;AAIH;AACJ,KAvCgB;AAwCjB,UAAM,gBAAA;AAAM,eAAA,OAAA,aAAA,CAAc,CACtB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CADsB,CAAd,CAAA;AAEV,KA1Ce;AA2CjB,WAAO,eAAC,EAAD,EAAoB;YAAjB,WAAA,GAAA;YAAU,QAAA,GAAA;AAChB,YAAM,OAAO,UAAU,CAAV,IAAe,QAAQ,SAAS,MAAjB,KAA4B,CAAxD;AACA,YAAI,IAAJ,EAAU;AACN,mBAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAP;AACH;AACD,eAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAP;AACH,KAjDgB;AAkDjB,UAAM,cAAC,EAAD,EAAoB;YAAjB,WAAA,GAAA;YAAU,QAAA,GAAA;AACf,eAAO,OAAA,aAAA,CAAc,CACjB,CAAC,EAAD,EAAK,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAL,EAAiB,EAAjB,EAAqB,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArB,CADiB,EAEjB,CAAC,EAAD,EAAK,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAL,EAAiB,EAAjB,EAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAArB,CAFiB,EAGjB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAT,EAAqB,CAArB,CAHiB,EAIjB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAb,CAJiB,CAAd,EAKJ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CALI,CAAP;AAMH,KAzDgB;AA0DjB,WAAO,iBAAA;AAAM,eAAA,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,EAAW,CAAX,CAAA;AAAa;AA1DT,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFb,IAAA,SAAA,QAAA,SAAA,CAAA;AACa,QAAA,IAAA,GAAO;AAChB,YAAQ,kBAAA;AAAM,eAAA,OAAA,aAAA,CAAc,CACxB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAf,EAAkB,CAAC,CAAD,EAAI,EAAJ,CAAlB,EAA2B,CAAC,CAAD,EAAI,GAAJ,EAAS,CAAT,EAAY,CAAZ,CAA3B,CADwB,EAExB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAf,EAAkB,CAAC,CAAD,EAAI,EAAJ,CAAlB,EAA2B,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,EAAW,CAAX,CAA3B,CAFwB,EAGxB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAf,EAAkB,CAAC,CAAD,EAAI,EAAJ,CAAlB,EAA2B,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAA3B,CAHwB,EAIxB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAf,EAAkB,CAAC,CAAD,EAAI,EAAJ,CAAlB,EAA2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA3B,CAJwB,EAKxB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CALwB,CAAd,CAAA;AAMZ,KAPc;AAQhB,UAAM,gBAAA;AAAM,eAAA,OAAA,aAAA,CACR,CACI,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CADJ,EAEI,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,EAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA7B,EAA2C,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA3C,CAFJ,CADQ,CAAA;AAKX,KAbe;AAchB,UAAM,cAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAC,CAAC,CAAD,EAAI,EAAJ,CAAD,EAAU,CAAV,EAAa,CAAC,CAAD,EAAI,CAAJ,CAAb,EAAqB,CAArB,CAAD,CAAA;AAAyB,KAdtB;AAehB,WAAO,eAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,EAAW,CAAX,CAAP,EAAsB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,EAAV,CAAtB,CAAA;AAAoC,KAflC;AAgBhB,WAAO,eAAC,CAAD,EAAE;AAAK,eAAA,CAAC,CAAC,EAAD,EAAK,EAAL,CAAD,EAAW,CAAC,EAAD,EAAK,EAAL,CAAX,EAAqB,CAAC,EAAD,EAAK,EAAL,CAArB,EAA+B,CAAC,EAAD,EAAK,EAAL,CAA/B,CAAA;AAAwC;AAhBtC,CAAP","file":"demo.d88735c5.map","sourceRoot":"..","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n// eslint-disable-next-line no-global-assign\nparcelRequire = (function (modules, cache, entry, globalName) {\n  // Save the require from previous bundle to this closure if any\n  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;\n  var nodeRequire = typeof require === 'function' && require;\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error('Cannot find module \\'' + name + '\\'');\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n\n      var module = cache[name] = new newRequire.Module(name);\n\n      modules[name][0].call(module.exports, localRequire, module, module.exports, this);\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x){\n      return newRequire(localRequire.resolve(x));\n    }\n\n    function resolve(x){\n      return modules[name][1][x] || x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [function (require, module) {\n      module.exports = exports;\n    }, {}];\n  };\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (entry.length) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(entry[entry.length - 1]);\n\n    // CommonJS\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n      module.exports = mainExports;\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n     define(function () {\n       return mainExports;\n     });\n\n    // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n\n  // Override the current require with this new one\n  return newRequire;\n})({\"../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/node_modules/process/browser.js\":[function(require,module,exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n})();\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n    return [];\n};\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\n},{}],\"../node_modules/waaclock/lib/WAAClock.js\":[function(require,module,exports) {\nvar process = require(\"process\");\nvar isBrowser = (typeof window !== 'undefined')\n\nvar CLOCK_DEFAULTS = {\n  toleranceLate: 0.10,\n  toleranceEarly: 0.001\n}\n\n// ==================== Event ==================== //\nvar Event = function(clock, deadline, func) {\n  this.clock = clock\n  this.func = func\n  this._cleared = false // Flag used to clear an event inside callback\n\n  this.toleranceLate = clock.toleranceLate\n  this.toleranceEarly = clock.toleranceEarly\n  this._latestTime = null\n  this._earliestTime = null\n  this.deadline = null\n  this.repeatTime = null\n\n  this.schedule(deadline)\n}\n\n// Unschedules the event\nEvent.prototype.clear = function() {\n  this.clock._removeEvent(this)\n  this._cleared = true\n  return this\n}\n\n// Sets the event to repeat every `time` seconds.\nEvent.prototype.repeat = function(time) {\n  if (time === 0)\n    throw new Error('delay cannot be 0')\n  this.repeatTime = time\n  if (!this.clock._hasEvent(this))\n    this.schedule(this.deadline + this.repeatTime)\n  return this\n}\n\n// Sets the time tolerance of the event.\n// The event will be executed in the interval `[deadline - early, deadline + late]`\n// If the clock fails to execute the event in time, the event will be dropped.\nEvent.prototype.tolerance = function(values) {\n  if (typeof values.late === 'number')\n    this.toleranceLate = values.late\n  if (typeof values.early === 'number')\n    this.toleranceEarly = values.early\n  this._refreshEarlyLateDates()\n  if (this.clock._hasEvent(this)) {\n    this.clock._removeEvent(this)\n    this.clock._insertEvent(this)\n  }\n  return this\n}\n\n// Returns true if the event is repeated, false otherwise\nEvent.prototype.isRepeated = function() { return this.repeatTime !== null }\n\n// Schedules the event to be ran before `deadline`.\n// If the time is within the event tolerance, we handle the event immediately.\n// If the event was already scheduled at a different time, it is rescheduled.\nEvent.prototype.schedule = function(deadline) {\n  this._cleared = false\n  this.deadline = deadline\n  this._refreshEarlyLateDates()\n\n  if (this.clock.context.currentTime >= this._earliestTime) {\n    this._execute()\n  \n  } else if (this.clock._hasEvent(this)) {\n    this.clock._removeEvent(this)\n    this.clock._insertEvent(this)\n  \n  } else this.clock._insertEvent(this)\n}\n\nEvent.prototype.timeStretch = function(tRef, ratio) {\n  if (this.isRepeated())\n    this.repeatTime = this.repeatTime * ratio\n\n  var deadline = tRef + ratio * (this.deadline - tRef)\n  // If the deadline is too close or past, and the event has a repeat,\n  // we calculate the next repeat possible in the stretched space.\n  if (this.isRepeated()) {\n    while (this.clock.context.currentTime >= deadline - this.toleranceEarly)\n      deadline += this.repeatTime\n  }\n  this.schedule(deadline)\n}\n\n// Executes the event\nEvent.prototype._execute = function() {\n  if (this.clock._started === false) return\n  this.clock._removeEvent(this)\n\n  if (this.clock.context.currentTime < this._latestTime)\n    this.func(this)\n  else {\n    if (this.onexpired) this.onexpired(this)\n    console.warn('event expired')\n  }\n  // In the case `schedule` is called inside `func`, we need to avoid\n  // overrwriting with yet another `schedule`.\n  if (!this.clock._hasEvent(this) && this.isRepeated() && !this._cleared)\n    this.schedule(this.deadline + this.repeatTime) \n}\n\n// Updates cached times\nEvent.prototype._refreshEarlyLateDates = function() {\n  this._latestTime = this.deadline + this.toleranceLate\n  this._earliestTime = this.deadline - this.toleranceEarly\n}\n\n// ==================== WAAClock ==================== //\nvar WAAClock = module.exports = function(context, opts) {\n  var self = this\n  opts = opts || {}\n  this.tickMethod = opts.tickMethod || 'ScriptProcessorNode'\n  this.toleranceEarly = opts.toleranceEarly || CLOCK_DEFAULTS.toleranceEarly\n  this.toleranceLate = opts.toleranceLate || CLOCK_DEFAULTS.toleranceLate\n  this.context = context\n  this._events = []\n  this._started = false\n}\n\n// ---------- Public API ---------- //\n// Schedules `func` to run after `delay` seconds.\nWAAClock.prototype.setTimeout = function(func, delay) {\n  return this._createEvent(func, this._absTime(delay))\n}\n\n// Schedules `func` to run before `deadline`.\nWAAClock.prototype.callbackAtTime = function(func, deadline) {\n  return this._createEvent(func, deadline)\n}\n\n// Stretches `deadline` and `repeat` of all scheduled `events` by `ratio`, keeping\n// their relative distance to `tRef`. In fact this is equivalent to changing the tempo.\nWAAClock.prototype.timeStretch = function(tRef, events, ratio) {\n  events.forEach(function(event) { event.timeStretch(tRef, ratio) })\n  return events\n}\n\n// Removes all scheduled events and starts the clock \nWAAClock.prototype.start = function() {\n  if (this._started === false) {\n    var self = this\n    this._started = true\n    this._events = []\n\n    if (this.tickMethod === 'ScriptProcessorNode') {\n      var bufferSize = 256\n      // We have to keep a reference to the node to avoid garbage collection\n      this._clockNode = this.context.createScriptProcessor(bufferSize, 1, 1)\n      this._clockNode.connect(this.context.destination)\n      this._clockNode.onaudioprocess = function () {\n        process.nextTick(function() { self._tick() })\n      }\n    } else if (this.tickMethod === 'manual') null // _tick is called manually\n\n    else throw new Error('invalid tickMethod ' + this.tickMethod)\n  }\n}\n\n// Stops the clock\nWAAClock.prototype.stop = function() {\n  if (this._started === true) {\n    this._started = false\n    this._clockNode.disconnect()\n  }  \n}\n\n// ---------- Private ---------- //\n\n// This function is ran periodically, and at each tick it executes\n// events for which `currentTime` is included in their tolerance interval.\nWAAClock.prototype._tick = function() {\n  var event = this._events.shift()\n\n  while(event && event._earliestTime <= this.context.currentTime) {\n    event._execute()\n    event = this._events.shift()\n  }\n\n  // Put back the last event\n  if(event) this._events.unshift(event)\n}\n\n// Creates an event and insert it to the list\nWAAClock.prototype._createEvent = function(func, deadline) {\n  return new Event(this, deadline, func)\n}\n\n// Inserts an event to the list\nWAAClock.prototype._insertEvent = function(event) {\n  this._events.splice(this._indexByTime(event._earliestTime), 0, event)\n}\n\n// Removes an event from the list\nWAAClock.prototype._removeEvent = function(event) {\n  var ind = this._events.indexOf(event)\n  if (ind !== -1) this._events.splice(ind, 1)\n}\n\n// Returns true if `event` is in queue, false otherwise\nWAAClock.prototype._hasEvent = function(event) {\n return this._events.indexOf(event) !== -1\n}\n\n// Returns the index of the first event whose deadline is >= to `deadline`\nWAAClock.prototype._indexByTime = function(deadline) {\n  // performs a binary search\n  var low = 0\n    , high = this._events.length\n    , mid\n  while (low < high) {\n    mid = Math.floor((low + high) / 2)\n    if (this._events[mid]._earliestTime < deadline)\n      low = mid + 1\n    else high = mid\n  }\n  return low\n}\n\n// Converts from relative time to absolute time\nWAAClock.prototype._absTime = function(relTime) {\n  return relTime + this.context.currentTime\n}\n\n// Converts from absolute time to relative time \nWAAClock.prototype._relTime = function(absTime) {\n  return absTime - this.context.currentTime\n}\n},{\"process\":\"../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/node_modules/process/browser.js\"}],\"../node_modules/waaclock/index.js\":[function(require,module,exports) {\nvar WAAClock = require('./lib/WAAClock')\n\nmodule.exports = WAAClock\nif (typeof window !== 'undefined') window.WAAClock = WAAClock\n\n},{\"./lib/WAAClock\":\"../node_modules/waaclock/lib/WAAClock.js\"}],\"Pulse.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar waaclock_1 = __importDefault(require(\"waaclock\"));\nvar Pulse = /** @class */function () {\n    function Pulse(props) {\n        this.defaults = {\n            bpm: 120,\n            cycle: 4,\n            delay: 0\n        };\n        this.events = [];\n        this.props = Object.assign({}, this.defaults, props);\n        this.context = this.props.context || new AudioContext();\n        this.clock = this.props.clock || new waaclock_1[\"default\"](this.context, { toleranceEarly: 0.1, toleranceLate: 0.1 });\n    }\n    Pulse.prototype.getMeasureLength = function (bpm, beatsPerMeasure) {\n        if (bpm === void 0) {\n            bpm = this.props.bpm;\n        }\n        if (beatsPerMeasure === void 0) {\n            beatsPerMeasure = this.props.cycle;\n        }\n        return 60 / bpm * beatsPerMeasure;\n    };\n    Pulse.prototype.arrayPulse = function (children, length, path, start, callback, deadline) {\n        var _this = this;\n        if (length === void 0) {\n            length = 1;\n        }\n        if (path === void 0) {\n            path = [];\n        }\n        if (start === void 0) {\n            start = 0;\n        }\n        //TODO: return promise on next one (for chaining)\n        if (!Array.isArray(children)) {\n            if (children === 0) {\n                return 0;\n            }\n            var item_1 = {\n                value: children,\n                length: length,\n                path: path,\n                start: start,\n                pulse: this,\n                cycle: this.props.cycle,\n                timeout: null\n            };\n            start += this.props.delay; // TODO: be able to add delay from arrayPulse fn directly\n            if (this.callbackAtTime) {\n                start += deadline ? deadline : this.context.currentTime;\n                item_1.timeout = this.clock.callbackAtTime(function (event) {\n                    return callback(Object.assign(item_1, { event: event, deadline: event.deadline }));\n                }, start);\n            } else {\n                start += (deadline || this.context.currentTime) - this.context.currentTime;\n                item_1.timeout = this.clock.setTimeout(function (event) {\n                    return callback(Object.assign(item_1, { event: event, deadline: event.deadline }));\n                }, start);\n            }\n            this.events.push(item_1.timeout);\n            return item_1;\n        }\n        var childLength = length / children.length;\n        return {\n            length: length,\n            children: children.map(function (el, i) {\n                return _this.arrayPulse(el, childLength, path.concat([i]), start + i * childLength, callback, deadline);\n            })\n        };\n    };\n    Pulse.prototype.tickArray = function (array, callback, deadline, length) {\n        var _this = this;\n        array.push(1);\n        var l = length || this.getMeasureLength() * array.length;\n        this.start();\n        return new Promise(function (resolve, reject) {\n            _this.arrayPulse(array, l, [], 0, function (tick, start) {\n                if (tick.path[0] === array.length - 1) {\n                    resolve(tick);\n                } else {\n                    callback(tick, start);\n                }\n            }, deadline);\n        });\n    };\n    Pulse.prototype.start = function () {\n        // console.log('start with', this.events.length, 'events');\n        var criticalEvents = 6000;\n        if (this.events.length > criticalEvents) {\n            console.warn('more than ', criticalEvents, 'events received. Consider using less \"times\" to keep the timing precies');\n        }\n        this.clock.start();\n    };\n    Pulse.prototype.stop = function () {\n        this.clock.stop();\n    };\n    Pulse.prototype.changeTempo = function (newTempo, timeout) {\n        var _this = this;\n        if (timeout === void 0) {\n            timeout = 0.2;\n        }\n        var factor = this.props.bpm / newTempo;\n        this.props.bpm = newTempo;\n        var events = this.events.filter(function (e) {\n            return e.deadline - _this.context.currentTime > timeout;\n        });\n        // TODO: stretch durations?!\n        this.clock.timeStretch(this.context.currentTime, events, factor);\n    };\n    return Pulse;\n}();\nexports.Pulse = Pulse;\n},{\"waaclock\":\"../node_modules/waaclock/index.js\"}],\"Band.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar Pulse_1 = require(\"./Pulse\");\nvar Band = /** @class */function () {\n    function Band(_a) {\n        var _b = _a === void 0 ? {} : _a,\n            context = _b.context,\n            musicians = _b.musicians;\n        this.defaults = {\n            cycle: 4,\n            division: 3,\n            transpose: 0,\n            style: 'Medium Swing'\n        };\n        this.context = context || new AudioContext();\n        this.musicians = musicians || [];\n    }\n    Band.prototype.ready = function () {\n        return Promise.all([this.resume()].concat(this.musicians.map(function (m) {\n            return m.ready;\n        })));\n    };\n    Band.prototype.resume = function () {\n        var _this = this;\n        return this.context.resume().then(function () {\n            return _this.context;\n        });\n    };\n    Band.prototype.comp = function (measures, settings) {\n        if (this.pulse) {\n            this.pulse.stop();\n        }\n        settings = Object.assign(this.defaults, settings, { context: this.context });\n        measures = measures.map(function (m) {\n            return !Array.isArray(m) ? [m] : m;\n        });\n        this.play(measures, settings);\n    };\n    Band.prototype.play = function (measures, settings) {\n        var _this = this;\n        this.ready().then(function () {\n            _this.pulse = settings.pulse || new Pulse_1.Pulse(settings);\n            _this.musicians.forEach(function (musician) {\n                return musician.play({ pulse: _this.pulse, measures: measures, settings: settings });\n            });\n            _this.pulse.start();\n        });\n    };\n    return Band;\n}();\nexports[\"default\"] = Band;\n},{\"./Pulse\":\"Pulse.ts\"}],\"../node_modules/tonal-note/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tokenize = tokenize;\nexports.fromMidi = fromMidi;\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-note.svg)](https://www.npmjs.com/package/tonal-note)\n * [![tonal](https://img.shields.io/badge/tonal-note-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-note` is a collection of functions to manipulate musical notes in scientific notation\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * ## Usage\n *\n * ```js\n * import * as Note from \"tonal-note\"\n * // or const Note = require(\"tonal-note\")\n * Note.name(\"bb2\") // => \"Bb2\"\n * Note.chroma(\"bb2\") // => 10\n * Note.midi(\"a4\") // => 69\n * Note.freq(\"a4\") // => 440\n * Note.oct(\"G3\") // => 3\n *\n * // part of tonal\n * const Tonal = require(\"tonal\")\n * // or import Note from \"tonal\"\n * Tonal.Note.midi(\"d4\") // => 62\n * ```\n *\n * ## Install\n *\n * [![npm install tonal-note](https://nodei.co/npm/tonal-note.png?mini=true)](https://npmjs.org/package/tonal-note/)\n *\n * ## API Documentation\n *\n * @module Note\n */\n\nvar NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\n\n/**\n * Get a list of note names (pitch classes) within a octave\n *\n * @param {string} accTypes - (Optional, by default \" b#\"). A string with the\n * accidentals types: \" \" means no accidental, \"#\" means sharps, \"b\" mean flats,\n * can be conbined (see examples)\n * @return {Array}\n * @example\n * Note.names(\" b\") // => [ \"C\", \"Db\", \"D\", \"Eb\", \"E\", \"F\", \"Gb\", \"G\", \"Ab\", \"A\", \"Bb\", \"B\" ]\n * Note.names(\" #\") // => [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ]\n */\nvar names = exports.names = function (accTypes) {\n  return typeof accTypes !== \"string\" ? NAMES.slice() : NAMES.filter(function (n) {\n    var acc = n[1] || \" \";\n    return accTypes.indexOf(acc) !== -1;\n  });\n};\n\nvar SHARPS = names(\" #\");\nvar FLATS = names(\" b\");\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\n\n/**\n * Split a string into tokens related to note parts.\n * It returns an array of strings `[letter, accidental, octave, modifier]`\n *\n * It always returns an array\n *\n * @param {String} str\n * @return {Array} an array of note tokens\n * @example\n * Note.tokenize(\"C#2\") // => [\"C\", \"#\", \"2\", \"\"]\n * Note.tokenize(\"Db3 major\") // => [\"D\", \"b\", \"3\", \"major\"]\n * Note.tokenize(\"major\") // => [\"\", \"\", \"\", \"major\"]\n * Note.tokenize(\"##\") // => [\"\", \"##\", \"\", \"\"]\n * Note.tokenize() // => [\"\", \"\", \"\", \"\"]\n */\nfunction tokenize(str) {\n  if (typeof str !== \"string\") {\n    str = \"\";\n  }\n  var m = REGEX.exec(str);\n  if (!m) {\n    return null;\n  }\n  return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\n}\n\nvar NO_NOTE = Object.freeze({\n  pc: null,\n  name: null,\n  step: null,\n  alt: null,\n  oct: null,\n  octStr: null,\n  chroma: null,\n  midi: null,\n  freq: null\n});\n\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\nvar properties = function (str) {\n  var tokens = tokenize(str);\n  if (tokens[0] === \"\" || tokens[3] !== \"\") {\n    return NO_NOTE;\n  }\n  var letter = tokens[0];\n  var acc = tokens[1];\n  var octStr = tokens[2];\n  var p = { letter: letter, acc: acc, octStr: octStr };\n  p.pc = p.letter + p.acc;\n  p.name = p.pc + octStr;\n  p.step = (p.letter.charCodeAt(0) + 3) % 7;\n  p.alt = p.acc[0] === \"b\" ? -p.acc.length : p.acc.length;\n  p.oct = octStr.length ? +octStr : null;\n  p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\n  p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\n  p.freq = midiToFreq(p.midi);\n  return Object.freeze(p);\n};\n\nvar memo = function (fn, cache) {\n  if (cache === void 0) cache = {};\n\n  return function (str) {\n    return cache[str] || (cache[str] = fn(str));\n  };\n};\n\n/**\n * Get note properties. It returns an object with the following information:\n *\n * - name{String}: the note name. The letter is always in uppercase\n * - letter {String}: the note letter, always in uppercase\n * - acc {String}: the note accidentals\n * - octave {Number}: the octave or null if not present\n * - pc{String}: the pitch class (letter + accidentals)\n * - step {Number}: number equivalent of the note letter. 0 means C ... 6 means B.\n * - alt {Number}: number equivalent of accidentals (negative are flats, positive sharps)\n * - chroma {Number}: number equivalent of the pitch class, where 0 is C, 1 is C# or Db, 2 is D...\n * - midi {Number}: the note midi number\n * - freq {Number}: the frequency using an equal temperament at 440Hz\n *\n * This function *always* returns an object with all this properties, but if it\"s\n * not a valid note all properties will be null.\n *\n * The returned object can\"t be mutated.\n *\n * @param {String} note - the note name in scientific notation\n * @return {Object} an object with the properties (or an object will all properties\n * set to null if not valid note)\n * @example\n * Note.props(\"fx-3\").name // => \"F##-3\"\n * Note.props(\"invalid\").name // => null\n * Note.props(\"C#3\").oct // => 3\n * Note.props().oct // => null\n */\nvar props = exports.props = memo(properties);\n\n/**\n * Given a note name, return the note name or null if not valid note.\n * The note name will ALWAYS have the letter in upercase and accidentals\n * using # or b\n *\n * Can be used to test if a string is a valid note name.\n *\n * @function\n * @param {Pitch|string}\n * @return {string}\n *\n * @example\n * Note.name(\"cb2\") // => \"Cb2\"\n * [\"c\", \"db3\", \"2\", \"g+\", \"gx4\"].map(Note.name) // => [\"C\", \"Db3\", null, null, \"G##4\"]\n */\nvar name = exports.name = function (str) {\n  return props(str).name;\n};\n\n/**\n * Get pitch class of a note. The note can be a string or a pitch array.\n *\n * @function\n * @param {string|Pitch}\n * @return {string} the pitch class\n * @example\n * Note.pc(\"Db3\") // => \"Db\"\n * [\"db3\", \"bb6\", \"fx2\"].map(Note.pc) // => [ \"Db\", \"Bb\", \"F##\"]\n */\nvar pc = exports.pc = function (str) {\n  return props(str).pc;\n};\n\n/**\n * Get the note midi number\n * (an alias of tonal-midi `toMidi` function)\n *\n * @function\n * @param {string|Number} note - the note to get the midi number from\n * @return {Integer} the midi number or null if not valid pitch\n * @example\n * Note.midi(\"C4\") // => 60\n * Note.midi(60) // => 60\n * @see midi.toMidi\n */\nvar midi = exports.midi = function (note) {\n  return props(note).midi || +note || null;\n};\n\n/**\n * Get the frequency from midi number\n *\n * @param {Number} midi - the note midi number\n * @param {Number} tuning - (Optional) 440 by default\n * @return {Number} the frequency or null if not valid note midi\n */\nvar midiToFreq = exports.midiToFreq = function (midi, tuning) {\n  if (tuning === void 0) tuning = 440;\n\n  return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\n};\n\n/**\n * Get the frequency of a note\n *\n * @function\n * @param {string|Number} note - the note name or midi note number\n * @return {Number} the frequency\n * @example\n * Note.freq(\"A4\") // => 440\n * Note.freq(69) // => 440\n */\nvar freq = exports.freq = function (note) {\n  return props(note).freq || midiToFreq(note);\n};\n\nvar L2 = Math.log(2);\nvar L440 = Math.log(440);\n/**\n * Get the midi number from a frequency in hertz. The midi number can\n * contain decimals (with two digits precission)\n *\n * @param {Number} frequency\n * @return {Number}\n * @example\n * Note.freqToMidi(220)); //=> 57;\n * Note.freqToMidi(261.62)); //=> 60;\n * Note.freqToMidi(261)); //=> 59.96;\n */\nvar freqToMidi = exports.freqToMidi = function (freq) {\n  var v = 12 * (Math.log(freq) - L440) / L2 + 69;\n  return Math.round(v * 100) / 100;\n};\n\n/**\n * Return the chroma of a note. The chroma is the numeric equivalent to the\n * pitch class, where 0 is C, 1 is C# or Db, 2 is D... 11 is B\n *\n * @param {string} note - the note name\n * @return {Integer} the chroma number\n * @example\n * Note.chroma(\"Cb\") // => 11\n * [\"C\", \"D\", \"E\", \"F\"].map(Note.chroma) // => [0, 2, 4, 5]\n */\nvar chroma = exports.chroma = function (str) {\n  return props(str).chroma;\n};\n\n/**\n * Get the octave of the given pitch\n *\n * @function\n * @param {string} note - the note\n * @return {Integer} the octave or null if doesn\"t have an octave or not a valid note\n * @example\n * Note.oct(\"C#4\") // => 4\n * Note.oct(\"C\") // => null\n * Note.oct(\"blah\") // => undefined\n */\nvar oct = exports.oct = function (str) {\n  return props(str).oct;\n};\n\nvar LETTERS = \"CDEFGAB\";\n/**\n * Given a step number return it\"s letter (0 = C, 1 = D, 2 = E)\n * @param {number} step\n * @return {string} the letter\n * @example\n * Note.stepToLetter(3) // => \"F\"\n */\nvar stepToLetter = exports.stepToLetter = function (step) {\n  return LETTERS[step];\n};\n\nvar fillStr = function (s, n) {\n  return Array(n + 1).join(s);\n};\nvar numToStr = function (num, op) {\n  return typeof num !== \"number\" ? \"\" : op(num);\n};\n\n/**\n * Given an alteration number, return the accidentals\n * @param {Number} alt\n * @return {String}\n * @example\n * Note.altToAcc(-3) // => \"bbb\"\n */\nvar altToAcc = exports.altToAcc = function (alt) {\n  return numToStr(alt, function (alt) {\n    return alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\n  });\n};\n\n/**\n * Creates a note name in scientific notation from note properties,\n * and optionally another note name.\n * It receives an object with:\n * - step: the note step (0 = C, 1 = D, ... 6 = B)\n * - alt: (optional) the alteration. Negative numbers are flats, positive sharps\n * - oct: (optional) the octave\n *\n * Optionally it receives another note as a \"base\", meaning that any prop not explicitly\n * received on the first parameter will be taken from that base note. That way it can be used\n * as an immutable \"set\" operator for a that base note\n *\n * @function\n * @param {Object} props - the note properties\n * @param {String} [baseNote] - note to build the result from. If given, it returns\n * the result of applying the given props to this note.\n * @return {String} the note name in scientific notation or null if not valid properties\n * @example\n * Note.from({ step: 5 }) // => \"A\"\n * Note.from({ step: 1, acc: -1 }) // => \"Db\"\n * Note.from({ step: 2, acc: 2, oct: 2 }) // => \"E##2\"\n * Note.from({ step: 7 }) // => null\n * Note.from({alt: 1, oct: 3}, \"C4\") // => \"C#3\"\n */\nvar from = exports.from = function (fromProps, baseNote) {\n  if (fromProps === void 0) fromProps = {};\n  if (baseNote === void 0) baseNote = null;\n\n  var ref = baseNote ? Object.assign({}, props(baseNote), fromProps) : fromProps;\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var letter = stepToLetter(step);\n  if (!letter) {\n    return null;\n  }\n  var pc = letter + altToAcc(alt);\n  return oct || oct === 0 ? pc + oct : pc;\n};\n\n/**\n * Deprecated. This is kept for backwards compatibility only.\n * Use Note.from instead\n */\nvar build = exports.build = from;\n\n/**\n * Given a midi number, returns a note name. The altered notes will have\n * flats unless explicitly set with the optional `useSharps` parameter.\n *\n * @function\n * @param {number} midi - the midi note number\n * @param {boolean} useSharps - (Optional) set to true to use sharps instead of flats\n * @return {string} the note name\n * @example\n * Note.fromMidi(61) // => \"Db4\"\n * Note.fromMidi(61, true) // => \"C#4\"\n * // it rounds to nearest note\n * Note.fromMidi(61.7) // => \"D4\"\n */\nfunction fromMidi(num, sharps) {\n  num = Math.round(num);\n  var pcs = sharps === true ? SHARPS : FLATS;\n  var pc = pcs[num % 12];\n  var o = Math.floor(num / 12) - 1;\n  return pc + o;\n}\n\n/**\n * Simplify the note: find an enhramonic note with less accidentals.\n *\n * @param {String} note - the note to be simplified\n * @param {boolean} useSameAccType - (optional, true by default) set to true\n * to ensure the returned note has the same accidental types that the given note\n * @return {String} the simplfiied note or null if not valid note\n * @example\n * Note.simplify(\"C##\") // => \"D\"\n * Note.simplify(\"C###\") // => \"D#\"\n * Note.simplify(\"C###\", false) // => \"Eb\"\n * Note.simplify(\"B#4\") // => \"C5\"\n */\nvar simplify = exports.simplify = function (note, sameAcc) {\n  var ref = props(note);\n  var alt = ref.alt;\n  var chroma = ref.chroma;\n  var midi = ref.midi;\n  if (chroma === null) {\n    return null;\n  }\n  var useSharps = sameAcc === false ? alt < 0 : alt > 0;\n  return midi === null ? pc(fromMidi(chroma, useSharps)) : fromMidi(midi, useSharps);\n};\n\n/**\n * Get the simplified and enhramonic note of the given one.\n *\n * @param {String} note\n * @return {String} the enhramonic note\n * @example\n * Note.enharmonic(\"Db\") // => \"C#\"\n * Note.enhramonic(\"C\") // => \"C\"\n */\nvar enharmonic = exports.enharmonic = function (note) {\n  return simplify(note, false);\n};\n},{}],\"../node_modules/tonal-array/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.permutations = exports.shuffle = exports.compact = undefined;\nexports.range = range;\nexports.rotate = rotate;\nexports.sort = sort;\nexports.unique = unique;\n\nvar _tonalNote = require(\"tonal-note\");\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b) {\n    ;\n  }\n  return a;\n}\n// descending range\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array)\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n) {\n    ;\n  }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nfunction range(a, b) {\n  return a === null || b === null ? [] : a < b ? ascR(a, b - a + 1) : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nfunction rotate(times, arr) {\n  var len = arr.length;\n  var n = (times % len + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nvar compact = exports.compact = function (arr) {\n  return arr.filter(function (n) {\n    return n === 0 || n;\n  });\n};\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (n) {\n  var m = (0, _tonalNote.midi)(n);\n  return m !== null ? m : (0, _tonalNote.midi)(n + \"-100\");\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nfunction sort(src) {\n  return compact(src.map(_tonalNote.name)).sort(function (a, b) {\n    return height(a) > height(b);\n  });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nfunction unique(arr) {\n  return sort(arr).filter(function (n, i, a) {\n    return i === 0 || n !== a[i - 1];\n  });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nvar shuffle = exports.shuffle = function (arr, rnd) {\n  if (rnd === void 0) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = rnd() * m-- | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nvar permutations = exports.permutations = function (arr) {\n  if (arr.length === 0) {\n    return [[]];\n  }\n  return permutations(arr.slice(1)).reduce(function (acc, perm) {\n    return acc.concat(arr.map(function (e, pos) {\n      var newPerm = perm.slice();\n      newPerm.splice(pos, 0, arr[0]);\n      return newPerm;\n    }));\n  }, []);\n};\n},{\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\"}],\"../node_modules/tonal-interval/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.props = props;\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-interval.svg)](https://www.npmjs.com/package/tonal-interval)\n * [![tonal](https://img.shields.io/badge/tonal-interval-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-interval` is a collection of functions to create and manipulate music intervals.\n *\n * The intervals are strings in shorthand notation. Two variations are supported:\n *\n * - standard shorthand notation: type and number, for example: \"M3\", \"d-4\"\n * - inverse shorthand notation: number and then type, for example: \"3M\", \"-4d\"\n *\n * The problem with the standard shorthand notation is that some strings can be\n * parsed as notes or intervals, for example: \"A4\" can be note A in 4th octave\n * or an augmented four. To remove ambiguity, the prefered notation in tonal is the\n * inverse shortand notation.\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * ## Usage\n *\n * ```js\n * // es6\n * import * as Interval from \"tonal-interval\"\n * // es5\n * const Interval = require(\"tonal-interval\")\n * // part of tonal\n * import { Interval } from \"tonal\"\n *\n * Interval.semitones(\"4P\") // => 5\n * Interval.invert(\"3m\") // => \"6M\"\n * Interval.simplify(\"9m\") // => \"2m\"\n * ```\n *\n * ## Install\n *\n * [![npm install tonal-interval](https://nodei.co/npm/tonal-interval.png?mini=true)](https://npmjs.org/package/tonal-interval/)\n *\n * ## API Documentation\n *\n * @module Interval\n */\n// shorthand tonal notation (with quality after number)\nvar IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\n// standard shorthand notation (with quality before number)\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\nvar TYPES = \"PMMPPMM\";\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\n\n/**\n * List basic (perfect, major, minor) interval names within a octave\n * @param {String} qualities - (Optional, default \"PMm\") the valid types\n * @return {Array} the interval names\n * @example\n * Interval.names() // => [ \"1P\", \"2m\", \"2M\", \"3m\", \"3M\", \"4P\", \"5P\", \"6m\", \"6M\", \"7m\", \"7M\", \"8P\" ]\n * Interval.names(\"P\") // => [ \"1P\", \"4P\", \"5P\", \"8P\" ]\n * Interval.names(\"PM\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\n * Interval.names(\"Pm\") // => [ \"1P\", \"2m\", \"3m\", \"4P\", \"5P\", \"6m\", \"7m\", \"8P\" ]\n * Interval.names(\"d\") // => []\n */\nvar names = exports.names = function (types) {\n  return typeof types !== \"string\" ? NAMES.slice() : NAMES.filter(function (n) {\n    return types.indexOf(n[1]) !== -1;\n  });\n};\n\nvar tokenize = exports.tokenize = function (str) {\n  var m = REGEX.exec(str);\n  return m === null ? null : m[1] ? [m[1], m[2]] : [m[4], m[3]];\n};\n\nvar NO_IVL = Object.freeze({\n  name: null,\n  num: null,\n  q: null,\n  step: null,\n  alt: null,\n  dir: null,\n  type: null,\n  simple: null,\n  semitones: null,\n  chroma: null\n});\n\nvar fillStr = function (s, n) {\n  return Array(Math.abs(n) + 1).join(s);\n};\n\nvar qToAlt = function (type, q) {\n  if (q === \"M\" && type === \"M\") {\n    return 0;\n  }\n  if (q === \"P\" && type === \"P\") {\n    return 0;\n  }\n  if (q === \"m\" && type === \"M\") {\n    return -1;\n  }\n  if (/^A+$/.test(q)) {\n    return q.length;\n  }\n  if (/^d+$/.test(q)) {\n    return type === \"P\" ? -q.length : -q.length - 1;\n  }\n  return null;\n};\n\nvar altToQ = function (type, alt) {\n  if (alt === 0) {\n    return type === \"M\" ? \"M\" : \"P\";\n  } else if (alt === -1 && type === \"M\") {\n    return \"m\";\n  } else if (alt > 0) {\n    return fillStr(\"A\", alt);\n  } else if (alt < 0) {\n    return fillStr(\"d\", type === \"P\" ? alt : alt + 1);\n  } else {\n    return null;\n  }\n};\n\nvar numToStep = function (num) {\n  return (Math.abs(num) - 1) % 7;\n};\n\nvar properties = function (str) {\n  var t = tokenize(str);\n  if (t === null) {\n    return NO_IVL;\n  }\n  var p = { num: +t[0], q: t[1] };\n  p.step = numToStep(p.num);\n  p.type = TYPES[p.step];\n  if (p.type === \"M\" && p.q === \"P\") {\n    return NO_IVL;\n  }\n\n  p.name = \"\" + p.num + p.q;\n  p.dir = p.num < 0 ? -1 : 1;\n  p.simple = p.num === 8 || p.num === -8 ? p.num : p.dir * (p.step + 1);\n  p.alt = qToAlt(p.type, p.q);\n  p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\n  p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\n  p.chroma = (p.dir * (SIZES[p.step] + p.alt) % 12 + 12) % 12;\n  return Object.freeze(p);\n};\n\nvar cache = {};\n/**\n * Get interval properties. It returns an object with:\n *\n * - name: name\n * - num: number\n * - q: quality\n * - step: step\n * - alt: alteration\n * - dir: direction (1 ascending, -1 descending)\n * - type: \"P\" or \"M\" for perfectable or majorable\n * - simple: the simplified number\n * - semitones: the size in semitones\n * - chroma: the interval chroma\n * - ic: the interval class\n *\n * @function\n * @param {String} interval - the interval\n * @return {Object} the interval in the form [number, alt]\n */\nfunction props(str) {\n  if (typeof str !== \"string\") {\n    return NO_IVL;\n  }\n  return cache[str] || (cache[str] = properties(str));\n}\n\n/**\n * Get the number of the interval\n *\n * @function\n * @param {String} interval - the interval\n * @return {Integer}\n * @example\n * Interval.num(\"m2\") // => 2\n * Interval.num(\"P9\") // => 9\n * Interval.num(\"P-4\") // => -4\n */\nvar num = exports.num = function (str) {\n  return props(str).num;\n};\n\n/**\n * Get interval name. Can be used to test if it\"s an interval. It accepts intervals\n * as pitch or string in shorthand notation or tonal notation. It returns always\n * intervals in tonal notation.\n *\n * @function\n * @param {String} interval - the interval string or array\n * @return {String} the interval name or null if not valid interval\n * @example\n * Interval.name(\"m-3\") // => \"-3m\"\n * Interval.name(\"3\") // => null\n */\nvar name = exports.name = function (str) {\n  return props(str).name;\n};\n\n/**\n * Get size in semitones of an interval\n *\n * @function\n * @param {String} ivl\n * @return {Integer} the number of semitones or null if not an interval\n * @example\n * import { semitones } from \"tonal-interval\"\n * semitones(\"P4\") // => 5\n * // or using tonal\n * Tonal.Interval.semitones(\"P5\") // => 7\n */\nvar semitones = exports.semitones = function (str) {\n  return props(str).semitones;\n};\n\n/**\n * Get the chroma of the interval. The chroma is a number between 0 and 7\n * that represents the position within an octave (pitch set)\n *\n * @function\n * @param {String} str\n * @return {Number}\n */\nvar chroma = exports.chroma = function (str) {\n  return props(str).chroma;\n};\n\n/**\n * Get the [interval class](https://en.wikipedia.org/wiki/Interval_class)\n * number of a given interval.\n *\n * In musical set theory, an interval class is the shortest distance in\n * pitch class space between two unordered pitch classes\n *\n * @function\n * @param {String|Integer} interval - the interval or the number of semitones\n * @return {Integer} A value between 0 and 6\n *\n * @example\n * Interval.ic(\"P8\") // => 0\n * Interval.ic(\"m6\") // => 4\n * Interval.ic(10) // => 2\n * [\"P1\", \"M2\", \"M3\", \"P4\", \"P5\", \"M6\", \"M7\"].map(ic) // => [0, 2, 4, 5, 5, 3, 1]\n */\nvar ic = exports.ic = function (ivl) {\n  if (typeof ivl === \"string\") {\n    ivl = props(ivl).chroma;\n  }\n  return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\n};\n\n/**\n * Given a interval property object, get the interval name\n *\n * The properties must contain a `num` *or* `step`, and `alt`:\n *\n * - num: the interval number\n * - step: the interval step (overrides the num property)\n * - alt: the interval alteration\n * - oct: (Optional) the number of octaves\n * - dir: (Optional) the direction\n *\n * @function\n * @param {Object} props - the interval property object\n *\n * @return {String} the interval name\n * @example\n * Interval.build({ step: 1, alt: -1, oct: 0, dir: 1 }) // => \"1d\"\n * Interval.build({ num: 9, alt: -1 }) // => \"9m\"\n */\nvar build = exports.build = function (ref) {\n  if (ref === void 0) ref = {};\n  var num = ref.num;\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;if (oct === void 0) oct = 1;\n  var dir = ref.dir;\n\n  if (step !== undefined) {\n    num = step + 1 + 7 * oct;\n  }\n  if (num === undefined) {\n    return null;\n  }\n\n  var d = dir < 0 ? \"-\" : \"\";\n  var type = TYPES[numToStep(num)];\n  return d + num + altToQ(type, alt);\n};\n\n/**\n * Get the simplified version of an interval.\n *\n * @function\n * @param {String} interval - the interval to simplify\n * @return {String} the simplified interval\n *\n * @example\n * Interval.simplify(\"9M\") // => \"2M\"\n * [\"8P\", \"9M\", \"10M\", \"11P\", \"12P\", \"13M\", \"14M\", \"15P\"].map(Interval.simplify)\n * // => [ \"8P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\n * Interval.simplify(\"2M\") // => \"2M\"\n * Interval.simplify(\"-2M\") // => \"7m\"\n */\nvar simplify = exports.simplify = function (str) {\n  var p = props(str);\n  if (p === NO_IVL) {\n    return null;\n  }\n  return p.simple + p.q;\n};\n\n/**\n * Get the inversion (https://en.wikipedia.org/wiki/Inversion_(music)#Intervals)\n * of an interval.\n *\n * @function\n * @param {String} interval - the interval to invert in interval shorthand\n * notation or interval array notation\n * @return {String} the inverted interval\n *\n * @example\n * Interval.invert(\"3m\") // => \"6M\"\n * Interval.invert(\"2M\") // => \"7m\"\n */\nvar invert = exports.invert = function (str) {\n  var p = props(str);\n  if (p === NO_IVL) {\n    return null;\n  }\n  var step = (7 - p.step) % 7;\n  var alt = p.type === \"P\" ? -p.alt : -(p.alt + 1);\n  return build({ step: step, alt: alt, oct: p.oct, dir: p.dir });\n};\n\n// interval numbers\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\n// interval qualities\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\n\n/**\n * Get interval name from semitones number. Since there are several interval\n * names for the same number, the name it\"s arbitraty, but deterministic.\n *\n * @function\n * @param {Integer} num - the number of semitones (can be negative)\n * @return {String} the interval name\n * @example\n * import { fromSemitones } from \"tonal-interval\"\n * fromSemitones(7) // => \"5P\"\n * // or using tonal\n * Tonal.Distance.fromSemitones(-7) // => \"-5P\"\n */\nvar fromSemitones = exports.fromSemitones = function (num) {\n  var d = num < 0 ? -1 : 1;\n  var n = Math.abs(num);\n  var c = n % 12;\n  var o = Math.floor(n / 12);\n  return d * (IN[c] + 7 * o) + IQ[c];\n};\n},{}],\"../node_modules/tonal-distance/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transpose = transpose;\nexports.trFifths = trFifths;\nexports.fifths = fifths;\nexports.transposeBy = transposeBy;\nexports.addIntervals = addIntervals;\nexports.add = add;\nexports.subtract = subtract;\nexports.interval = interval;\nexports.semitones = semitones;\n\nvar _tonalNote = require(\"tonal-note\");\n\nvar _tonalInterval = require(\"tonal-interval\");\n\n// Map from letter step to number of fifths starting from \"C\":\n// { C: 0, D: 2, E: 4, F: -1, G: 1, A: 3, B: 5 }\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-distance.svg)](https://www.npmjs.com/package/tonal-distance)\n * [![tonal](https://img.shields.io/badge/tonal-distance-yellow.svg)](https://github.com/danigb/tonal/tree/master/packages/tonal/distance)\n *\n * Transpose notes by intervals and find distances between notes\n *\n * @example\n * // es6\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"C3\", \"C4\") // => \"1P\"\n *\n * @example\n * // es6 import selected functions\n * import { interval, semitones, transpose } from \"tonal-distance\"\n *\n * semitones(\"C\" ,\"D\") // => 2\n * interval(\"C4\", \"G4\") // => \"5P\"\n * transpose(\"C4\", \"P5\") // => \"G4\"\n *\n * @example\n * // included in tonal facade\n * const Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(\"C4\", \"P5\")\n * Tonal.Distance.transposeBy(\"P5\", \"C4\")\n *\n * @module Distance\n */\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n\n// Given a number of fifths, return the octaves they span\nvar fOcts = function (f) {\n  return Math.floor(f * 7 / 12);\n};\n\n// Get the number of octaves it span each step\nvar FIFTH_OCTS = FIFTHS.map(fOcts);\n\nvar encode = function (ref) {\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var dir = ref.dir;if (dir === void 0) dir = 1;\n\n  var f = FIFTHS[step] + 7 * alt;\n  if (oct === null) {\n    return [dir * f];\n  }\n  var o = oct - FIFTH_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n};\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nvar STEPS = [3, 0, 4, 1, 5, 2, 6];\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f) {\n  var i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\nvar decode = function (f, o, dir) {\n  var step = STEPS[unaltered(f)];\n  var alt = Math.floor((f + 1) / 7);\n  if (o === undefined) {\n    return { step: step, alt: alt, dir: dir };\n  }\n  var oct = o + 4 * alt + FIFTH_OCTS[step];\n  return { step: step, alt: alt, oct: oct, dir: dir };\n};\n\nvar memo = function (fn, cache) {\n  if (cache === void 0) cache = {};\n\n  return function (str) {\n    return cache[str] || (cache[str] = fn(str));\n  };\n};\n\nvar encoder = function (props) {\n  return memo(function (str) {\n    var p = props(str);\n    return p.name === null ? null : encode(p);\n  });\n};\n\nvar encodeNote = encoder(_tonalNote.props);\nvar encodeIvl = encoder(_tonalInterval.props);\n\n/**\n * Transpose a note by an interval. The note can be a pitch class.\n *\n * This function can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranpose } from \"tonal-distance\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * // it works with pitch classes\n * transpose(\"D\", \"3M\") // => \"F#\"\n * // can be partially applied\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(transpose(\"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nfunction transpose(note, interval) {\n  if (arguments.length === 1) {\n    return function (i) {\n      return transpose(note, i);\n    };\n  }\n  var n = encodeNote(note);\n  var i = encodeIvl(interval);\n  if (n === null || i === null) {\n    return null;\n  }\n  var tr = n.length === 1 ? [n[0] + i[0]] : [n[0] + i[0], n[1] + i[1]];\n  return (0, _tonalNote.build)(decode(tr[0], tr[1]));\n}\n\n/**\n * Transpose a pitch class by a number of perfect fifths.\n *\n * It can be partially applied.\n *\n * @function\n * @param {String} pitchClass - the pitch class\n * @param {Integer} fifhts - the number of fifths\n * @return {String} the transposed pitch class\n *\n * @example\n * import { trFifths } from \"tonal-transpose\"\n * [0, 1, 2, 3, 4].map(trFifths(\"C\")) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n * // or using tonal\n * Distance.trFifths(\"G4\", 1) // => \"D\"\n */\n\nfunction trFifths(note, fifths) {\n  if (arguments.length === 1) {\n    return function (f) {\n      return trFifths(note, f);\n    };\n  }\n  var n = encodeNote(note);\n  if (n === null) {\n    return null;\n  }\n  return (0, _tonalNote.build)(decode(n[0] + fifths));\n}\n\n/**\n * Get the distance in fifths between pitch classes\n *\n * Can be partially applied.\n *\n * @param {String} to - note or pitch class\n * @param {String} from - note or pitch class\n */\nfunction fifths(from, to) {\n  if (arguments.length === 1) {\n    return function (to) {\n      return fifths(from, to);\n    };\n  }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (t === null || f === null) {\n    return null;\n  }\n  return t[0] - f[0];\n}\n\n/**\n * The same as transpose with the arguments inverted.\n *\n * Can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranposeBy } from \"tonal-distance\"\n * transposeBy(\"3m\", \"5P\") // => \"7m\"\n */\nfunction transposeBy(interval, note) {\n  if (arguments.length === 1) {\n    return function (n) {\n      return transpose(n, interval);\n    };\n  }\n  return transpose(note, interval);\n}\n\nvar isDescending = function (e) {\n  return e[0] * 7 + e[1] * 12 < 0;\n};\nvar decodeIvl = function (i) {\n  return isDescending(i) ? decode(-i[0], -i[1], -1) : decode(i[0], i[1], 1);\n};\n\nfunction addIntervals(ivl1, ivl2, dir) {\n  var i1 = encodeIvl(ivl1);\n  var i2 = encodeIvl(ivl2);\n  if (i1 === null || i2 === null) {\n    return null;\n  }\n  var i = [i1[0] + dir * i2[0], i1[1] + dir * i2[1]];\n  return (0, _tonalInterval.build)(decodeIvl(i));\n}\n\n/**\n * Add two intervals\n *\n * Can be partially applied.\n *\n * @param {String} interval1\n * @param {String} interval2\n * @return {String} the resulting interval\n * @example\n * import { add } from \"tonal-distance\"\n * add(\"3m\", \"5P\") // => \"7m\"\n */\nfunction add(ivl1, ivl2) {\n  if (arguments.length === 1) {\n    return function (i2) {\n      return add(ivl1, i2);\n    };\n  }\n  return addIntervals(ivl1, ivl2, 1);\n}\n\n/**\n * Subtract two intervals\n *\n * Can be partially applied\n *\n * @param {String} minuend\n * @param {String} subtrahend\n * @return {String} interval diference\n */\nfunction subtract(ivl1, ivl2) {\n  if (arguments.length === 1) {\n    return function (i2) {\n      return add(ivl1, i2);\n    };\n  }\n  return addIntervals(ivl1, ivl2, -1);\n}\n\n/**\n * Find the interval between two pitches. It works with pitch classes\n * (both must be pitch classes and the interval is always ascending)\n *\n * Can be partially applied\n *\n * @param {String} from - distance from\n * @param {String} to - distance to\n * @return {String} the interval distance\n *\n * @example\n * import { interval } from \"tonal-distance\"\n * interval(\"C2\", \"C3\") // => \"P8\"\n * interval(\"G\", \"B\") // => \"M3\"\n *\n * @example\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"M2\", \"P5\") // => \"P4\"\n */\nfunction interval(from, to) {\n  if (arguments.length === 1) {\n    return function (t) {\n      return interval(from, t);\n    };\n  }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (f === null || t === null || f.length !== t.length) {\n    return null;\n  }\n  var d = f.length === 1 ? [t[0] - f[0], -Math.floor((t[0] - f[0]) * 7 / 12)] : [t[0] - f[0], t[1] - f[1]];\n  return (0, _tonalInterval.build)(decodeIvl(d));\n}\n\n/**\n * Get the distance between two notes in semitones\n *\n * @param {String|Pitch} from - first note\n * @param {String|Pitch} to - last note\n * @return {Integer} the distance in semitones or null if not valid notes\n * @example\n * import { semitones } from \"tonal-distance\"\n * semitones(\"C3\", \"A2\") // => -3\n * // or use tonal\n * Tonal.Distance.semitones(\"C3\", \"G3\") // => 7\n */\nfunction semitones(from, to) {\n  if (arguments.length === 1) {\n    return function (t) {\n      return semitones(from, t);\n    };\n  }\n  var f = (0, _tonalNote.props)(from);\n  var t = (0, _tonalNote.props)(to);\n  return f.midi !== null && t.midi !== null ? t.midi - f.midi : f.chroma !== null && t.chroma !== null ? (t.chroma - f.chroma + 12) % 12 : null;\n}\n},{\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\",\"tonal-interval\":\"../node_modules/tonal-interval/build/es6.js\"}],\"../node_modules/tonal-dictionary/build/data/scales.json\":[function(require,module,exports) {\nmodule.exports = {\n  \"chromatic\": [\"1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M\"],\n  \"lydian\": [\"1P 2M 3M 4A 5P 6M 7M\"],\n  \"major\": [\"1P 2M 3M 4P 5P 6M 7M\", [\"ionian\"]],\n  \"mixolydian\": [\"1P 2M 3M 4P 5P 6M 7m\", [\"dominant\"]],\n  \"dorian\": [\"1P 2M 3m 4P 5P 6M 7m\"],\n  \"aeolian\": [\"1P 2M 3m 4P 5P 6m 7m\", [\"minor\"]],\n  \"phrygian\": [\"1P 2m 3m 4P 5P 6m 7m\"],\n  \"locrian\": [\"1P 2m 3m 4P 5d 6m 7m\"],\n  \"melodic minor\": [\"1P 2M 3m 4P 5P 6M 7M\"],\n  \"melodic minor second mode\": [\"1P 2m 3m 4P 5P 6M 7m\"],\n  \"lydian augmented\": [\"1P 2M 3M 4A 5A 6M 7M\"],\n  \"lydian dominant\": [\"1P 2M 3M 4A 5P 6M 7m\", [\"lydian b7\"]],\n  \"melodic minor fifth mode\": [\n    \"1P 2M 3M 4P 5P 6m 7m\",\n    [\"hindu\", \"mixolydian b6M\"]\n  ],\n  \"locrian #2\": [\"1P 2M 3m 4P 5d 6m 7m\"],\n  \"locrian major\": [\"1P 2M 3M 4P 5d 6m 7m\", [\"arabian\"]],\n  \"altered\": [\n    \"1P 2m 3m 3M 5d 6m 7m\",\n    [\"super locrian\", \"diminished whole tone\", \"pomeroy\"]\n  ],\n  \"major pentatonic\": [\"1P 2M 3M 5P 6M\", [\"pentatonic\"]],\n  \"lydian pentatonic\": [\"1P 3M 4A 5P 7M\", [\"chinese\"]],\n  \"mixolydian pentatonic\": [\"1P 3M 4P 5P 7m\", [\"indian\"]],\n  \"locrian pentatonic\": [\n    \"1P 3m 4P 5d 7m\",\n    [\"minor seven flat five pentatonic\"]\n  ],\n  \"minor pentatonic\": [\"1P 3m 4P 5P 7m\"],\n  \"minor six pentatonic\": [\"1P 3m 4P 5P 6M\"],\n  \"minor hexatonic\": [\"1P 2M 3m 4P 5P 7M\"],\n  \"flat three pentatonic\": [\"1P 2M 3m 5P 6M\", [\"kumoi\"]],\n  \"flat six pentatonic\": [\"1P 2M 3M 5P 6m\"],\n  \"major flat two pentatonic\": [\"1P 2m 3M 5P 6M\"],\n  \"whole tone pentatonic\": [\"1P 3M 5d 6m 7m\"],\n  \"ionian pentatonic\": [\"1P 3M 4P 5P 7M\"],\n  \"lydian #5P pentatonic\": [\"1P 3M 4A 5A 7M\"],\n  \"lydian dominant pentatonic\": [\"1P 3M 4A 5P 7m\"],\n  \"minor #7M pentatonic\": [\"1P 3m 4P 5P 7M\"],\n  \"super locrian pentatonic\": [\"1P 3m 4d 5d 7m\"],\n  \"in-sen\": [\"1P 2m 4P 5P 7m\"],\n  \"iwato\": [\"1P 2m 4P 5d 7m\"],\n  \"hirajoshi\": [\"1P 2M 3m 5P 6m\"],\n  \"kumoijoshi\": [\"1P 2m 4P 5P 6m\"],\n  \"pelog\": [\"1P 2m 3m 5P 6m\"],\n  \"vietnamese 1\": [\"1P 3m 4P 5P 6m\"],\n  \"vietnamese 2\": [\"1P 3m 4P 5P 7m\"],\n  \"prometheus\": [\"1P 2M 3M 4A 6M 7m\"],\n  \"prometheus neopolitan\": [\"1P 2m 3M 4A 6M 7m\"],\n  \"ritusen\": [\"1P 2M 4P 5P 6M\"],\n  \"scriabin\": [\"1P 2m 3M 5P 6M\"],\n  \"piongio\": [\"1P 2M 4P 5P 6M 7m\"],\n  \"major blues\": [\"1P 2M 3m 3M 5P 6M\"],\n  \"minor blues\": [\"1P 3m 4P 5d 5P 7m\", [\"blues\"]],\n  \"composite blues\": [\"1P 2M 3m 3M 4P 5d 5P 6M 7m\"],\n  \"augmented\": [\"1P 2A 3M 5P 5A 7M\"],\n  \"augmented heptatonic\": [\"1P 2A 3M 4P 5P 5A 7M\"],\n  \"dorian #4\": [\"1P 2M 3m 4A 5P 6M 7m\"],\n  \"lydian diminished\": [\"1P 2M 3m 4A 5P 6M 7M\"],\n  \"whole tone\": [\"1P 2M 3M 4A 5A 7m\"],\n  \"leading whole tone\": [\"1P 2M 3M 4A 5A 7m 7M\"],\n  \"harmonic minor\": [\"1P 2M 3m 4P 5P 6m 7M\"],\n  \"lydian minor\": [\"1P 2M 3M 4A 5P 6m 7m\"],\n  \"neopolitan\": [\"1P 2m 3m 4P 5P 6m 7M\"],\n  \"neopolitan minor\": [\"1P 2m 3m 4P 5P 6m 7M\"],\n  \"neopolitan major\": [\"1P 2m 3m 4P 5P 6M 7M\", [\"dorian b2\"]],\n  \"neopolitan major pentatonic\": [\"1P 3M 4P 5d 7m\"],\n  \"romanian minor\": [\"1P 2M 3m 5d 5P 6M 7m\"],\n  \"double harmonic lydian\": [\"1P 2m 3M 4A 5P 6m 7M\"],\n  \"diminished\": [\"1P 2M 3m 4P 5d 6m 6M 7M\"],\n  \"harmonic major\": [\"1P 2M 3M 4P 5P 6m 7M\"],\n  \"double harmonic major\": [\"1P 2m 3M 4P 5P 6m 7M\", [\"gypsy\"]],\n  \"egyptian\": [\"1P 2M 4P 5P 7m\"],\n  \"hungarian minor\": [\"1P 2M 3m 4A 5P 6m 7M\"],\n  \"hungarian major\": [\"1P 2A 3M 4A 5P 6M 7m\"],\n  \"oriental\": [\"1P 2m 3M 4P 5d 6M 7m\"],\n  \"spanish\": [\"1P 2m 3M 4P 5P 6m 7m\", [\"phrygian major\"]],\n  \"spanish heptatonic\": [\"1P 2m 3m 3M 4P 5P 6m 7m\"],\n  \"flamenco\": [\"1P 2m 3m 3M 4A 5P 7m\"],\n  \"balinese\": [\"1P 2m 3m 4P 5P 6m 7M\"],\n  \"todi raga\": [\"1P 2m 3m 4A 5P 6m 7M\"],\n  \"malkos raga\": [\"1P 3m 4P 6m 7m\"],\n  \"kafi raga\": [\"1P 3m 3M 4P 5P 6M 7m 7M\"],\n  \"purvi raga\": [\"1P 2m 3M 4P 4A 5P 6m 7M\"],\n  \"persian\": [\"1P 2m 3M 4P 5d 6m 7M\"],\n  \"bebop\": [\"1P 2M 3M 4P 5P 6M 7m 7M\"],\n  \"bebop dominant\": [\"1P 2M 3M 4P 5P 6M 7m 7M\"],\n  \"bebop minor\": [\"1P 2M 3m 3M 4P 5P 6M 7m\"],\n  \"bebop major\": [\"1P 2M 3M 4P 5P 5A 6M 7M\"],\n  \"bebop locrian\": [\"1P 2m 3m 4P 5d 5P 6m 7m\"],\n  \"minor bebop\": [\"1P 2M 3m 4P 5P 6m 7m 7M\"],\n  \"mystery #1\": [\"1P 2m 3M 5d 6m 7m\"],\n  \"enigmatic\": [\"1P 2m 3M 5d 6m 7m 7M\"],\n  \"minor six diminished\": [\"1P 2M 3m 4P 5P 6m 6M 7M\"],\n  \"ionian augmented\": [\"1P 2M 3M 4P 5A 6M 7M\"],\n  \"lydian #9\": [\"1P 2m 3M 4A 5P 6M 7M\"],\n  \"ichikosucho\": [\"1P 2M 3M 4P 5d 5P 6M 7M\"],\n  \"six tone symmetric\": [\"1P 2m 3M 4P 5A 6M\"]\n}\n;\n},{}],\"../node_modules/tonal-dictionary/build/data/chords.json\":[function(require,module,exports) {\nmodule.exports = {\n  \"4\": [\"1P 4P 7m 10m\", [\"quartal\"]],\n  \"64\": [\"5P 8P 10M\"],\n  \"5\": [\"1P 5P\"],\n  \"M\": [\"1P 3M 5P\", [\"Major\", \"\"]],\n  \"M#5\": [\"1P 3M 5A\", [\"augmented\", \"maj#5\", \"Maj#5\", \"+\", \"aug\"]],\n  \"M#5add9\": [\"1P 3M 5A 9M\", [\"+add9\"]],\n  \"M13\": [\"1P 3M 5P 7M 9M 13M\", [\"maj13\", \"Maj13\"]],\n  \"M13#11\": [\n    \"1P 3M 5P 7M 9M 11A 13M\",\n    [\"maj13#11\", \"Maj13#11\", \"M13+4\", \"M13#4\"]\n  ],\n  \"M6\": [\"1P 3M 5P 13M\", [\"6\"]],\n  \"M6#11\": [\"1P 3M 5P 6M 11A\", [\"M6b5\", \"6#11\", \"6b5\"]],\n  \"M69\": [\"1P 3M 5P 6M 9M\", [\"69\"]],\n  \"M69#11\": [\"1P 3M 5P 6M 9M 11A\"],\n  \"M7#11\": [\"1P 3M 5P 7M 11A\", [\"maj7#11\", \"Maj7#11\", \"M7+4\", \"M7#4\"]],\n  \"M7#5\": [\"1P 3M 5A 7M\", [\"maj7#5\", \"Maj7#5\", \"maj9#5\", \"M7+\"]],\n  \"M7#5sus4\": [\"1P 4P 5A 7M\"],\n  \"M7#9#11\": [\"1P 3M 5P 7M 9A 11A\"],\n  \"M7add13\": [\"1P 3M 5P 6M 7M 9M\"],\n  \"M7b5\": [\"1P 3M 5d 7M\"],\n  \"M7b6\": [\"1P 3M 6m 7M\"],\n  \"M7b9\": [\"1P 3M 5P 7M 9m\"],\n  \"M7sus4\": [\"1P 4P 5P 7M\"],\n  \"M9\": [\"1P 3M 5P 7M 9M\", [\"maj9\", \"Maj9\"]],\n  \"M9#11\": [\"1P 3M 5P 7M 9M 11A\", [\"maj9#11\", \"Maj9#11\", \"M9+4\", \"M9#4\"]],\n  \"M9#5\": [\"1P 3M 5A 7M 9M\", [\"Maj9#5\"]],\n  \"M9#5sus4\": [\"1P 4P 5A 7M 9M\"],\n  \"M9b5\": [\"1P 3M 5d 7M 9M\"],\n  \"M9sus4\": [\"1P 4P 5P 7M 9M\"],\n  \"Madd9\": [\"1P 3M 5P 9M\", [\"2\", \"add9\", \"add2\"]],\n  \"Maj7\": [\"1P 3M 5P 7M\", [\"maj7\", \"M7\"]],\n  \"Mb5\": [\"1P 3M 5d\"],\n  \"Mb6\": [\"1P 3M 13m\"],\n  \"Msus2\": [\"1P 2M 5P\", [\"add9no3\", \"sus2\"]],\n  \"Msus4\": [\"1P 4P 5P\", [\"sus\", \"sus4\"]],\n  \"Maddb9\": [\"1P 3M 5P 9m\"],\n  \"7\": [\"1P 3M 5P 7m\", [\"Dominant\", \"Dom\"]],\n  \"9\": [\"1P 3M 5P 7m 9M\", [\"79\"]],\n  \"11\": [\"1P 5P 7m 9M 11P\"],\n  \"13\": [\"1P 3M 5P 7m 9M 13M\", [\"13_\"]],\n  \"11b9\": [\"1P 5P 7m 9m 11P\"],\n  \"13#11\": [\"1P 3M 5P 7m 9M 11A 13M\", [\"13+4\", \"13#4\"]],\n  \"13#9\": [\"1P 3M 5P 7m 9A 13M\", [\"13#9_\"]],\n  \"13#9#11\": [\"1P 3M 5P 7m 9A 11A 13M\"],\n  \"13b5\": [\"1P 3M 5d 6M 7m 9M\"],\n  \"13b9\": [\"1P 3M 5P 7m 9m 13M\"],\n  \"13b9#11\": [\"1P 3M 5P 7m 9m 11A 13M\"],\n  \"13no5\": [\"1P 3M 7m 9M 13M\"],\n  \"13sus4\": [\"1P 4P 5P 7m 9M 13M\", [\"13sus\"]],\n  \"69#11\": [\"1P 3M 5P 6M 9M 11A\"],\n  \"7#11\": [\"1P 3M 5P 7m 11A\", [\"7+4\", \"7#4\", \"7#11_\", \"7#4_\"]],\n  \"7#11b13\": [\"1P 3M 5P 7m 11A 13m\", [\"7b5b13\"]],\n  \"7#5\": [\"1P 3M 5A 7m\", [\"+7\", \"7aug\", \"aug7\"]],\n  \"7#5#9\": [\"1P 3M 5A 7m 9A\", [\"7alt\", \"7#5#9_\", \"7#9b13_\"]],\n  \"7#5b9\": [\"1P 3M 5A 7m 9m\"],\n  \"7#5b9#11\": [\"1P 3M 5A 7m 9m 11A\"],\n  \"7#5sus4\": [\"1P 4P 5A 7m\"],\n  \"7#9\": [\"1P 3M 5P 7m 9A\", [\"7#9_\"]],\n  \"7#9#11\": [\"1P 3M 5P 7m 9A 11A\", [\"7b5#9\"]],\n  \"7#9#11b13\": [\"1P 3M 5P 7m 9A 11A 13m\"],\n  \"7#9b13\": [\"1P 3M 5P 7m 9A 13m\"],\n  \"7add6\": [\"1P 3M 5P 7m 13M\", [\"67\", \"7add13\"]],\n  \"7b13\": [\"1P 3M 7m 13m\"],\n  \"7b5\": [\"1P 3M 5d 7m\"],\n  \"7b6\": [\"1P 3M 5P 6m 7m\"],\n  \"7b9\": [\"1P 3M 5P 7m 9m\"],\n  \"7b9#11\": [\"1P 3M 5P 7m 9m 11A\", [\"7b5b9\"]],\n  \"7b9#9\": [\"1P 3M 5P 7m 9m 9A\"],\n  \"7b9b13\": [\"1P 3M 5P 7m 9m 13m\"],\n  \"7b9b13#11\": [\"1P 3M 5P 7m 9m 11A 13m\", [\"7b9#11b13\", \"7b5b9b13\"]],\n  \"7no5\": [\"1P 3M 7m\"],\n  \"7sus4\": [\"1P 4P 5P 7m\", [\"7sus\"]],\n  \"7sus4b9\": [\n    \"1P 4P 5P 7m 9m\",\n    [\"susb9\", \"7susb9\", \"7b9sus\", \"7b9sus4\", \"phryg\"]\n  ],\n  \"7sus4b9b13\": [\"1P 4P 5P 7m 9m 13m\", [\"7b9b13sus4\"]],\n  \"9#11\": [\"1P 3M 5P 7m 9M 11A\", [\"9+4\", \"9#4\", \"9#11_\", \"9#4_\"]],\n  \"9#11b13\": [\"1P 3M 5P 7m 9M 11A 13m\", [\"9b5b13\"]],\n  \"9#5\": [\"1P 3M 5A 7m 9M\", [\"9+\"]],\n  \"9#5#11\": [\"1P 3M 5A 7m 9M 11A\"],\n  \"9b13\": [\"1P 3M 7m 9M 13m\"],\n  \"9b5\": [\"1P 3M 5d 7m 9M\"],\n  \"9no5\": [\"1P 3M 7m 9M\"],\n  \"9sus4\": [\"1P 4P 5P 7m 9M\", [\"9sus\"]],\n  \"m\": [\"1P 3m 5P\"],\n  \"m#5\": [\"1P 3m 5A\", [\"m+\", \"mb6\"]],\n  \"m11\": [\"1P 3m 5P 7m 9M 11P\", [\"_11\"]],\n  \"m11A 5\": [\"1P 3m 6m 7m 9M 11P\"],\n  \"m11b5\": [\"1P 3m 7m 12d 2M 4P\", [\"h11\", \"_11b5\"]],\n  \"m13\": [\"1P 3m 5P 7m 9M 11P 13M\", [\"_13\"]],\n  \"m6\": [\"1P 3m 4P 5P 13M\", [\"_6\"]],\n  \"m69\": [\"1P 3m 5P 6M 9M\", [\"_69\"]],\n  \"m7\": [\"1P 3m 5P 7m\", [\"minor7\", \"_\", \"_7\"]],\n  \"m7#5\": [\"1P 3m 6m 7m\"],\n  \"m7add11\": [\"1P 3m 5P 7m 11P\", [\"m7add4\"]],\n  \"m7b5\": [\"1P 3m 5d 7m\", [\"half-diminished\", \"h7\", \"_7b5\"]],\n  \"m9\": [\"1P 3m 5P 7m 9M\", [\"_9\"]],\n  \"m9#5\": [\"1P 3m 6m 7m 9M\"],\n  \"m9b5\": [\"1P 3m 7m 12d 2M\", [\"h9\", \"-9b5\"]],\n  \"mMaj7\": [\"1P 3m 5P 7M\", [\"mM7\", \"_M7\"]],\n  \"mMaj7b6\": [\"1P 3m 5P 6m 7M\", [\"mM7b6\"]],\n  \"mM9\": [\"1P 3m 5P 7M 9M\", [\"mMaj9\", \"-M9\"]],\n  \"mM9b6\": [\"1P 3m 5P 6m 7M 9M\", [\"mMaj9b6\"]],\n  \"mb6M7\": [\"1P 3m 6m 7M\"],\n  \"mb6b9\": [\"1P 3m 6m 9m\"],\n  \"o\": [\"1P 3m 5d\", [\"mb5\", \"dim\"]],\n  \"o7\": [\"1P 3m 5d 13M\", [\"diminished\", \"m6b5\", \"dim7\"]],\n  \"o7M7\": [\"1P 3m 5d 6M 7M\"],\n  \"oM7\": [\"1P 3m 5d 7M\"],\n  \"sus24\": [\"1P 2M 4P 5P\", [\"sus4add9\"]],\n  \"+add#9\": [\"1P 3M 5A 9A\"],\n  \"madd4\": [\"1P 3m 4P 5P\"],\n  \"madd9\": [\"1P 3m 5P 9M\"]\n}\n;\n},{}],\"../node_modules/tonal-pcset/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chroma = chroma;\nexports.chromas = chromas;\nexports.modes = modes;\nexports.isChroma = isChroma;\nexports.intervals = intervals;\nexports.isEqual = isEqual;\nexports.isSubsetOf = isSubsetOf;\nexports.isSupersetOf = isSupersetOf;\nexports.includes = includes;\nexports.filter = filter;\n\nvar _tonalNote = require(\"tonal-note\");\n\nvar _tonalInterval = require(\"tonal-interval\");\n\nvar _tonalArray = require(\"tonal-array\");\n\nvar chr = function (str) {\n  return (0, _tonalNote.chroma)(str) || (0, _tonalInterval.chroma)(str) || 0;\n}; /**\n    * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n    * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n    *\n    * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n    * to make comparations (isEqual, isSubset, isSuperset)\n    *\n    * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n    *\n    * You can install via npm: `npm i --save tonal-pcset`\n    *\n    * ```js\n    * // es6\n    * import PcSet from \"tonal-pcset\"\n    * var PcSet = require(\"tonal-pcset\")\n    *\n    * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n    * ```\n    *\n    * ## API documentation\n    *\n    * @module PcSet\n    */\n\nvar pcsetNum = function (set) {\n  return parseInt(chroma(set), 2);\n};\nvar clen = function (chroma) {\n  return chroma.replace(/0/g, \"\").length;\n};\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nfunction chroma(set) {\n  if (isChroma(set)) {\n    return set;\n  }\n  if (!Array.isArray(set)) {\n    return \"\";\n  }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nfunction chromas(n) {\n  all = all || (0, _tonalArray.range)(2048, 4095).map(function (n) {\n    return n.toString(2);\n  });\n  return typeof n === \"number\" ? all.filter(function (chroma) {\n    return clen(chroma) === n;\n  }) : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nfunction modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return (0, _tonalArray.compact)(binary.map(function (_, i) {\n    var r = (0, _tonalArray.rotate)(i, binary);\n    return normalize && r[0] === \"0\" ? null : r.join(\"\");\n  }));\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nfunction isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nfunction intervals(set) {\n  if (!isChroma(set)) {\n    return [];\n  }\n  return (0, _tonalArray.compact)(set.split(\"\").map(function (d, i) {\n    return d === \"1\" ? IVLS[i] : null;\n  }));\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nfunction isEqual(s1, s2) {\n  if (arguments.length === 1) {\n    return function (s) {\n      return isEqual(s1, s);\n    };\n  }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nfunction isSubsetOf(set, notes) {\n  if (arguments.length > 1) {\n    return isSubsetOf(set)(notes);\n  }\n  set = pcsetNum(set);\n  return function (notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nfunction isSupersetOf(set, notes) {\n  if (arguments.length > 1) {\n    return isSupersetOf(set)(notes);\n  }\n  set = pcsetNum(set);\n  return function (notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nfunction includes(set, note) {\n  if (arguments.length > 1) {\n    return includes(set)(note);\n  }\n  set = chroma(set);\n  return function (note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nfunction filter(set, notes) {\n  if (arguments.length === 1) {\n    return function (n) {\n      return filter(set, n);\n    };\n  }\n  return notes.filter(includes(set));\n}\n},{\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\",\"tonal-interval\":\"../node_modules/tonal-interval/build/es6.js\",\"tonal-array\":\"../node_modules/tonal-array/build/es6.js\"}],\"../node_modules/tonal-dictionary/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pcset = exports.chord = exports.scale = exports.combine = exports.dictionary = undefined;\n\nvar _scales = require(\"./data/scales.json\");\n\nvar _scales2 = _interopRequireDefault(_scales);\n\nvar _chords = require(\"./data/chords.json\");\n\nvar _chords2 = _interopRequireDefault(_chords);\n\nvar _tonalPcset = require(\"tonal-pcset\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dictionary = exports.dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = (0, _tonalPcset.chroma)(ivls);\n\n    add(key, ivls, chr);\n    if (alias) {\n      alias.forEach(function (a) {\n        return add(a, ivls, chr);\n      });\n    }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) {\n    return data[name];\n  };\n  dict.names = function (p) {\n    if (typeof p === \"string\") {\n      return (index[p] || []).slice();\n    } else {\n      return (p === true ? allKeys : keys).slice();\n    }\n  };\n  return dict;\n}; /**\n    * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n    *\n    * `tonal-dictionary` contains a dictionary of musical scales and chords\n    *\n    * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n    *\n    * @example\n    * // es6\n    * import * as Dictionary from \"tonal-dictionary\"\n    * // es5\n    * const Dictionary = require(\"tonal-dictionary\")\n    *\n    * @example\n    * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n    *\n    * @module Dictionary\n    */\nvar combine = exports.combine = function (a, b) {\n  var dict = function (name) {\n    return a(name) || b(name);\n  };\n  dict.names = function (p) {\n    return a.names(p).concat(b.names(p));\n  };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nvar scale = exports.scale = dictionary(_scales2.default);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nvar chord = exports.chord = dictionary(_chords2.default);\nvar pcset = exports.pcset = combine(scale, chord);\n},{\"./data/scales.json\":\"../node_modules/tonal-dictionary/build/data/scales.json\",\"./data/chords.json\":\"../node_modules/tonal-dictionary/build/data/chords.json\",\"tonal-pcset\":\"../node_modules/tonal-pcset/build/es6.js\"}],\"../node_modules/tonal-scale/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.subsets = exports.supersets = exports.toScale = exports.chords = exports.modeNames = exports.intervals = exports.names = exports.props = undefined;\nexports.notes = notes;\nexports.exists = exists;\nexports.tokenize = tokenize;\n\nvar _tonalNote = require(\"tonal-note\");\n\nvar _tonalPcset = require(\"tonal-pcset\");\n\nvar _tonalDistance = require(\"tonal-distance\");\n\nvar _tonalDictionary = require(\"tonal-dictionary\");\n\nvar _tonalArray = require(\"tonal-array\");\n\nvar NO_SCALE = Object.freeze({\n  name: null,\n  intervals: [],\n  names: [],\n  chroma: null,\n  setnum: null\n}); /**\n     * [![npm version](https://img.shields.io/npm/v/tonal-scale.svg?style=flat-square)](https://www.npmjs.com/package/tonal-scale)\n     *\n     * A scale is a collection of pitches in ascending or descending order.\n     *\n     * This module provides functions to get and manipulate scales.\n     *\n     * @example\n     * // es6\n     * import * as Scale from \"tonal-scale\"\n     * // es5\n     * const Scale = require(\"tonal-scale\");\n     *\n     * @example\n     * Scale.notes(\"Ab bebop\") // => [ \"Ab\", \"Bb\", \"C\", \"Db\", \"Eb\", \"F\", \"Gb\", \"G\" ]\n     * Scale.names() => [\"major\", \"minor\", ...]\n     * @module Scale\n     */\n\n\nvar properties = function (name) {\n  var intervals = (0, _tonalDictionary.scale)(name);\n  if (!intervals) {\n    return NO_SCALE;\n  }\n  var s = { intervals: intervals, name: name };\n  s.chroma = (0, _tonalPcset.chroma)(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = _tonalDictionary.scale.names(s.chroma);\n  return Object.freeze(s);\n};\n\nvar memoize = function (fn, cache) {\n  return function (str) {\n    return cache[str] || (cache[str] = fn(str));\n  };\n};\n\n/**\n * Get scale properties. It returns an object with:\n * - name: the scale name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the scale intervals\n * - chroma:  scale croma (see pcset)\n * - setnum: scale chroma number\n *\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Object}\n */\nvar props = exports.props = memoize(properties, {});\n\n/**\n * Return the available scale names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the scale names\n *\n * @example\n * Scale.names() // => [\"maj7\", ...]\n */\nvar names = exports.names = _tonalDictionary.scale.names;\n\n/**\n * Given a scale name, return its intervals. The name can be the type and\n * optionally the tonic (which is ignored)\n *\n * It retruns an empty array when no scale found\n *\n * @function\n * @param {String} name - the scale name (tonic and type, tonic is optional)\n * @return {Array<String>} the scale intervals if is a known scale or an empty\n * array if no scale found\n * @example\n * Scale.intervals(\"major\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\" ]\n */\nvar intervals = exports.intervals = function (name) {\n  var p = tokenize(name);\n  return props(p[1]).intervals;\n};\n\n/**\n * Get the notes (pitch classes) of a scale.\n *\n * Note that it always returns an array, and the values are only pitch classes.\n *\n * @function\n * @param {String} tonic\n * @param {String} nameOrTonic - the scale name or tonic (if 2nd param)\n * @param {String} [name] - the scale name without tonic\n * @return {Array} a pitch classes array\n *\n * @example\n * Scale.notes(\"C\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C4\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"A4\", \"no-scale\") // => []\n * Scale.notes(\"blah\", \"major\") // => []\n */\nfunction notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return intervals(name).map((0, _tonalDistance.transpose)(p[0]));\n}\n\n/**\n * Check if the given name is a known scale from the scales dictionary\n *\n * @function\n * @param {String} name - the scale name\n * @return {Boolean}\n */\nfunction exists(name) {\n  var p = tokenize(name);\n  return (0, _tonalDictionary.scale)(p[1]) !== undefined;\n}\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {String} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * Scale.tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * Scale.tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * Scale.tokenize() // => [\"\", \"\"]\n */\nfunction tokenize(str) {\n  if (typeof str !== \"string\") {\n    return [\"\", \"\"];\n  }\n  var i = str.indexOf(\" \");\n  var tonic = (0, _tonalNote.name)(str.substring(0, i)) || (0, _tonalNote.name)(str) || \"\";\n  var name = tonic !== \"\" ? str.substring(tonic.length + 1) : str;\n  return [tonic, name.length ? name : \"\"];\n}\n\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {String} name - scale name\n */\nvar modeNames = exports.modeNames = function (name) {\n  var ivls = intervals(name);\n  var tonics = notes(name);\n\n  return (0, _tonalPcset.modes)(ivls).map(function (chroma, i) {\n    var name = _tonalDictionary.scale.names(chroma)[0];\n    if (name) {\n      return [tonics[i] || ivls[i], name];\n    }\n  }).filter(function (x) {\n    return x;\n  });\n};\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {String} name\n */\nvar chords = exports.chords = function (name) {\n  var inScale = (0, _tonalPcset.isSubsetOf)(intervals(name));\n  return _tonalDictionary.chord.names().filter(function (name) {\n    return inScale((0, _tonalDictionary.chord)(name));\n  });\n};\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {Array} notes\n * @return {Array}\n */\nvar toScale = exports.toScale = function (notes) {\n  var pcset = (0, _tonalArray.compact)(notes.map(_tonalNote.pc));\n  if (!pcset.length) {\n    return pcset;\n  }\n  var tonic = pcset[0];\n  var scale = (0, _tonalArray.unique)(pcset);\n  return (0, _tonalArray.rotate)(scale.indexOf(tonic), scale);\n};\n\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nvar supersets = exports.supersets = function (name) {\n  if (!intervals(name).length) {\n    return [];\n  }\n  var isSuperset = (0, _tonalPcset.isSupersetOf)(intervals(name));\n  return _tonalDictionary.scale.names().filter(function (name) {\n    return isSuperset((0, _tonalDictionary.scale)(name));\n  });\n};\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nvar subsets = exports.subsets = function (name) {\n  var isSubset = (0, _tonalPcset.isSubsetOf)(intervals(name));\n  return _tonalDictionary.scale.names().filter(function (name) {\n    return isSubset((0, _tonalDictionary.scale)(name));\n  });\n};\n},{\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\",\"tonal-pcset\":\"../node_modules/tonal-pcset/build/es6.js\",\"tonal-distance\":\"../node_modules/tonal-distance/build/es6.js\",\"tonal-dictionary\":\"../node_modules/tonal-dictionary/build/es6.js\",\"tonal-array\":\"../node_modules/tonal-array/build/es6.js\"}],\"../node_modules/tonal-chord/build/es6.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.subsets = exports.supersets = exports.exists = exports.intervals = exports.props = exports.names = undefined;\nexports.notes = notes;\nexports.tokenize = tokenize;\n\nvar _tonalNote = require(\"tonal-note\");\n\nvar _tonalDistance = require(\"tonal-distance\");\n\nvar _tonalDictionary = require(\"tonal-dictionary\");\n\nvar _tonalPcset = require(\"tonal-pcset\");\n\n/**\n * Return the available chord names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the chord names\n *\n * @example\n * Chord.names() // => [\"maj7\", ...]\n */\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-chord.svg)](https://www.npmjs.com/package/tonal-chord)\n * [![tonal](https://img.shields.io/badge/tonal-chord-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-chord` is a collection of functions to manipulate musical chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Chord from \"tonal-chord\"\n * // es5\n * const Chord = require(\"tonal-chord\")\n *\n * @example\n * Chord.notes(\"CMaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n *\n * @module Chord\n */\nvar names = exports.names = _tonalDictionary.chord.names;\n\nvar NO_CHORD = Object.freeze({\n  name: null,\n  names: [],\n  intervals: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = (0, _tonalDictionary.chord)(name);\n  if (!intervals) {\n    return NO_CHORD;\n  }\n  var s = { intervals: intervals, name: name };\n  s.chroma = (0, _tonalPcset.chroma)(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = _tonalDictionary.chord.names(s.chroma);\n  return s;\n};\n\nvar memo = function (fn, cache) {\n  if (cache === void 0) cache = {};\n\n  return function (str) {\n    return cache[str] || (cache[str] = fn(str));\n  };\n};\n\n/**\n * Get chord properties. It returns an object with:\n *\n * - name: the chord name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the chord intervals\n * - chroma:  chord croma (see pcset)\n * - setnum: chord chroma number\n *\n * @function\n * @param {String} name - the chord name (without tonic)\n * @return {Object} an object with the properties or a object with all properties\n * set to null if not valid chord name\n */\nvar props = exports.props = memo(properties);\n\n/**\n * Get chord intervals. It always returns an array\n *\n * @function\n * @param {String} name - the chord name (optionally a tonic and type)\n * @return {Array<String>} a list of intervals or null if the type is not known\n */\nvar intervals = exports.intervals = function (name) {\n  return props(tokenize(name)[1]).intervals;\n};\n\n/**\n * Get the chord notes of a chord. This function accepts either a chord name\n * (for example: \"Cmaj7\") or a list of notes.\n *\n * It always returns an array, even if the chord is not found.\n *\n * @function\n * @param {String} nameOrTonic - name of the chord or the tonic (if the second parameter is present)\n * @param {String} [name] - (Optional) name if the first parameter is the tonic\n * @return {Array} an array of notes or an empty array\n *\n * @example\n * Chord.notes(\"Cmaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n * Chord.notes(\"C\", \"maj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n */\nfunction notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return props(name).intervals.map((0, _tonalDistance.transpose)(p[0]));\n}\n\n/**\n * Check if a given name correspond to a chord in the dictionary\n *\n * @function\n * @param {String} name\n * @return {Boolean}\n * @example\n * Chord.exists(\"CMaj7\") // => true\n * Chord.exists(\"Maj7\") // => true\n * Chord.exists(\"Ablah\") // => false\n */\nvar exists = exports.exists = function (name) {\n  return (0, _tonalDictionary.chord)(tokenize(name)[1]) !== undefined;\n};\n\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nvar supersets = exports.supersets = function (name) {\n  if (!intervals(name).length) {\n    return [];\n  }\n  var isSuperset = (0, _tonalPcset.isSupersetOf)(intervals(name));\n  return _tonalDictionary.chord.names().filter(function (name) {\n    return isSuperset((0, _tonalDictionary.chord)(name));\n  });\n};\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nvar subsets = exports.subsets = function (name) {\n  var isSubset = (0, _tonalPcset.isSubsetOf)(intervals(name));\n  return _tonalDictionary.chord.names().filter(function (name) {\n    return isSubset((0, _tonalDictionary.chord)(name));\n  });\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nvar NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {String} name - the chord name\n * @return {Array} an array with [type, tonic]\n * @example\n * Chord.tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * Chord.tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * Chord.tokenize(\"mMaj7\") // => [ \"\", \"mMaj7\" ]\n * Chord.tokenize(\"Cnonsense\") // => [ \"C\", \"nonsense\" ]\n */\nfunction tokenize(name) {\n  var p = (0, _tonalNote.tokenize)(name);\n  if (p[0] === \"\") {\n    return [\"\", name];\n  }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (p[0] === \"A\" && p[3] === \"ug\") {\n    return [\"\", \"aug\"];\n  }\n\n  if (NUM_TYPES.test(p[2])) {\n    return [p[0] + p[1], p[2] + p[3]];\n  } else {\n    return [p[0] + p[1] + p[2], p[3]];\n  }\n}\n},{\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\",\"tonal-distance\":\"../node_modules/tonal-distance/build/es6.js\",\"tonal-dictionary\":\"../node_modules/tonal-dictionary/build/es6.js\",\"tonal-pcset\":\"../node_modules/tonal-pcset/build/es6.js\"}],\"../node_modules/tonal/index.js\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scale = exports.chord = exports.freq = exports.midi = exports.note = exports.interval = exports.transpose = exports.Dictionary = exports.PcSet = exports.Chord = exports.Scale = exports.Distance = exports.Interval = exports.Note = exports.Array = undefined;\n\nvar _tonalArray = require(\"tonal-array\");\n\nvar Array = _interopRequireWildcard(_tonalArray);\n\nvar _tonalNote = require(\"tonal-note\");\n\nvar Note = _interopRequireWildcard(_tonalNote);\n\nvar _tonalInterval = require(\"tonal-interval\");\n\nvar Interval = _interopRequireWildcard(_tonalInterval);\n\nvar _tonalDistance = require(\"tonal-distance\");\n\nvar Distance = _interopRequireWildcard(_tonalDistance);\n\nvar _tonalDictionary = require(\"tonal-dictionary\");\n\nvar Dictionary = _interopRequireWildcard(_tonalDictionary);\n\nvar _tonalScale = require(\"tonal-scale\");\n\nvar Scale = _interopRequireWildcard(_tonalScale);\n\nvar _tonalChord = require(\"tonal-chord\");\n\nvar Chord = _interopRequireWildcard(_tonalChord);\n\nvar _tonalPcset = require(\"tonal-pcset\");\n\nvar PcSet = _interopRequireWildcard(_tonalPcset);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-key.svg?style=flat-square)](https://www.npmjs.com/package/tonal-key)\n *\n * The `Tonal` module is a facade to the rest of the modules. They are namespaced,\n * so for example to use `pc` function from `tonal-note` you have to write:\n * `Tonal.Note.pc`\n *\n * It exports the following modules:\n * - Note\n * - Interval\n * - Distance\n * - Scale\n * - Chord\n * - PcSet\n *\n * Additionally this facade exports some functions without namespace (see \"Methods\" below)\n *\n * @example\n * // es6 modules\n * import * as Tonal from \"tonal\"\n * Tonal.Note.name(\"cx\") // => \"C##\"\n *\n * @example\n * import { Note } from \"tonal\"\n * Note.name(\"bb\") // => \"Bb\"\n *\n * @example\n * // es5 node modules\n * var Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(Tonal.Note.pc(\"C#2\"), \"M3\") // => \"E#\"\n * Tonal.Chord.notes(\"Dmaj7\") // => [\"D\", \"F#\", \"A\", \"C#\"]\n *\n * @module Tonal\n */\nexports.Array = Array;\nexports.Note = Note;\nexports.Interval = Interval;\nexports.Distance = Distance;\nexports.Scale = Scale;\nexports.Chord = Chord;\nexports.PcSet = PcSet;\nexports.Dictionary = Dictionary;\n\n/**\n * Transpose a note by an interval\n * @function\n * @param {String} note\n * @param {String} interval\n * @return {String} the transported note\n * @see Distance.transpose\n */\n\nconst transpose = exports.transpose = Distance.transpose;\n\n/**\n * Get the interval from two notes\n * @function\n * @param {String} from\n * @param {String} to\n * @return {String} the interval in reverse shorthand notation\n * @see Distance.interval\n */\nconst interval = exports.interval = Distance.interval;\n\n/**\n * Get note properties\n * @function\n * @param {String} note - the note name\n * @return {Object}\n * @see Note.props\n * @example\n * Tonal.note(\"A4\").chroma // => 9\n */\nconst note = exports.note = Note.props;\n\n/**\n * Get midi note number\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.midi\n * @example\n * Tonal.midi(\"A4\") // => 49\n */\nconst midi = exports.midi = Note.midi;\n\n/**\n * Get note frequency using equal tempered tuning at 440\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.freq\n * @example\n * Tonal.freq(\"A4\") // => 440\n */\nconst freq = exports.freq = Note.freq;\n\n/**\n * Get intervals from a chord type\n * @function\n * @param {String} type - the chord type (no tonic)\n * @return {Array} an array of intervals or undefined if the chord type is not known\n * @see Dictionary.chord\n * @example\n * Tonal.chord(\"m7b5\") // => [\"1P\", \"3m\", \"5d\", \"7m\"]\n */\nconst chord = exports.chord = Dictionary.chord;\n\n/**\n * Get intervals from scale name\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Array} an array of intervals or undefiend if the scale is not kown\n * @example\n * Tonal.scale(\"major\") // => [\"1P\", \"2M\", \"3M\"...]\n */\nconst scale = exports.scale = Dictionary.scale;\n},{\"tonal-array\":\"../node_modules/tonal-array/build/es6.js\",\"tonal-note\":\"../node_modules/tonal-note/build/es6.js\",\"tonal-interval\":\"../node_modules/tonal-interval/build/es6.js\",\"tonal-distance\":\"../node_modules/tonal-distance/build/es6.js\",\"tonal-dictionary\":\"../node_modules/tonal-dictionary/build/es6.js\",\"tonal-scale\":\"../node_modules/tonal-scale/build/es6.js\",\"tonal-chord\":\"../node_modules/tonal-chord/build/es6.js\",\"tonal-pcset\":\"../node_modules/tonal-pcset/build/es6.js\"}],\"instruments/Instrument.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar util_1 = require(\"../util\");\nvar Instrument = /** @class */function () {\n    function Instrument(_a) {\n        var _b = _a === void 0 ? {} : _a,\n            context = _b.context,\n            gain = _b.gain,\n            mix = _b.mix,\n            onPlay = _b.onPlay,\n            onStop = _b.onStop,\n            midiOffset = _b.midiOffset;\n        this.midiOffset = 0;\n        this.gain = 1;\n        this.onPlay = onPlay;\n        this.midiOffset = midiOffset || this.midiOffset;\n        this.onStop = onStop;\n        this.gain = gain || this.gain;\n        this.init({ context: context, mix: mix });\n    }\n    Instrument.prototype.init = function (_a) {\n        var context = _a.context,\n            mix = _a.mix;\n        if (!context && (!mix || !mix.context)) {\n            console.warn(\"you should pass a context or a mix (gainNode) to a new Instrument. \\n            You can also Call init with {context,mix} to setup the Instrument later\");\n            return;\n        }\n        this.context = context || mix.context;\n        this.mix = mix || this.context.destination;\n    };\n    Instrument.prototype.playNotes = function (notes, settings) {\n        var _this = this;\n        this.playKeys(notes.map(function (note) {\n            return util_1.getMidi(note, _this.midiOffset);\n        }), settings);\n    };\n    Instrument.prototype.playKeys = function (keys, settings) {\n        if (this.onPlay) {\n            return this.onPlay(keys);\n        }\n        // TODO: fire callbacks after keys.map((key,i)=>i*settings.interval)?\n    };\n    return Instrument;\n}();\nexports.Instrument = Instrument;\n},{\"../util\":\"util.ts\"}],\"instruments/Synthesizer.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar Instrument_1 = require(\"./Instrument\");\nvar tonal_1 = require(\"tonal\");\nvar util_1 = require(\"../util\");\nvar Synthesizer = /** @class */function (_super) {\n    __extends(Synthesizer, _super);\n    function Synthesizer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.duration = 200;\n        _this.type = 'sine';\n        _this.gain = 0.9;\n        _this.attack = .05;\n        _this.decay = .05;\n        _this.sustain = .4;\n        _this.release = .1;\n        _this.duration = props.duration || _this.duration;\n        _this.type = props.type || _this.type;\n        _this.gain = props.gain || _this.gain;\n        return _this;\n    }\n    Synthesizer.prototype.init = function (context) {\n        _super.prototype.init.call(this, context);\n    };\n    Synthesizer.prototype.getVoice = function (type, gain, frequency) {\n        if (type === void 0) {\n            type = 'sine';\n        }\n        if (gain === void 0) {\n            gain = 0;\n        }\n        if (frequency === void 0) {\n            frequency = 440;\n        }\n        var oscNode = this.context.createOscillator();\n        oscNode.type = type;\n        var gainNode = this.context.createGain();\n        oscNode.connect(gainNode);\n        gainNode.gain.value = typeof gain === 'number' ? gain : 0.8;\n        gainNode.connect(this.mix);\n        oscNode.frequency.value = frequency;\n        return { oscNode: oscNode, gainNode: gainNode };\n    };\n    Synthesizer.prototype.lowestGain = function (a, b) {\n        return a.gain.gain.value < b.gain.gain.value ? -1 : 0;\n    };\n    Synthesizer.prototype.playKeys = function (keys, settings) {\n        var _this = this;\n        if (settings === void 0) {\n            settings = {};\n        }\n        _super.prototype.playKeys.call(this, keys, settings); // fires callback   \n        //const time = this.context.currentTime + settings.deadline / 1000;\n        var time = settings.deadline || this.context.currentTime;\n        var interval = settings.interval || 0;\n        keys.map(function (key, i) {\n            var delay = i * interval;\n            var _a = [settings.attack || _this.attack, settings.decay || _this.decay, settings.sustain || _this.sustain, settings.release || _this.release, (settings.duration || _this.duration) / 1000, (settings.gain || 1) * _this.gain],\n                attack = _a[0],\n                decay = _a[1],\n                sustain = _a[2],\n                release = _a[3],\n                duration = _a[4],\n                gain = _a[5];\n            var voice = _this.getVoice(_this.type, 0, tonal_1.Note.freq(key));\n            util_1.adsr({ attack: attack, decay: decay, sustain: sustain, release: release, gain: gain, duration: duration }, time + delay, voice.gainNode.gain);\n            voice.oscNode.start(settings.deadline + delay);\n        });\n    };\n    return Synthesizer;\n}(Instrument_1.Instrument);\nexports.Synthesizer = Synthesizer;\n},{\"./Instrument\":\"instruments/Instrument.ts\",\"tonal\":\"../node_modules/tonal/index.js\",\"../util\":\"util.ts\"}],\"util.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar tonal_1 = require(\"tonal\");\nvar Synthesizer_1 = require(\"./instruments/Synthesizer\");\nfunction randomNumber(n) {\n    return Math.floor(Math.random() * n);\n}\nexports.randomNumber = randomNumber;\nfunction arraySum(array) {\n    return array.reduce(function (s, i) {\n        return s + i;\n    }, 0);\n}\nexports.arraySum = arraySum;\nfunction randomElement(array, weighted) {\n    if (!weighted) {\n        return array[randomNumber(array.length)];\n    }\n    var r = randomNumber(arraySum(weighted)) + 1;\n    var total = weighted.reduce(function (abs, w, i) {\n        return abs.concat(w + (abs.length ? abs[i - 1] : 0));\n    }, []);\n    return array[total.indexOf(total.find(function (s, i) {\n        return s >= r;\n    }))];\n}\nexports.randomElement = randomElement;\nfunction getTonalChord(chord) {\n    chord = chord.replace('-', 'm').replace('^', 'M').replace('h7', 'm7b5').replace('h', 'dim');\n    /**\n     * Chords that dont work:\n     * slash cords are ignored\n     * 7b9b5 does not work\n     *\n     */\n    var tokens = tonal_1.Chord.tokenize(chord);\n    var s = tokens[1].split('/');\n    return tokens[0] + (s[0] || 'M');\n}\nexports.getTonalChord = getTonalChord;\nfunction getMidi(note, offset) {\n    return tonal_1.Note.props(note).midi - offset;\n}\nexports.getMidi = getMidi;\n/** Travels path along measures */\nfunction getPath(path, measures, traveled) {\n    if (traveled === void 0) {\n        traveled = [];\n    }\n    if (!Array.isArray(measures[path[0]]) || path.length === 1) {\n        return measures[Math.min(path[0], measures.length - 1)];\n    }\n    return this.getPath(path.slice(1), measures[path[0]], traveled.concat(path[0]));\n}\nexports.getPath = getPath;\nfunction resolveChords(pattern, measures, path, divisions) {\n    var _this = this;\n    if (divisions === void 0) {\n        divisions = [];\n    }\n    if (Array.isArray(pattern)) {\n        // division: array of children lengths down the path (to calculate fraction)\n        divisions = [].concat(divisions, [pattern.length]);\n        return pattern.map(function (p, i) {\n            return _this.resolveChords(p, measures, path.concat([i]), divisions);\n        });\n    }\n    if (pattern === 0) {\n        return 0;\n    }\n    //const split = (pattern + '').split('.');\n    //const gain = parseFloat('0.' + split[1]); //digit(s) after .\n    //const fraction = (parseInt(split[0]) || 1) * divisions.reduce((f, d) => f / d, 1000); // fraction of one\n    var fraction = pattern * divisions.reduce(function (f, d) {\n        return f / d;\n    }, 1000); // fraction of one\n    if (fraction === 0) {\n        console.warn('fraction is 0', pattern);\n    }\n    return { chord: this.getPath(path, measures), pattern: pattern, /* gain, */path: path, divisions: divisions, fraction: fraction };\n}\nexports.resolveChords = resolveChords;\nfunction hasOff(pattern, division) {\n    if (division === void 0) {\n        division = 3;\n    }\n    return Array.isArray(pattern) && pattern.length === division && pattern[division - 1] !== 0;\n}\nexports.hasOff = hasOff;\n// replaces offs on last beat with next chord + erases next one\nfunction offbeatReducer(settings) {\n    var _this = this;\n    // TODO: find out why some offbeats sound sketchy\n    return function (measures, bar, index) {\n        var last = index > 0 ? measures[index - 1] : null;\n        if (last && _this.hasOff(last[settings.cycle - 1], settings.division)) {\n            last[settings.cycle - 1][settings.division - 1] = bar[0];\n            bar[0] = 0;\n        }\n        return measures.concat([bar]);\n    };\n}\nexports.offbeatReducer = offbeatReducer;\nfunction invertInterval(interval) {\n    if (tonal_1.Interval.semitones(interval) < 0) {\n        return tonal_1.Interval.invert(interval.slice(1));\n    }\n    return '-' + tonal_1.Interval.invert(interval);\n}\nexports.invertInterval = invertInterval;\n// use Interval.ic?\nfunction smallestInterval(interval) {\n    interval = tonal_1.Interval.simplify(interval);\n    if (interval === '0A') {\n        interval = '1P'; // TODO: issue for tonal-interval (0A does not support invert and is not simple)\n    }\n    var inversion = this.invertInterval(interval);\n    if (Math.abs(tonal_1.Interval.semitones(inversion)) < Math.abs(tonal_1.Interval.semitones(interval))) {\n        return inversion;\n    }\n    return interval || '';\n}\nexports.smallestInterval = smallestInterval;\nfunction minInterval(a, b, preferRightMovement) {\n    var semitones = [Math.abs(tonal_1.Interval.semitones(a)), Math.abs(tonal_1.Interval.semitones(b))];\n    if (semitones[0] === semitones[1]) {\n        if (preferRightMovement) {\n            return semitones[0] < 0 ? -1 : 1;\n        }\n        return semitones[0] > 0 ? -1 : 1;\n    }\n    return semitones[0] < semitones[1] ? -1 : 1;\n}\nexports.minInterval = minInterval;\nfunction intervalMatrix(from, to) {\n    var _this = this;\n    return to.map(function (note) {\n        return from.map(function (n) {\n            return tonal_1.Distance.interval(n, note);\n        }).map(function (d) {\n            return _this.smallestInterval(d);\n        }).map(function (i) {\n            return i.slice(0, 2) === '--' ? i.slice(1) : i;\n        });\n    });\n}\nexports.intervalMatrix = intervalMatrix;\nfunction randomSynth(mix, allowed) {\n    if (allowed === void 0) {\n        allowed = ['sine', 'triangle', 'square', 'sawtooth'];\n    }\n    var gains = {\n        sine: 0.9,\n        triangle: 0.8,\n        square: 0.2,\n        sawtooth: 0.3\n    };\n    var wave = randomElement(allowed);\n    return new Synthesizer_1.Synthesizer({ gain: gains[wave], type: wave, mix: mix });\n}\nexports.randomSynth = randomSynth;\nfunction adsr(_a, time, param) {\n    var attack = _a.attack,\n        decay = _a.decay,\n        sustain = _a.sustain,\n        release = _a.release,\n        gain = _a.gain,\n        duration = _a.duration;\n    // console.log('adsr', attack, decay, sustain, release, gain, duration, time);\n    param.linearRampToValueAtTime(gain, time + attack);\n    param.setTargetAtTime(sustain * gain, time + Math.min(attack + decay, duration), decay);\n    param.setTargetAtTime(0, time + Math.max(duration - attack - decay, attack + decay, duration), release);\n}\nexports.adsr = adsr;\n},{\"tonal\":\"../node_modules/tonal/index.js\",\"./instruments/Synthesizer\":\"instruments/Synthesizer.ts\"}],\"musicians/Musician.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar Musician = /** @class */function () {\n    function Musician(instrument) {\n        if (!instrument) {\n            console.warn('musician has no instrument', this);\n        }\n        this.instrument = instrument;\n        this.ready = this.instrument ? this.instrument.ready : Promise.resolve();\n    }\n    Musician.prototype.play = function (_a) {\n        var pulse = _a.pulse,\n            measures = _a.measures,\n            settings = _a.settings;\n        console.log('play..', pulse, measures, settings);\n    };\n    return Musician;\n}();\nexports.Musician = Musician;\n},{}],\"grooves/swing.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar util_1 = require(\"../util\");\nexports.swing = {\n    chords: function chords(_a) {\n        var measure = _a.measure,\n            settings = _a.settings;\n        var off = function off() {\n            return util_1.randomElement([0, [0, 0, 2]], [6, 1]);\n        };\n        var r = Math.random() > 0.5 ? .6 : 0;\n        var t = settings.cycle + \"/\" + measure.length;\n        if (t === '4/1') {\n            return util_1.randomElement([[[1, 0], [0, 0, 7], 0, 0], [1, [0, 0, 2], 0, off()], [[0, 0, 1], 0, 2, 0], [[0, 0, 4], 0, 1, 0], [2, 0, 0, 0], [3, 0, 0, 0], [1, 0, r, off()], [[0, 0, 2], 0, r, 0], [1.5, [0, 0, 2], 0, off()]]); //, [2, 1, 1]\n        }\n        if (t === '4/2') {\n            return util_1.randomElement([[[1, 0], [0, 0, 7], 0, 0], [1, [0, 0, 2], 0, 0], [1, 0, 2, 0], [2, 0, 1, 0], [1, 0, .7, off()], [[1, 0, 0], 0, .7, off()], [[4, 0, 0], [0, 0, 2.8], 0, off()]]);\n        }\n        if (t === '4/3') {\n            return [1, [0, 0, 2], [0, 0, 4], 0];\n        }\n        if ('4/4') {\n            return util_1.randomElement([[1, 1, 1, 1], [[1, 0, 2], [0, 0, 2], 0, 1]]);\n        }\n    },\n    bass: function bass() {\n        return util_1.randomElement([[1, 1, 1, 1]]);\n    },\n    crash: function crash(_a) {\n        var measures = _a.measures,\n            index = _a.index;\n        var fill = index !== 0 && index % measures.length === 0;\n        if (fill) {\n            return [4, 0, 0, 0];\n        }\n        return [0, 0, 0, 0];\n    },\n    ride: function ride(_a) {\n        var measures = _a.measures,\n            index = _a.index;\n        return util_1.randomElement([[.6, [.9, 0, 1], .6, [.9, 0, 1]], [.6, [.4, 0, 1], .8, [0, 0, 1]], [.6, .9, [.6, 0, 1], 1], [.6, .9, .6, [.9, 0, 1]]], [3, 2, 1, 2]);\n    },\n    hihat: function hihat() {\n        return [0, .8, 0, 1];\n    }\n};\n},{\"../util\":\"util.ts\"}],\"musicians/Pianist.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar tonal_1 = require(\"tonal\");\nvar tonal_2 = require(\"tonal\");\nvar util_1 = require(\"../util\");\nvar Musician_1 = require(\"./Musician\");\nvar swing_1 = require(\"../grooves/swing\");\nvar Pianist = /** @class */function (_super) {\n    __extends(Pianist, _super);\n    function Pianist(instrument, props) {\n        if (props === void 0) {\n            props = {};\n        }\n        var _this = _super.call(this, instrument) || this;\n        _this.playedNotes = [];\n        _this.playedPatterns = [];\n        _this.playedChords = [];\n        _this.defaults = { intelligentVoicings: true, groove: swing_1.swing, noTonic: true };\n        _this.min = Math.min;\n        _this.rollFactor = 3; // how much keyroll effect? controls interval between notes\n        _this.props = Object.assign({}, _this.defaults, props || {});\n        return _this;\n    }\n    Pianist.prototype.play = function (_a) {\n        var _this = this;\n        var pulse = _a.pulse,\n            measures = _a.measures,\n            settings = _a.settings;\n        var groove = settings.groove || this.defaults.groove;\n        var pattern = groove['chords'];\n        if (!pattern) {\n            console.warn('style has no chords..');\n            return;\n        }\n        var measureLength = pulse.getMeasureLength();\n        if (settings.exact) {\n            return pulse.tickArray(measures, function (t) {\n                _this.playChord(t.value, { deadline: t.deadline + settings.delay });\n            });\n        }\n        measures = measures\n        // generate random patterns\n        .map(function (measure) {\n            return pattern({ measures: measures, pulse: pulse, measure: measure, settings: settings }).slice(0, Math.floor(settings.cycle));\n        })\n        // fill in chords\n        .map(function (pattern, i) {\n            return util_1.resolveChords(pattern, measures, [i]);\n        })\n        // fix chords at last offbeat\n        .reduce(util_1.offbeatReducer(settings), []);\n        pulse.tickArray(measures, function (_a) {\n            var path = _a.path,\n                value = _a.value,\n                deadline = _a.deadline;\n            var humanFactor = settings.bpm / (_this.rollFactor || 1);\n            var interval = settings.arpeggio ? measureLength / settings.cycle : Math.random() / (humanFactor * 20);\n            if (path[0] % 2 === 0 && !path[1] && !path[2]) {\n                interval = Math.random() / humanFactor;\n            }\n            var duration = settings.arpeggio ? interval : value.fraction * measureLength;\n            var slice = settings.arpeggio ? Math.ceil(value.fraction / 1000 * 4) : null;\n            var gain = value.gain || _this.instrument.gain;\n            _this.playChord(value.chord, { deadline: deadline, gain: gain, duration: duration, interval: interval, slice: slice });\n        }, settings.deadline);\n    };\n    Pianist.prototype.getLastVoicing = function () {\n        return this.playedNotes.length ? this.playedNotes[this.playedNotes.length - 1] : null;\n    };\n    Pianist.prototype.getVoicing = function (scorenotes, before, tonic) {\n        if (!before) {\n            return scorenotes;\n        }\n        var near = util_1.intervalMatrix(before, scorenotes).map(function (intervals, index) {\n            var smallest = [].concat(intervals).sort(function (a, b) {\n                return util_1.minInterval(a, b, false);\n            })[0];\n            if (!tonal_1.Distance.transpose(before[intervals.indexOf(smallest)], smallest)) {\n                console.warn('ALARM', before[intervals.indexOf(smallest)], smallest, intervals);\n            }\n            return tonal_1.Distance.transpose(before[intervals.indexOf(smallest)], smallest);\n        }).filter(function (n) {\n            return !!n;\n        });\n        return near && near.length ? near : scorenotes;\n    };\n    // plays the given notes at the given interval\n    Pianist.prototype.playNotes = function (scorenotes, _a) {\n        var tonic = _a.tonic,\n            deadline = _a.deadline,\n            interval = _a.interval,\n            gain = _a.gain,\n            duration = _a.duration;\n        if (this.props.intelligentVoicings && this.getLastVoicing()) {\n            scorenotes = this.getVoicing(scorenotes, this.getLastVoicing(), tonic);\n        }\n        this.playedNotes.push([].concat(scorenotes));\n        this.instrument.playNotes(scorenotes, { deadline: deadline, interval: interval, gain: gain, duration: duration });\n    };\n    Pianist.prototype.playChord = function (chord, settings) {\n        if (chord === 'N.C.') {\n            console.log('N.C.');\n            return;\n        }\n        if (!chord || chord === 'x') {\n            // repeat\n            chord = this.playedChords[this.playedChords.length - 1];\n        }\n        this.playedChords.push(chord);\n        chord = tonal_2.Chord.tokenize(util_1.getTonalChord(chord));\n        var notes = tonal_2.Chord.intervals(chord[1]).map(function (i) {\n            return i.replace('13', '6');\n        }) // TODO: better control over octave\n        .map(function (root) {\n            return tonal_1.Distance.transpose(chord[0] + '3', root);\n        });\n        if (notes.length > 3 && settings.noTonic) {\n            notes = notes.slice(this.props.noTonic ? 1 : 0);\n        }\n        if (settings.slice) {\n            notes = notes.slice(0, settings.slice ? settings.slice : notes.length);\n        }\n        this.playNotes(notes, settings);\n    };\n    return Pianist;\n}(Musician_1.Musician);\nexports[\"default\"] = Pianist;\n},{\"tonal\":\"../node_modules/tonal/index.js\",\"../util\":\"util.ts\",\"./Musician\":\"musicians/Musician.ts\",\"../grooves/swing\":\"grooves/swing.ts\"}],\"musicians/Drummer.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar Musician_1 = require(\"./Musician\");\nvar swing_1 = require(\"../grooves/swing\");\nvar Drummer = /** @class */function (_super) {\n    __extends(Drummer, _super);\n    function Drummer(instrument) {\n        var _this = _super.call(this, instrument) || this;\n        _this.set = {\n            kick: 0,\n            snare: 1,\n            hihat: 2,\n            ride: 3,\n            crash: 4\n        };\n        _this.defaults = { groove: swing_1.swing };\n        return _this;\n    }\n    Drummer.prototype.play = function (_a) {\n        var _this = this;\n        var measures = _a.measures,\n            pulse = _a.pulse,\n            settings = _a.settings;\n        var groove = settings.groove || this.defaults.groove;\n        Object.keys(groove).filter(function (t) {\n            return Object.keys(_this.set).includes(t);\n        }) // only use drum set patterns\n        .forEach(function (key) {\n            var patterns = measures.map(function (measure, index) {\n                return groove[key]({ measures: measures, index: index, measure: measure, settings: settings, pulse: pulse }).slice(0, Math.floor(settings.cycle));\n            });\n            pulse.tickArray(patterns, function (_a) {\n                var deadline = _a.deadline,\n                    value = _a.value;\n                _this.instrument.playKeys([_this.set[key]], { deadline: deadline, gain: value });\n            }, settings.deadline);\n        });\n    };\n    return Drummer;\n}(Musician_1.Musician);\nexports[\"default\"] = Drummer;\n},{\"./Musician\":\"musicians/Musician.ts\",\"../grooves/swing\":\"grooves/swing.ts\"}],\"musicians/Bassist.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar util_1 = require(\"../util\");\nvar Musician_1 = require(\"./Musician\");\nvar tonal_1 = require(\"tonal\");\nvar swing_1 = require(\"../grooves/swing\");\nvar Bassist = /** @class */function (_super) {\n    __extends(Bassist, _super);\n    function Bassist(instrument) {\n        var _this = _super.call(this, instrument) || this;\n        _this.defaults = { groove: swing_1.swing };\n        _this.playedChords = [];\n        return _this;\n    }\n    Bassist.prototype.play = function (_a) {\n        var _this = this;\n        var measures = _a.measures,\n            pulse = _a.pulse,\n            settings = _a.settings;\n        var groove = settings.groove || this.defaults.groove;\n        var pattern = groove['bass'];\n        measures = measures.map(function (measure) {\n            return pattern({ measures: measures, measure: measure, settings: settings, pulse: pulse }).slice(0, Math.floor(settings.cycle));\n        }).map(function (pattern, i) {\n            return util_1.resolveChords(pattern, measures, [i]);\n        });\n        pulse.tickArray(measures, function (tick) {\n            _this.playBass(tick, measures, pulse);\n        }, settings.deadline);\n    };\n    Bassist.prototype.getStep = function (step, chord, octave) {\n        if (octave === void 0) {\n            octave = 1;\n        }\n        var tokens = tonal_1.Chord.tokenize(util_1.getTonalChord(chord));\n        var interval = tonal_1.Chord.intervals(tokens[1]).find(function (i) {\n            return parseInt(i[0]) === step;\n        });\n        return tonal_1.Distance.transpose(tokens[0] + octave, interval);\n    };\n    Bassist.prototype.playBass = function (_a, measures, pulse) {\n        var value = _a.value,\n            cycle = _a.cycle,\n            path = _a.path,\n            deadline = _a.deadline,\n            interval = _a.interval;\n        var chord = value.chord;\n        if (chord === 'N.C.') {\n            return;\n        }\n        if (!chord || chord === 'x') {\n            // repeat // TODO: support 'r' \n            chord = this.playedChords[this.playedChords.length - 1];\n        }\n        this.playedChords.push(chord);\n        var note;\n        var steps = [1, util_1.randomElement([3, 5]), 1, util_1.randomElement([3, 5])];\n        var octave = 1;\n        if (value.value === 1 && chord.split('/').length > 1) {\n            note = chord.split('/')[1] + octave;\n        } else {\n            note = this.getStep(steps[path[1]], util_1.getTonalChord(chord), octave);\n        }\n        var duration = value.fraction * pulse.getMeasureLength();\n        this.instrument.playNotes([note], { deadline: deadline, interval: interval, gain: 0.7, duration: duration });\n    };\n    return Bassist;\n}(Musician_1.Musician);\nexports[\"default\"] = Bassist;\n},{\"../util\":\"util.ts\",\"./Musician\":\"musicians/Musician.ts\",\"tonal\":\"../node_modules/tonal/index.js\",\"../grooves/swing\":\"grooves/swing.ts\"}],\"instruments/Sampler.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar Instrument_1 = require(\"./Instrument\");\nvar util_1 = require(\"../util\");\nvar Sampler = /** @class */function (_super) {\n    __extends(Sampler, _super);\n    function Sampler(options) {\n        if (options === void 0) {\n            options = {};\n        }\n        var _this = _super.call(this, options) || this;\n        _this.buffers = {};\n        _this.duration = 10000;\n        _this.type = 'sine';\n        _this.gain = 1;\n        _this.attack = 0;\n        _this.decay = 0;\n        _this.sustain = 1;\n        _this.release = .2;\n        _this.gain = options.gain || _this.gain;\n        _this.gainNode = _this.context.createGain();\n        _this.gainNode.connect(_this.context.destination);\n        _this.duration = options.duration || _this.duration;\n        // this.overlap = options.overlap;\n        if (options.samples) {\n            _this.sources = options.samples;\n            _this.ready = _this.loadSources(options.samples);\n        }\n        return _this;\n    }\n    // returns buffer from buffer cache or loads buffer data from source\n    Sampler.prototype.getBuffer = function (src, context) {\n        var _this = this;\n        if (context === void 0) {\n            context = this.context;\n        }\n        if (this.buffers[src] && this.buffers[src].context === context) {\n            // console.log('buffer already present');\n            return Promise.resolve(this.buffers[src].buffer);\n        }\n        return fetch(src).then(function (res) {\n            return res.arrayBuffer();\n        }).then(function (buffer) {\n            return new Promise(function (resolve, reject) {\n                context.decodeAudioData(buffer, function (decodedData) {\n                    _this.buffers[src] = { buffer: decodedData, context: context };\n                    resolve(decodedData);\n                });\n            });\n        });\n    };\n    Sampler.prototype.getSource = function (buffer, connect) {\n        var source = this.context.createBufferSource();\n        connect = connect || this.gainNode;\n        source.buffer = buffer;\n        source.connect(connect);\n        return source;\n    };\n    Sampler.prototype.getSources = function (sources, context) {\n        var _this = this;\n        if (context === void 0) {\n            context = this.context;\n        }\n        if (!this.hasLoaded(sources)) {\n            console.error('not all sources loaded!!!');\n            return [];\n        }\n        return sources.map(function (source) {\n            return _this.getSource(_this.buffers[source].buffer);\n        });\n    };\n    // loads a sound file into the context\n    Sampler.prototype.loadSource = function (src, context) {\n        var _this = this;\n        if (context === void 0) {\n            context = this.context;\n        }\n        return this.getBuffer(src, context).then(function (decodedData) {\n            return _this.getSource(decodedData);\n        });\n    };\n    // loads multiple sources into the context\n    Sampler.prototype.loadSources = function (sources, context) {\n        var _this = this;\n        if (context === void 0) {\n            context = this.context;\n        }\n        sources.forEach(function (source, i) {\n            if (!source) {\n                console.warn(\"note at index \" + i + \" cannot be played!\");\n            }\n        });\n        return Promise.all(sources.filter(function (source) {\n            return !!source;\n        }).map(function (source) {\n            return _this.loadSource(source, context);\n        }));\n    };\n    Sampler.prototype.hasLoaded = function (sources, context) {\n        var _this = this;\n        if (context === void 0) {\n            context = this.context;\n        }\n        return sources.reduce(function (allLoaded, src) {\n            return allLoaded && _this.buffers[src] && _this.buffers[src].context === context;\n        }, true);\n    };\n    Sampler.prototype.playSounds = function (sounds, deadline, interval) {\n        if (deadline === void 0) {\n            deadline = 0;\n        }\n        if (interval === void 0) {\n            interval = 0;\n        }\n        sounds.forEach(function (sound, i) {\n            return sound.start(deadline + interval * i);\n        });\n    };\n    Sampler.prototype.playSource = function (source, settings) {\n        var gainNode = this.context.createGain();\n        var sound = this.getSource(this.buffers[source].buffer, gainNode);\n        var _a = [settings.attack || this.attack, settings.decay || this.decay, settings.sustain || this.sustain, settings.release || this.release, (settings.duration || this.duration) / 1000, (settings.gain || 1) * this.gain],\n            attack = _a[0],\n            decay = _a[1],\n            sustain = _a[2],\n            release = _a[3],\n            duration = _a[4],\n            gain = _a[5];\n        var time = settings.deadline || this.context.currentTime;\n        //gainNode.gain.value = typeof settings.gain === 'number' ? settings.gain : this.gain;\n        gainNode.connect(this.mix);\n        util_1.adsr({ attack: attack, decay: decay, sustain: sustain, release: release, gain: gain, duration: duration }, time, gainNode.gain);\n        this.playSounds([sound], settings.deadline || 0, 0);\n    };\n    /* playSources(sources, deadline = 0, interval = 0) {\n        if (this.hasLoaded(sources, this.context)) {\n            this.playSounds(this.getSources(sources, this.context), deadline, interval)\n        } else {\n            console.warn('need to load');\n            this.loadSources(sources, this.context)\n                .then(sounds => this.playSounds(sounds, deadline, interval));\n        }\n    } */\n    Sampler.prototype.playKeys = function (keys, settings) {\n        var _this = this;\n        _super.prototype.playKeys.call(this, keys, settings);\n        keys.map(function (key) {\n            _this.playSource(_this.sources[key], settings);\n        });\n    };\n    return Sampler;\n}(Instrument_1.Instrument);\nexports.Sampler = Sampler;\n},{\"./Instrument\":\"instruments/Instrument.ts\",\"../util\":\"util.ts\"}],\"instruments/Kick.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar Kick = /** @class */function () {\n    function Kick(context) {\n        this.context = context;\n    }\n    Kick.prototype.setup = function () {\n        this.osc = this.context.createOscillator();\n        this.gain = this.context.createGain();\n        this.osc.connect(this.gain);\n        this.gain.connect(this.context.destination);\n    };\n    Kick.prototype.trigger = function (time) {\n        this.setup();\n        this.osc.frequency.setValueAtTime(150, time);\n        this.gain.gain.setValueAtTime(1, time);\n        this.osc.frequency.exponentialRampToValueAtTime(0.01, time + 0.5);\n        this.gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);\n        this.osc.start(time);\n        this.osc.stop(time + 0.5);\n    };\n    return Kick;\n}();\nexports.Kick = Kick;\n},{}],\"instruments/Snare.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar Snare = /** @class */function () {\n    function Snare(context) {\n        this.context = context;\n    }\n    Snare.prototype.noiseBuffer = function () {\n        var bufferSize = this.context.sampleRate;\n        var buffer = this.context.createBuffer(1, bufferSize, this.context.sampleRate);\n        var output = buffer.getChannelData(0);\n        for (var i = 0; i < bufferSize; i++) {\n            output[i] = Math.random() * 2 - 1;\n        }\n        return buffer;\n    };\n    Snare.prototype.setup = function () {\n        this.noise = this.context.createBufferSource();\n        this.noise.buffer = this.noiseBuffer();\n        var noiseFilter = this.context.createBiquadFilter();\n        noiseFilter.type = 'highpass';\n        noiseFilter.frequency.value = 1000;\n        this.noise.connect(noiseFilter);\n        this.noiseEnvelope = this.context.createGain();\n        noiseFilter.connect(this.noiseEnvelope);\n        this.noiseEnvelope.connect(this.context.destination);\n        this.osc = this.context.createOscillator();\n        this.osc.type = 'triangle';\n        this.oscEnvelope = this.context.createGain();\n        this.osc.connect(this.oscEnvelope);\n        this.oscEnvelope.connect(this.context.destination);\n    };\n    ;\n    Snare.prototype.trigger = function (time) {\n        this.setup();\n        this.noiseEnvelope.gain.setValueAtTime(1, time);\n        this.noiseEnvelope.gain.exponentialRampToValueAtTime(0.01, time + 0.2);\n        this.noise.start(time);\n        this.osc.frequency.setValueAtTime(100, time);\n        this.oscEnvelope.gain.setValueAtTime(0.7, time);\n        this.oscEnvelope.gain.exponentialRampToValueAtTime(0.01, time + 0.1);\n        this.osc.start(time);\n        this.osc.stop(time + 0.2);\n        this.noise.stop(time + 0.2);\n    };\n    ;\n    return Snare;\n}();\nexports.Snare = Snare;\n},{}],\"instruments/PlasticDrums.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nexports.__esModule = true;\nvar Instrument_1 = require(\"./Instrument\");\nvar Kick_1 = require(\"./Kick\");\nvar Snare_1 = require(\"./Snare\");\nvar PlasticDrums = /** @class */function (_super) {\n    __extends(PlasticDrums, _super);\n    function PlasticDrums(options) {\n        var _this = _super.call(this, options) || this;\n        _this.keys = [new Kick_1.Kick(_this.context), new Snare_1.Snare(_this.context)];\n        return _this;\n    }\n    PlasticDrums.prototype.playKeys = function (keys, _a) {\n        var _this = this;\n        var deadline = _a.deadline,\n            gain = _a.gain,\n            value = _a.value;\n        var sounds = keys.filter(function (key) {\n            return !!_this.keys[key];\n        }).map(function (key) {\n            return _this.keys[key];\n        });\n        if (sounds.length < keys.length) {\n            var missing = keys.filter(function (key) {\n                return !_this.keys[key];\n            });\n            console.warn('PlasticDrums missing keys:', missing);\n        }\n        sounds.forEach(function (sound) {\n            return sound.trigger(deadline);\n        });\n    };\n    return PlasticDrums;\n}(Instrument_1.Instrument);\nexports.PlasticDrums = PlasticDrums;\n},{\"./Instrument\":\"instruments/Instrument.ts\",\"./Kick\":\"instruments/Kick.ts\",\"./Snare\":\"instruments/Snare.ts\"}],\"Metronome.ts\":[function(require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nvar Synthesizer_1 = require(\"./instruments/Synthesizer\");\nvar Metronome = /** @class */function () {\n    function Metronome(mix) {\n        this.synth = new Synthesizer_1.Synthesizer({ type: 'sine', gain: 1, mix: mix });\n        this.ready = this.synth.ready;\n    }\n    Metronome.prototype.count = function (pulse, bars) {\n        var _this = this;\n        if (bars === void 0) {\n            bars = 1;\n        }\n        var count = new Array(bars).fill([new Array(pulse.props.cycle).fill(1)]);\n        return pulse.tickArray(count, function (_a) {\n            var path = _a.path,\n                deadline = _a.deadline;\n            _this.synth.playKeys([path[2] === 0 ? 90 : 78], { deadline: deadline, duration: 0.01, attack: .01, release: .01, decay: .01, sustain: 1 });\n        });\n    };\n    return Metronome;\n}();\nexports.Metronome = Metronome;\n},{\"./instruments/Synthesizer\":\"instruments/Synthesizer.ts\"}],\"Trio.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n    var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n        } || function (d, b) {\n            for (var p in b) {\n                if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n        };\n        return _extendStatics(d, b);\n    };\n    return function (d, b) {\n        _extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar util_1 = require(\"./util\");\nvar Band_1 = __importDefault(require(\"./Band\"));\nvar Pianist_1 = __importDefault(require(\"./musicians/Pianist\"));\nvar Bassist_1 = __importDefault(require(\"./musicians/Bassist\"));\nvar Drummer_1 = __importDefault(require(\"./musicians/Drummer\"));\nvar PlasticDrums_1 = require(\"./instruments/PlasticDrums\");\nvar Metronome_1 = require(\"./Metronome\");\nvar Pulse_1 = require(\"./Pulse\");\nvar Trio = /** @class */function (_super) {\n    __extends(Trio, _super);\n    function Trio(_a) {\n        var context = _a.context,\n            piano = _a.piano,\n            bass = _a.bass,\n            drums = _a.drums;\n        var _this = _super.call(this, { context: context }) || this;\n        _this.mix = _this.setupMix(_this.context);\n        var instruments = _this.setupInstruments({ piano: piano, bass: bass, drums: drums });\n        _this.pianist = new Pianist_1[\"default\"](instruments.piano);\n        _this.bassist = new Bassist_1[\"default\"](instruments.bass);\n        _this.drummer = new Drummer_1[\"default\"](instruments.drums);\n        _this.musicians = [_this.pianist, _this.bassist, _this.drummer];\n        _this.metronome = new Metronome_1.Metronome(_this.mix);\n        return _this;\n    }\n    Trio.prototype.setupMix = function (context) {\n        var mix = context.createGain();\n        mix.gain.value = 0.9;\n        mix.connect(context.destination);\n        return mix;\n    };\n    Trio.prototype.setupInstruments = function (_a) {\n        var piano = _a.piano,\n            bass = _a.bass,\n            drums = _a.drums;\n        bass = bass || util_1.randomSynth(this.mix);\n        piano = piano || util_1.randomSynth(this.mix);\n        drums = drums || new PlasticDrums_1.PlasticDrums({ mix: this.mix });\n        return { piano: piano, bass: bass, drums: drums };\n    };\n    Trio.prototype.play = function (measures, settings) {\n        var _this = this;\n        this.pulse = settings.pulse || new Pulse_1.Pulse(settings);\n        return this.count(this.pulse, settings.metronome ? null : 0).then(function (tick) {\n            settings.deadline = tick.deadline;\n            // settings.delay = deadline - this.context.currentTime;\n            _super.prototype.play.call(_this, measures, settings);\n        });\n    };\n    Trio.prototype.count = function (pulse, bars) {\n        if (bars === void 0) {\n            bars = 1;\n        }\n        if (pulse.getMeasureLength() < 1.5) {\n            bars *= 2; //double countin bars when countin would be shorter than 1.5s\n        }\n        return this.metronome.count(pulse, bars);\n    };\n    return Trio;\n}(Band_1[\"default\"]);\nexports.Trio = Trio;\n},{\"./util\":\"util.ts\",\"./Band\":\"Band.ts\",\"./musicians/Pianist\":\"musicians/Pianist.ts\",\"./musicians/Bassist\":\"musicians/Bassist.ts\",\"./musicians/Drummer\":\"musicians/Drummer.ts\",\"./instruments/PlasticDrums\":\"instruments/PlasticDrums.ts\",\"./Metronome\":\"Metronome.ts\",\"./Pulse\":\"Pulse.ts\"}],\"index.ts\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nvar __importStar = this && this.__importStar || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) {\n        if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    }result[\"default\"] = mod;\n    return result;\n};\nexports.__esModule = true;\nvar Band_1 = __importDefault(require(\"./Band\"));\nvar Pianist_1 = __importDefault(require(\"./musicians/Pianist\"));\nvar Drummer_1 = __importDefault(require(\"./musicians/Drummer\"));\nvar Bassist_1 = __importDefault(require(\"./musicians/Bassist\"));\nvar Instrument_1 = require(\"./instruments/Instrument\");\nvar Musician_1 = require(\"./musicians/Musician\");\nvar Synthesizer_1 = require(\"./instruments/Synthesizer\");\nvar Sampler_1 = require(\"./instruments/Sampler\");\nvar PlasticDrums_1 = require(\"./instruments/PlasticDrums\");\nvar Trio_1 = require(\"./Trio\");\nvar util = __importStar(require(\"./util\"));\nvar Pulse_1 = require(\"./Pulse\");\nexports[\"default\"] = { Trio: Trio_1.Trio, Band: Band_1[\"default\"], Pianist: Pianist_1[\"default\"], Bassist: Bassist_1[\"default\"], Drummer: Drummer_1[\"default\"], Instrument: Instrument_1.Instrument, Musician: Musician_1.Musician, Synthesizer: Synthesizer_1.Synthesizer, Sampler: Sampler_1.Sampler, PlasticDrums: PlasticDrums_1.PlasticDrums, Pulse: Pulse_1.Pulse, util: util };\n},{\"./Band\":\"Band.ts\",\"./musicians/Pianist\":\"musicians/Pianist.ts\",\"./musicians/Drummer\":\"musicians/Drummer.ts\",\"./musicians/Bassist\":\"musicians/Bassist.ts\",\"./instruments/Instrument\":\"instruments/Instrument.ts\",\"./musicians/Musician\":\"musicians/Musician.ts\",\"./instruments/Synthesizer\":\"instruments/Synthesizer.ts\",\"./instruments/Sampler\":\"instruments/Sampler.ts\",\"./instruments/PlasticDrums\":\"instruments/PlasticDrums.ts\",\"./Trio\":\"Trio.ts\",\"./util\":\"util.ts\",\"./Pulse\":\"Pulse.ts\"}],\"../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/src/builtins/hmr-runtime.js\":[function(require,module,exports) {\nvar global = arguments[3];\nvar OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = '' || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + '53088' + '/');\n  ws.onmessage = function (event) {\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      console.clear();\n\n      data.assets.forEach(function (asset) {\n        hmrApply(global.parcelRequire, asset);\n      });\n\n      data.assets.forEach(function (asset) {\n        if (!asset.isNew) {\n          hmrAccept(global.parcelRequire, asset.id);\n        }\n      });\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      };\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' + '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' + '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' + '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' + '<pre>' + stackTrace.innerHTML + '</pre>' + '</div>';\n\n  return overlay;\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAccept(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAccept(bundle.parent, id);\n  }\n\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAccept(global.parcelRequire, id);\n  });\n}\n},{}]},{},[\"../../../.nvm/versions/node/v8.11.1/lib/node_modules/parcel/src/builtins/hmr-runtime.js\",\"index.ts\"], null)\n//# sourceMappingURL=/index.map","// extension of https://github.com/daumling/ireal-renderer/blob/master/src/ireal-renderer.js\n\nexport class RealParser {\n    /**\n     * The RegExp for a complete chord. The match array contains:\n     * 1 - the base note\n     * 2 - the modifiers (+-ohd0123456789 and su for sus)\n     * 3 - any comments (may be e.g. add, sub, or private stuff)\n     * 4 - the \"over\" part starting with a slash\n     * 5 - the top chord as (chord)\n     * @type RegExp\n     */\n\n    chordRegex = /^([ A-GW][b#]?)((?:sus|[\\+\\-\\^\\dhob#])*)(\\*.+?\\*)*(\\/[A-G][#b]?)?(\\(.*?\\))?/;\n\n    regExps = [\n        /^\\*[a-zA-Z]/,\t\t\t\t\t\t\t// section\n        /^T\\d\\d/,\t\t\t\t\t\t\t\t// time measurement\n        /^N./,\t\t\t\t\t\t\t\t\t// repeat marker\n        /^<.*?>/,\t\t\t\t\t\t\t\t// comments\n        /^ \\(.*?\\)/,\t\t\t\t\t\t\t// blank and (note)\n        this.chordRegex,\t\t\t\t// chords\n        /^LZ/,\t\t\t\t\t\t\t\t\t// 1 cell + right bar\n        /^XyQ/,\t\t\t\t\t\t\t\t\t// 3 empty cells\n        /^Kcl/\t\t\t\t\t\t\t\t\t// repeat last bar\n    ];\n\n    replacements = {\n        \"LZ\": [\" \", \"|\"],\n        \"XyQ\": [\" \", \" \", \" \"],\n        \"Kcl\": [\"|\", \"x\", \" \"]\n    };\n    raw: string;\n    sections: any; //chords json\n    bars: any;\n    tokens: any;\n\n    constructor(raw, times = 3) {\n        this.raw = raw;\n        this.tokens = this.parse(raw);\n        this.sections = this.getSections(this.tokens);\n        //this.bars = parsed.out;\n        this.bars = this.renderSong(this.sections, times);\n        return raw;\n    }\n\n    renderSong(sections = this.sections, times = 1) {\n        let bars = [];\n        console.log('times', times);\n        for (let i = 1; i <= times; ++i) {\n            bars = bars.concat(this.getBars(sections, { first: i === 1, last: i === times }));\n        }\n        return bars;\n    }\n\n    getBars(sections = this.sections, { first, last }, repeated = []) {\n        return sections.filter(s => first || s.section !== 'i')\n            .reduce((current, section, sectionIndex) => {\n                let endings = [].concat(section.endings);\n                if (repeated.find(r => r[0] === section.section)) {\n                    endings = endings.slice(1);\n                    //console.log('already repeated that section..');\n                }\n                if (endings.length) {\n                    current.bars = current.bars.concat(section.bars.concat(endings[0]));\n                    if (section.jumpToCoda) {\n                        console.warn('CODA in section with endings... not implemented yet..');\n                    }\n                } else {\n                    let sectionBars = [].concat(section.bars)\n                    if (section.jumpToCoda && last) {\n                        console.log('jumpToCoda', section.jumpToCoda, sectionBars);\n                        sectionBars = sectionBars.slice(0, section.jumpToCoda);\n                        if (section.repeats) {\n                            console.warn('ALARM: jumpToCoda in section with repeats.. not implemented yet..')\n                            // TODO: support jumpToCoda in section with repeats\n                        }\n                    }\n                    current.bars = current.bars.concat(sectionBars);\n                }\n                if (section.repeats.length) { // splice repeats\n                    //console.log('repeats', section.repeats);\n                    section.repeats.forEach((repeat, index) => {\n                        if (repeat[0] !== null) {\n                            current.repeatStart = [sectionIndex, repeat[0]];\n                        }\n                        const skip = !!repeated.find(r => r[0] === section.section && r[1] === repeat[1]);\n                        if (repeat[1] && !skip) {\n                            if (!current.repeatStart) { // if no { at start.. see lover man\n                                console.log('no repeat start found', repeat);\n                                current.repeatStart = [0, 0];\n                            }\n                            const repeatedSections = sections.slice(current.repeatStart[0], sectionIndex + 1);\n                            repeated.push([section.section, repeat[1]])\n                            /* console.log('repeated sections', repeatedSections); */\n                            const insert = this.getBars(repeatedSections, { first, last }, repeated);\n                            /* console.log('insert', insert); */\n                            current.bars = current.bars.concat(insert);\n                        }\n                    })\n                }\n                return current;\n            }, { bars: [], repeatStart: null, repeatEnd: null }).bars\n            .reduce((b, bar) => {\n                if (bar.length === 1 && bar[0] === 'r') {\n                    b = b.concat(['x', 'x']);\n                } else {\n                    b.push(bar);\n                }\n                return b;\n            }, []);\n    }\n\n\n    getSections(tokens) {\n        return tokens.reduce((current, token, index) => {\n\n            // not working correctly: \n            // \"Pretty Girl Is Like A Melody, A\" => bar with \"/\"\n            // current token has barline => end current.bar\n\n            // beginning of new section\n            const sectionStart = token.annots.find(annotation => annotation.match(/^\\*[a-zA-Z]/));\n            const codaSign = token.annots.includes('Q');\n            const segnioSign = token.annots.includes('S'); // TODO: add segnio\n            const codaJump = codaSign && current.section.jumpToCoda === null;\n            const codaStart = codaSign && !codaJump;\n            const houseStart = token.annots.find(annotation => annotation.match(/^N./));\n            const lastToken = index === tokens.length - 1;\n\n            // new bar\n            if (['{', '|', '[', 'Z', '||', ']'].includes(token.bars || token.token)) {\n                //if (!current.bar.length && (!sectionStart || codaStart)) {\n                // current.bar = ['N.C.']; // TODO: write N.C. directly when parsing\n                //}\n                if (current.bar.length) {\n                    //current.out.push(current.bar);\n                    if (current.section) {\n                        (current.house || current.section.bars).push(current.bar);\n                    }\n                    current.bar = [];\n                }\n            }\n            // sectionSign or second coda sign\n            if (sectionStart || codaStart || lastToken) {\n                if (current.section) {\n                    if (current.house) {\n                        current.section.endings.push(current.house);\n                        current.house = null;\n                    }\n                    current.sections.push(current.section);\n                }\n                delete current.section;\n            }\n            // either first bar without section name or new section sign\n            if (!current.section) {// && !lastToken\n                current.section = {\n                    section: codaStart ? 'coda' : (sectionStart || '').replace('*', '') || 'A',\n                    bars: [],\n                    repeats: [],\n                    endings: [],\n                    jumpToCoda: null,\n                    annotations: {}\n                };\n            }\n            const barIndex = current.section.bars.length + (current.house || []).length;\n            if (codaJump) {\n                current.section.jumpToCoda = barIndex;\n            }\n            // beginning of house\n            if (houseStart) {\n                if (current.house) {\n                    current.section.endings.push(current.house);\n                    current.house = null;\n                }\n                current.house = [];\n            }\n\n            if (token.chord) {\n                current.bar.push(token.chord.note + token.chord.modifiers);\n                //current.bar.push(token);\n            }\n            if (token.annots.length) {\n                current.section.annotations[barIndex] = token.annots;\n            }\n            if (token.bars === '{') {\n                current.section.repeats.push([barIndex]);\n            }\n            if (token.bars === '}' || token.token === '}') { // see lover man: bars is empty but token is }\n                if (current.section.repeats.length && current.section.repeats[current.section.repeats.length - 1]) {\n                    current.section.repeats[current.section.repeats.length - 1].push(barIndex);\n                } else {\n                    console.warn('end loop without start in section');\n                    current.section.repeats.push([null, barIndex]);\n                }\n            }\n            return current;\n        }, { /* out: [], */ sections: [], house: null, bar: [], section: null }).sections;\n    }\n\n    parse(raw: string): any {\n        var text = raw;\n        var arr = [], headers = [], comments = [];\n        var i;\n        text = text.trim();\n        // text = text.trimRight();\n        while (text) {\n            var found = false;\n            for (i = 0; i < this.regExps.length; i++) {\n                var match = this.regExps[i].exec(text);\n\n                if (match) {\n                    found = true;\n                    if (match.length <= 2) {\n                        const replacement = match[0];\n                        var repl = this.replacements[replacement];\n                        arr = arr.concat(repl ? repl : [replacement]);\n                        text = text.substr(replacement.length);\n                    }\n                    else { // a chord\n                        arr.push(match);\n                        text = text.substr(match[0].length);\n                    }\n                    break;\n                }\n            }\n            if (!found) {\n                // ignore the comma separator\n                if (text[0] !== ',')\n                    arr.push(text[0]);\n                text = text.substr(1);\n            }\n        }\n        //\t\tconsole.log(arr);\n        // pass 2: extract prefixes, suffixes, annotations and comments\n        var out = [];\n        var obj = this.newToken(out);\n        for (i = 0; i < arr.length; i++) {\n            var token = arr[i];\n            if (token instanceof Array) {\n                obj.chord = this.parseChord(token);\n                token = \" \";\n            }\n            switch (token[0]) {\n                case ',': token = null; break; // separator\n                case 'S':\t// segno\n                case 'T':\t// time measurement\n                case 'Q':\t// coda\n                case 'N':\t// repeat\n                case 'U':\t// END\n                case 's':\t// small\n                case 'l':\t// normal\n                case 'f':\t// fermata\n                case '*': obj.annots.push(token); token = null; break;\n                case 'Y': obj.spacer++; token = null; break;\n                case 'r':\n                case 'x':\n                case 'W':\n                    obj.chord = new iRealChord(token, \"\", null, null);\n                    break;\n                case '<':\n                    token = token.substr(1, token.length - 2);\n                    token = token.replace(/XyQ/g, \"   \");\t// weird; needs to be done\n                    obj.comments.push(token);\n                    token = null; break;\n                default:\n            }\n            if (token) {\n                if (\"]}Z\".indexOf(arr[i + 1]) >= 0)\n                    obj.bars += arr[++i];\n                if (\"{[|\".indexOf(token) >= 0) {\n                    obj.bars += token; token = null;\n                }\n            }\n            if (token && i < arr.length - 1) {\n                obj.token = token;\n                obj = this.newToken(out);\n            }\n        }\n        return out;\n    }\n\n\n\n    parseChord(match) {\n        var note = match[1] || \" \";\n        var modifiers = match[2] || \"\";\n        var comment = match[3] || \"\";\n        if (comment)\n            modifiers += comment.substr(1, comment.length - 2).replace(\"XyQ\", \"   \");\n        var over = match[4] || \"\";\n        if (over[0] === '/')\n            over = over.substr(1);\n        var alternate = match[5] || null;\n        if (alternate) {\n            match = this.chordRegex.exec(alternate.substr(1, alternate.length - 2));\n            if (!match)\n                alternate = null;\n            else\n                alternate = this.parseChord(match);\n        }\n        // empty cell?\n        if (note === \" \" && !alternate && !over)\n            return null;\n        if (over) {\n            var offset = (over[1] === '#' || over[1] === 'b') ? 2 : 1;\n            over = new iRealChord(over.substr(0, offset), over.substr(offset), null, null);\n        }\n        else\n            over = null;\n        return new iRealChord(note, modifiers, over, alternate);\n    }\n\n    newToken(arr) {\n        var obj = new iRealToken;\n        arr.push(obj);\n        return obj;\n    }\n\n}\n\nclass iRealChord {\n    note: any;\n    modifiers: any;\n    over: any;\n    alternate: any;\n    constructor(note, modifiers, over, alternate) {\n        this.note = note;\n        this.modifiers = modifiers;\n        this.over = over;\n        this.alternate = alternate;\n    }\n}\n\nclass iRealToken {\n    chord: any;\n    spacer: number;\n    bars: string;\n    comments: any[];\n    token: any;\n    annots: any[];\n    constructor() {\n        this.annots = [];\n        this.comments = [];\n        this.bars = \"\";\n        this.spacer = 0;\n        this.chord = null;\n    }\n}","import C1 from \"./piano/C1.mp3\";\nimport Db1 from \"./piano/Db1.mp3\";\nimport D1 from \"./piano/D1.mp3\";\nimport Eb1 from \"./piano/Eb1.mp3\";\nimport E1 from \"./piano/E1.mp3\";\nimport F1 from \"./piano/F1.mp3\";\nimport Gb1 from \"./piano/Gb1.mp3\";\nimport G1 from \"./piano/G1.mp3\";\nimport Ab1 from \"./piano/Ab1.mp3\";\nimport A1 from \"./piano/A1.mp3\";\nimport Bb1 from \"./piano/Bb1.mp3\";\nimport B1 from \"./piano/B1.mp3\";\nimport C2 from \"./piano/C2.mp3\";\nimport Db2 from \"./piano/Db2.mp3\";\nimport D2 from \"./piano/D2.mp3\";\nimport Eb2 from \"./piano/Eb2.mp3\";\nimport E2 from \"./piano/E2.mp3\";\nimport F2 from \"./piano/F2.mp3\";\nimport Gb2 from \"./piano/Gb2.mp3\";\nimport G2 from \"./piano/G2.mp3\";\nimport Ab2 from \"./piano/Ab2.mp3\";\nimport A2 from \"./piano/A2.mp3\";\nimport Bb2 from \"./piano/Bb2.mp3\";\nimport B2 from \"./piano/B2.mp3\";\nimport C3 from \"./piano/C3.mp3\";\nimport Db3 from \"./piano/Db3.mp3\";\nimport D3 from \"./piano/D3.mp3\";\nimport Eb3 from \"./piano/Eb3.mp3\";\nimport E3 from \"./piano/E3.mp3\";\nimport F3 from \"./piano/F3.mp3\";\nimport Gb3 from \"./piano/Gb3.mp3\";\nimport G3 from \"./piano/G3.mp3\";\nimport Ab3 from \"./piano/Ab3.mp3\";\nimport A3 from \"./piano/A3.mp3\";\nimport Bb3 from \"./piano/Bb3.mp3\";\nimport B3 from \"./piano/B3.mp3\";\nimport C4 from \"./piano/C4.mp3\";\nimport Db4 from \"./piano/Db4.mp3\";\nimport D4 from \"./piano/D4.mp3\";\nimport Eb4 from \"./piano/Eb4.mp3\";\nimport E4 from \"./piano/E4.mp3\";\nimport F4 from \"./piano/F4.mp3\";\nimport Gb4 from \"./piano/Gb4.mp3\";\nimport G4 from \"./piano/G4.mp3\";\nimport Ab4 from \"./piano/Ab4.mp3\";\nimport A4 from \"./piano/A4.mp3\";\nimport Bb4 from \"./piano/Bb4.mp3\";\nimport B4 from \"./piano/B4.mp3\";\nimport C5 from \"./piano/C5.mp3\";\nimport Db5 from \"./piano/Db5.mp3\";\nimport D5 from \"./piano/D5.mp3\";\nimport Eb5 from \"./piano/Eb5.mp3\";\nimport E5 from \"./piano/E5.mp3\";\nimport F5 from \"./piano/F5.mp3\";\nimport Gb5 from \"./piano/Gb5.mp3\";\nimport G5 from \"./piano/G5.mp3\";\nimport Ab5 from \"./piano/Ab5.mp3\";\nimport A5 from \"./piano/A5.mp3\";\nimport Bb5 from \"./piano/Bb5.mp3\";\nimport B5 from \"./piano/B5.mp3\";\nimport C6 from \"./piano/C6.mp3\";\nimport Db6 from \"./piano/Db6.mp3\";\nimport D6 from \"./piano/D6.mp3\";\nimport Eb6 from \"./piano/Eb6.mp3\";\nimport E6 from \"./piano/E6.mp3\";\nimport F6 from \"./piano/F6.mp3\";\nimport Gb6 from \"./piano/Gb6.mp3\";\nimport G6 from \"./piano/G6.mp3\";\nimport Ab6 from \"./piano/Ab6.mp3\";\nimport A6 from \"./piano/A6.mp3\";\nimport Bb6 from \"./piano/Bb6.mp3\";\nimport B6 from \"./piano/B6.mp3\";\nimport C7 from \"./piano/C7.mp3\";\nimport Db7 from \"./piano/Db7.mp3\";\nimport D7 from \"./piano/D7.mp3\";\nimport Eb7 from \"./piano/Eb7.mp3\";\nimport E7 from \"./piano/E7.mp3\";\nimport F7 from \"./piano/F7.mp3\";\nimport Gb7 from \"./piano/Gb7.mp3\";\nimport G7 from \"./piano/G7.mp3\";\nimport Ab7 from \"./piano/Ab7.mp3\";\nimport A7 from \"./piano/A7.mp3\";\nimport Bb7 from \"./piano/Bb7.mp3\";\nimport B7 from \"./piano/B7.mp3\";\n\nexport const piano = [\n    C1,\n    Db1,\n    D1,\n    Eb1,\n    E1,\n    F1,\n    Gb1,\n    G1,\n    Ab1,\n    A1,\n    Bb1,\n    B1,\n    C2,\n    Db2,\n    D2,\n    Eb2,\n    E2,\n    F2,\n    Gb2,\n    G2,\n    Ab2,\n    A2,\n    Bb2,\n    B2,\n    C3,\n    Db3,\n    D3,\n    Eb3,\n    E3,\n    F3,\n    Gb3,\n    G3,\n    Ab3,\n    A3,\n    Bb3,\n    B3,\n    C4,\n    Db4,\n    D4,\n    Eb4,\n    E4,\n    F4,\n    Gb4,\n    G4,\n    Ab4,\n    A4,\n    Bb4,\n    B4,\n    C5,\n    Db5,\n    D5,\n    Eb5,\n    E5,\n    F5,\n    Gb5,\n    G5,\n    Ab5,\n    A5,\n    Bb5,\n    B5,\n    C6,\n    Db6,\n    D6,\n    Eb6,\n    E6,\n    F6,\n    Gb6,\n    G6,\n    Ab6,\n    A6,\n    Bb6,\n    B6,\n    C7,\n    Db7,\n    D7,\n    Eb7,\n    E7,\n    F7,\n    Gb7,\n    G7,\n    Ab7,\n    A7,\n    Bb7,\n    B7,\n];","\nimport k from './drummer/kick.wav';\nimport s from './drummer/snare.wav';\nimport h from './drummer/hihat.wav';\nimport r from './drummer/ride.wav';\nimport c from './drummer/crash.wav';\n\nexport const kick = k;\nexport const snare = s;\nexport const hihat = h;\nexport const ride = r;\nexport const crash = c;\nexport const drumset = [kick, snare, hihat, ride, crash];","'use strict';\n\n//unscrambling hints from https://github.com/ironss/accompaniser/blob/master/irealb_parser.lua\n//strings are broken up in 50 character segments. each segment undergoes character substitution addressed by obfusc50()\nexports.ireal = function(s){\n  let r = '', p;\n\n  while(s.length > 50){\n    p = s.substring(0, 50);\n    s = s.substring(50)\n    if(s.length < 2){\n      r = r + p;\n    }else{\n      r = r + obfusc50(p);\n    }\n  }\n  r = r + s;\n  return r;\n}\n\nfunction obfusc50 (s){\n  //the first 5 characters are switched with the last 5\n  let newString = s.split('');\n  for(let i = 0; i < 5; i++){\n    newString[49 - i] = s[i];\n    newString[i] = s[49 - i];\n  }\n  //characters 10-24 are also switched\n  for(let i = 10; i < 24; i++){\n    newString[49 - i] = s[i];\n    newString[i] = s[49 - i];\n  }\n  return newString.join('');\n}\n","'use strict';\n\n//regex:\n//  letters A-G and W (W is an invisible slash chord)\n//  {1} only one of the aforementioned letters\n//  followed by zero or more of these: + - ^ h o # b digit\n//  followed by an optional group (to catch slash chords)\n//    that starts with a slash\n//    followed by A-G\n//    followed by optional # or b\n\nconst chordRegex = /[A-GW]{1}[\\+\\-\\^\\dhob#suad]*(\\/[A-G][#b]?)?/g;\nconst musicPrefix = \"1r34LbKcu7\";\nconst unscramble = require('./unscramble');\n\nclass Music {\n  constructor(data){\n    const parts = data.split(musicPrefix);\n    this.raw = unscramble.ireal(parts[1]);\n    //TODO: read the time signature\n    this.timeSignature = 'T44';\n    const musicData = removeNonMusicalInfo(this.raw);\n    this.measures = getMeasures(musicData)\n  }\n}\nmodule.exports = Music;\n\nfunction getMeasures(data){\n  let measures = data.split(/\\||LZ|K|Z|\\{|\\}|\\[|\\]/g)//measures are delimited by |, LZ, {, } (repeat markers), [, ] (double barlines). Also splitting on K because Kcl seems to indicate a repeat of the previous measure. Z is the end of a song usually.\n\n  measures = fillSingleRepeats(measures);\n  measures = fillDoubleRepeats(measures);\n\n  measures = measures.map((x, index, array) => x.match(chordRegex))\n    .filter(x => !!x)  //filter out blank measures. if empty measures like N.C. are needed this has to be modified\n\n  measures = fillInvisibleSlashChords(measures);\n\n  return measures;\n}\n\nfunction removeNonMusicalInfo(data){\n  //remove all the non-musical information\n  data = removeFromString(data, /<.*?>/); //comments delimited by carets < ... >, non-greedy match. do this first as these may contain other symbols that we look for later on.\n  data = removeFromString(data, /\\*\\s*\\*/); //stars with empty space in between *  *\n  data = removeFromString(data, /\\*\\w/); //section markers *A, *B, *C\n  data = removeFromString(data, /T\\d+/); //time signatures T44, T34\n  data = removeFromString(data, /N\\d/); //repeat markers N1, N2, ...\n  data = removeFromString(data, /Y+/); //vertical spacers\n  data = removeFromString(data, 'XyQ'); //empty space\n  data = removeFromString(data, /[npUSQ]/); //n: N.C, p: pause slash, U: END, S: Segno, Q: Coda, \n  //s: small (consider using s when implementing chord duration)\n  return data;\n}\n\nfunction fillDoubleRepeats(measures){\n  const r = m => m.indexOf('r') >= 0;\n\n  //an 'r' becomes the two previous measures (drawn as a double angled bar)\n  let repeatMeasureIdx = measures.findIndex(r);\n  while(repeatMeasureIdx != -1){\n    measures.splice(repeatMeasureIdx, 1, measures[repeatMeasureIdx - 2], measures[repeatMeasureIdx - 1]);\n    repeatMeasureIdx = measures.findIndex(r);\n  }\n  return measures;\n}\n\nfunction fillSingleRepeats(measures){\n  //the repeat marker is Kcl but we've already split on K, so only cl is left over\n  //x appears in its own measure, (drawn as a single angled bar)\n  const xcl = m => m.indexOf('x') >= 0 || m.indexOf('cl') >= 0;\n\n  let repeatMeasureIdx = measures.findIndex(xcl);\n  while(repeatMeasureIdx != -1){\n    measures[repeatMeasureIdx] = measures[repeatMeasureIdx - 1];\n    repeatMeasureIdx = measures.findIndex(xcl);\n  }\n  return measures;\n}\n\nfunction fillInvisibleSlashChords(measures){\n  const W = m => m.some(c => c[0] === 'W');\n\n  let invisibleMeasureIdx = measures.findIndex(W);\n  while(invisibleMeasureIdx != -1){\n    const curMeasure = measures[invisibleMeasureIdx];\n    const invisibleChordIdx = curMeasure.findIndex(c => c[0] === 'W')\n\n    if(invisibleChordIdx > 0){\n      const previousChord = curMeasure[invisibleChordIdx - 1].split(\"/\")[0];\n      curMeasure[invisibleChordIdx] = curMeasure[invisibleChordIdx].replace('W', previousChord);\n    }else{\n      const previousMeasure = measures[invisibleMeasureIdx - 1];\n      const previousChord = previousMeasure[previousMeasure.length - 1].split(\"/\")[0];\n      curMeasure[invisibleChordIdx] = curMeasure[invisibleChordIdx].replace('W', previousChord);\n    }\n    invisibleMeasureIdx = measures.findIndex(W);\n  }\n  return measures;\n}\n\nfunction removeFromString(string, toRemove){\n  return string.split(toRemove).join('');\n}\n\n","'use strict';\n\nconst Music = require('./Music');\nconst musicPrefix = \"1r34LbKcu7\";\n\nclass Song {\n  constructor(data){\n    const parts = data.split(/=+/).filter(x => x != \"\"); //split on one or more equal signs, remove the blanks\n    let offset = 0\n    this.title = parts[0];\n    this.composer = parts[1];\n    this.style = parts[2];\n    this.key = parts[3];\n    this.transpose = null;\n    if(parts[4].indexOf(musicPrefix) !== 0){\n      offset = 1;\n      this.transpose = parseInt(parts[4]) || null;\n    }\n    this.music = new Music(parts[4 + offset]);\n    this.compStyle = parts[5 + offset] || null;\n    this.bpm = parseInt(parts[6 + offset]) || null;\n    this.repeats = parseInt(parts[7 + offset]) || null;\n  }\n}\n\nmodule.exports = Song;","'use strict';\n\nconst Song = require('./Song');\nconst regex = /.*?irealb:\\/\\/([^\"]*)/;\n\nclass Playlist {\n  constructor(data){\n    const percentEncoded = regex.exec(data);\n    const percentDecoded = decodeURIComponent(percentEncoded[1]);\n    const parts = percentDecoded.split(\"===\");  //songs are separated by ===\n    if(parts.length > 1) this.name = parts.pop();  //playlist name\n    this.songs = parts.map(x => new Song(x));\n  }\n}\n\nmodule.exports = Playlist;","'use strict';\n\nconst Playlist = require('./Playlist');\n\n//class hierarchy: Playlist has many Songs. Song has one Music.\n\nmodule.exports = Playlist;","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-note.svg)](https://www.npmjs.com/package/tonal-note)\n * [![tonal](https://img.shields.io/badge/tonal-note-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-note` is a collection of functions to manipulate musical notes in scientific notation\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * ## Usage\n *\n * ```js\n * import * as Note from \"tonal-note\"\n * // or const Note = require(\"tonal-note\")\n * Note.name(\"bb2\") // => \"Bb2\"\n * Note.chroma(\"bb2\") // => 10\n * Note.midi(\"a4\") // => 69\n * Note.freq(\"a4\") // => 440\n * Note.oct(\"G3\") // => 3\n *\n * // part of tonal\n * const Tonal = require(\"tonal\")\n * // or import Note from \"tonal\"\n * Tonal.Note.midi(\"d4\") // => 62\n * ```\n *\n * ## Install\n *\n * [![npm install tonal-note](https://nodei.co/npm/tonal-note.png?mini=true)](https://npmjs.org/package/tonal-note/)\n *\n * ## API Documentation\n *\n * @module Note\n */\n\nvar NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\n\n/**\n * Get a list of note names (pitch classes) within a octave\n *\n * @param {string} accTypes - (Optional, by default \" b#\"). A string with the\n * accidentals types: \" \" means no accidental, \"#\" means sharps, \"b\" mean flats,\n * can be conbined (see examples)\n * @return {Array}\n * @example\n * Note.names(\" b\") // => [ \"C\", \"Db\", \"D\", \"Eb\", \"E\", \"F\", \"Gb\", \"G\", \"Ab\", \"A\", \"Bb\", \"B\" ]\n * Note.names(\" #\") // => [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ]\n */\nexport var names = function (accTypes) { return typeof accTypes !== \"string\"\n    ? NAMES.slice()\n    : NAMES.filter(function (n) {\n        var acc = n[1] || \" \";\n        return accTypes.indexOf(acc) !== -1;\n      }); };\n\nvar SHARPS = names(\" #\");\nvar FLATS = names(\" b\");\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\n\n/**\n * Split a string into tokens related to note parts.\n * It returns an array of strings `[letter, accidental, octave, modifier]`\n *\n * It always returns an array\n *\n * @param {String} str\n * @return {Array} an array of note tokens\n * @example\n * Note.tokenize(\"C#2\") // => [\"C\", \"#\", \"2\", \"\"]\n * Note.tokenize(\"Db3 major\") // => [\"D\", \"b\", \"3\", \"major\"]\n * Note.tokenize(\"major\") // => [\"\", \"\", \"\", \"major\"]\n * Note.tokenize(\"##\") // => [\"\", \"##\", \"\", \"\"]\n * Note.tokenize() // => [\"\", \"\", \"\", \"\"]\n */\nexport function tokenize(str) {\n  if (typeof str !== \"string\") { str = \"\"; }\n  var m = REGEX.exec(str);\n  if (!m) { return null; }\n  return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\n}\n\nvar NO_NOTE = Object.freeze({\n  pc: null,\n  name: null,\n  step: null,\n  alt: null,\n  oct: null,\n  octStr: null,\n  chroma: null,\n  midi: null,\n  freq: null\n});\n\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\nvar properties = function (str) {\n  var tokens = tokenize(str);\n  if (tokens[0] === \"\" || tokens[3] !== \"\") { return NO_NOTE; }\n  var letter = tokens[0];\n  var acc = tokens[1];\n  var octStr = tokens[2];\n  var p = { letter: letter, acc: acc, octStr: octStr };\n  p.pc = p.letter + p.acc;\n  p.name = p.pc + octStr;\n  p.step = (p.letter.charCodeAt(0) + 3) % 7;\n  p.alt = p.acc[0] === \"b\" ? -p.acc.length : p.acc.length;\n  p.oct = octStr.length ? +octStr : null;\n  p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\n  p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\n  p.freq = midiToFreq(p.midi);\n  return Object.freeze(p);\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\n/**\n * Get note properties. It returns an object with the following information:\n *\n * - name{String}: the note name. The letter is always in uppercase\n * - letter {String}: the note letter, always in uppercase\n * - acc {String}: the note accidentals\n * - octave {Number}: the octave or null if not present\n * - pc{String}: the pitch class (letter + accidentals)\n * - step {Number}: number equivalent of the note letter. 0 means C ... 6 means B.\n * - alt {Number}: number equivalent of accidentals (negative are flats, positive sharps)\n * - chroma {Number}: number equivalent of the pitch class, where 0 is C, 1 is C# or Db, 2 is D...\n * - midi {Number}: the note midi number\n * - freq {Number}: the frequency using an equal temperament at 440Hz\n *\n * This function *always* returns an object with all this properties, but if it\"s\n * not a valid note all properties will be null.\n *\n * The returned object can\"t be mutated.\n *\n * @param {String} note - the note name in scientific notation\n * @return {Object} an object with the properties (or an object will all properties\n * set to null if not valid note)\n * @example\n * Note.props(\"fx-3\").name // => \"F##-3\"\n * Note.props(\"invalid\").name // => null\n * Note.props(\"C#3\").oct // => 3\n * Note.props().oct // => null\n */\nexport var props = memo(properties);\n\n/**\n * Given a note name, return the note name or null if not valid note.\n * The note name will ALWAYS have the letter in upercase and accidentals\n * using # or b\n *\n * Can be used to test if a string is a valid note name.\n *\n * @function\n * @param {Pitch|string}\n * @return {string}\n *\n * @example\n * Note.name(\"cb2\") // => \"Cb2\"\n * [\"c\", \"db3\", \"2\", \"g+\", \"gx4\"].map(Note.name) // => [\"C\", \"Db3\", null, null, \"G##4\"]\n */\nexport var name = function (str) { return props(str).name; };\n\n/**\n * Get pitch class of a note. The note can be a string or a pitch array.\n *\n * @function\n * @param {string|Pitch}\n * @return {string} the pitch class\n * @example\n * Note.pc(\"Db3\") // => \"Db\"\n * [\"db3\", \"bb6\", \"fx2\"].map(Note.pc) // => [ \"Db\", \"Bb\", \"F##\"]\n */\nexport var pc = function (str) { return props(str).pc; };\n\n/**\n * Get the note midi number\n * (an alias of tonal-midi `toMidi` function)\n *\n * @function\n * @param {string|Number} note - the note to get the midi number from\n * @return {Integer} the midi number or null if not valid pitch\n * @example\n * Note.midi(\"C4\") // => 60\n * Note.midi(60) // => 60\n * @see midi.toMidi\n */\nexport var midi = function (note) { return props(note).midi || +note || null; };\n\n/**\n * Get the frequency from midi number\n *\n * @param {Number} midi - the note midi number\n * @param {Number} tuning - (Optional) 440 by default\n * @return {Number} the frequency or null if not valid note midi\n */\nexport var midiToFreq = function (midi, tuning) {\n    if ( tuning === void 0 ) tuning = 440;\n\n    return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\n};\n\n/**\n * Get the frequency of a note\n *\n * @function\n * @param {string|Number} note - the note name or midi note number\n * @return {Number} the frequency\n * @example\n * Note.freq(\"A4\") // => 440\n * Note.freq(69) // => 440\n */\nexport var freq = function (note) { return props(note).freq || midiToFreq(note); };\n\nvar L2 = Math.log(2);\nvar L440 = Math.log(440);\n/**\n * Get the midi number from a frequency in hertz. The midi number can\n * contain decimals (with two digits precission)\n *\n * @param {Number} frequency\n * @return {Number}\n * @example\n * Note.freqToMidi(220)); //=> 57;\n * Note.freqToMidi(261.62)); //=> 60;\n * Note.freqToMidi(261)); //=> 59.96;\n */\nexport var freqToMidi = function (freq) {\n  var v = 12 * (Math.log(freq) - L440) / L2 + 69;\n  return Math.round(v * 100) / 100;\n};\n\n/**\n * Return the chroma of a note. The chroma is the numeric equivalent to the\n * pitch class, where 0 is C, 1 is C# or Db, 2 is D... 11 is B\n *\n * @param {string} note - the note name\n * @return {Integer} the chroma number\n * @example\n * Note.chroma(\"Cb\") // => 11\n * [\"C\", \"D\", \"E\", \"F\"].map(Note.chroma) // => [0, 2, 4, 5]\n */\nexport var chroma = function (str) { return props(str).chroma; };\n\n/**\n * Get the octave of the given pitch\n *\n * @function\n * @param {string} note - the note\n * @return {Integer} the octave or null if doesn\"t have an octave or not a valid note\n * @example\n * Note.oct(\"C#4\") // => 4\n * Note.oct(\"C\") // => null\n * Note.oct(\"blah\") // => undefined\n */\nexport var oct = function (str) { return props(str).oct; };\n\nvar LETTERS = \"CDEFGAB\";\n/**\n * Given a step number return it\"s letter (0 = C, 1 = D, 2 = E)\n * @param {number} step\n * @return {string} the letter\n * @example\n * Note.stepToLetter(3) // => \"F\"\n */\nexport var stepToLetter = function (step) { return LETTERS[step]; };\n\nvar fillStr = function (s, n) { return Array(n + 1).join(s); };\nvar numToStr = function (num, op) { return (typeof num !== \"number\" ? \"\" : op(num)); };\n\n/**\n * Given an alteration number, return the accidentals\n * @param {Number} alt\n * @return {String}\n * @example\n * Note.altToAcc(-3) // => \"bbb\"\n */\nexport var altToAcc = function (alt) { return numToStr(alt, function (alt) { return (alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt)); }); };\n\n/**\n * Creates a note name in scientific notation from note properties,\n * and optionally another note name.\n * It receives an object with:\n * - step: the note step (0 = C, 1 = D, ... 6 = B)\n * - alt: (optional) the alteration. Negative numbers are flats, positive sharps\n * - oct: (optional) the octave\n *\n * Optionally it receives another note as a \"base\", meaning that any prop not explicitly\n * received on the first parameter will be taken from that base note. That way it can be used\n * as an immutable \"set\" operator for a that base note\n *\n * @function\n * @param {Object} props - the note properties\n * @param {String} [baseNote] - note to build the result from. If given, it returns\n * the result of applying the given props to this note.\n * @return {String} the note name in scientific notation or null if not valid properties\n * @example\n * Note.from({ step: 5 }) // => \"A\"\n * Note.from({ step: 1, acc: -1 }) // => \"Db\"\n * Note.from({ step: 2, acc: 2, oct: 2 }) // => \"E##2\"\n * Note.from({ step: 7 }) // => null\n * Note.from({alt: 1, oct: 3}, \"C4\") // => \"C#3\"\n */\nexport var from = function (fromProps, baseNote) {\n  if ( fromProps === void 0 ) fromProps = {};\n  if ( baseNote === void 0 ) baseNote = null;\n\n  var ref = baseNote\n    ? Object.assign({}, props(baseNote), fromProps)\n    : fromProps;\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var letter = stepToLetter(step);\n  if (!letter) { return null; }\n  var pc = letter + altToAcc(alt);\n  return oct || oct === 0 ? pc + oct : pc;\n};\n\n/**\n * Deprecated. This is kept for backwards compatibility only.\n * Use Note.from instead\n */\nexport var build = from;\n\n/**\n * Given a midi number, returns a note name. The altered notes will have\n * flats unless explicitly set with the optional `useSharps` parameter.\n *\n * @function\n * @param {number} midi - the midi note number\n * @param {boolean} useSharps - (Optional) set to true to use sharps instead of flats\n * @return {string} the note name\n * @example\n * Note.fromMidi(61) // => \"Db4\"\n * Note.fromMidi(61, true) // => \"C#4\"\n * // it rounds to nearest note\n * Note.fromMidi(61.7) // => \"D4\"\n */\nexport function fromMidi(num, sharps) {\n  num = Math.round(num);\n  var pcs = sharps === true ? SHARPS : FLATS;\n  var pc = pcs[num % 12];\n  var o = Math.floor(num / 12) - 1;\n  return pc + o;\n}\n\n/**\n * Simplify the note: find an enhramonic note with less accidentals.\n *\n * @param {String} note - the note to be simplified\n * @param {boolean} useSameAccType - (optional, true by default) set to true\n * to ensure the returned note has the same accidental types that the given note\n * @return {String} the simplfiied note or null if not valid note\n * @example\n * Note.simplify(\"C##\") // => \"D\"\n * Note.simplify(\"C###\") // => \"D#\"\n * Note.simplify(\"C###\", false) // => \"Eb\"\n * Note.simplify(\"B#4\") // => \"C5\"\n */\nexport var simplify = function (note, sameAcc) {\n  var ref = props(note);\n  var alt = ref.alt;\n  var chroma = ref.chroma;\n  var midi = ref.midi;\n  if (chroma === null) { return null; }\n  var useSharps = sameAcc === false ? alt < 0 : alt > 0;\n  return midi === null\n    ? pc(fromMidi(chroma, useSharps))\n    : fromMidi(midi, useSharps);\n};\n\n/**\n * Get the simplified and enhramonic note of the given one.\n *\n * @param {String} note\n * @return {String} the enhramonic note\n * @example\n * Note.enharmonic(\"Db\") // => \"C#\"\n * Note.enhramonic(\"C\") // => \"C\"\n */\nexport var enharmonic = function (note) { return simplify(note, false); };\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array)\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\nimport { midi, name } from \"tonal-note\";\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ ; }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ ; }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b ? ascR(a, b - a + 1) : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate(times, arr) {\n  var len = arr.length;\n  var n = (times % len + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport var compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (n) {\n  var m = midi(n);\n  return m !== null ? m : midi(n + \"-100\");\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nexport function sort(src) {\n  return compact(src.map(name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nexport function unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nexport var shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nexport var permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-interval.svg)](https://www.npmjs.com/package/tonal-interval)\n * [![tonal](https://img.shields.io/badge/tonal-interval-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-interval` is a collection of functions to create and manipulate music intervals.\n *\n * The intervals are strings in shorthand notation. Two variations are supported:\n *\n * - standard shorthand notation: type and number, for example: \"M3\", \"d-4\"\n * - inverse shorthand notation: number and then type, for example: \"3M\", \"-4d\"\n *\n * The problem with the standard shorthand notation is that some strings can be\n * parsed as notes or intervals, for example: \"A4\" can be note A in 4th octave\n * or an augmented four. To remove ambiguity, the prefered notation in tonal is the\n * inverse shortand notation.\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * ## Usage\n *\n * ```js\n * // es6\n * import * as Interval from \"tonal-interval\"\n * // es5\n * const Interval = require(\"tonal-interval\")\n * // part of tonal\n * import { Interval } from \"tonal\"\n *\n * Interval.semitones(\"4P\") // => 5\n * Interval.invert(\"3m\") // => \"6M\"\n * Interval.simplify(\"9m\") // => \"2m\"\n * ```\n *\n * ## Install\n *\n * [![npm install tonal-interval](https://nodei.co/npm/tonal-interval.png?mini=true)](https://npmjs.org/package/tonal-interval/)\n *\n * ## API Documentation\n *\n * @module Interval\n */\n// shorthand tonal notation (with quality after number)\nvar IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\n// standard shorthand notation (with quality before number)\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\nvar TYPES = \"PMMPPMM\";\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\n\n/**\n * List basic (perfect, major, minor) interval names within a octave\n * @param {String} qualities - (Optional, default \"PMm\") the valid types\n * @return {Array} the interval names\n * @example\n * Interval.names() // => [ \"1P\", \"2m\", \"2M\", \"3m\", \"3M\", \"4P\", \"5P\", \"6m\", \"6M\", \"7m\", \"7M\", \"8P\" ]\n * Interval.names(\"P\") // => [ \"1P\", \"4P\", \"5P\", \"8P\" ]\n * Interval.names(\"PM\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\n * Interval.names(\"Pm\") // => [ \"1P\", \"2m\", \"3m\", \"4P\", \"5P\", \"6m\", \"7m\", \"8P\" ]\n * Interval.names(\"d\") // => []\n */\nexport var names = function (types) { return typeof types !== \"string\"\n    ? NAMES.slice()\n    : NAMES.filter(function (n) { return types.indexOf(n[1]) !== -1; }); };\n\nexport var tokenize = function (str) {\n  var m = REGEX.exec(str);\n  return m === null ? null : m[1] ? [m[1], m[2]] : [m[4], m[3]];\n};\n\nvar NO_IVL = Object.freeze({\n  name: null,\n  num: null,\n  q: null,\n  step: null,\n  alt: null,\n  dir: null,\n  type: null,\n  simple: null,\n  semitones: null,\n  chroma: null\n});\n\nvar fillStr = function (s, n) { return Array(Math.abs(n) + 1).join(s); };\n\nvar qToAlt = function (type, q) {\n  if (q === \"M\" && type === \"M\") { return 0; }\n  if (q === \"P\" && type === \"P\") { return 0; }\n  if (q === \"m\" && type === \"M\") { return -1; }\n  if (/^A+$/.test(q)) { return q.length; }\n  if (/^d+$/.test(q)) { return type === \"P\" ? -q.length : -q.length - 1; }\n  return null;\n};\n\nvar altToQ = function (type, alt) {\n  if (alt === 0) { return type === \"M\" ? \"M\" : \"P\"; }\n  else if (alt === -1 && type === \"M\") { return \"m\"; }\n  else if (alt > 0) { return fillStr(\"A\", alt); }\n  else if (alt < 0) { return fillStr(\"d\", type === \"P\" ? alt : alt + 1); }\n  else { return null; }\n};\n\nvar numToStep = function (num) { return (Math.abs(num) - 1) % 7; };\n\nvar properties = function (str) {\n  var t = tokenize(str);\n  if (t === null) { return NO_IVL; }\n  var p = { num: +t[0], q: t[1] };\n  p.step = numToStep(p.num);\n  p.type = TYPES[p.step];\n  if (p.type === \"M\" && p.q === \"P\") { return NO_IVL; }\n\n  p.name = \"\" + p.num + p.q;\n  p.dir = p.num < 0 ? -1 : 1;\n  p.simple = p.num === 8 || p.num === -8 ? p.num : p.dir * (p.step + 1);\n  p.alt = qToAlt(p.type, p.q);\n  p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\n  p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\n  p.chroma = ((p.dir * (SIZES[p.step] + p.alt)) % 12 + 12) % 12;\n  return Object.freeze(p);\n};\n\nvar cache = {};\n/**\n * Get interval properties. It returns an object with:\n *\n * - name: name\n * - num: number\n * - q: quality\n * - step: step\n * - alt: alteration\n * - dir: direction (1 ascending, -1 descending)\n * - type: \"P\" or \"M\" for perfectable or majorable\n * - simple: the simplified number\n * - semitones: the size in semitones\n * - chroma: the interval chroma\n * - ic: the interval class\n *\n * @function\n * @param {String} interval - the interval\n * @return {Object} the interval in the form [number, alt]\n */\nexport function props(str) {\n  if (typeof str !== \"string\") { return NO_IVL; }\n  return cache[str] || (cache[str] = properties(str));\n}\n\n/**\n * Get the number of the interval\n *\n * @function\n * @param {String} interval - the interval\n * @return {Integer}\n * @example\n * Interval.num(\"m2\") // => 2\n * Interval.num(\"P9\") // => 9\n * Interval.num(\"P-4\") // => -4\n */\nexport var num = function (str) { return props(str).num; };\n\n/**\n * Get interval name. Can be used to test if it\"s an interval. It accepts intervals\n * as pitch or string in shorthand notation or tonal notation. It returns always\n * intervals in tonal notation.\n *\n * @function\n * @param {String} interval - the interval string or array\n * @return {String} the interval name or null if not valid interval\n * @example\n * Interval.name(\"m-3\") // => \"-3m\"\n * Interval.name(\"3\") // => null\n */\nexport var name = function (str) { return props(str).name; };\n\n/**\n * Get size in semitones of an interval\n *\n * @function\n * @param {String} ivl\n * @return {Integer} the number of semitones or null if not an interval\n * @example\n * import { semitones } from \"tonal-interval\"\n * semitones(\"P4\") // => 5\n * // or using tonal\n * Tonal.Interval.semitones(\"P5\") // => 7\n */\nexport var semitones = function (str) { return props(str).semitones; };\n\n/**\n * Get the chroma of the interval. The chroma is a number between 0 and 7\n * that represents the position within an octave (pitch set)\n *\n * @function\n * @param {String} str\n * @return {Number}\n */\nexport var chroma = function (str) { return props(str).chroma; };\n\n/**\n * Get the [interval class](https://en.wikipedia.org/wiki/Interval_class)\n * number of a given interval.\n *\n * In musical set theory, an interval class is the shortest distance in\n * pitch class space between two unordered pitch classes\n *\n * @function\n * @param {String|Integer} interval - the interval or the number of semitones\n * @return {Integer} A value between 0 and 6\n *\n * @example\n * Interval.ic(\"P8\") // => 0\n * Interval.ic(\"m6\") // => 4\n * Interval.ic(10) // => 2\n * [\"P1\", \"M2\", \"M3\", \"P4\", \"P5\", \"M6\", \"M7\"].map(ic) // => [0, 2, 4, 5, 5, 3, 1]\n */\nexport var ic = function (ivl) {\n  if (typeof ivl === \"string\") { ivl = props(ivl).chroma; }\n  return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\n};\n\n/**\n * Given a interval property object, get the interval name\n *\n * The properties must contain a `num` *or* `step`, and `alt`:\n *\n * - num: the interval number\n * - step: the interval step (overrides the num property)\n * - alt: the interval alteration\n * - oct: (Optional) the number of octaves\n * - dir: (Optional) the direction\n *\n * @function\n * @param {Object} props - the interval property object\n *\n * @return {String} the interval name\n * @example\n * Interval.build({ step: 1, alt: -1, oct: 0, dir: 1 }) // => \"1d\"\n * Interval.build({ num: 9, alt: -1 }) // => \"9m\"\n */\nexport var build = function (ref) {\n  if ( ref === void 0 ) ref = {};\n  var num = ref.num;\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct; if ( oct === void 0 ) oct = 1;\n  var dir = ref.dir;\n\n  if (step !== undefined) { num = step + 1 + 7 * oct; }\n  if (num === undefined) { return null; }\n\n  var d = dir < 0 ? \"-\" : \"\";\n  var type = TYPES[numToStep(num)];\n  return d + num + altToQ(type, alt);\n};\n\n/**\n * Get the simplified version of an interval.\n *\n * @function\n * @param {String} interval - the interval to simplify\n * @return {String} the simplified interval\n *\n * @example\n * Interval.simplify(\"9M\") // => \"2M\"\n * [\"8P\", \"9M\", \"10M\", \"11P\", \"12P\", \"13M\", \"14M\", \"15P\"].map(Interval.simplify)\n * // => [ \"8P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\n * Interval.simplify(\"2M\") // => \"2M\"\n * Interval.simplify(\"-2M\") // => \"7m\"\n */\nexport var simplify = function (str) {\n  var p = props(str);\n  if (p === NO_IVL) { return null; }\n  return p.simple + p.q;\n};\n\n/**\n * Get the inversion (https://en.wikipedia.org/wiki/Inversion_(music)#Intervals)\n * of an interval.\n *\n * @function\n * @param {String} interval - the interval to invert in interval shorthand\n * notation or interval array notation\n * @return {String} the inverted interval\n *\n * @example\n * Interval.invert(\"3m\") // => \"6M\"\n * Interval.invert(\"2M\") // => \"7m\"\n */\nexport var invert = function (str) {\n  var p = props(str);\n  if (p === NO_IVL) { return null; }\n  var step = (7 - p.step) % 7;\n  var alt = p.type === \"P\" ? -p.alt : -(p.alt + 1);\n  return build({ step: step, alt: alt, oct: p.oct, dir: p.dir });\n};\n\n// interval numbers\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\n// interval qualities\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\n\n/**\n * Get interval name from semitones number. Since there are several interval\n * names for the same number, the name it\"s arbitraty, but deterministic.\n *\n * @function\n * @param {Integer} num - the number of semitones (can be negative)\n * @return {String} the interval name\n * @example\n * import { fromSemitones } from \"tonal-interval\"\n * fromSemitones(7) // => \"5P\"\n * // or using tonal\n * Tonal.Distance.fromSemitones(-7) // => \"-5P\"\n */\nexport var fromSemitones = function (num) {\n  var d = num < 0 ? -1 : 1;\n  var n = Math.abs(num);\n  var c = n % 12;\n  var o = Math.floor(n / 12);\n  return d * (IN[c] + 7 * o) + IQ[c];\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-distance.svg)](https://www.npmjs.com/package/tonal-distance)\n * [![tonal](https://img.shields.io/badge/tonal-distance-yellow.svg)](https://github.com/danigb/tonal/tree/master/packages/tonal/distance)\n *\n * Transpose notes by intervals and find distances between notes\n *\n * @example\n * // es6\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"C3\", \"C4\") // => \"1P\"\n *\n * @example\n * // es6 import selected functions\n * import { interval, semitones, transpose } from \"tonal-distance\"\n *\n * semitones(\"C\" ,\"D\") // => 2\n * interval(\"C4\", \"G4\") // => \"5P\"\n * transpose(\"C4\", \"P5\") // => \"G4\"\n *\n * @example\n * // included in tonal facade\n * const Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(\"C4\", \"P5\")\n * Tonal.Distance.transposeBy(\"P5\", \"C4\")\n *\n * @module Distance\n */\nimport { props as noteProps, build as fromNote } from \"tonal-note\";\nimport { props as iprops, build as ibuild } from \"tonal-interval\";\n\n// Map from letter step to number of fifths starting from \"C\":\n// { C: 0, D: 2, E: 4, F: -1, G: 1, A: 3, B: 5 }\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n\n// Given a number of fifths, return the octaves they span\nvar fOcts = function (f) { return Math.floor(f * 7 / 12); };\n\n// Get the number of octaves it span each step\nvar FIFTH_OCTS = FIFTHS.map(fOcts);\n\nvar encode = function (ref) {\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var dir = ref.dir; if ( dir === void 0 ) dir = 1;\n\n  var f = FIFTHS[step] + 7 * alt;\n  if (oct === null) { return [dir * f]; }\n  var o = oct - FIFTH_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n};\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nvar STEPS = [3, 0, 4, 1, 5, 2, 6];\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f) {\n  var i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\nvar decode = function (f, o, dir) {\n  var step = STEPS[unaltered(f)];\n  var alt = Math.floor((f + 1) / 7);\n  if (o === undefined) { return { step: step, alt: alt, dir: dir }; }\n  var oct = o + 4 * alt + FIFTH_OCTS[step];\n  return { step: step, alt: alt, oct: oct, dir: dir };\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\nvar encoder = function (props) { return memo(function (str) {\n    var p = props(str);\n    return p.name === null ? null : encode(p);\n  }); };\n\nvar encodeNote = encoder(noteProps);\nvar encodeIvl = encoder(iprops);\n\n/**\n * Transpose a note by an interval. The note can be a pitch class.\n *\n * This function can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranpose } from \"tonal-distance\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * // it works with pitch classes\n * transpose(\"D\", \"3M\") // => \"F#\"\n * // can be partially applied\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(transpose(\"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nexport function transpose(note, interval) {\n  if (arguments.length === 1) { return function (i) { return transpose(note, i); }; }\n  var n = encodeNote(note);\n  var i = encodeIvl(interval);\n  if (n === null || i === null) { return null; }\n  var tr = n.length === 1 ? [n[0] + i[0]] : [n[0] + i[0], n[1] + i[1]];\n  return fromNote(decode(tr[0], tr[1]));\n}\n\n/**\n * Transpose a pitch class by a number of perfect fifths.\n *\n * It can be partially applied.\n *\n * @function\n * @param {String} pitchClass - the pitch class\n * @param {Integer} fifhts - the number of fifths\n * @return {String} the transposed pitch class\n *\n * @example\n * import { trFifths } from \"tonal-transpose\"\n * [0, 1, 2, 3, 4].map(trFifths(\"C\")) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n * // or using tonal\n * Distance.trFifths(\"G4\", 1) // => \"D\"\n */\n\nexport function trFifths(note, fifths) {\n  if (arguments.length === 1) { return function (f) { return trFifths(note, f); }; }\n  var n = encodeNote(note);\n  if (n === null) { return null; }\n  return fromNote(decode(n[0] + fifths));\n}\n\n/**\n * Get the distance in fifths between pitch classes\n *\n * Can be partially applied.\n *\n * @param {String} to - note or pitch class\n * @param {String} from - note or pitch class\n */\nexport function fifths(from, to) {\n  if (arguments.length === 1) { return function (to) { return fifths(from, to); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (t === null || f === null) { return null; }\n  return t[0] - f[0];\n}\n\n/**\n * The same as transpose with the arguments inverted.\n *\n * Can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranposeBy } from \"tonal-distance\"\n * transposeBy(\"3m\", \"5P\") // => \"7m\"\n */\nexport function transposeBy(interval, note) {\n  if (arguments.length === 1) { return function (n) { return transpose(n, interval); }; }\n  return transpose(note, interval);\n}\n\nvar isDescending = function (e) { return e[0] * 7 + e[1] * 12 < 0; };\nvar decodeIvl = function (i) { return isDescending(i) ? decode(-i[0], -i[1], -1) : decode(i[0], i[1], 1); };\n\nexport function addIntervals(ivl1, ivl2, dir) {\n  var i1 = encodeIvl(ivl1);\n  var i2 = encodeIvl(ivl2);\n  if (i1 === null || i2 === null) { return null; }\n  var i = [i1[0] + dir * i2[0], i1[1] + dir * i2[1]];\n  return ibuild(decodeIvl(i));\n}\n\n/**\n * Add two intervals\n *\n * Can be partially applied.\n *\n * @param {String} interval1\n * @param {String} interval2\n * @return {String} the resulting interval\n * @example\n * import { add } from \"tonal-distance\"\n * add(\"3m\", \"5P\") // => \"7m\"\n */\nexport function add(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, 1);\n}\n\n/**\n * Subtract two intervals\n *\n * Can be partially applied\n *\n * @param {String} minuend\n * @param {String} subtrahend\n * @return {String} interval diference\n */\nexport function subtract(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, -1);\n}\n\n/**\n * Find the interval between two pitches. It works with pitch classes\n * (both must be pitch classes and the interval is always ascending)\n *\n * Can be partially applied\n *\n * @param {String} from - distance from\n * @param {String} to - distance to\n * @return {String} the interval distance\n *\n * @example\n * import { interval } from \"tonal-distance\"\n * interval(\"C2\", \"C3\") // => \"P8\"\n * interval(\"G\", \"B\") // => \"M3\"\n *\n * @example\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"M2\", \"P5\") // => \"P4\"\n */\nexport function interval(from, to) {\n  if (arguments.length === 1) { return function (t) { return interval(from, t); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (f === null || t === null || f.length !== t.length) { return null; }\n  var d =\n    f.length === 1\n      ? [t[0] - f[0], -Math.floor((t[0] - f[0]) * 7 / 12)]\n      : [t[0] - f[0], t[1] - f[1]];\n  return ibuild(decodeIvl(d));\n}\n\n/**\n * Get the distance between two notes in semitones\n *\n * @param {String|Pitch} from - first note\n * @param {String|Pitch} to - last note\n * @return {Integer} the distance in semitones or null if not valid notes\n * @example\n * import { semitones } from \"tonal-distance\"\n * semitones(\"C3\", \"A2\") // => -3\n * // or use tonal\n * Tonal.Distance.semitones(\"C3\", \"G3\") // => 7\n */\nexport function semitones(from, to) {\n  if (arguments.length === 1) { return function (t) { return semitones(from, t); }; }\n  var f = noteProps(from);\n  var t = noteProps(to);\n  return f.midi !== null && t.midi !== null\n    ? t.midi - f.midi\n    : f.chroma !== null && t.chroma !== null\n      ? (t.chroma - f.chroma + 12) % 12\n      : null;\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\nimport { chroma as notechr } from \"tonal-note\";\nimport { chroma as ivlchr } from \"tonal-interval\";\nimport { rotate, range, compact } from \"tonal-array\";\n\nvar chr = function (str) { return notechr(str) || ivlchr(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nexport function chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nexport function chromas(n) {\n  all = all || range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nexport function modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return compact(\n    binary.map(function(_, i) {\n      var r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nexport function isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nexport function intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nexport function includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n *\n * `tonal-dictionary` contains a dictionary of musical scales and chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Dictionary from \"tonal-dictionary\"\n * // es5\n * const Dictionary = require(\"tonal-dictionary\")\n *\n * @example\n * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n *\n * @module Dictionary\n */\nimport sdata from \"./data/scales.json\";\nimport cdata from \"./data/chords.json\";\nimport { chroma } from \"tonal-pcset\";\n\nexport var dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = chroma(ivls);\n\n    add(key, ivls, chr);\n    if (alias) { alias.forEach(function (a) { return add(a, ivls, chr); }); }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) { return data[name]; };\n  dict.names = function (p) {\n    if (typeof p === \"string\") { return (index[p] || []).slice(); }\n    else { return (p === true ? allKeys : keys).slice(); }\n  };\n  return dict;\n};\n\nexport var combine = function (a, b) {\n  var dict = function (name) { return a(name) || b(name); };\n  dict.names = function (p) { return a.names(p).concat(b.names(p)); };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nexport var scale = dictionary(sdata);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nexport var chord = dictionary(cdata);\nexport var pcset = combine(scale, chord);\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-scale.svg?style=flat-square)](https://www.npmjs.com/package/tonal-scale)\n *\n * A scale is a collection of pitches in ascending or descending order.\n *\n * This module provides functions to get and manipulate scales.\n *\n * @example\n * // es6\n * import * as Scale from \"tonal-scale\"\n * // es5\n * const Scale = require(\"tonal-scale\");\n *\n * @example\n * Scale.notes(\"Ab bebop\") // => [ \"Ab\", \"Bb\", \"C\", \"Db\", \"Eb\", \"F\", \"Gb\", \"G\" ]\n * Scale.names() => [\"major\", \"minor\", ...]\n * @module Scale\n */\nimport { name as noteName, pc } from \"tonal-note\";\nimport {\n  modes as pcsetModes,\n  chroma,\n  isSubsetOf,\n  isSupersetOf\n} from \"tonal-pcset\";\nimport { transpose } from \"tonal-distance\";\nimport { scale, chord } from \"tonal-dictionary\";\nimport { compact, unique, rotate } from \"tonal-array\";\n\nvar NO_SCALE = Object.freeze({\n  name: null,\n  intervals: [],\n  names: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = scale(name);\n  if (!intervals) { return NO_SCALE; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = scale.names(s.chroma);\n  return Object.freeze(s);\n};\n\nvar memoize = function (fn, cache) { return function (str) { return cache[str] || (cache[str] = fn(str)); }; };\n\n/**\n * Get scale properties. It returns an object with:\n * - name: the scale name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the scale intervals\n * - chroma:  scale croma (see pcset)\n * - setnum: scale chroma number\n *\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Object}\n */\nexport var props = memoize(properties, {});\n\n/**\n * Return the available scale names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the scale names\n *\n * @example\n * Scale.names() // => [\"maj7\", ...]\n */\nexport var names = scale.names;\n\n/**\n * Given a scale name, return its intervals. The name can be the type and\n * optionally the tonic (which is ignored)\n *\n * It retruns an empty array when no scale found\n *\n * @function\n * @param {String} name - the scale name (tonic and type, tonic is optional)\n * @return {Array<String>} the scale intervals if is a known scale or an empty\n * array if no scale found\n * @example\n * Scale.intervals(\"major\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\" ]\n */\nexport var intervals = function (name) {\n  var p = tokenize(name);\n  return props(p[1]).intervals;\n};\n\n/**\n * Get the notes (pitch classes) of a scale.\n *\n * Note that it always returns an array, and the values are only pitch classes.\n *\n * @function\n * @param {String} tonic\n * @param {String} nameOrTonic - the scale name or tonic (if 2nd param)\n * @param {String} [name] - the scale name without tonic\n * @return {Array} a pitch classes array\n *\n * @example\n * Scale.notes(\"C\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C4\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"A4\", \"no-scale\") // => []\n * Scale.notes(\"blah\", \"major\") // => []\n */\nexport function notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return intervals(name).map(transpose(p[0]));\n}\n\n/**\n * Check if the given name is a known scale from the scales dictionary\n *\n * @function\n * @param {String} name - the scale name\n * @return {Boolean}\n */\nexport function exists(name) {\n  var p = tokenize(name);\n  return scale(p[1]) !== undefined;\n}\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {String} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * Scale.tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * Scale.tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * Scale.tokenize() // => [\"\", \"\"]\n */\nexport function tokenize(str) {\n  if (typeof str !== \"string\") { return [\"\", \"\"]; }\n  var i = str.indexOf(\" \");\n  var tonic = noteName(str.substring(0, i)) || noteName(str) || \"\";\n  var name = tonic !== \"\" ? str.substring(tonic.length + 1) : str;\n  return [tonic, name.length ? name : \"\"];\n}\n\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {String} name - scale name\n */\nexport var modeNames = function (name) {\n  var ivls = intervals(name);\n  var tonics = notes(name);\n\n  return pcsetModes(ivls)\n    .map(function (chroma, i) {\n      var name = scale.names(chroma)[0];\n      if (name) { return [tonics[i] || ivls[i], name]; }\n    })\n    .filter(function (x) { return x; });\n};\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {String} name\n */\nexport var chords = function (name) {\n  var inScale = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return inScale(chord(name)); });\n};\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {Array} notes\n * @return {Array}\n */\nexport var toScale = function (notes) {\n  var pcset = compact(notes.map(pc));\n  if (!pcset.length) { return pcset; }\n  var tonic = pcset[0];\n  var scale = unique(pcset);\n  return rotate(scale.indexOf(tonic), scale);\n};\n\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSuperset(scale(name)); });\n};\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of scale names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return scale.names().filter(function (name) { return isSubset(scale(name)); });\n};\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-chord.svg)](https://www.npmjs.com/package/tonal-chord)\n * [![tonal](https://img.shields.io/badge/tonal-chord-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-chord` is a collection of functions to manipulate musical chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Chord from \"tonal-chord\"\n * // es5\n * const Chord = require(\"tonal-chord\")\n *\n * @example\n * Chord.notes(\"CMaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n *\n * @module Chord\n */\nimport { tokenize as split } from \"tonal-note\";\nimport { transpose } from \"tonal-distance\";\nimport { chord } from \"tonal-dictionary\";\nimport { chroma, isSubsetOf, isSupersetOf } from \"tonal-pcset\";\n\n/**\n * Return the available chord names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the chord names\n *\n * @example\n * Chord.names() // => [\"maj7\", ...]\n */\nexport var names = chord.names;\n\nvar NO_CHORD = Object.freeze({\n  name: null,\n  names: [],\n  intervals: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = chord(name);\n  if (!intervals) { return NO_CHORD; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = chord.names(s.chroma);\n  return s;\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\n/**\n * Get chord properties. It returns an object with:\n *\n * - name: the chord name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the chord intervals\n * - chroma:  chord croma (see pcset)\n * - setnum: chord chroma number\n *\n * @function\n * @param {String} name - the chord name (without tonic)\n * @return {Object} an object with the properties or a object with all properties\n * set to null if not valid chord name\n */\nexport var props = memo(properties);\n\n/**\n * Get chord intervals. It always returns an array\n *\n * @function\n * @param {String} name - the chord name (optionally a tonic and type)\n * @return {Array<String>} a list of intervals or null if the type is not known\n */\nexport var intervals = function (name) { return props(tokenize(name)[1]).intervals; };\n\n/**\n * Get the chord notes of a chord. This function accepts either a chord name\n * (for example: \"Cmaj7\") or a list of notes.\n *\n * It always returns an array, even if the chord is not found.\n *\n * @function\n * @param {String} nameOrTonic - name of the chord or the tonic (if the second parameter is present)\n * @param {String} [name] - (Optional) name if the first parameter is the tonic\n * @return {Array} an array of notes or an empty array\n *\n * @example\n * Chord.notes(\"Cmaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n * Chord.notes(\"C\", \"maj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n */\nexport function notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return props(name).intervals.map(transpose(p[0]));\n}\n\n/**\n * Check if a given name correspond to a chord in the dictionary\n *\n * @function\n * @param {String} name\n * @return {Boolean}\n * @example\n * Chord.exists(\"CMaj7\") // => true\n * Chord.exists(\"Maj7\") // => true\n * Chord.exists(\"Ablah\") // => false\n */\nexport var exists = function (name) { return chord(tokenize(name)[1]) !== undefined; };\n\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = isSupersetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSuperset(chord(name)); });\n};\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nexport var subsets = function (name) {\n  var isSubset = isSubsetOf(intervals(name));\n  return chord.names().filter(function (name) { return isSubset(chord(name)); });\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nvar NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {String} name - the chord name\n * @return {Array} an array with [type, tonic]\n * @example\n * Chord.tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * Chord.tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * Chord.tokenize(\"mMaj7\") // => [ \"\", \"mMaj7\" ]\n * Chord.tokenize(\"Cnonsense\") // => [ \"C\", \"nonsense\" ]\n */\nexport function tokenize(name) {\n  var p = split(name);\n  if (p[0] === \"\") { return [\"\", name]; }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (p[0] === \"A\" && p[3] === \"ug\") { return [\"\", \"aug\"]; }\n\n  if (NUM_TYPES.test(p[2])) {\n    return [p[0] + p[1], p[2] + p[3]];\n  } else {\n    return [p[0] + p[1] + p[2], p[3]];\n  }\n}\n","/**\n * [![npm version](https://img.shields.io/npm/v/tonal-key.svg?style=flat-square)](https://www.npmjs.com/package/tonal-key)\n *\n * The `Tonal` module is a facade to the rest of the modules. They are namespaced,\n * so for example to use `pc` function from `tonal-note` you have to write:\n * `Tonal.Note.pc`\n *\n * It exports the following modules:\n * - Note\n * - Interval\n * - Distance\n * - Scale\n * - Chord\n * - PcSet\n *\n * Additionally this facade exports some functions without namespace (see \"Methods\" below)\n *\n * @example\n * // es6 modules\n * import * as Tonal from \"tonal\"\n * Tonal.Note.name(\"cx\") // => \"C##\"\n *\n * @example\n * import { Note } from \"tonal\"\n * Note.name(\"bb\") // => \"Bb\"\n *\n * @example\n * // es5 node modules\n * var Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(Tonal.Note.pc(\"C#2\"), \"M3\") // => \"E#\"\n * Tonal.Chord.notes(\"Dmaj7\") // => [\"D\", \"F#\", \"A\", \"C#\"]\n *\n * @module Tonal\n */\nimport * as Array from \"tonal-array\";\nimport * as Note from \"tonal-note\";\nimport * as Interval from \"tonal-interval\";\nimport * as Distance from \"tonal-distance\";\nimport * as Dictionary from \"tonal-dictionary\";\nimport * as Scale from \"tonal-scale\";\nimport * as Chord from \"tonal-chord\";\nimport * as PcSet from \"tonal-pcset\";\n\nexport { Array, Note, Interval, Distance, Scale, Chord, PcSet, Dictionary };\n\n/**\n * Transpose a note by an interval\n * @function\n * @param {String} note\n * @param {String} interval\n * @return {String} the transported note\n * @see Distance.transpose\n */\nexport const transpose = Distance.transpose;\n\n/**\n * Get the interval from two notes\n * @function\n * @param {String} from\n * @param {String} to\n * @return {String} the interval in reverse shorthand notation\n * @see Distance.interval\n */\nexport const interval = Distance.interval;\n\n/**\n * Get note properties\n * @function\n * @param {String} note - the note name\n * @return {Object}\n * @see Note.props\n * @example\n * Tonal.note(\"A4\").chroma // => 9\n */\nexport const note = Note.props;\n\n/**\n * Get midi note number\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.midi\n * @example\n * Tonal.midi(\"A4\") // => 49\n */\nexport const midi = Note.midi;\n\n/**\n * Get note frequency using equal tempered tuning at 440\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.freq\n * @example\n * Tonal.freq(\"A4\") // => 440\n */\nexport const freq = Note.freq;\n\n/**\n * Get intervals from a chord type\n * @function\n * @param {String} type - the chord type (no tonic)\n * @return {Array} an array of intervals or undefined if the chord type is not known\n * @see Dictionary.chord\n * @example\n * Tonal.chord(\"m7b5\") // => [\"1P\", \"3m\", \"5d\", \"7m\"]\n */\nexport const chord = Dictionary.chord;\n\n/**\n * Get intervals from scale name\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Array} an array of intervals or undefiend if the scale is not kown\n * @example\n * Tonal.scale(\"major\") // => [\"1P\", \"2M\", \"3M\"...]\n */\nexport const scale = Dictionary.scale;\n","import { getMidi } from \"../util\";\n\nexport class Instrument {\n    midiOffset = 0;\n    onPlay: (keys: number[]) => any;\n    onStop: (keys: number[]) => any;\n    ready: Promise<any>;\n    gain = 1;\n\n    context: any;\n    mix: any;\n    constructor({ context, gain, mix, onPlay, onStop, midiOffset }: any = {}) {\n        this.onPlay = onPlay;\n        this.midiOffset = midiOffset || this.midiOffset;\n        this.onStop = onStop;\n        this.gain = gain || this.gain;\n        this.init({ context, mix });\n    }\n\n    init({ context, mix }) {\n        if (!context && (!mix || !mix.context)) {\n            console.warn(`you should pass a context or a mix (gainNode) to a new Instrument. \n            You can also Call init with {context,mix} to setup the Instrument later`);\n            return;\n        }\n        this.context = context || mix.context;\n        this.mix = mix || this.context.destination;\n    }\n\n    playNotes(notes: string[], settings) {\n        this.playKeys(notes.map(note => getMidi(note, this.midiOffset)), settings);\n    }\n\n    playKeys(keys: number[], settings?) {\n        if (this.onPlay) {\n            return this.onPlay(keys);\n        }\n        // TODO: fire callbacks after keys.map((key,i)=>i*settings.interval)?\n    }\n}","import { Instrument } from './Instrument';\nimport { Note } from 'tonal';\nimport { adsr } from '../util';\n\nexport class Synthesizer extends Instrument {\n    duration = 200;\n    type = 'sine';\n    gain = 0.9;\n    attack = .05;\n    decay = .05;\n    sustain = .4;\n    release = .1;\n\n    constructor(props: any) {\n        super(props);\n        this.duration = props.duration || this.duration;\n        this.type = props.type || this.type;\n        this.gain = props.gain || this.gain;\n    }\n\n    init(context) {\n        super.init(context);\n    }\n\n    getVoice(type = 'sine', gain = 0, frequency = 440) {\n        const oscNode = this.context.createOscillator();\n        oscNode.type = type;\n        const gainNode = this.context.createGain();\n        oscNode.connect(gainNode);\n        gainNode.gain.value = typeof gain === 'number' ? gain : 0.8;\n        gainNode.connect(this.mix);\n        oscNode.frequency.value = frequency;\n        return { oscNode, gainNode };\n    }\n\n    lowestGain(a, b) {\n        return a.gain.gain.value < b.gain.gain.value ? -1 : 0;\n    }\n\n    playKeys(keys: number[], settings: any = {}) {\n        super.playKeys(keys, settings); // fires callback   \n        //const time = this.context.currentTime + settings.deadline / 1000;\n        const time = settings.deadline || this.context.currentTime;\n        const interval = settings.interval || 0;\n        keys.map((key, i) => {\n            const delay = i * interval;\n            const [attack, decay, sustain, release, duration, gain] =\n                [\n                    settings.attack || this.attack,\n                    settings.decay || this.decay,\n                    settings.sustain || this.sustain,\n                    settings.release || this.release,\n                    (settings.duration || this.duration) / 1000,\n                    (settings.gain || 1) * this.gain\n                ]\n            const voice = this.getVoice(this.type, 0, Note.freq(key));\n            adsr({ attack, decay, sustain, release, gain, duration, }, time + delay, voice.gainNode.gain);\n            voice.oscNode.start(settings.deadline + delay);\n        })\n    }\n}","import { Chord, Distance, Interval, Note } from 'tonal';\nimport { Synthesizer } from './instruments/Synthesizer';\n\nexport function randomNumber(n) {\n    return Math.floor(Math.random() * n)\n}\n\nexport function arraySum(array) {\n    return array.reduce((s, i) => s + i, 0);\n}\n\nexport function randomElement(array, weighted?) {\n    if (!weighted) {\n        return array[randomNumber(array.length)];\n    }\n    const r = randomNumber(arraySum(weighted)) + 1;\n    const total = weighted\n        .reduce((abs, w, i) => abs.concat(w + (abs.length ? abs[i - 1] : 0)), []);\n    return array[total.indexOf(total.find((s, i) => s >= r))];\n}\n\nexport function getTonalChord(chord) {\n    chord = chord\n        .replace('-', 'm')\n        .replace('^', 'M')\n        .replace('h7', 'm7b5')\n        .replace('h', 'dim');\n    /**\n     * Chords that dont work:\n     * slash cords are ignored\n     * 7b9b5 does not work\n     * \n     */\n    const tokens = Chord.tokenize(chord);\n    const s = tokens[1].split('/');\n    return tokens[0] + (s[0] || 'M');\n}\n\nexport function getMidi(note, offset) {\n    return Note.props(note).midi - offset;\n}\n\n/** Travels path along measures */\nexport function getPath(path, measures, traveled = []) {\n    if (!Array.isArray(measures[path[0]]) || path.length === 1) {\n        return measures[Math.min(path[0], measures.length - 1)];\n    }\n    return this.getPath(path.slice(1), measures[path[0]], traveled.concat(path[0]));\n}\n\nexport function resolveChords(pattern, measures, path, divisions = []) {\n    if (Array.isArray(pattern)) {\n        // division: array of children lengths down the path (to calculate fraction)\n        divisions = [].concat(divisions, [pattern.length]);\n        return pattern.map((p, i) => this.resolveChords(p, measures, path.concat([i]), divisions));\n    }\n    if (pattern === 0) {\n        return 0;\n    }\n    //const split = (pattern + '').split('.');\n    //const gain = parseFloat('0.' + split[1]); //digit(s) after .\n    //const fraction = (parseInt(split[0]) || 1) * divisions.reduce((f, d) => f / d, 1000); // fraction of one\n    const fraction = pattern * divisions.reduce((f, d) => f / d, 1000); // fraction of one\n    if (fraction === 0) {\n        console.warn('fraction is 0', pattern);\n    }\n    return { chord: this.getPath(path, measures), pattern, /* gain, */ path, divisions, fraction };\n}\n\nexport function hasOff(pattern, division = 3) {\n    return Array.isArray(pattern) && pattern.length === division && pattern[division - 1] !== 0;\n}\n\n// replaces offs on last beat with next chord + erases next one\nexport function offbeatReducer(settings) {\n    // TODO: find out why some offbeats sound sketchy\n    return (measures, bar, index) => {\n        const last = index > 0 ? measures[index - 1] : null;\n        if (last && this.hasOff(last[settings.cycle - 1], settings.division)) {\n            last[settings.cycle - 1][settings.division - 1] = bar[0];\n            bar[0] = 0;\n        }\n        return measures.concat([bar]);\n    };\n}\n\nexport function invertInterval(interval) {\n    if (Interval.semitones(interval) < 0) {\n        return Interval.invert(interval.slice(1));\n    }\n    return '-' + Interval.invert(interval);\n}\n\n// use Interval.ic?\nexport function smallestInterval(interval) {\n    interval = Interval.simplify(interval);\n    if (interval === '0A') {\n        interval = '1P'; // TODO: issue for tonal-interval (0A does not support invert and is not simple)\n    }\n    let inversion = this.invertInterval(interval);\n    if (Math.abs(Interval.semitones(inversion)) < Math.abs(Interval.semitones(interval))) {\n        return inversion;\n    }\n    return interval || '';\n}\n\nexport function minInterval(a, b, preferRightMovement) {\n    const semitones = [Math.abs(Interval.semitones(a)), Math.abs(Interval.semitones(b))];\n    if (semitones[0] === semitones[1]) {\n        if (preferRightMovement) {\n            return semitones[0] < 0 ? -1 : 1;\n        }\n        return semitones[0] > 0 ? -1 : 1;\n    }\n    return semitones[0] < semitones[1] ? -1 : 1;\n}\n\nexport function intervalMatrix(from, to) {\n    return to.map(note => from\n        .map(n => {\n            return Distance.interval(n, note)\n        })\n        .map(d => this.smallestInterval(d))\n        .map(i => i.slice(0, 2) === '--' ? i.slice(1) : i)\n    )\n}\n\nexport function randomSynth(mix, allowed = ['sine', 'triangle', 'square', 'sawtooth']) {\n    const gains = {\n        sine: 0.9,\n        triangle: 0.8,\n        square: 0.2,\n        sawtooth: 0.3\n    }\n    const wave = randomElement(allowed);\n    return new Synthesizer({ gain: gains[wave], type: wave, mix });\n}\n\nexport function adsr({ attack, decay, sustain, release, gain, duration }, time, param) {\n    // console.log('adsr', attack, decay, sustain, release, gain, duration, time);\n    param.linearRampToValueAtTime(gain, time + attack);\n    param.setTargetAtTime(sustain * gain, time + Math.min(attack + decay, duration), decay);\n    param.setTargetAtTime(0, time + Math.max(duration - attack - decay, attack + decay, duration), release);\n}\n","import { randomElement } from \"../util\";\n\nexport const swing = {\n    chords: ({ measure, settings }) => {\n        const off = () => randomElement([0, [0, 0, 2]], [6, 1]);\n        const r = Math.random() > 0.5 ? .6 : 0;\n        const t = `${settings.cycle}/${measure.length}`;\n        if (t === '4/1') {\n            return randomElement([\n                [[1, 0], [0, 0, 7], 0, 0],\n                [1, [0, 0, 2], 0, off()],\n                [[0, 0, 1], 0, 2, 0],\n                [[0, 0, 4], 0, 1, 0],\n                [2, 0, 0, 0],\n                [3, 0, 0, 0],\n                [1, 0, r, off()],\n                [[0, 0, 2], 0, r, 0],\n                [1.5, [0, 0, 2], 0, off()],\n            ]);//, [2, 1, 1]\n        }\n        if (t === '4/2') {\n            return randomElement([\n                [[1, 0], [0, 0, 7], 0, 0],\n                [1, [0, 0, 2], 0, 0],\n                [1, 0, 2, 0],\n                [2, 0, 1, 0],\n                [1, 0, .7, off()],\n                [[1, 0, 0], 0, .7, off()],\n                [[4, 0, 0], [0, 0, 2.8], 0, off()],\n            ],/*  [1, 2] */);\n        }\n\n        if (t === '4/3') {\n            return [1, [0, 0, 2], [0, 0, 4], 0];\n        }\n        if ('4/4') {\n            return randomElement([\n                [1, 1, 1, 1],\n                [[1, 0, 2], [0, 0, 2], 0, 1]\n            ]);\n        }\n    },\n    bass: () => randomElement([\n        [1, 1, 1, 1],\n    ]),\n    crash: ({ measures, index }) => {\n        const fill = index !== 0 && index % measures.length === 0;\n        if (fill) {\n            return [4, 0, 0, 0];\n        }\n        return [0, 0, 0, 0];\n    },\n    ride: ({ measures, index }) => {\n        return randomElement([\n            [.6, [.9, 0, 1], .6, [.9, 0, 1]],\n            [.6, [.4, 0, 1], .8, [0, 0, 1],],\n            [.6, .9, [.6, 0, 1], 1],\n            [.6, .9, .6, [.9, 0, 1]],\n        ], [3, 2, 1, 2])\n    },\n    hihat: () => [0, .8, 0, 1]\n};","import { randomElement } from \"../util\";\nexport const funk = {\n    chords: () => randomElement([\n        [[2, 0, 0, 1], 0, [0, .6], [0, 3.5, 0, 0]],\n        [[1, 0, 0, 5], 0, [0, .6], [1, .5, 0, 0]],\n        [[1, 0, 0, 5], 0, [0, .6], [.5, 0, 2, 0]],\n        [[1, 0, 0, 5], 0, [0, .6], [0, 2, 0, 1]],\n        [[3, 0, 0, 0], 0, 2, 0]\n    ]),\n    bass: () => randomElement(\n        [\n            [[2, 0, 0, 1], [0, 1], 1, [0, 1]],\n            [[2, 0, 0, 0], [0, 1, 0, 1], [0, 0, 1, 0], [0, 0, 0, 1]],\n        ]\n    ),\n    kick: (t) => [[[1, .7], 0, [0, 1], 0]],\n    snare: (t) => [0, 1, [0, .2, 0, 0], [1, 0, 0, .6]],\n    hihat: (t) => [[.5, .6], [.4, .7], [.3, .6], [.5, .7]]\n};","import jazz from '../dist';\nimport link from './playlists/1350.json';\n//import link from './playlists/zw.json';\nimport { RealParser } from '../src/RealParser';\nimport { piano } from './samples/piano';\n// import { harp } from './samples/harp';\nimport { drumset } from './samples/drumset';\nimport iRealReader from 'ireal-reader';\nimport { swing } from '../src/grooves/swing';\n// import { disco } from '../src/grooves/disco';\nimport { funk } from '../src/grooves/funk';\n\nconst context = new AudioContext();\nconst playlist = new iRealReader(decodeURI(link));\n\n// bass = new jazz.Synthesizer({ duration: 400, gain: gains[w1], type: w1, mix });\n\nconst keyboard = new jazz.Sampler({ samples: piano, midiOffset: 24, gain: 1, context });\n//const harpInstrument = new jazz.Sampler({ samples: harp, midiOffset: 24, gain: 1, context });\nconst drums = new jazz.Sampler({ samples: drumset, context, gain: 0.7, duration: 6000 });\n\nconst band = new jazz.Trio({ context, piano: keyboard, bass: keyboard, drums });\n\n\nfunction getStandard(playlist) {\n    console.log('playlist', playlist);\n    //const standard = jazz.util.randomElement(playlist.songs.filter(s => s.title.includes('Lone Jack (Page 1)'))); // TODO: fix\n    //const standard = jazz.util.randomElement(playlist.songs.filter(s => s.title.includes('Minor Strain'))); // TODO: fix\n    //const standard = jazz.util.randomElement(playlist.songs.filter(s => s.title.includes('El Cajon'))); // TODO: fix\n    //const standard = jazz.util.randomElement(playlist.songs.filter(s => s.title.includes('Mirror, Mirror'))); // TODO: fix\n    //const standard = jazz.util.randomElement(playlist.songs.filter(s => s.title.includes('Falling Grace')));\n    const standard = jazz.util.randomElement(playlist.songs);\n    const parser = new RealParser(standard.music.raw);\n    //console.log('tokens',parser.tokens);\n    standard.music.measures = parser.bars; // TODO: add Song that can be passed to comp\n    console.log('standard', standard, standard.music.measures);\n    console.log('sections', parser.sections);\n    return standard;\n}\n\n\nwindow.onload = function () {\n    // buttons\n    const playJazz = document.getElementById('jazz');\n    const playFunk = document.getElementById('funk');\n    const stop = document.getElementById('stop');\n    const slower = document.getElementById('slower');\n    const faster = document.getElementById('faster');\n    const next = document.getElementById('next');\n    const randomInstruments = document.getElementById('instruments');\n    let standard/*  = getStandard(); */\n\n    function play(groove: any = swing) {\n        console.log('groove', groove);\n        const bpm = 70 + Math.random() * 100;\n        //const bpm = 120;\n        console.log('tempo', bpm);\n        const cycle = 4;\n        band.comp(standard.music.measures, { metronome: true, cycle, bpm, groove/* , arpeggio: true */ })\n        /*band.comp(new Array(5).fill(1).reduce((a, c) => a.concat(['D-7', 'G7', 'C^7', 'C^7']), []),\n        { bpm, groove });*/\n    }\n\n    randomInstruments.addEventListener('click', () => {\n        const allowed = ['sine', 'triangle', 'square', 'sawtooth'];\n        band.pianist.instrument = jazz.util.randomSynth(band.mix, allowed);\n        band.bassist.instrument = jazz.util.randomSynth(band.mix, allowed);\n        console.log('pianist:', band.pianist.instrument.type);\n        console.log('bassist:', band.bassist.instrument.type);\n    });\n\n    playJazz.addEventListener('click', () => {\n        play(swing);\n    })\n    playFunk.addEventListener('click', () => {\n        play(funk)\n    })\n    stop.addEventListener('click', () => {\n        band.pulse.stop();\n    });\n    slower.addEventListener('click', () => {\n        band.pulse.changeTempo(band.pulse.props.bpm - 10);\n        console.log('tempo', band.pulse.props.bpm);\n    });\n    faster.addEventListener('click', () => {\n        band.pulse.changeTempo(band.pulse.props.bpm + 10);\n        console.log('tempo', band.pulse.props.bpm);\n    });\n\n    next.addEventListener('click', () => {\n        if (band.pulse) {\n            band.pulse.stop();\n        }\n        standard = getStandard(playlist);\n        setTimeout(() => play(), 500);\n    })\n}\n"]}